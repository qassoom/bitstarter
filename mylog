[33mcommit ceb8af9ef2167daa666f8c32d71d29d43bf6a3b9[m
Author: Qasim Al Khuzaie <qrasool@gmail.com>
Date:   Wed Jul 10 08:12:00 2013 +0000

    Updated web.js

[1mdiff --git a/web.js b/web.js[m
[1mindex 0b54a06..b40f81c 100644[m
[1m--- a/web.js[m
[1m+++ b/web.js[m
[36m@@ -3,10 +3,10 @@[m [mvar express = require('express');[m
 var app = express.createServer(express.logger());[m
 [m
 app.get('/', function(request, response) {[m
[31m-  response.send('Hello World!');[m
[32m+[m[32m  response.send('Hello World 2!');[m
 });[m
 [m
 var port = process.env.PORT || 5000;[m
 app.listen(port, function() {[m
   console.log("Listening on " + port);[m
[31m-});[m
\ No newline at end of file[m
[32m+[m[32m});[m

[33mcommit 950a10a7020a48cbdbf62b1311f5dd0c768c3675[m
Merge: 90fd58e e1e21ec
Author: Mark Pundsack <mp@heroku.com>
Date:   Tue Jul 9 07:13:19 2013 -0700

    Merge pull request #7 from samccone/sjs/fix-example-app
    
    Sjs/fix example app

[33mcommit e1e21ec2a8ad1538df07bb5ef76b2330a61117ad[m
Author: Sam Saccone <samccone@gmail.com>
Date:   Fri Jul 5 16:46:26 2013 -0400

    update package.json

[1mdiff --git a/package.json b/package.json[m
[1mindex 7bdf8db..2206f2e 100644[m
[1m--- a/package.json[m
[1m+++ b/package.json[m
[36m@@ -1,11 +1,27 @@[m
 {[m
[31m-  "name": "node-example",[m
[32m+[m[32m  "name": "node-js-sample",[m
   "version": "0.0.1",[m
[32m+[m[32m  "description": "a sample node.js app for heroku",[m
[32m+[m[32m  "main": "web.js",[m
[32m+[m[32m  "scripts": {[m
[32m+[m[32m    "test": "echo \"Error: no test specified\" && exit 1"[m
[32m+[m[32m  },[m
   "dependencies": {[m
     "express": "2.5.x"[m
   },[m
   "engines": {[m
     "node": "0.8.x",[m
     "npm": "1.1.x"[m
[31m-  }[m
[31m-}[m
\ No newline at end of file[m
[32m+[m[32m  },[m
[32m+[m[32m  "repository": {[m
[32m+[m[32m    "type": "git",[m
[32m+[m[32m    "url": "https://github.com/heroku/node-js-sample"[m
[32m+[m[32m  },[m
[32m+[m[32m  "keywords": [[m
[32m+[m[32m    "node",[m
[32m+[m[32m    "heroku"[m
[32m+[m[32m  ],[m
[32m+[m[32m  "author": "Mark Pundsack",[m
[32m+[m[32m  "license": "BSD",[m
[32m+[m[32m  "gitHead": "90fd58e343c29e54fc1d4e19036595500b2bdc21"[m
[32m+[m[32m}[m

[33mcommit 437f90161a488db5f919fdd583a735ffc9628f78[m
Author: Sam Saccone <samccone@gmail.com>
Date:   Fri Jul 5 16:45:58 2013 -0400

    ignore node_modules with .gitignore

[1mdiff --git a/.gitignore b/.gitignore[m
[1mnew file mode 100644[m
[1mindex 0000000..3c3629e[m
[1m--- /dev/null[m
[1m+++ b/.gitignore[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mnode_modules[m

[33mcommit 4b88103904d274f7fae8968861588f06fd447f12[m
Author: Sam Saccone <samccone@gmail.com>
Date:   Fri Jul 5 16:45:38 2013 -0400

    remove node_modules folder from repo

[1mdiff --git a/node_modules/.bin/express b/node_modules/.bin/express[m
[1mdeleted file mode 120000[m
[1mindex b741d99..0000000[m
[1m--- a/node_modules/.bin/express[m
[1m+++ /dev/null[m
[36m@@ -1 +0,0 @@[m
[31m-../express/bin/express[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/.npmignore b/node_modules/express/.npmignore[m
[1mdeleted file mode 100644[m
[1mindex 74bd365..0000000[m
[1m--- a/node_modules/express/.npmignore[m
[1m+++ /dev/null[m
[36m@@ -1,7 +0,0 @@[m
[31m-.git*[m
[31m-docs/[m
[31m-examples/[m
[31m-support/[m
[31m-test/[m
[31m-testing.js[m
[31m-.DS_Store[m
[1mdiff --git a/node_modules/express/History.md b/node_modules/express/History.md[m
[1mdeleted file mode 100644[m
[1mindex 95ea466..0000000[m
[1m--- a/node_modules/express/History.md[m
[1m+++ /dev/null[m
[36m@@ -1,823 +0,0 @@[m
[31m-[m
[31m-2.5.11 / 2012-06-29 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed backport of req.protocol[m
[31m-[m
[31m-2.5.10 / 2012-06-15 [m
[31m-==================[m
[31m-[m
[31m-  * Remove annoying engines field from package.json[m
[31m-  * Backport support for trusting X-Forwarded-Proto[m
[31m-  * use version of `package.json` for `express` command[m
[31m-[m
[31m-2.5.9/ 2012-04-02 [m
[31m-==================[m
[31m-[m
[31m-  * Added support for PURGE request method [pbuyle][m
[31m-  * Fixed `express(1)` generated app `app.address()` before `listening` [mmalecki][m
[31m-[m
[31m-2.5.8 / 2012-02-08 [m
[31m-==================[m
[31m-[m
[31m-  * Update mkdirp dep. Closes #991[m
[31m-[m
[31m-2.5.7 / 2012-02-06 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed `app.all` duplicate DELETE requests [mscdex][m
[31m-[m
[31m-2.5.6 / 2012-01-13 [m
[31m-==================[m
[31m-[m
[31m-  * Updated hamljs dev dep. Closes #953[m
[31m-[m
[31m-2.5.5 / 2012-01-08 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed: set `filename` on cached templates [matthewleon][m
[31m-[m
[31m-2.5.4 / 2012-01-02 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed `express(1)` eol on 0.4.x. Closes #947[m
[31m-[m
[31m-2.5.3 / 2011-12-30 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed `req.is()` when a charset is present[m
[31m-[m
[31m-2.5.2 / 2011-12-10 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed: express(1) LF -> CRLF for windows[m
[31m-[m
[31m-2.5.1 / 2011-11-17 [m
[31m-==================[m
[31m-[m
[31m-  * Changed: updated connect to 1.8.x[m
[31m-  * Removed sass.js support from express(1)[m
[31m-[m
[31m-2.5.0 / 2011-10-24 [m
[31m-==================[m
[31m-[m
[31m-  * Added ./routes dir for generated app by default[m
[31m-  * Added npm install reminder to express(1) app gen[m
[31m-  * Added 0.5.x support[m
[31m-  * Removed `make test-cov` since it wont work with node 0.5.x[m
[31m-  * Fixed express(1) public dir for windows. Closes #866[m
[31m-[m
[31m-2.4.7 / 2011-10-05 [m
[31m-==================[m
[31m-[m
[31m-  * Added mkdirp to express(1). Closes #795[m
[31m-  * Added simple _json-config_ example[m
[31m-  * Added  shorthand for the parsed request's pathname via `req.path`[m
[31m-  * Changed connect dep to 1.7.x to fix npm issue...[m
[31m-  * Fixed `res.redirect()` __HEAD__ support. [reported by xerox][m
[31m-  * Fixed `req.flash()`, only escape args[m
[31m-  * Fixed absolute path checking on windows. Closes #829 [reported by andrewpmckenzie][m
[31m-[m
[31m-2.4.6 / 2011-08-22 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed multiple param callback regression. Closes #824 [reported by TroyGoode][m
[31m-[m
[31m-2.4.5 / 2011-08-19 [m
[31m-==================[m
[31m-[m
[31m-  * Added support for routes to handle errors. Closes #809[m
[31m-  * Added `app.routes.all()`. Closes #803[m
[31m-  * Added "basepath" setting to work in conjunction with reverse proxies etc.   [m
[31m-  * Refactored `Route` to use a single array of callbacks[m
[31m-  * Added support for multiple callbacks for `app.param()`. Closes #801[m
[31m-Closes #805[m
[31m-  * Changed: removed .call(self) for route callbacks[m
[31m-  * Dependency: `qs >= 0.3.1`[m
[31m-  * Fixed `res.redirect()` on windows due to `join()` usage. Closes #808[m
[31m-[m
[31m-2.4.4 / 2011-08-05 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed `res.header()` intention of a set, even when `undefined`[m
[31m-  * Fixed `*`, value no longer required[m
[31m-  * Fixed `res.send(204)` support. Closes #771[m
[31m-[m
[31m-2.4.3 / 2011-07-14 [m
[31m-==================[m
[31m-[m
[31m-  * Added docs for `status` option special-case. Closes #739[m
[31m-  * Fixed `options.filename`, exposing the view path to template engines[m
[31m-[m
[31m-2.4.2. / 2011-07-06 [m
[31m-==================[m
[31m-[m
[31m-  * Revert "removed jsonp stripping" for XSS[m
[31m-[m
[31m-2.4.1 / 2011-07-06 [m
[31m-==================[m
[31m-[m
[31m-  * Added `res.json()` JSONP support. Closes #737[m
[31m-  * Added _extending-templates_ example. Closes #730[m
[31m-  * Added "strict routing" setting for trailing slashes[m
[31m-  * Added support for multiple envs in `app.configure()` calls. Closes #735[m
[31m-  * Changed: `res.send()` using `res.json()`[m
[31m-  * Changed: when cookie `path === null` don't default it[m
[31m-  * Changed; default cookie path to "home" setting. Closes #731[m
[31m-  * Removed _pids/logs_ creation from express(1)[m
[31m-[m
[31m-2.4.0 / 2011-06-28 [m
[31m-==================[m
[31m-[m
[31m-  * Added chainable `res.status(code)`[m
[31m-  * Added `res.json()`, an explicit version of `res.send(obj)`[m
[31m-  * Added simple web-service example[m
[31m-[m
[31m-2.3.12 / 2011-06-22 [m
[31m-==================[m
[31m-[m
[31m-  * \#express is now on freenode! come join![m
[31m-  * Added `req.get(field, param)`[m
[31m-  * Added links to Japanese documentation, thanks @hideyukisaito![m
[31m-  * Added; the `express(1)` generated app outputs the env[m
[31m-  * Added `content-negotiation` example[m
[31m-  * Dependency: connect >= 1.5.1 < 2.0.0[m
[31m-  * Fixed view layout bug. Closes #720[m
[31m-  * Fixed; ignore body on 304. Closes #701[m
[31m-[m
[31m-2.3.11 / 2011-06-04 [m
[31m-==================[m
[31m-[m
[31m-  * Added `npm test`[m
[31m-  * Removed generation of dummy test file from `express(1)`[m
[31m-  * Fixed; `express(1)` adds express as a dep[m
[31m-  * Fixed; prune on `prepublish`[m
[31m-[m
[31m-2.3.10 / 2011-05-27 [m
[31m-==================[m
[31m-[m
[31m-  * Added `req.route`, exposing the current route[m
[31m-  * Added _package.json_ generation support to `express(1)`[m
[31m-  * Fixed call to `app.param()` function for optional params. Closes #682[m
[31m-[m
[31m-2.3.9 / 2011-05-25 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed bug-ish with `../' in `res.partial()` calls[m
[31m-[m
[31m-2.3.8 / 2011-05-24[m
[31m-==================[m
[31m-[m
[31m-  * Fixed `app.options()`[m
[31m-[m
[31m-2.3.7 / 2011-05-23[m
[31m-==================[m
[31m-[m
[31m-  * Added route `Collection`, ex: `app.get('/user/:id').remove();`[m
[31m-  * Added support for `app.param(fn)` to define param logic[m
[31m-  * Removed `app.param()` support for callback with return value[m
[31m-  * Removed module.parent check from express(1) generated app. Closes #670[m
[31m-  * Refactored router. Closes #639[m
[31m-[m
[31m-2.3.6 / 2011-05-20 [m
[31m-==================[m
[31m-[m
[31m-  * Changed; using devDependencies instead of git submodules[m
[31m-  * Fixed redis session example[m
[31m-  * Fixed markdown example[m
[31m-  * Fixed view caching, should not be enabled in development[m
[31m-[m
[31m-2.3.5 / 2011-05-20 [m
[31m-==================[m
[31m-[m
[31m-  * Added export `.view` as alias for `.View`[m
[31m-[m
[31m-2.3.4 / 2011-05-08 [m
[31m-==================[m
[31m-[m
[31m-  * Added `./examples/say`[m
[31m-  * Fixed `res.sendfile()` bug preventing the transfer of files with spaces[m
[31m-[m
[31m-2.3.3 / 2011-05-03 [m
[31m-==================[m
[31m-[m
[31m-  * Added "case sensitive routes" option.[m
[31m-  * Changed; split methods supported per rfc [slaskis][m
[31m-  * Fixed route-specific middleware when using the same callback function several times[m
[31m-[m
[31m-2.3.2 / 2011-04-27 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed view hints[m
[31m-[m
[31m-2.3.1 / 2011-04-26 [m
[31m-==================[m
[31m-[m
[31m-  * Added `app.match()` as `app.match.all()`[m
[31m-  * Added `app.lookup()` as `app.lookup.all()`[m
[31m-  * Added `app.remove()` for `app.remove.all()`[m
[31m-  * Added `app.remove.VERB()`[m
[31m-  * Fixed template caching collision issue. Closes #644[m
[31m-  * Moved router over from connect and started refactor[m
[31m-[m
[31m-2.3.0 / 2011-04-25 [m
[31m-==================[m
[31m-[m
[31m-  * Added options support to `res.clearCookie()`[m
[31m-  * Added `res.helpers()` as alias of `res.locals()`[m
[31m-  * Added; json defaults to UTF-8 with `res.send()`. Closes #632. [Daniel   * Dependency `connect >= 1.4.0`[m
[31m-  * Changed; auto set Content-Type in res.attachement [Aaron Heckmann][m
[31m-  * Renamed "cache views" to "view cache". Closes #628[m
[31m-  * Fixed caching of views when using several apps. Closes #637[m
[31m-  * Fixed gotcha invoking `app.param()` callbacks once per route middleware. [m
[31m-Closes #638[m
[31m-  * Fixed partial lookup precedence. Closes #631[m
[31m-Shaw][m
[31m-[m
[31m-2.2.2 / 2011-04-12 [m
[31m-==================[m
[31m-[m
[31m-  * Added second callback support for `res.download()` connection errors[m
[31m-  * Fixed `filename` option passing to template engine[m
[31m-[m
[31m-2.2.1 / 2011-04-04 [m
[31m-==================[m
[31m-[m
[31m-  * Added `layout(path)` helper to change the layout within a view. Closes #610[m
[31m-  * Fixed `partial()` collection object support.[m
[31m-    Previously only anything with `.length` would work.[m
[31m-    When `.length` is present one must still be aware of holes,[m
[31m-    however now `{ collection: {foo: 'bar'}}` is valid, exposes[m
[31m-    `keyInCollection` and `keysInCollection`.[m
[31m-[m
[31m-  * Performance improved with better view caching[m
[31m-  * Removed `request` and `response` locals[m
[31m-  * Changed; errorHandler page title is now `Express` instead of `Connect`[m
[31m-[m
[31m-2.2.0 / 2011-03-30 [m
[31m-==================[m
[31m-[m
[31m-  * Added `app.lookup.VERB()`, ex `app.lookup.put('/user/:id')`. Closes #606[m
[31m-  * Added `app.match.VERB()`, ex `app.match.put('/user/12')`. Closes #606[m
[31m-  * Added `app.VERB(path)` as alias of `app.lookup.VERB()`.[m
[31m-  * Dependency `connect >= 1.2.0`[m
[31m-[m
[31m-2.1.1 / 2011-03-29 [m
[31m-==================[m
[31m-[m
[31m-  * Added; expose `err.view` object when failing to locate a view[m
[31m-  * Fixed `res.partial()` call `next(err)` when no callback is given [reported by aheckmann][m
[31m-  * Fixed; `res.send(undefined)` responds with 204 [aheckmann][m
[31m-[m
[31m-2.1.0 / 2011-03-24 [m
[31m-==================[m
[31m-[m
[31m-  * Added `<root>/_?<name>` partial lookup support. Closes #447[m
[31m-  * Added `request`, `response`, and `app` local variables[m
[31m-  * Added `settings` local variable, containing the app's settings[m
[31m-  * Added `req.flash()` exception if `req.session` is not available[m
[31m-  * Added `res.send(bool)` support (json response)[m
[31m-  * Fixed stylus example for latest version[m
[31m-  * Fixed; wrap try/catch around `res.render()`[m
[31m-[m
[31m-2.0.0 / 2011-03-17 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed up index view path alternative.[m
[31m-  * Changed; `res.locals()` without object returns the locals[m
[31m-[m
[31m-2.0.0rc3 / 2011-03-17 [m
[31m-==================[m
[31m-[m
[31m-  * Added `res.locals(obj)` to compliment `res.local(key, val)`[m
[31m-  * Added `res.partial()` callback support[m
[31m-  * Fixed recursive error reporting issue in `res.render()`[m
[31m-[m
[31m-2.0.0rc2 / 2011-03-17 [m
[31m-==================[m
[31m-[m
[31m-  * Changed; `partial()` "locals" are now optional[m
[31m-  * Fixed `SlowBuffer` support. Closes #584 [reported by tyrda01][m
[31m-  * Fixed .filename view engine option [reported by drudge][m
[31m-  * Fixed blog example[m
[31m-  * Fixed `{req,res}.app` reference when mounting [Ben Weaver][m
[31m-[m
[31m-2.0.0rc / 2011-03-14 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed; expose `HTTPSServer` constructor[m
[31m-  * Fixed express(1) default test charset. Closes #579 [reported by secoif][m
[31m-  * Fixed; default charset to utf-8 instead of utf8 for lame IE [reported by NickP][m
[31m-[m
[31m-2.0.0beta3 / 2011-03-09 [m
[31m-==================[m
[31m-[m
[31m-  * Added support for `res.contentType()` literal[m
[31m-    The original `res.contentType('.json')`,[m
[31m-    `res.contentType('application/json')`, and `res.contentType('json')`[m
[31m-    will work now.[m
[31m-  * Added `res.render()` status option support back[m
[31m-  * Added charset option for `res.render()`[m
[31m-  * Added `.charset` support (via connect 1.0.4)[m
[31m-  * Added view resolution hints when in development and a lookup fails[m
[31m-  * Added layout lookup support relative to the page view.[m
[31m-    For example while rendering `./views/user/index.jade` if you create[m
[31m-    `./views/user/layout.jade` it will be used in favour of the root layout.[m
[31m-  * Fixed `res.redirect()`. RFC states absolute url [reported by unlink][m
[31m-  * Fixed; default `res.send()` string charset to utf8[m
[31m-  * Removed `Partial` constructor (not currently used)[m
[31m-[m
[31m-2.0.0beta2 / 2011-03-07 [m
[31m-==================[m
[31m-[m
[31m-  * Added res.render() `.locals` support back to aid in migration process[m
[31m-  * Fixed flash example[m
[31m-[m
[31m-2.0.0beta / 2011-03-03 [m
[31m-==================[m
[31m-[m
[31m-  * Added HTTPS support[m
[31m-  * Added `res.cookie()` maxAge support[m
[31m-  * Added `req.header()` _Referrer_ / _Referer_ special-case, either works[m
[31m-  * Added mount support for `res.redirect()`, now respects the mount-point[m
[31m-  * Added `union()` util, taking place of `merge(clone())` combo[m
[31m-  * Added stylus support to express(1) generated app[m
[31m-  * Added secret to session middleware used in examples and generated app[m
[31m-  * Added `res.local(name, val)` for progressive view locals[m
[31m-  * Added default param support to `req.param(name, default)`[m
[31m-  * Added `app.disabled()` and `app.enabled()`[m
[31m-  * Added `app.register()` support for omitting leading ".", either works[m
[31m-  * Added `res.partial()`, using the same interface as `partial()` within a view. Closes #539[m
[31m-  * Added `app.param()` to map route params to async/sync logic[m
[31m-  * Added; aliased `app.helpers()` as `app.locals()`. Closes #481[m
[31m-  * Added extname with no leading "." support to `res.contentType()`[m
[31m-  * Added `cache views` setting, defaulting to enabled in "production" env[m
[31m-  * Added index file partial resolution, eg: partial('user') may try _views/user/index.jade_.[m
[31m-  * Added `req.accepts()` support for extensions[m
[31m-  * Changed; `res.download()` and `res.sendfile()` now utilize Connect's[m
[31m-    static file server `connect.static.send()`.[m
[31m-  * Changed; replaced `connect.utils.mime()` with npm _mime_ module[m
[31m-  * Changed; allow `req.query` to be pre-defined (via middleware or other parent[m
[31m-  * Changed view partial resolution, now relative to parent view[m
[31m-  * Changed view engine signature. no longer `engine.render(str, options, callback)`, now `engine.compile(str, options) -> Function`, the returned function accepts `fn(locals)`.[m
[31m-  * Fixed `req.param()` bug returning Array.prototype methods. Closes #552[m
[31m-  * Fixed; using `Stream#pipe()` instead of `sys.pump()` in `res.sendfile()`[m
[31m-  * Fixed; using _qs_ module instead of _querystring_[m
[31m-  * Fixed; strip unsafe chars from jsonp callbacks[m
[31m-  * Removed "stream threshold" setting[m
[31m-[m
[31m-1.0.8 / 2011-03-01 [m
[31m-==================[m
[31m-[m
[31m-  * Allow `req.query` to be pre-defined (via middleware or other parent app)[m
[31m-  * "connect": ">= 0.5.0 < 1.0.0". Closes #547[m
[31m-  * Removed the long deprecated __EXPRESS_ENV__ support[m
[31m-[m
[31m-1.0.7 / 2011-02-07 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed `render()` setting inheritance.[m
[31m-    Mounted apps would not inherit "view engine"[m
[31m-[m
[31m-1.0.6 / 2011-02-07 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed `view engine` setting bug when period is in dirname[m
[31m-[m
[31m-1.0.5 / 2011-02-05 [m
[31m-==================[m
[31m-[m
[31m-  * Added secret to generated app `session()` call[m
[31m-[m
[31m-1.0.4 / 2011-02-05 [m
[31m-==================[m
[31m-[m
[31m-  * Added `qs` dependency to _package.json_[m
[31m-  * Fixed namespaced `require()`s for latest connect support[m
[31m-[m
[31m-1.0.3 / 2011-01-13 [m
[31m-==================[m
[31m-[m
[31m-  * Remove unsafe characters from JSONP callback names [Ryan Grove][m
[31m-[m
[31m-1.0.2 / 2011-01-10 [m
[31m-==================[m
[31m-[m
[31m-  * Removed nested require, using `connect.router`[m
[31m-[m
[31m-1.0.1 / 2010-12-29 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed for middleware stacked via `createServer()`[m
[31m-    previously the `foo` middleware passed to `createServer(foo)`[m
[31m-    would not have access to Express methods such as `res.send()`[m
[31m-    or props like `req.query` etc.[m
[31m-[m
[31m-1.0.0 / 2010-11-16 [m
[31m-==================[m
[31m-[m
[31m-  * Added; deduce partial object names from the last segment.[m
[31m-    For example by default `partial('forum/post', postObject)` will[m
[31m-    give you the _post_ object, providing a meaningful default.[m
[31m-  * Added http status code string representation to `res.redirect()` body[m
[31m-  * Added; `res.redirect()` supporting _text/plain_ and _text/html_ via __Accept__.[m
[31m-  * Added `req.is()` to aid in content negotiation[m
[31m-  * Added partial local inheritance [suggested by masylum]. Closes #102[m
[31m-    providing access to parent template locals.[m
[31m-  * Added _-s, --session[s]_ flag to express(1) to add session related middleware[m
[31m-  * Added _--template_ flag to express(1) to specify the[m
[31m-    template engine to use.[m
[31m-  * Added _--css_ flag to express(1) to specify the [m
[31m-    stylesheet engine to use (or just plain css by default).[m
[31m-  * Added `app.all()` support [thanks aheckmann][m
[31m-  * Added partial direct object support.[m
[31m-    You may now `partial('user', user)` providing the "user" local,[m
[31m-    vs previously `partial('user', { object: user })`.[m
[31m-  * Added _route-separation_ example since many people question ways[m
[31m-    to do this with CommonJS modules. Also view the _blog_ example for[m
[31m-    an alternative.[m
[31m-  * Performance; caching view path derived partial object names[m
[31m-  * Fixed partial local inheritance precedence. [reported by Nick Poulden] Closes #454[m
[31m-  * Fixed jsonp support; _text/javascript_ as per mailinglist discussion[m
[31m-[m
[31m-1.0.0rc4 / 2010-10-14 [m
[31m-==================[m
[31m-[m
[31m-  * Added _NODE_ENV_ support, _EXPRESS_ENV_ is deprecated and will be removed in 1.0.0[m
[31m-  * Added route-middleware support (very helpful, see the [docs](http://expressjs.com/guide.html#Route-Middleware))[m
[31m-  * Added _jsonp callback_ setting to enable/disable jsonp autowrapping [Dav Glass][m
[31m-  * Added callback query check on response.send to autowrap JSON objects for simple webservice implementations [Dav Glass][m
[31m-  * Added `partial()` support for array-like collections. Closes #434[m
[31m-  * Added support for swappable querystring parsers[m
[31m-  * Added session usage docs. Closes #443[m
[31m-  * Added dynamic helper caching. Closes #439 [suggested by maritz][m
[31m-  * Added authentication example[m
[31m-  * Added basic Range support to `res.sendfile()` (and `res.download()` etc)[m
[31m-  * Changed; `express(1)` generated app using 2 spaces instead of 4[m
[31m-  * Default env to "development" again [aheckmann][m
[31m-  * Removed _context_ option is no more, use "scope"[m
[31m-  * Fixed; exposing _./support_ libs to examples so they can run without installs[m
[31m-  * Fixed mvc example[m
[31m-[m
[31m-1.0.0rc3 / 2010-09-20 [m
[31m-==================[m
[31m-[m
[31m-  * Added confirmation for `express(1)` app generation. Closes #391[m
[31m-  * Added extending of flash formatters via `app.flashFormatters`[m
[31m-  * Added flash formatter support. Closes #411[m
[31m-  * Added streaming support to `res.sendfile()` using `sys.pump()` when >= "stream threshold"[m
[31m-  * Added _stream threshold_ setting for `res.sendfile()`[m
[31m-  * Added `res.send()` __HEAD__ support[m
[31m-  * Added `res.clearCookie()`[m
[31m-  * Added `res.cookie()`[m
[31m-  * Added `res.render()` headers option[m
[31m-  * Added `res.redirect()` response bodies[m
[31m-  * Added `res.render()` status option support. Closes #425 [thanks aheckmann][m
[31m-  * Fixed `res.sendfile()` responding with 403 on malicious path[m
[31m-  * Fixed `res.download()` bug; when an error occurs remove _Content-Disposition_[m
[31m-  * Fixed; mounted apps settings now inherit from parent app [aheckmann][m
[31m-  * Fixed; stripping Content-Length / Content-Type when 204[m
[31m-  * Fixed `res.send()` 204. Closes #419[m
[31m-  * Fixed multiple _Set-Cookie_ headers via `res.header()`. Closes #402[m
[31m-  * Fixed bug messing with error handlers when `listenFD()` is called instead of `listen()`. [thanks guillermo][m
[31m-[m
[31m-[m
[31m-1.0.0rc2 / 2010-08-17 [m
[31m-==================[m
[31m-[m
[31m-  * Added `app.register()` for template engine mapping. Closes #390[m
[31m-  * Added `res.render()` callback support as second argument (no options)[m
[31m-  * Added callback support to `res.download()`[m
[31m-  * Added callback support for `res.sendfile()`[m
[31m-  * Added support for middleware access via `express.middlewareName()` vs `connect.middlewareName()`[m
[31m-  * Added "partials" setting to docs[m
[31m-  * Added default expresso tests to `express(1)` generated app. Closes #384[m
[31m-  * Fixed `res.sendfile()` error handling, defer via `next()`[m
[31m-  * Fixed `res.render()` callback when a layout is used [thanks guillermo][m
[31m-  * Fixed; `make install` creating ~/.node_libraries when not present[m
[31m-  * Fixed issue preventing error handlers from being defined anywhere. Closes #387 [m
[31m-[m
[31m-1.0.0rc / 2010-07-28[m
[31m-==================[m
[31m-[m
[31m-  * Added mounted hook. Closes #369[m
[31m-  * Added connect dependency to _package.json_[m
[31m-[m
[31m-  * Removed "reload views" setting and support code[m
[31m-    development env never caches, production always caches.[m
[31m-[m
[31m-  * Removed _param_ in route callbacks, signature is now[m
[31m-    simply (req, res, next), previously (req, res, params, next).[m
[31m-    Use _req.params_ for path captures, _req.query_ for GET params.[m
[31m-[m
[31m-  * Fixed "home" setting[m
[31m-  * Fixed middleware/router precedence issue. Closes #366[m
[31m-  * Fixed; _configure()_ callbacks called immediately. Closes #368[m
[31m-	[m
[31m-1.0.0beta2 / 2010-07-23[m
[31m-==================[m
[31m-[m
[31m-  * Added more examples[m
[31m-  * Added; exporting `Server` constructor[m
[31m-  * Added `Server#helpers()` for view locals[m
[31m-  * Added `Server#dynamicHelpers()` for dynamic view locals. Closes #349[m
[31m-  * Added support for absolute view paths[m
[31m-  * Added; _home_ setting defaults to `Server#route` for mounted apps. Closes #363[m
[31m-  * Added Guillermo Rauch to the contributor list[m
[31m-  * Added support for "as" for non-collection partials. Closes #341[m
[31m-  * Fixed _install.sh_, ensuring _~/.node_libraries_ exists. Closes #362 [thanks jf][m
[31m-  * Fixed `res.render()` exceptions, now passed to `next()` when no callback is given [thanks guillermo][m
[31m-  * Fixed instanceof `Array` checks, now `Array.isArray()`[m
[31m-  * Fixed express(1) expansion of public dirs. Closes #348[m
[31m-  * Fixed middleware precedence. Closes #345[m
[31m-  * Fixed view watcher, now async [thanks aheckmann][m
[31m-[m
[31m-1.0.0beta / 2010-07-15[m
[31m-==================[m
[31m-[m
[31m-  * Re-write[m
[31m-    - much faster[m
[31m-    - much lighter[m
[31m-    - Check [ExpressJS.com](http://expressjs.com) for migration guide and updated docs[m
[31m-[m
[31m-0.14.0 / 2010-06-15[m
[31m-==================[m
[31m-[m
[31m-  * Utilize relative requires[m
[31m-  * Added Static bufferSize option [aheckmann][m
[31m-  * Fixed caching of view and partial subdirectories [aheckmann][m
[31m-  * Fixed mime.type() comments now that ".ext" is not supported[m
[31m-  * Updated haml submodule[m
[31m-  * Updated class submodule[m
[31m-  * Removed bin/express[m
[31m-[m
[31m-0.13.0 / 2010-06-01[m
[31m-==================[m
[31m-[m
[31m-  * Added node v0.1.97 compatibility[m
[31m-  * Added support for deleting cookies via Request#cookie('key', null)[m
[31m-  * Updated haml submodule[m
[31m-  * Fixed not-found page, now using using charset utf-8[m
[31m-  * Fixed show-exceptions page, now using using charset utf-8[m
[31m-  * Fixed view support due to fs.readFile Buffers[m
[31m-  * Changed; mime.type() no longer accepts ".type" due to node extname() changes[m
[31m-[m
[31m-0.12.0 / 2010-05-22[m
[31m-==================[m
[31m-[m
[31m-  * Added node v0.1.96 compatibility[m
[31m-  * Added view `helpers` export which act as additional local variables[m
[31m-  * Updated haml submodule[m
[31m-  * Changed ETag; removed inode, modified time only[m
[31m-  * Fixed LF to CRLF for setting multiple cookies[m
[31m-  * Fixed cookie complation; values are now urlencoded[m
[31m-  * Fixed cookies parsing; accepts quoted values and url escaped cookies[m
[31m-[m
[31m-0.11.0 / 2010-05-06[m
[31m-==================[m
[31m-[m
[31m-  * Added support for layouts using different engines[m
[31m-    - this.render('page.html.haml', { layout: 'super-cool-layout.html.ejs' })[m
[31m-    - this.render('page.html.haml', { layout: 'foo' }) // assumes 'foo.html.haml'[m
[31m-    - this.render('page.html.haml', { layout: false }) // no layout[m
[31m-  * Updated ext submodule[m
[31m-  * Updated haml submodule[m
[31m-  * Fixed EJS partial support by passing along the context. Issue #307[m
[31m-[m
[31m-0.10.1 / 2010-05-03[m
[31m-==================[m
[31m-[m
[31m-  * Fixed binary uploads.[m
[31m-[m
[31m-0.10.0 / 2010-04-30[m
[31m-==================[m
[31m-[m
[31m-  * Added charset support via Request#charset (automatically assigned to 'UTF-8' when respond()'s[m
[31m-    encoding is set to 'utf8' or 'utf-8'.[m
[31m-  * Added "encoding" option to Request#render(). Closes #299[m
[31m-  * Added "dump exceptions" setting, which is enabled by default.[m
[31m-  * Added simple ejs template engine support[m
[31m-  * Added error reponse support for text/plain, application/json. Closes #297[m
[31m-  * Added callback function param to Request#error()[m
[31m-  * Added Request#sendHead()[m
[31m-  * Added Request#stream()[m
[31m-  * Added support for Request#respond(304, null) for empty response bodies[m
[31m-  * Added ETag support to Request#sendfile()[m
[31m-  * Added options to Request#sendfile(), passed to fs.createReadStream()[m
[31m-  * Added filename arg to Request#download()[m
[31m-  * Performance enhanced due to pre-reversing plugins so that plugins.reverse() is not called on each request[m
[31m-  * Performance enhanced by preventing several calls to toLowerCase() in Router#match()[m
[31m-  * Changed; Request#sendfile() now streams[m
[31m-  * Changed; Renamed Request#halt() to Request#respond(). Closes #289[m
[31m-  * Changed; Using sys.inspect() instead of JSON.encode() for error output[m
[31m-  * Changed; run() returns the http.Server instance. Closes #298[m
[31m-  * Changed; Defaulting Server#host to null (INADDR_ANY)[m
[31m-  * Changed; Logger "common" format scale of 0.4f[m
[31m-  * Removed Logger "request" format[m
[31m-  * Fixed; Catching ENOENT in view caching, preventing error when "views/partials" is not found[m
[31m-  * Fixed several issues with http client[m
[31m-  * Fixed Logger Content-Length output[m
[31m-  * Fixed bug preventing Opera from retaining the generated session id. Closes #292[m
[31m-[m
[31m-0.9.0 / 2010-04-14[m
[31m-==================[m
[31m-[m
[31m-  * Added DSL level error() route support[m
[31m-  * Added DSL level notFound() route support[m
[31m-  * Added Request#error()[m
[31m-  * Added Request#notFound()[m
[31m-  * Added Request#render() callback function. Closes #258[m
[31m-  * Added "max upload size" setting[m
[31m-  * Added "magic" variables to collection partials (\_\_index\_\_, \_\_length\_\_, \_\_isFirst\_\_, \_\_isLast\_\_). Closes #254[m
[31m-  * Added [haml.js](http://github.com/visionmedia/haml.js) submodule; removed haml-js[m
[31m-  * Added callback function support to Request#halt() as 3rd/4th arg[m
[31m-  * Added preprocessing of route param wildcards using param(). Closes #251[m
[31m-  * Added view partial support (with collections etc)[m
[31m-  * Fixed bug preventing falsey params (such as ?page=0). Closes #286[m
[31m-  * Fixed setting of multiple cookies. Closes #199[m
[31m-  * Changed; view naming convention is now NAME.TYPE.ENGINE (for example page.html.haml)[m
[31m-  * Changed; session cookie is now httpOnly[m
[31m-  * Changed; Request is no longer global[m
[31m-  * Changed; Event is no longer global[m
[31m-  * Changed; "sys" module is no longer global[m
[31m-  * Changed; moved Request#download to Static plugin where it belongs[m
[31m-  * Changed; Request instance created before body parsing. Closes #262[m
[31m-  * Changed; Pre-caching views in memory when "cache view contents" is enabled. Closes #253[m
[31m-  * Changed; Pre-caching view partials in memory when "cache view partials" is enabled[m
[31m-  * Updated support to node --version 0.1.90[m
[31m-  * Updated dependencies[m
[31m-  * Removed set("session cookie") in favour of use(Session, { cookie: { ... }})[m
[31m-  * Removed utils.mixin(); use Object#mergeDeep()[m
[31m-  [m
[31m-0.8.0 / 2010-03-19[m
[31m-==================[m
[31m-[m
[31m-  * Added coffeescript example app. Closes #242[m
[31m-  * Changed; cache api now async friendly. Closes #240[m
[31m-  * Removed deprecated 'express/static' support. Use 'express/plugins/static'[m
[31m-[m
[31m-0.7.6 / 2010-03-19[m
[31m-==================[m
[31m-[m
[31m-  * Added Request#isXHR. Closes #229[m
[31m-  * Added `make install` (for the executable)[m
[31m-  * Added `express` executable for setting up simple app templates[m
[31m-  * Added "GET /public/*" to Static plugin, defaulting to <root>/public[m
[31m-  * Added Static plugin[m
[31m-  * Fixed; Request#render() only calls cache.get() once[m
[31m-  * Fixed; Namespacing View caches with "view:"[m
[31m-  * Fixed; Namespacing Static caches with "static:"[m
[31m-  * Fixed; Both example apps now use the Static plugin[m
[31m-  * Fixed set("views"). Closes #239[m
[31m-  * Fixed missing space for combined log format[m
[31m-  * Deprecated Request#sendfile() and 'express/static'[m
[31m-  * Removed Server#running[m
[31m-[m
[31m-0.7.5 / 2010-03-16[m
[31m-==================[m
[31m-[m
[31m-  * Added Request#flash() support without args, now returns all flashes[m
[31m-  * Updated ext submodule[m
[31m-[m
[31m-0.7.4 / 2010-03-16[m
[31m-==================[m
[31m-[m
[31m-  * Fixed session reaper[m
[31m-  * Changed; class.js replacing js-oo Class implementation (quite a bit faster, no browser cruft)[m
[31m-[m
[31m-0.7.3 / 2010-03-16[m
[31m-==================[m
[31m-[m
[31m-  * Added package.json[m
[31m-  * Fixed requiring of haml / sass due to kiwi removal[m
[31m-[m
[31m-0.7.2 / 2010-03-16[m
[31m-==================[m
[31m-[m
[31m-  * Fixed GIT submodules (HAH!)[m
[31m-[m
[31m-0.7.1 / 2010-03-16[m
[31m-==================[m
[31m-[m
[31m-  * Changed; Express now using submodules again until a PM is adopted[m
[31m-  * Changed; chat example using millisecond conversions from ext[m
[31m-[m
[31m-0.7.0 / 2010-03-15[m
[31m-==================[m
[31m-[m
[31m-  * Added Request#pass() support (finds the next matching route, or the given path)[m
[31m-  * Added Logger plugin (default "common" format replaces CommonLogger)[m
[31m-  * Removed Profiler plugin[m
[31m-  * Removed CommonLogger plugin[m
[31m-[m
[31m-0.6.0 / 2010-03-11[m
[31m-==================[m
[31m-[m
[31m-  * Added seed.yml for kiwi package management support[m
[31m-  * Added HTTP client query string support when method is GET. Closes #205[m
[31m-  [m
[31m-  * Added support for arbitrary view engines.[m
[31m-    For example "foo.engine.html" will now require('engine'),[m
[31m-    the exports from this module are cached after the first require().[m
[31m-    [m
[31m-  * Added async plugin support[m
[31m-  [m
[31m-  * Removed usage of RESTful route funcs as http client[m
[31m-    get() etc, use http.get() and friends[m
[31m-  [m
[31m-  * Removed custom exceptions[m
[31m-[m
[31m-0.5.0 / 2010-03-10[m
[31m-==================[m
[31m-[m
[31m-  * Added ext dependency (library of js extensions)[m
[31m-  * Removed extname() / basename() utils. Use path module[m
[31m-  * Removed toArray() util. Use arguments.values[m
[31m-  * Removed escapeRegexp() util. Use RegExp.escape()[m
[31m-  * Removed process.mixin() dependency. Use utils.mixin()[m
[31m-  * Removed Collection[m
[31m-  * Removed ElementCollection[m
[31m-  * Shameless self promotion of ebook "Advanced JavaScript" (http://dev-mag.com)  ;)[m
[31m-[m
[31m-0.4.0 / 2010-02-11[m
[31m-==================[m
[31m-[m
[31m-  * Added flash() example to sample upload app[m
[31m-  * Added high level restful http client module (express/http)[m
[31m-  * Changed; RESTful route functions double as HTTP clients. Closes #69[m
[31m-  * Changed; throwing error when routes are added at runtime[m
[31m-  * Changed; defaulting render() context to the current Request. Closes #197[m
[31m-  * Updated haml submodule[m
[31m-[m
[31m-0.3.0 / 2010-02-11[m
[31m-==================[m
[31m-[m
[31m-  * Updated haml / sass submodules. Closes #200[m
[31m-  * Added flash message support. Closes #64[m
[31m-  * Added accepts() now allows multiple args. fixes #117[m
[31m-  * Added support for plugins to halt. Closes #189[m
[31m-  * Added alternate layout support. Closes #119[m
[31m-  * Removed Route#run(). Closes #188[m
[31m-  * Fixed broken specs due to use(Cookie) missing[m
[31m-[m
[31m-0.2.1 / 2010-02-05[m
[31m-==================[m
[31m-[m
[31m-  * Added "plot" format option for Profiler (for gnuplot processing)[m
[31m-  * Added request number to Profiler plugin[m
[31m-  * Fixed binary encoding for multi-part file uploads, was previously defaulting to UTF8[m
[31m-  * Fixed issue with routes not firing when not files are present. Closes #184[m
[31m-  * Fixed process.Promise -> events.Promise[m
[31m-[m
[31m-0.2.0 / 2010-02-03[m
[31m-==================[m
[31m-[m
[31m-  * Added parseParam() support for name[] etc. (allows for file inputs with "multiple" attr) Closes #180[m
[31m-  * Added Both Cache and Session option "reapInterval" may be "reapEvery". Closes #174[m
[31m-  * Added expiration support to cache api with reaper. Closes #133[m
[31m-  * Added cache Store.Memory#reap()[m
[31m-  * Added Cache; cache api now uses first class Cache instances[m
[31m-  * Added abstract session Store. Closes #172[m
[31m-  * Changed; cache Memory.Store#get() utilizing Collection[m
[31m-  * Renamed MemoryStore -> Store.Memory[m
[31m-  * Fixed use() of the same plugin several time will always use latest options. Closes #176[m
[31m-[m
[31m-0.1.0 / 2010-02-03[m
[31m-==================[m
[31m-[m
[31m-  * Changed; Hooks (before / after) pass request as arg as well as evaluated in their context[m
[31m-  * Updated node support to 0.1.27 Closes #169[m
[31m-  * Updated dirname(__filename) -> __dirname[m
[31m-  * Updated libxmljs support to v0.2.0[m
[31m-  * Added session support with memory store / reaping[m
[31m-  * Added quick uid() helper[m
[31m-  * Added multi-part upload support[m
[31m-  * Added Sass.js support / submodule[m
[31m-  * Added production env caching view contents and static files[m
[31m-  * Added static file caching. Closes #136[m
[31m-  * Added cache plugin with memory stores[m
[31m-  * Added support to StaticFile so that it works with non-textual files.[m
[31m-  * Removed dirname() helper[m
[31m-  * Removed several globals (now their modules must be required)[m
[31m-[m
[31m-0.0.2 / 2010-01-10[m
[31m-==================[m
[31m-[m
[31m-  * Added view benchmarks; currently haml vs ejs[m
[31m-  * Added Request#attachment() specs. Closes #116[m
[31m-  * Added use of node's parseQuery() util. Closes #123[m
[31m-  * Added `make init` for submodules[m
[31m-  * Updated Haml[m
[31m-  * Updated sample chat app to show messages on load[m
[31m-  * Updated libxmljs parseString -> parseHtmlString[m
[31m-  * Fixed `make init` to work with older versions of git[m
[31m-  * Fixed specs can now run independant specs for those who cant build deps. Closes #127[m
[31m-  * Fixed issues introduced by the node url module changes. Closes 126.[m
[31m-  * Fixed two assertions failing due to Collection#keys() returning strings[m
[31m-  * Fixed faulty Collection#toArray() spec due to keys() returning strings[m
[31m-  * Fixed `make test` now builds libxmljs.node before testing[m
[31m-[m
[31m-0.0.1 / 2010-01-03[m
[31m-==================[m
[31m-[m
[31m-  * Initial release[m
[1mdiff --git a/node_modules/express/LICENSE b/node_modules/express/LICENSE[m
[1mdeleted file mode 100644[m
[1mindex 36075a3..0000000[m
[1m--- a/node_modules/express/LICENSE[m
[1m+++ /dev/null[m
[36m@@ -1,22 +0,0 @@[m
[31m-(The MIT License)[m
[31m-[m
[31m-Copyright (c) 2009-2011 TJ Holowaychuk <tj@vision-media.ca>[m
[31m-[m
[31m-Permission is hereby granted, free of charge, to any person obtaining[m
[31m-a copy of this software and associated documentation files (the[m
[31m-'Software'), to deal in the Software without restriction, including[m
[31m-without limitation the rights to use, copy, modify, merge, publish,[m
[31m-distribute, sublicense, and/or sell copies of the Software, and to[m
[31m-permit persons to whom the Software is furnished to do so, subject to[m
[31m-the following conditions:[m
[31m-[m
[31m-The above copyright notice and this permission notice shall be[m
[31m-included in all copies or substantial portions of the Software.[m
[31m-[m
[31m-THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,[m
[31m-EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF[m
[31m-MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.[m
[31m-IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY[m
[31m-CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,[m
[31m-TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE[m
[31m-SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/Makefile b/node_modules/express/Makefile[m
[1mdeleted file mode 100644[m
[1mindex dfbfd67..0000000[m
[1m--- a/node_modules/express/Makefile[m
[1m+++ /dev/null[m
[36m@@ -1,29 +0,0 @@[m
[31m-[m
[31m-DOCS = $(shell find docs/*.md)[m
[31m-HTMLDOCS = $(DOCS:.md=.html)[m
[31m-TESTS = $(shell find test/*.test.js)[m
[31m-[m
[31m-test:[m
[31m-	@NODE_ENV=test ./node_modules/.bin/expresso $(TESTS)[m
[31m-[m
[31m-docs: $(HTMLDOCS)[m
[31m-	@ echo "... generating TOC"[m
[31m-	@./support/toc.js docs/guide.html[m
[31m-[m
[31m-%.html: %.md[m
[31m-	@echo "... $< -> $@"[m
[31m-	@markdown $< \[m
[31m-	  | cat docs/layout/head.html - docs/layout/foot.html \[m
[31m-	  > $@[m
[31m-[m
[31m-site:[m
[31m-	rm -fr /tmp/docs \[m
[31m-	  && cp -fr docs /tmp/docs \[m
[31m-	  && git checkout gh-pages \[m
[31m-  	&& cp -fr /tmp/docs/* . \[m
[31m-		&& echo "done"[m
[31m-[m
[31m-docclean:[m
[31m-	rm -f docs/*.{1,html}[m
[31m-[m
[31m-.PHONY: site test docs docclean[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/Readme.md b/node_modules/express/Readme.md[m
[1mdeleted file mode 100644[m
[1mindex d2c64c7..0000000[m
[1m--- a/node_modules/express/Readme.md[m
[1m+++ /dev/null[m
[36m@@ -1,145 +0,0 @@[m
[31m-[m
[31m-# Express[m
[31m-      [m
[31m-  Insanely fast (and small) server-side JavaScript web development framework[m
[31m-  built on [node](http://nodejs.org) and [Connect](http://github.com/senchalabs/connect).[m
[31m-  [m
[31m-     var app = express.createServer();[m
[31m-     [m
[31m-     app.get('/', function(req, res){[m
[31m-       res.send('Hello World');[m
[31m-     });[m
[31m-     [m
[31m-     app.listen(3000);[m
[31m-[m
[31m-## Installation[m
[31m-[m
[31m-    $ npm install express[m
[31m-[m
[31m-or to access the `express(1)` executable install globally:[m
[31m-[m
[31m-    $ npm install -g express[m
[31m-[m
[31m-## Quick Start[m
[31m-[m
[31m- The quickest way to get started with express is to utilize the executable `express(1)` to generate an application as shown below:[m
[31m-[m
[31m- Create the app:[m
[31m-[m
[31m-    $ npm install -g express[m
[31m-    $ express /tmp/foo && cd /tmp/foo[m
[31m-[m
[31m- Install dependencies:[m
[31m-[m
[31m-    $ npm install -d[m
[31m-[m
[31m- Start the server:[m
[31m-[m
[31m-    $ node app.js[m
[31m-[m
[31m-## Features[m
[31m-[m
[31m-  * Robust routing[m
[31m-  * Redirection helpers[m
[31m-  * Dynamic view helpers[m
[31m-  * Content negotiation[m
[31m-  * Focus on high performance[m
[31m-  * View rendering and partials support[m
[31m-  * Environment based configuration[m
[31m-  * Session based flash notifications[m
[31m-  * Built on [Connect](http://github.com/senchalabs/connect)[m
[31m-  * High test coverage[m
[31m-  * Executable for generating applications quickly[m
[31m-  * Application level view options[m
[31m-[m
[31m-Via Connect:[m
[31m-[m
[31m-  * Session support[m
[31m-  * Cache API[m
[31m-  * Mime helpers[m
[31m-  * ETag support[m
[31m-  * Persistent flash notifications[m
[31m-  * Cookie support[m
[31m-  * JSON-RPC[m
[31m-  * Logging[m
[31m-  * and _much_ more![m
[31m-[m
[31m-## Contributors[m
[31m-[m
[31m-The following are the major contributors of Express (in no specific order).[m
[31m-[m
[31m-  * TJ Holowaychuk ([visionmedia](http://github.com/visionmedia))[m
[31m-  * Ciaran Jessup ([ciaranj](http://github.com/ciaranj))[m
[31m-  * Aaron Heckmann ([aheckmann](http://github.com/aheckmann))[m
[31m-  * Guillermo Rauch ([guille](http://github.com/guille))[m
[31m-[m
[31m-## More Information[m
[31m-[m
[31m-  * #express on freenode[m
[31m-  * [express-expose](http://github.com/visionmedia/express-expose) expose objects, functions, modules and more to client-side js with ease[m
[31m-  * [express-configure](http://github.com/visionmedia/express-configuration) async configuration support[m
[31m-  * [express-messages](http://github.com/visionmedia/express-messages) flash notification rendering helper[m
[31m-  * [express-namespace](http://github.com/visionmedia/express-namespace) namespaced route support[m
[31m-  * [express-params](https://github.com/visionmedia/express-params) param pre-condition functions[m
[31m-  * [express-mongoose](https://github.com/LearnBoost/express-mongoose) plugin for easy rendering of Mongoose async Query results[m
[31m-  * Follow [tjholowaychuk](http://twitter.com/tjholowaychuk) on twitter for updates[m
[31m-  * [Google Group](http://groups.google.com/group/express-js) for discussion[m
[31m-  * Visit the [Wiki](http://github.com/visionmedia/express/wiki)[m
[31m-  * [日本語ドキュメンテーション](http://hideyukisaito.com/doc/expressjs/) by [hideyukisaito](https://github.com/hideyukisaito)[m
[31m-  * Screencast - [Introduction](http://bit.ly/eRYu0O)[m
[31m-  * Screencast - [View Partials](http://bit.ly/dU13Fx)[m
[31m-  * Screencast - [Route Specific Middleware](http://bit.ly/hX4IaH)[m
[31m-  * Screencast - [Route Path Placeholder Preconditions](http://bit.ly/eNqmVs)[m
[31m-[m
[31m-## Node Compatibility[m
[31m-[m
[31m-Express 1.x is compatible with node 0.2.x and connect < 1.0.[m
[31m-[m
[31m-Express 2.x is compatible with node 0.4.x or 0.6.x, and connect 1.x[m
[31m-[m
[31m-Express 3.x (master) will be compatible with node 0.6.x and connect 2.x[m
[31m-[m
[31m-## Viewing Examples[m
[31m-[m
[31m-First install the dev dependencies to install all the example / test suite deps:[m
[31m-[m
[31m-    $ npm install[m
[31m-[m
[31m-then run whichever tests you want:[m
[31m-[m
[31m-    $ node examples/jade/app.js[m
[31m-[m
[31m-## Running Tests[m
[31m-[m
[31m-To run the test suite first invoke the following command within the repo, installing the development dependencies:[m
[31m-[m
[31m-    $ npm install[m
[31m-[m
[31m-then run the tests:[m
[31m-[m
[31m-    $ make test[m
[31m-[m
[31m-## License [m
[31m-[m
[31m-(The MIT License)[m
[31m-[m
[31m-Copyright (c) 2009-2011 TJ Holowaychuk &lt;tj@vision-media.ca&gt;[m
[31m-[m
[31m-Permission is hereby granted, free of charge, to any person obtaining[m
[31m-a copy of this software and associated documentation files (the[m
[31m-'Software'), to deal in the Software without restriction, including[m
[31m-without limitation the rights to use, copy, modify, merge, publish,[m
[31m-distribute, sublicense, and/or sell copies of the Software, and to[m
[31m-permit persons to whom the Software is furnished to do so, subject to[m
[31m-the following conditions:[m
[31m-[m
[31m-The above copyright notice and this permission notice shall be[m
[31m-included in all copies or substantial portions of the Software.[m
[31m-[m
[31m-THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,[m
[31m-EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF[m
[31m-MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.[m
[31m-IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY[m
[31m-CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,[m
[31m-TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE[m
[31m-SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.[m
[1mdiff --git a/node_modules/express/bin/express b/node_modules/express/bin/express[m
[1mdeleted file mode 100755[m
[1mindex 367be59..0000000[m
[1m--- a/node_modules/express/bin/express[m
[1m+++ /dev/null[m
[36m@@ -1,423 +0,0 @@[m
[31m-#!/usr/bin/env node[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var fs = require('fs')[m
[31m-  , os = require('os')[m
[31m-  , exec = require('child_process').exec[m
[31m-  , mkdirp = require('mkdirp');[m
[31m-[m
[31m-/**[m
[31m- * Package information.[m
[31m- */[m
[31m-[m
[31m-var pkg = JSON.parse(fs.readFileSync(__dirname + '/../package.json'));[m
[31m-[m
[31m-/**[m
[31m- * Framework version.[m
[31m- */[m
[31m-[m
[31m-var version = pkg.version;[m
[31m-[m
[31m-/**[m
[31m- * Add session support.[m
[31m- */[m
[31m-[m
[31m-var sessions = false;[m
[31m-[m
[31m-/**[m
[31m- * CSS engine to utilize.[m
[31m- */[m
[31m-[m
[31m-var cssEngine;[m
[31m-[m
[31m-/**[m
[31m- * End-of-line code.[m
[31m- */[m
[31m-[m
[31m-var eol = os.platform[m
[31m-  ? ('win32' == os.platform() ? '\r\n' : '\n')[m
[31m-  : '\n';[m
[31m-[m
[31m-/**[m
[31m- * Template engine to utilize.[m
[31m- */[m
[31m-[m
[31m-var templateEngine = 'jade';[m
[31m-[m
[31m-/**[m
[31m- * Usage documentation.[m
[31m- */[m
[31m-[m
[31m-var usage = ''[m
[31m-  + '\n'[m
[31m-  + '  Usage: express [options] [path]\n'[m
[31m-  + '\n'[m
[31m-  + '  Options:\n'[m
[31m-  + '    -s, --sessions           add session support\n'[m
[31m-  + '    -t, --template <engine>  add template <engine> support (jade|ejs). default=jade\n'[m
[31m-  + '    -c, --css <engine>       add stylesheet <engine> support (stylus). default=plain css\n'[m
[31m-  + '    -v, --version            output framework version\n'[m
[31m-  + '    -h, --help               output help information\n'[m
[31m-  ;[m
[31m-[m
[31m-/**[m
[31m- * Routes index template.[m
[31m- */[m
[31m-[m
[31m-var index = [[m
[31m-    ''[m
[31m-  , '/*'[m
[31m-  , ' * GET home page.'[m
[31m-  , ' */'[m
[31m-  , ''[m
[31m-  , 'exports.index = function(req, res){'[m
[31m-  , '  res.render(\'index\', { title: \'Express\' })'[m
[31m-  , '};'[m
[31m-].join(eol);[m
[31m-[m
[31m-/**[m
[31m- * Jade layout template.[m
[31m- */[m
[31m-[m
[31m-var jadeLayout = [[m
[31m-    '!!!'[m
[31m-  , 'html'[m
[31m-  , '  head'[m
[31m-  , '    title= title'[m
[31m-  , '    link(rel=\'stylesheet\', href=\'/stylesheets/style.css\')'[m
[31m-  , '  body!= body'[m
[31m-].join(eol);[m
[31m-[m
[31m-/**[m
[31m- * Jade index template.[m
[31m- */[m
[31m-[m
[31m-var jadeIndex = [[m
[31m-    'h1= title'[m
[31m-  , 'p Welcome to #{title}'[m
[31m-].join(eol);[m
[31m-[m
[31m-/**[m
[31m- * EJS layout template.[m
[31m- */[m
[31m-[m
[31m-var ejsLayout = [[m
[31m-    '<!DOCTYPE html>'[m
[31m-  , '<html>'[m
[31m-  , '  <head>'[m
[31m-  , '    <title><%= title %></title>'[m
[31m-  , '    <link rel=\'stylesheet\' href=\'/stylesheets/style.css\' />'[m
[31m-  , '  </head>'[m
[31m-  , '  <body>'[m
[31m-  , '    <%- body %>'[m
[31m-  , '  </body>'[m
[31m-  , '</html>'[m
[31m-].join(eol);[m
[31m-[m
[31m-/**[m
[31m- * EJS index template.[m
[31m- */[m
[31m-[m
[31m-var ejsIndex = [[m
[31m-    '<h1><%= title %></h1>'[m
[31m-  , '<p>Welcome to <%= title %></p>'[m
[31m-  ].join(eol);[m
[31m-[m
[31m-/**[m
[31m- * Default css template.[m
[31m- */[m
[31m-[m
[31m-var css = [[m
[31m-    'body {'[m
[31m-  , '  padding: 50px;'[m
[31m-  , '  font: 14px "Lucida Grande", Helvetica, Arial, sans-serif;'[m
[31m-  , '}'[m
[31m-  , ''[m
[31m-  , 'a {'[m
[31m-  , '  color: #00B7FF;'[m
[31m-  , '}'[m
[31m-].join(eol);[m
[31m-[m
[31m-/**[m
[31m- * Default stylus template.[m
[31m- */[m
[31m-[m
[31m-var stylus = [[m
[31m-    'body'[m
[31m-  , '  padding: 50px'[m
[31m-  , '  font: 14px "Lucida Grande", Helvetica, Arial, sans-serif'[m
[31m-  , 'a'[m
[31m-  , '  color: #00B7FF'[m
[31m-].join(eol);[m
[31m-[m
[31m-/**[m
[31m- * App template.[m
[31m- */[m
[31m-[m
[31m-var app = [[m
[31m-    ''[m
[31m-  , '/**'[m
[31m-  , ' * Module dependencies.'[m
[31m-  , ' */'[m
[31m-  , ''[m
[31m-  , 'var express = require(\'express\')'[m
[31m-  , '  , routes = require(\'./routes\');'[m
[31m-  , ''[m
[31m-  , 'var app = module.exports = express.createServer();'[m
[31m-  , ''[m
[31m-  , '// Configuration'[m
[31m-  , ''[m
[31m-  , 'app.configure(function(){'[m
[31m-  , '  app.set(\'views\', __dirname + \'/views\');'[m
[31m-  , '  app.set(\'view engine\', \':TEMPLATE\');'[m
[31m-  , '  app.use(express.bodyParser());'[m
[31m-  , '  app.use(express.methodOverride());{sess}{css}'[m
[31m-  , '  app.use(app.router);'[m
[31m-  , '  app.use(express.static(__dirname + \'/public\'));'[m
[31m-  , '});'[m
[31m-  , ''[m
[31m-  , 'app.configure(\'development\', function(){'[m
[31m-  , '  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));'[m
[31m-  , '});'[m
[31m-  , ''[m
[31m-  , 'app.configure(\'production\', function(){'[m
[31m-  , '  app.use(express.errorHandler());'[m
[31m-  , '});'[m
[31m-  , ''[m
[31m-  , '// Routes'[m
[31m-  , ''[m
[31m-  , 'app.get(\'/\', routes.index);'[m
[31m-  , ''[m
[31m-  , 'app.listen(3000, function(){'[m
[31m-  , '  console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env);'[m
[31m-  , '});'[m
[31m-  , ''[m
[31m-].join(eol);[m
[31m-[m
[31m-// Parse arguments[m
[31m-[m
[31m-var args = process.argv.slice(2)[m
[31m-  , path = '.';[m
[31m-[m
[31m-while (args.length) {[m
[31m-  var arg = args.shift();[m
[31m-  switch (arg) {[m
[31m-    case '-h':[m
[31m-    case '--help':[m
[31m-      abort(usage);[m
[31m-      break;[m
[31m-    case '-v':[m
[31m-    case '--version':[m
[31m-      abort(version);[m
[31m-      break;[m
[31m-    case '-s':[m
[31m-    case '--session':[m
[31m-    case '--sessions':[m
[31m-      sessions = true;[m
[31m-      break;[m
[31m-    case '-c':[m
[31m-    case '--css':[m
[31m-      args.length[m
[31m-        ? (cssEngine = args.shift())[m
[31m-        : abort('--css requires an argument');[m
[31m-      break;[m
[31m-    case '-t':[m
[31m-    case '--template':[m
[31m-      args.length[m
[31m-        ? (templateEngine = args.shift())[m
[31m-        : abort('--template requires an argument');[m
[31m-      break;[m
[31m-    default:[m
[31m-        path = arg;[m
[31m-  }[m
[31m-}[m
[31m-[m
[31m-// Generate application[m
[31m-[m
[31m-(function createApplication(path) {[m
[31m-  emptyDirectory(path, function(empty){[m
[31m-    if (empty) {[m
[31m-      createApplicationAt(path);[m
[31m-    } else {[m
[31m-      confirm('destination is not empty, continue? ', function(ok){[m
[31m-        if (ok) {[m
[31m-          process.stdin.destroy();[m
[31m-          createApplicationAt(path);[m
[31m-        } else {[m
[31m-          abort('aborting');[m
[31m-        }[m
[31m-      });[m
[31m-    }[m
[31m-  });[m
[31m-})(path);[m
[31m-[m
[31m-/**[m
[31m- * Create application at the given directory `path`.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- */[m
[31m-[m
[31m-function createApplicationAt(path) {[m
[31m-  console.log();[m
[31m-  process.on('exit', function(){[m
[31m-    console.log();[m
[31m-    console.log('   dont forget to install dependencies:');[m
[31m-    console.log('   $ cd %s && npm install', path);[m
[31m-    console.log();[m
[31m-  });[m
[31m-[m
[31m-  mkdir(path, function(){[m
[31m-    mkdir(path + '/public');[m
[31m-    mkdir(path + '/public/javascripts');[m
[31m-    mkdir(path + '/public/images');[m
[31m-    mkdir(path + '/public/stylesheets', function(){[m
[31m-      switch (cssEngine) {[m
[31m-        case 'stylus':[m
[31m-          write(path + '/public/stylesheets/style.styl', stylus);[m
[31m-          break;[m
[31m-        default:[m
[31m-          write(path + '/public/stylesheets/style.css', css);[m
[31m-      }[m
[31m-    });[m
[31m-[m
[31m-    mkdir(path + '/routes', function(){[m
[31m-      write(path + '/routes/index.js', index);[m
[31m-    });[m
[31m-[m
[31m-    mkdir(path + '/views', function(){[m
[31m-      switch (templateEngine) {[m
[31m-        case 'ejs':[m
[31m-          write(path + '/views/layout.ejs', ejsLayout);[m
[31m-          write(path + '/views/index.ejs', ejsIndex);[m
[31m-          break;[m
[31m-        case 'jade':[m
[31m-          write(path + '/views/layout.jade', jadeLayout);[m
[31m-          write(path + '/views/index.jade', jadeIndex);[m
[31m-          break;[m
[31m-      }[m
[31m-    });[m
[31m-[m
[31m-    // CSS Engine support[m
[31m-    switch (cssEngine) {[m
[31m-      case 'stylus':[m
[31m-        app = app.replace('{css}', eol + '  app.use(require(\'stylus\').middleware({ src: __dirname + \'/public\' }));');[m
[31m-        break;[m
[31m-      default:[m
[31m-        app = app.replace('{css}', '');[m
[31m-    }[m
[31m-[m
[31m-    // Session support[m
[31m-    app = app.replace('{sess}', sessions[m
[31m-      ? eol + '  app.use(express.cookieParser());' + eol + '  app.use(express.session({ secret: \'your secret here\' }));'[m
[31m-      : '');[m
[31m-[m
[31m-    // Template support[m
[31m-    app = app.replace(':TEMPLATE', templateEngine);[m
[31m-[m
[31m-    // package.json[m
[31m-    var json = '{' + eol;[m
[31m-    json += '    "name": "application-name"' + eol;[m
[31m-    json += '  , "version": "0.0.1"' + eol;[m
[31m-    json += '  , "private": true' + eol;[m
[31m-    json += '  , "dependencies": {' + eol;[m
[31m-    json += '      "express": "' + version + '"' + eol;[m
[31m-    if (cssEngine) json += '    , "' + cssEngine + '": ">= 0.0.1"' + eol;[m
[31m-    if (templateEngine) json += '    , "' + templateEngine + '": ">= 0.0.1"' + eol;[m
[31m-    json += '  }' + eol;[m
[31m-    json += '}';[m
[31m-[m
[31m-[m
[31m-    write(path + '/package.json', json);[m
[31m-    write(path + '/app.js', app);[m
[31m-  });[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Check if the given directory `path` is empty.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @param {Function} fn[m
[31m- */[m
[31m-[m
[31m-function emptyDirectory(path, fn) {[m
[31m-  fs.readdir(path, function(err, files){[m
[31m-    if (err && 'ENOENT' != err.code) throw err;[m
[31m-    fn(!files || !files.length);[m
[31m-  });[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * echo str > path.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @param {String} str[m
[31m- */[m
[31m-[m
[31m-function write(path, str) {[m
[31m-  fs.writeFile(path, str);[m
[31m-  console.log('   \x1b[36mcreate\x1b[0m : ' + path);[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Prompt confirmation with the given `msg`.[m
[31m- *[m
[31m- * @param {String} msg[m
[31m- * @param {Function} fn[m
[31m- */[m
[31m-[m
[31m-function confirm(msg, fn) {[m
[31m-  prompt(msg, function(val){[m
[31m-    fn(/^ *y(es)?/i.test(val));[m
[31m-  });[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Prompt input with the given `msg` and callback `fn`.[m
[31m- *[m
[31m- * @param {String} msg[m
[31m- * @param {Function} fn[m
[31m- */[m
[31m-[m
[31m-function prompt(msg, fn) {[m
[31m-  // prompt[m
[31m-  if (' ' == msg[msg.length - 1]) {[m
[31m-    process.stdout.write(msg);[m
[31m-  } else {[m
[31m-    console.log(msg);[m
[31m-  }[m
[31m-[m
[31m-  // stdin[m
[31m-  process.stdin.setEncoding('ascii');[m
[31m-  process.stdin.once('data', function(data){[m
[31m-    fn(data);[m
[31m-  }).resume();[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Mkdir -p.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @param {Function} fn[m
[31m- */[m
[31m-[m
[31m-function mkdir(path, fn) {[m
[31m-  mkdirp(path, 0755, function(err){[m
[31m-    if (err) throw err;[m
[31m-    console.log('   \033[36mcreate\033[0m : ' + path);[m
[31m-    fn && fn();[m
[31m-  });[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Exit with the given `str`.[m
[31m- *[m
[31m- * @param {String} str[m
[31m- */[m
[31m-[m
[31m-function abort(str) {[m
[31m-  console.error(str);[m
[31m-  process.exit(1);[m
[31m-}[m
[1mdiff --git a/node_modules/express/index.js b/node_modules/express/index.js[m
[1mdeleted file mode 100644[m
[1mindex 8d81ea7..0000000[m
[1m--- a/node_modules/express/index.js[m
[1m+++ /dev/null[m
[36m@@ -1,2 +0,0 @@[m
[31m-[m
[31m-module.exports = require('./lib/express');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/lib/express.js b/node_modules/express/lib/express.js[m
[1mdeleted file mode 100644[m
[1mindex 7ea451d..0000000[m
[1m--- a/node_modules/express/lib/express.js[m
[1m+++ /dev/null[m
[36m@@ -1,79 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var connect = require('connect')[m
[31m-  , HTTPSServer = require('./https')[m
[31m-  , HTTPServer = require('./http')[m
[31m-  , Route = require('./router/route')[m
[31m-[m
[31m-/**[m
[31m- * Re-export connect auto-loaders.[m
[31m- * [m
[31m- * This prevents the need to `require('connect')` in order[m
[31m- * to access core middleware, so for example `express.logger()` instead[m
[31m- * of `require('connect').logger()`.[m
[31m- */[m
[31m-[m
[31m-var exports = module.exports = connect.middleware;[m
[31m-[m
[31m-/**[m
[31m- * Framework version.[m
[31m- */[m
[31m-[m
[31m-exports.version = '2.5.11';[m
[31m-[m
[31m-/**[m
[31m- * Shortcut for `new Server(...)`.[m
[31m- *[m
[31m- * @param {Function} ...[m
[31m- * @return {Server}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.createServer = function(options){[m
[31m-  if ('object' == typeof options) {[m
[31m-    return new HTTPSServer(options, Array.prototype.slice.call(arguments, 1));[m
[31m-  } else {[m
[31m-    return new HTTPServer(Array.prototype.slice.call(arguments));[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Expose constructors.[m
[31m- */[m
[31m-[m
[31m-exports.HTTPServer = HTTPServer;[m
[31m-exports.HTTPSServer = HTTPSServer;[m
[31m-exports.Route = Route;[m
[31m-[m
[31m-/**[m
[31m- * View extensions.[m
[31m- */[m
[31m-[m
[31m-exports.View =[m
[31m-exports.view = require('./view');[m
[31m-[m
[31m-/**[m
[31m- * Response extensions.[m
[31m- */[m
[31m-[m
[31m-require('./response');[m
[31m-[m
[31m-/**[m
[31m- * Request extensions.[m
[31m- */[m
[31m-[m
[31m-require('./request');[m
[31m-[m
[31m-// Error handler title[m
[31m-[m
[31m-exports.errorHandler.title = 'Express';[m
[31m-[m
[1mdiff --git a/node_modules/express/lib/http.js b/node_modules/express/lib/http.js[m
[1mdeleted file mode 100644[m
[1mindex da2158f..0000000[m
[1m--- a/node_modules/express/lib/http.js[m
[1m+++ /dev/null[m
[36m@@ -1,582 +0,0 @@[m
[31m-/*![m
[31m- * Express - HTTPServer[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var qs = require('qs')[m
[31m-  , connect = require('connect')[m
[31m-  , router = require('./router')[m
[31m-  , Router = require('./router')[m
[31m-  , view = require('./view')[m
[31m-  , toArray = require('./utils').toArray[m
[31m-  , methods = router.methods.concat('del', 'all')[m
[31m-  , url = require('url')[m
[31m-  , utils = connect.utils;[m
[31m-[m
[31m-/**[m
[31m- * Expose `HTTPServer`.[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = HTTPServer;[m
[31m-[m
[31m-/**[m
[31m- * Server proto.[m
[31m- */[m
[31m-[m
[31m-var app = HTTPServer.prototype;[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new `HTTPServer` with optional `middleware`.[m
[31m- *[m
[31m- * @param {Array} middleware[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-function HTTPServer(middleware){[m
[31m-  connect.HTTPServer.call(this, []);[m
[31m-  this.init(middleware);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Inherit from `connect.HTTPServer`.[m
[31m- */[m
[31m-[m
[31m-app.__proto__ = connect.HTTPServer.prototype;[m
[31m-[m
[31m-/**[m
[31m- * Initialize the server.[m
[31m- *[m
[31m- * @param {Array} middleware[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-app.init = function(middleware){[m
[31m-  var self = this;[m
[31m-  this.cache = {};[m
[31m-  this.settings = {};[m
[31m-  this.redirects = {};[m
[31m-  this.isCallbacks = {};[m
[31m-  this._locals = {};[m
[31m-  this.dynamicViewHelpers = {};[m
[31m-  this.errorHandlers = [];[m
[31m-[m
[31m-  this.set('env', process.env.NODE_ENV || 'development');[m
[31m-[m
[31m-  // expose objects to each other[m
[31m-  this.use(function(req, res, next){[m
[31m-    req.query = req.query || {};[m
[31m-    res.setHeader('X-Powered-By', 'Express');[m
[31m-    req.app = res.app = self;[m
[31m-    req.res = res;[m
[31m-    res.req = req;[m
[31m-    req.next = next;[m
[31m-    // assign req.query[m
[31m-    if (req.url.indexOf('?') > 0) {[m
[31m-      var query = url.parse(req.url).query;[m
[31m-      req.query = qs.parse(query);[m
[31m-    }[m
[31m-    next();[m
[31m-  });[m
[31m-[m
[31m-  // apply middleware[m
[31m-  if (middleware) middleware.forEach(self.use.bind(self));[m
[31m-[m
[31m-  // router[m
[31m-  this.routes = new Router(this);[m
[31m-  this.__defineGetter__('router', function(){[m
[31m-    this.__usedRouter = true;[m
[31m-    return self.routes.middleware;[m
[31m-  });[m
[31m-[m
[31m-  // default locals[m
[31m-  this.locals({[m
[31m-      settings: this.settings[m
[31m-    , app: this[m
[31m-  });[m
[31m-[m
[31m-  // default development configuration[m
[31m-  this.configure('development', function(){[m
[31m-    this.enable('hints');[m
[31m-  });[m
[31m-[m
[31m-  // default production configuration[m
[31m-  this.configure('production', function(){[m
[31m-    this.enable('view cache');[m
[31m-  });[m
[31m-[m
[31m-  // register error handlers on "listening"[m
[31m-  // so that they disregard definition position.[m
[31m-  this.on('listening', this.registerErrorHandlers.bind(this));[m
[31m-[m
[31m-  // route manipulation methods[m
[31m-  methods.forEach(function(method){[m
[31m-    self.lookup[method] = function(path){[m
[31m-      return self.routes.lookup(method, path);[m
[31m-    };[m
[31m-[m
[31m-    self.match[method] = function(path){[m
[31m-      return self.routes.match(method, path);[m
[31m-    };[m
[31m-[m
[31m-    self.remove[method] = function(path){[m
[31m-      return self.routes.lookup(method, path).remove();[m
[31m-    };[m
[31m-  });[m
[31m-[m
[31m-  // del -> delete[m
[31m-  self.lookup.del = self.lookup.delete;[m
[31m-  self.match.del = self.match.delete;[m
[31m-  self.remove.del = self.remove.delete;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Remove routes matching the given `path`.[m
[31m- *[m
[31m- * @param {Route} path[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.remove = function(path){[m
[31m-  return this.routes.lookup('all', path).remove();[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Lookup routes defined with a path[m
[31m- * equivalent to `path`.[m
[31m- *[m
[31m- * @param {Stirng} path[m
[31m- * @return {Array}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.lookup = function(path){[m
[31m-  return this.routes.lookup('all', path);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Lookup routes matching the given `url`.[m
[31m- *[m
[31m- * @param {Stirng} url[m
[31m- * @return {Array}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.match = function(url){[m
[31m-  return this.routes.match('all', url);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * When using the vhost() middleware register error handlers.[m
[31m- */[m
[31m-[m
[31m-app.onvhost = function(){[m
[31m-  this.registerErrorHandlers();[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Register error handlers.[m
[31m- *[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.registerErrorHandlers = function(){[m
[31m-  this.errorHandlers.forEach(function(fn){[m
[31m-    this.use(function(err, req, res, next){[m
[31m-      fn.apply(this, arguments);[m
[31m-    });[m
[31m-  }, this);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Proxy `connect.HTTPServer#use()` to apply settings to[m
[31m- * mounted applications.[m
[31m- *[m
[31m- * @param {String|Function|Server} route[m
[31m- * @param {Function|Server} middleware[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.use = function(route, middleware){[m
[31m-  var app, base, handle;[m
[31m-[m
[31m-  if ('string' != typeof route) {[m
[31m-    middleware = route, route = '/';[m
[31m-  }[m
[31m-[m
[31m-  // express app[m
[31m-  if (middleware.handle && middleware.set) app = middleware;[m
[31m-[m
[31m-  // restore .app property on req and res[m
[31m-  if (app) {[m
[31m-    app.route = route;[m
[31m-    middleware = function(req, res, next) {[m
[31m-      var orig = req.app;[m
[31m-      app.handle(req, res, function(err){[m
[31m-        req.app = res.app = orig;[m
[31m-        next(err);[m
[31m-      });[m
[31m-    };[m
[31m-  }[m
[31m-[m
[31m-  connect.HTTPServer.prototype.use.call(this, route, middleware);[m
[31m-[m
[31m-  // mounted an app, invoke the hook[m
[31m-  // and adjust some settings[m
[31m-  if (app) {[m
[31m-    base = this.set('basepath') || this.route;[m
[31m-    if ('/' == base) base = '';[m
[31m-    base = base + (app.set('basepath') || app.route);[m
[31m-    app.set('basepath', base);[m
[31m-    app.parent = this;[m
[31m-    if (app.__mounted) app.__mounted.call(app, this);[m
[31m-  }[m
[31m-[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Assign a callback `fn` which is called[m
[31m- * when this `Server` is passed to `Server#use()`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *    var app = express.createServer()[m
[31m- *      , blog = express.createServer();[m
[31m- *[m
[31m- *    blog.mounted(function(parent){[m
[31m- *      // parent is app[m
[31m- *      // "this" is blog[m
[31m- *    });[m
[31m- *[m
[31m- *    app.use(blog);[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.mounted = function(fn){[m
[31m-  this.__mounted = fn;[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * See: view.register.[m
[31m- *[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.register = function(){[m
[31m-  view.register.apply(this, arguments);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Register the given view helpers `obj`. This method[m
[31m- * can be called several times to apply additional helpers.[m
[31m- *[m
[31m- * @param {Object} obj[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.helpers =[m
[31m-app.locals = function(obj){[m
[31m-  utils.merge(this._locals, obj);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Register the given dynamic view helpers `obj`. This method[m
[31m- * can be called several times to apply additional helpers.[m
[31m- *[m
[31m- * @param {Object} obj[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.dynamicHelpers = function(obj){[m
[31m-  utils.merge(this.dynamicViewHelpers, obj);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Map the given param placeholder `name`(s) to the given callback(s).[m
[31m- *[m
[31m- * Param mapping is used to provide pre-conditions to routes[m
[31m- * which us normalized placeholders. This callback has the same[m
[31m- * signature as regular middleware, for example below when ":userId"[m
[31m- * is used this function will be invoked in an attempt to load the user.[m
[31m- *[m
[31m- *      app.param('userId', function(req, res, next, id){[m
[31m- *        User.find(id, function(err, user){[m
[31m- *          if (err) {[m
[31m- *            next(err);[m
[31m- *          } else if (user) {[m
[31m- *            req.user = user;[m
[31m- *            next();[m
[31m- *          } else {[m
[31m- *            next(new Error('failed to load user'));[m
[31m- *          }[m
[31m- *        });[m
[31m- *      });[m
[31m- *[m
[31m- * Passing a single function allows you to map logic[m
[31m- * to the values passed to `app.param()`, for example[m
[31m- * this is useful to provide coercion support in a concise manner.[m
[31m- *[m
[31m- * The following example maps regular expressions to param values[m
[31m- * ensuring that they match, otherwise passing control to the next[m
[31m- * route:[m
[31m- *[m
[31m- *      app.param(function(name, regexp){[m
[31m- *        if (regexp instanceof RegExp) {[m
[31m- *          return function(req, res, next, val){[m
[31m- *            var captures;[m
[31m- *            if (captures = regexp.exec(String(val))) {[m
[31m- *              req.params[name] = captures;[m
[31m- *              next();[m
[31m- *            } else {[m
[31m- *              next('route');[m
[31m- *            }[m
[31m- *          }[m
[31m- *        }[m
[31m- *      });[m
[31m- *[m
[31m- * We can now use it as shown below, where "/commit/:commit" expects[m
[31m- * that the value for ":commit" is at 5 or more digits. The capture[m
[31m- * groups are then available as `req.params.commit` as we defined[m
[31m- * in the function above.[m
[31m- *[m
[31m- *    app.param('commit', /^\d{5,}$/);[m
[31m- *[m
[31m- * For more of this useful functionality take a look[m
[31m- * at [express-params](http://github.com/visionmedia/express-params).[m
[31m- *[m
[31m- * @param {String|Array|Function} name[m
[31m- * @param {Function} fn[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.param = function(name, fn){[m
[31m-  var self = this[m
[31m-    , fns = [].slice.call(arguments, 1);[m
[31m-[m
[31m-  // array[m
[31m-  if (Array.isArray(name)) {[m
[31m-    name.forEach(function(name){[m
[31m-      fns.forEach(function(fn){[m
[31m-        self.param(name, fn);[m
[31m-      });[m
[31m-    });[m
[31m-  // param logic[m
[31m-  } else if ('function' == typeof name) {[m
[31m-    this.routes.param(name);[m
[31m-  // single[m
[31m-  } else {[m
[31m-    if (':' == name[0]) name = name.substr(1);[m
[31m-    fns.forEach(function(fn){[m
[31m-      self.routes.param(name, fn);[m
[31m-    });[m
[31m-  }[m
[31m-[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Assign a custom exception handler callback `fn`.[m
[31m- * These handlers are always _last_ in the middleware stack.[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.error = function(fn){[m
[31m-  this.errorHandlers.push(fn);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Register the given callback `fn` for the given `type`.[m
[31m- *[m
[31m- * @param {String} type[m
[31m- * @param {Function} fn[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.is = function(type, fn){[m
[31m-  if (!fn) return this.isCallbacks[type];[m
[31m-  this.isCallbacks[type] = fn;[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Assign `setting` to `val`, or return `setting`'s value.[m
[31m- * Mounted servers inherit their parent server's settings.[m
[31m- *[m
[31m- * @param {String} setting[m
[31m- * @param {String} val[m
[31m- * @return {Server|Mixed} for chaining, or the setting value[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.set = function(setting, val){[m
[31m-  if (val === undefined) {[m
[31m-    if (this.settings.hasOwnProperty(setting)) {[m
[31m-      return this.settings[setting];[m
[31m-    } else if (this.parent) {[m
[31m-      return this.parent.set(setting);[m
[31m-    }[m
[31m-  } else {[m
[31m-    this.settings[setting] = val;[m
[31m-    return this;[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Check if `setting` is enabled.[m
[31m- *[m
[31m- * @param {String} setting[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.enabled = function(setting){[m
[31m-  return !!this.set(setting);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Check if `setting` is disabled.[m
[31m- *[m
[31m- * @param {String} setting[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.disabled = function(setting){[m
[31m-  return !this.set(setting);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Enable `setting`.[m
[31m- *[m
[31m- * @param {String} setting[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.enable = function(setting){[m
[31m-  return this.set(setting, true);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Disable `setting`.[m
[31m- *[m
[31m- * @param {String} setting[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.disable = function(setting){[m
[31m-  return this.set(setting, false);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Redirect `key` to `url`.[m
[31m- *[m
[31m- * @param {String} key[m
[31m- * @param {String} url[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.redirect = function(key, url){[m
[31m-  this.redirects[key] = url;[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Configure callback for zero or more envs,[m
[31m- * when no env is specified that callback will[m
[31m- * be invoked for all environments. Any combination[m
[31m- * can be used multiple times, in any order desired.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *    app.configure(function(){[m
[31m- *      // executed for all envs[m
[31m- *    });[m
[31m- *[m
[31m- *    app.configure('stage', function(){[m
[31m- *      // executed staging env[m
[31m- *    });[m
[31m- *[m
[31m- *    app.configure('stage', 'production', function(){[m
[31m- *      // executed for stage and production[m
[31m- *    });[m
[31m- *[m
[31m- * @param {String} env...[m
[31m- * @param {Function} fn[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.configure = function(env, fn){[m
[31m-  var envs = 'all'[m
[31m-    , args = toArray(arguments);[m
[31m-  fn = args.pop();[m
[31m-  if (args.length) envs = args;[m
[31m-  if ('all' == envs || ~envs.indexOf(this.settings.env)) fn.call(this);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Delegate `.VERB(...)` calls to `.route(VERB, ...)`.[m
[31m- */[m
[31m-[m
[31m-methods.forEach(function(method){[m
[31m-  app[method] = function(path){[m
[31m-    if (1 == arguments.length) return this.routes.lookup(method, path);[m
[31m-    var args = [method].concat(toArray(arguments));[m
[31m-    if (!this.__usedRouter) this.use(this.router);[m
[31m-    return this.routes._route.apply(this.routes, args);[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Special-cased "all" method, applying the given route `path`,[m
[31m- * middleware, and callback to _every_ HTTP method.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @param {Function} ...[m
[31m- * @return {Server} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-app.all = function(path){[m
[31m-  var args = arguments;[m
[31m-  if (1 == args.length) return this.routes.lookup('all', path);[m
[31m-  methods.forEach(function(method){[m
[31m-    if ('all' == method || 'del' == method) return;[m
[31m-    app[method].apply(this, args);[m
[31m-  }, this);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-// del -> delete alias[m
[31m-[m
[31m-app.del = app.delete;[m
[31m-[m
[1mdiff --git a/node_modules/express/lib/https.js b/node_modules/express/lib/https.js[m
[1mdeleted file mode 100644[m
[1mindex 8a8c008..0000000[m
[1m--- a/node_modules/express/lib/https.js[m
[1m+++ /dev/null[m
[36m@@ -1,52 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - HTTPSServer[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var connect = require('connect')[m
[31m-  , HTTPServer = require('./http')[m
[31m-  , https = require('https');[m
[31m-[m
[31m-/**[m
[31m- * Expose `HTTPSServer`.[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = HTTPSServer;[m
[31m-[m
[31m-/**[m
[31m- * Server proto.[m
[31m- */[m
[31m-[m
[31m-var app = HTTPSServer.prototype;[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new `HTTPSServer` with the [m
[31m- * given `options`, and optional `middleware`.[m
[31m- *[m
[31m- * @param {Object} options[m
[31m- * @param {Array} middleware[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-function HTTPSServer(options, middleware){[m
[31m-  connect.HTTPSServer.call(this, options, []);[m
[31m-  this.init(middleware);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Inherit from `connect.HTTPSServer`.[m
[31m- */[m
[31m-[m
[31m-app.__proto__ = connect.HTTPSServer.prototype;[m
[31m-[m
[31m-// mixin HTTPServer methods[m
[31m-[m
[31m-Object.keys(HTTPServer.prototype).forEach(function(method){[m
[31m-  app[method] = HTTPServer.prototype[method];[m
[31m-});[m
[1mdiff --git a/node_modules/express/lib/request.js b/node_modules/express/lib/request.js[m
[1mdeleted file mode 100644[m
[1mindex 4138afe..0000000[m
[1m--- a/node_modules/express/lib/request.js[m
[1m+++ /dev/null[m
[36m@@ -1,357 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - request[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var http = require('http')[m
[31m-  , req = http.IncomingMessage.prototype[m
[31m-  , utils = require('./utils')[m
[31m-  , parse = require('url').parse[m
[31m-  , mime = require('mime');[m
[31m-[m
[31m-/**[m
[31m- * Default flash formatters.[m
[31m- *[m
[31m- * @type Object[m
[31m- */[m
[31m-[m
[31m-var flashFormatters = exports.flashFormatters = {[m
[31m-  s: function(val){[m
[31m-    return String(val);[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Return request header or optional default.[m
[31m- *[m
[31m- * The `Referrer` header field is special-cased,[m
[31m- * both `Referrer` and `Referer` will yield are[m
[31m- * interchangeable.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     req.header('Content-Type');[m
[31m- *     // => "text/plain"[m
[31m- *     [m
[31m- *     req.header('content-type');[m
[31m- *     // => "text/plain"[m
[31m- *     [m
[31m- *     req.header('Accept');[m
[31m- *     // => undefined[m
[31m- *     [m
[31m- *     req.header('Accept', 'text/html');[m
[31m- *     // => "text/html"[m
[31m- *[m
[31m- * @param {String} name[m
[31m- * @param {String} defaultValue[m
[31m- * @return {String} [m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.header = function(name, defaultValue){[m
[31m-  switch (name = name.toLowerCase()) {[m
[31m-    case 'referer':[m
[31m-    case 'referrer':[m
[31m-      return this.headers.referrer[m
[31m-        || this.headers.referer[m
[31m-        || defaultValue;[m
[31m-    default:[m
[31m-      return this.headers[name] || defaultValue;[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Get `field`'s `param` value, defaulting to ''.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     req.get('content-disposition', 'filename');[m
[31m- *     // => "something.png"[m
[31m- *[m
[31m- * @param {String} field[m
[31m- * @param {String} param[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.get = function(field, param){[m
[31m-  var val = this.header(field);[m
[31m-  if (!val) return '';[m
[31m-  var regexp = new RegExp(param + ' *= *(?:"([^"]+)"|([^;]+))', 'i');[m
[31m-  if (!regexp.exec(val)) return '';[m
[31m-  return RegExp.$1 || RegExp.$2;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Short-hand for `require('url').parse(req.url).pathname`.[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.__defineGetter__('path', function(){[m
[31m-  return parse(this.url).pathname;[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Check if the _Accept_ header is present, and includes the given `type`.[m
[31m- *[m
[31m- * When the _Accept_ header is not present `true` is returned. Otherwise[m
[31m- * the given `type` is matched by an exact match, and then subtypes. You[m
[31m- * may pass the subtype such as "html" which is then converted internally[m
[31m- * to "text/html" using the mime lookup table.[m
[31m- *[m
[31m- * Examples:[m
[31m- * [m
[31m- *     // Accept: text/html[m
[31m- *     req.accepts('html');[m
[31m- *     // => true[m
[31m- *[m
[31m- *     // Accept: text/*; application/json[m
[31m- *     req.accepts('html');[m
[31m- *     req.accepts('text/html');[m
[31m- *     req.accepts('text/plain');[m
[31m- *     req.accepts('application/json');[m
[31m- *     // => true[m
[31m- *[m
[31m- *     req.accepts('image/png');[m
[31m- *     req.accepts('png');[m
[31m- *     // => false[m
[31m- *[m
[31m- * @param {String} type[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.accepts = function(type){[m
[31m-  var accept = this.header('Accept');[m
[31m-[m
[31m-  // normalize extensions ".json" -> "json"[m
[31m-  if (type && '.' == type[0]) type = type.substr(1);[m
[31m-[m
[31m-  // when Accept does not exist, or contains '*/*' return true[m
[31m-  if (!accept || ~accept.indexOf('*/*')) {[m
[31m-    return true;[m
[31m-  } else if (type) {[m
[31m-    // allow "html" vs "text/html" etc[m
[31m-    if (!~type.indexOf('/')) type = mime.lookup(type);[m
[31m-[m
[31m-    // check if we have a direct match[m
[31m-    if (~accept.indexOf(type)) return true;[m
[31m-[m
[31m-    // check if we have type/*[m
[31m-    type = type.split('/')[0] + '/*';[m
[31m-    return !!~accept.indexOf(type);[m
[31m-  } else {[m
[31m-    return false;[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Return the value of param `name` when present or `defaultValue`.[m
[31m- *[m
[31m- *  - Checks route placeholders, ex: _/user/:id_[m
[31m- *  - Checks query string params, ex: ?id=12[m
[31m- *  - Checks urlencoded body params, ex: id=12[m
[31m- *[m
[31m- * To utilize urlencoded request bodies, `req.body`[m
[31m- * should be an object. This can be done by using[m
[31m- * the `connect.bodyParser` middleware.[m
[31m- *[m
[31m- * @param {String} name[m
[31m- * @param {Mixed} defaultValue[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.param = function(name, defaultValue){[m
[31m-  // route params like /user/:id[m
[31m-  if (this.params && this.params.hasOwnProperty(name) && undefined !== this.params[name]) {[m
[31m-    return this.params[name]; [m
[31m-  }[m
[31m-  // query string params[m
[31m-  if (undefined !== this.query[name]) {[m
[31m-    return this.query[name]; [m
[31m-  }[m
[31m-  // request body params via connect.bodyParser[m
[31m-  if (this.body && undefined !== this.body[name]) {[m
[31m-    return this.body[name];[m
[31m-  }[m
[31m-  return defaultValue;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Queue flash `msg` of the given `type`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *      req.flash('info', 'email sent');[m
[31m- *      req.flash('error', 'email delivery failed');[m
[31m- *      req.flash('info', 'email re-sent');[m
[31m- *      // => 2[m
[31m- *[m
[31m- *      req.flash('info');[m
[31m- *      // => ['email sent', 'email re-sent'][m
[31m- *[m
[31m- *      req.flash('info');[m
[31m- *      // => [][m
[31m- *[m
[31m- *      req.flash();[m
[31m- *      // => { error: ['email delivery failed'], info: [] }[m
[31m- *[m
[31m- * Formatting:[m
[31m- *[m
[31m- * Flash notifications also support arbitrary formatting support.[m
[31m- * For example you may pass variable arguments to `req.flash()`[m
[31m- * and use the %s specifier to be replaced by the associated argument:[m
[31m- *[m
[31m- *     req.flash('info', 'email has been sent to %s.', userName);[m
[31m- *[m
[31m- * To add custom formatters use the `exports.flashFormatters` object.[m
[31m- *[m
[31m- * @param {String} type[m
[31m- * @param {String} msg[m
[31m- * @return {Array|Object|Number}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.flash = function(type, msg){[m
[31m-  if (this.session === undefined) throw Error('req.flash() requires sessions');[m
[31m-  var msgs = this.session.flash = this.session.flash || {};[m
[31m-  if (type && msg) {[m
[31m-    var i = 2[m
[31m-      , args = arguments[m
[31m-      , formatters = this.app.flashFormatters || {};[m
[31m-    formatters.__proto__ = flashFormatters;[m
[31m-    msg = utils.miniMarkdown(msg);[m
[31m-    msg = msg.replace(/%([a-zA-Z])/g, function(_, format){[m
[31m-      var formatter = formatters[format];[m
[31m-      if (formatter) return formatter(utils.escape(args[i++]));[m
[31m-    });[m
[31m-    return (msgs[type] = msgs[type] || []).push(msg);[m
[31m-  } else if (type) {[m
[31m-    var arr = msgs[type];[m
[31m-    delete msgs[type];[m
[31m-    return arr || [];[m
[31m-  } else {[m
[31m-    this.session.flash = {};[m
[31m-    return msgs;[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Check if the incoming request contains the "Content-Type" [m
[31m- * header field, and it contains the give mime `type`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *      // With Content-Type: text/html; charset=utf-8[m
[31m- *      req.is('html');[m
[31m- *      req.is('text/html');[m
[31m- *      // => true[m
[31m- *     [m
[31m- *      // When Content-Type is application/json[m
[31m- *      req.is('json');[m
[31m- *      req.is('application/json');[m
[31m- *      // => true[m
[31m- *     [m
[31m- *      req.is('html');[m
[31m- *      // => false[m
[31m- * [m
[31m- * Ad-hoc callbacks can also be registered with Express, to perform[m
[31m- * assertions again the request, for example if we need an expressive[m
[31m- * way to check if our incoming request is an image, we can register "an image"[m
[31m- * callback:[m
[31m- * [m
[31m- *       app.is('an image', function(req){[m
[31m- *         return 0 == req.headers['content-type'].indexOf('image');[m
[31m- *       });[m
[31m- *       [m
[31m- *  Now within our route callbacks, we can use to to assert content types[m
[31m- *  such as "image/jpeg", "image/png", etc.[m
[31m- * [m
[31m- *      app.post('/image/upload', function(req, res, next){[m
[31m- *        if (req.is('an image')) {[m
[31m- *          // do something[m
[31m- *        } else {[m
[31m- *          next();[m
[31m- *        }[m
[31m- *      });[m
[31m- * [m
[31m- * @param {String} type[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.is = function(type){[m
[31m-  var fn = this.app.is(type);[m
[31m-  if (fn) return fn(this);[m
[31m-  var ct = this.headers['content-type'];[m
[31m-  if (!ct) return false;[m
[31m-  ct = ct.split(';')[0];[m
[31m-  if (!~type.indexOf('/')) type = mime.lookup(type);[m
[31m-  if (~type.indexOf('*')) {[m
[31m-    type = type.split('/');[m
[31m-    ct = ct.split('/');[m
[31m-    if ('*' == type[0] && type[1] == ct[1]) return true;[m
[31m-    if ('*' == type[1] && type[0] == ct[0]) return true;[m
[31m-    return false;[m
[31m-  }[m
[31m-  return !! ~ct.indexOf(type);[m
[31m-};[m
[31m-[m
[31m-// Callback for isXMLHttpRequest / xhr[m
[31m-[m
[31m-function isxhr() {[m
[31m-  return this.header('X-Requested-With', '').toLowerCase() === 'xmlhttprequest';[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Check if the request was an _XMLHttpRequest_.[m
[31m- *[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.__defineGetter__('isXMLHttpRequest', isxhr);[m
[31m-req.__defineGetter__('xhr', isxhr);[m
[31m-[m
[31m-/**[m
[31m- * Return the protocol string "http" or "https"[m
[31m- * when requested with TLS. When the "trust proxy" [m
[31m- * setting is enabled the "X-Forwarded-Proto" header[m
[31m- * field will be trusted. If you're running behind[m
[31m- * a reverse proxy that supplies https for you this[m
[31m- * may be enabled.[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.__defineGetter__('protocol', function(){[m
[31m-  var trustProxy = this.app.set('trust proxy');[m
[31m-  return this.connection.encrypted[m
[31m-    ? 'https'[m
[31m-    : trustProxy[m
[31m-      ? (this.header('X-Forwarded-Proto') || 'http')[m
[31m-      : 'http';[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Short-hand for:[m
[31m- *[m
[31m- *    req.protocol == 'https'[m
[31m- *[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-req.__defineGetter__('secure', function(){[m
[31m-  return 'https' == this.protocol;[m
[31m-});[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/lib/response.js b/node_modules/express/lib/response.js[m
[1mdeleted file mode 100644[m
[1mindex 0174950..0000000[m
[1m--- a/node_modules/express/lib/response.js[m
[1m+++ /dev/null[m
[36m@@ -1,459 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - response[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var fs = require('fs')[m
[31m-  , http = require('http')[m
[31m-  , path = require('path')[m
[31m-  , connect = require('connect')[m
[31m-  , utils = connect.utils[m
[31m-  , parseRange = require('./utils').parseRange[m
[31m-  , res = http.ServerResponse.prototype[m
[31m-  , send = connect.static.send[m
[31m-  , mime = require('mime')[m
[31m-  , basename = path.basename[m
[31m-  , join = path.join;[m
[31m-[m
[31m-/**[m
[31m- * Send a response with the given `body` and optional `headers` and `status` code.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     res.send();[m
[31m- *     res.send(new Buffer('wahoo'));[m
[31m- *     res.send({ some: 'json' });[m
[31m- *     res.send('<p>some html</p>');[m
[31m- *     res.send('Sorry, cant find that', 404);[m
[31m- *     res.send('text', { 'Content-Type': 'text/plain' }, 201);[m
[31m- *     res.send(404);[m
[31m- *[m
[31m- * @param {String|Object|Number|Buffer} body or status[m
[31m- * @param {Object|Number} headers or status[m
[31m- * @param {Number} status[m
[31m- * @return {ServerResponse}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.send = function(body, headers, status){[m
[31m-  // allow status as second arg[m
[31m-  if ('number' == typeof headers) {[m
[31m-    status = headers,[m
[31m-    headers = null;[m
[31m-  }[m
[31m-[m
[31m-  // default status[m
[31m-  status = status || this.statusCode;[m
[31m-[m
[31m-  // allow 0 args as 204[m
[31m-  if (!arguments.length || undefined === body) status = 204;[m
[31m-[m
[31m-  // determine content type[m
[31m-  switch (typeof body) {[m
[31m-    case 'number':[m
[31m-      if (!this.header('Content-Type')) {[m
[31m-        this.contentType('.txt');[m
[31m-      }[m
[31m-      body = http.STATUS_CODES[status = body];[m
[31m-      break;[m
[31m-    case 'string':[m
[31m-      if (!this.header('Content-Type')) {[m
[31m-        this.charset = this.charset || 'utf-8';[m
[31m-        this.contentType('.html');[m
[31m-      }[m
[31m-      break;[m
[31m-    case 'boolean':[m
[31m-    case 'object':[m
[31m-      if (Buffer.isBuffer(body)) {[m
[31m-        if (!this.header('Content-Type')) {[m
[31m-          this.contentType('.bin');[m
[31m-        }[m
[31m-      } else {[m
[31m-        return this.json(body, headers, status);[m
[31m-      }[m
[31m-      break;[m
[31m-  }[m
[31m-[m
[31m-  // populate Content-Length[m
[31m-  if (undefined !== body && !this.header('Content-Length')) {[m
[31m-    this.header('Content-Length', Buffer.isBuffer(body)[m
[31m-      ? body.length[m
[31m-      : Buffer.byteLength(body));[m
[31m-  }[m
[31m-[m
[31m-  // merge headers passed[m
[31m-  if (headers) {[m
[31m-    var fields = Object.keys(headers);[m
[31m-    for (var i = 0, len = fields.length; i < len; ++i) {[m
[31m-      var field = fields[i];[m
[31m-      this.header(field, headers[field]);[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  // strip irrelevant headers[m
[31m-  if (204 == status || 304 == status) {[m
[31m-    this.removeHeader('Content-Type');[m
[31m-    this.removeHeader('Content-Length');[m
[31m-    body = '';[m
[31m-  }[m
[31m-[m
[31m-  // respond[m
[31m-  this.statusCode = status;[m
[31m-  this.end('HEAD' == this.req.method ? null : body);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Send JSON response with `obj`, optional `headers`, and optional `status`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     res.json(null);[m
[31m- *     res.json({ user: 'tj' });[m
[31m- *     res.json('oh noes!', 500);[m
[31m- *     res.json('I dont have that', 404);[m
[31m- *[m
[31m- * @param {Mixed} obj[m
[31m- * @param {Object|Number} headers or status[m
[31m- * @param {Number} status[m
[31m- * @return {ServerResponse}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.json = function(obj, headers, status){[m
[31m-  var body = JSON.stringify(obj)[m
[31m-    , callback = this.req.query.callback[m
[31m-    , jsonp = this.app.enabled('jsonp callback');[m
[31m-[m
[31m-  this.charset = this.charset || 'utf-8';[m
[31m-  this.header('Content-Type', 'application/json');[m
[31m-[m
[31m-  if (callback && jsonp) {[m
[31m-    this.header('Content-Type', 'text/javascript');[m
[31m-    body = callback.replace(/[^\w$.]/g, '') + '(' + body + ');';[m
[31m-  }[m
[31m-[m
[31m-  return this.send(body, headers, status);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Set status `code`.[m
[31m- *[m
[31m- * @param {Number} code[m
[31m- * @return {ServerResponse}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.status = function(code){[m
[31m-  this.statusCode = code;[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Transfer the file at the given `path`. Automatically sets [m
[31m- * the _Content-Type_ response header field. `next()` is called[m
[31m- * when `path` is a directory, or when an error occurs.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `maxAge` defaulting to 0[m
[31m- *   - `root`   root directory for relative filenames[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @param {Object|Function} options or fn[m
[31m- * @param {Function} fn[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.sendfile = function(path, options, fn){[m
[31m-  var next = this.req.next;[m
[31m-  options = options || {};[m
[31m-[m
[31m-  // support function as second arg[m
[31m-  if ('function' == typeof options) {[m
[31m-    fn = options;[m
[31m-    options = {};[m
[31m-  }[m
[31m-[m
[31m-  options.path = encodeURIComponent(path);[m
[31m-  options.callback = fn;[m
[31m-  send(this.req, this, next, options);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Set _Content-Type_ response header passed through `mime.lookup()`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     var filename = 'path/to/image.png';[m
[31m- *     res.contentType(filename);[m
[31m- *     // res.headers['Content-Type'] is now "image/png"[m
[31m- *[m
[31m- *     res.contentType('.html');[m
[31m- *     res.contentType('html');[m
[31m- *     res.contentType('json');[m
[31m- *     res.contentType('png');[m
[31m- *[m
[31m- * @param {String} type[m
[31m- * @return {String} the resolved mime type[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.contentType = function(type){[m
[31m-  return this.header('Content-Type', mime.lookup(type));[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Set _Content-Disposition_ header to _attachment_ with optional `filename`.[m
[31m- *[m
[31m- * @param {String} filename[m
[31m- * @return {ServerResponse}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.attachment = function(filename){[m
[31m-  if (filename) this.contentType(filename);[m
[31m-  this.header('Content-Disposition', filename[m
[31m-    ? 'attachment; filename="' + basename(filename) + '"'[m
[31m-    : 'attachment');[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Transfer the file at the given `path`, with optional [m
[31m- * `filename` as an attachment and optional callback `fn(err)`,[m
[31m- * and optional `fn2(err)` which is invoked when an error has[m
[31m- * occurred after header has been sent.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @param {String|Function} filename or fn[m
[31m- * @param {Function} fn[m
[31m- * @param {Function} fn2[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.download = function(path, filename, fn, fn2){[m
[31m-  var self = this;[m
[31m-[m
[31m-  // support callback as second arg[m
[31m-  if ('function' == typeof filename) {[m
[31m-    fn2 = fn;[m
[31m-    fn = filename;[m
[31m-    filename = null;[m
[31m-  }[m
[31m-[m
[31m-  // transfer the file[m
[31m-  this.attachment(filename || path).sendfile(path, function(err){[m
[31m-    var sentHeader = self._header;[m
[31m-    if (err) {[m
[31m-      if (!sentHeader) self.removeHeader('Content-Disposition');[m
[31m-      if (sentHeader) {[m
[31m-        fn2 && fn2(err);[m
[31m-      } else if (fn) {[m
[31m-        fn(err);[m
[31m-      } else {[m
[31m-        self.req.next(err);[m
[31m-      }[m
[31m-    } else if (fn) {[m
[31m-      fn();[m
[31m-    }[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Set or get response header `name` with optional `val`.[m
[31m- *[m
[31m- * @param {String} name[m
[31m- * @param {String} val[m
[31m- * @return {ServerResponse} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.header = function(name, val){[m
[31m-  if (1 == arguments.length) return this.getHeader(name);[m
[31m-  this.setHeader(name, val);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Clear cookie `name`.[m
[31m- *[m
[31m- * @param {String} name[m
[31m- * @param {Object} options[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.clearCookie = function(name, options){[m
[31m-  var opts = { expires: new Date(1) };[m
[31m-  this.cookie(name, '', options[m
[31m-    ? utils.merge(options, opts)[m
[31m-    : opts);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Set cookie `name` to `val`, with the given `options`.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *    - `maxAge`   max-age in milliseconds, converted to `expires`[m
[31m- *    - `path`     defaults to the "basepath" setting which is typically "/"[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *    // "Remember Me" for 15 minutes[m
[31m- *    res.cookie('rememberme', '1', { expires: new Date(Date.now() + 900000), httpOnly: true });[m
[31m- *[m
[31m- *    // save as above[m
[31m- *    res.cookie('rememberme', '1', { maxAge: 900000, httpOnly: true })[m
[31m- *[m
[31m- * @param {String} name[m
[31m- * @param {String} val[m
[31m- * @param {Options} options[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.cookie = function(name, val, options){[m
[31m-  options = options || {};[m
[31m-  if ('maxAge' in options) options.expires = new Date(Date.now() + options.maxAge);[m
[31m-  if (undefined === options.path) options.path = this.app.set('basepath');[m
[31m-  var cookie = utils.serializeCookie(name, val, options);[m
[31m-  this.header('Set-Cookie', cookie);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Redirect to the given `url` with optional response `status`[m
[31m- * defauling to 302.[m
[31m- *[m
[31m- * The given `url` can also be the name of a mapped url, for[m
[31m- * example by default express supports "back" which redirects[m
[31m- * to the _Referrer_ or _Referer_ headers or the application's[m
[31m- * "basepath" setting. Express also supports "basepath" out of the box,[m
[31m- * which can be set via `app.set('basepath', '/blog');`, and defaults[m
[31m- * to '/'.[m
[31m- *[m
[31m- * Redirect Mapping:[m
[31m- * [m
[31m- *  To extend the redirect mapping capabilities that Express provides,[m
[31m- *  we may use the `app.redirect()` method:[m
[31m- * [m
[31m- *     app.redirect('google', 'http://google.com');[m
[31m- * [m
[31m- *  Now in a route we may call:[m
[31m- *[m
[31m- *     res.redirect('google');[m
[31m- *[m
[31m- *  We may also map dynamic redirects:[m
[31m- *[m
[31m- *      app.redirect('comments', function(req, res){[m
[31m- *          return '/post/' + req.params.id + '/comments';[m
[31m- *      });[m
[31m- *[m
[31m- *  So now we may do the following, and the redirect will dynamically adjust to[m
[31m- *  the context of the request. If we called this route with _GET /post/12_ our[m
[31m- *  redirect _Location_ would be _/post/12/comments_.[m
[31m- *[m
[31m- *      app.get('/post/:id', function(req, res){[m
[31m- *        res.redirect('comments');[m
[31m- *      });[m
[31m- *[m
[31m- *  Unless an absolute `url` is given, the app's mount-point[m
[31m- *  will be respected. For example if we redirect to `/posts`,[m
[31m- *  and our app is mounted at `/blog` we will redirect to `/blog/posts`.[m
[31m- *[m
[31m- * @param {String} url[m
[31m- * @param {Number} code[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.redirect = function(url, status){[m
[31m-  var app = this.app[m
[31m-    , req = this.req[m
[31m-    , base = app.set('basepath') || app.route[m
[31m-    , status = status || 302[m
[31m-    , head = 'HEAD' == req.method[m
[31m-    , body;[m
[31m-[m
[31m-  // Setup redirect map[m
[31m-  var map = {[m
[31m-      back: req.header('Referrer', base)[m
[31m-    , home: base[m
[31m-  };[m
[31m-[m
[31m-  // Support custom redirect map[m
[31m-  map.__proto__ = app.redirects;[m
[31m-[m
[31m-  // Attempt mapped redirect[m
[31m-  var mapped = 'function' == typeof map[url][m
[31m-    ? map[url](req, this)[m
[31m-    : map[url];[m
[31m-[m
[31m-  // Perform redirect[m
[31m-  url = mapped || url;[m
[31m-[m
[31m-  // Relative[m
[31m-  if (!~url.indexOf('://')) {[m
[31m-    // Respect mount-point[m
[31m-    if ('/' != base && 0 != url.indexOf(base)) url = base + url;[m
[31m-[m
[31m-    // Absolute[m
[31m-    var host = req.headers.host;[m
[31m-    url = req.protocol + '://' + host + url;[m
[31m-  }[m
[31m-[m
[31m-  // Support text/{plain,html} by default[m
[31m-  if (req.accepts('html')) {[m
[31m-    body = '<p>' + http.STATUS_CODES[status] + '. Redirecting to <a href="' + url + '">' + url + '</a></p>';[m
[31m-    this.header('Content-Type', 'text/html');[m
[31m-  } else {[m
[31m-    body = http.STATUS_CODES[status] + '. Redirecting to ' + url;[m
[31m-    this.header('Content-Type', 'text/plain');[m
[31m-  }[m
[31m-[m
[31m-  // Respond[m
[31m-  this.statusCode = status;[m
[31m-  this.header('Location', url);[m
[31m-  this.end(head ? null : body);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Assign the view local variable `name` to `val` or return the[m
[31m- * local previously assigned to `name`.[m
[31m- *[m
[31m- * @param {String} name[m
[31m- * @param {Mixed} val[m
[31m- * @return {Mixed} val[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.local = function(name, val){[m
[31m-  this._locals = this._locals || {};[m
[31m-  return undefined === val[m
[31m-    ? this._locals[name][m
[31m-    : this._locals[name] = val;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Assign several locals with the given `obj`,[m
[31m- * or return the locals.[m
[31m- *[m
[31m- * @param {Object} obj[m
[31m- * @return {Object|Undefined}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.locals =[m
[31m-res.helpers = function(obj){[m
[31m-  if (obj) {[m
[31m-    for (var key in obj) {[m
[31m-      this.local(key, obj[key]);[m
[31m-    }[m
[31m-  } else {[m
[31m-    return this._locals;[m
[31m-  }[m
[31m-};[m
[1mdiff --git a/node_modules/express/lib/router/collection.js b/node_modules/express/lib/router/collection.js[m
[1mdeleted file mode 100644[m
[1mindex 991a9a2..0000000[m
[1m--- a/node_modules/express/lib/router/collection.js[m
[1m+++ /dev/null[m
[36m@@ -1,53 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - router - Collection[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Expose `Collection`.[m
[31m- */[m
[31m-[m
[31m-module.exports = Collection;[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new route `Collection`[m
[31m- * with the given `router`.[m
[31m- * [m
[31m- * @param {Router} router[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function Collection(router) {[m
[31m-  Array.apply(this, arguments);[m
[31m-  this.router = router;[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Inherit from `Array.prototype`.[m
[31m- */[m
[31m-[m
[31m-Collection.prototype.__proto__ = Array.prototype;[m
[31m-[m
[31m-/**[m
[31m- * Remove the routes in this collection.[m
[31m- *[m
[31m- * @return {Collection} of routes removed[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Collection.prototype.remove = function(){[m
[31m-  var router = this.router[m
[31m-    , len = this.length[m
[31m-    , ret = new Collection(this.router);[m
[31m-[m
[31m-  for (var i = 0; i < len; ++i) {[m
[31m-    if (router.remove(this[i])) {[m
[31m-      ret.push(this[i]);[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  return ret;[m
[31m-};[m
[31m-[m
[1mdiff --git a/node_modules/express/lib/router/index.js b/node_modules/express/lib/router/index.js[m
[1mdeleted file mode 100644[m
[1mindex ff1498b..0000000[m
[1m--- a/node_modules/express/lib/router/index.js[m
[1m+++ /dev/null[m
[36m@@ -1,398 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - Router[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var Route = require('./route')[m
[31m-  , Collection = require('./collection')[m
[31m-  , utils = require('../utils')[m
[31m-  , parse = require('url').parse[m
[31m-  , toArray = utils.toArray;[m
[31m-[m
[31m-/**[m
[31m- * Expose `Router` constructor.[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = Router;[m
[31m-[m
[31m-/**[m
[31m- * Expose HTTP methods.[m
[31m- */[m
[31m-[m
[31m-var methods = exports.methods = require('./methods');[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new `Router` with the given `app`.[m
[31m- * [m
[31m- * @param {express.HTTPServer} app[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function Router(app) {[m
[31m-  var self = this;[m
[31m-  this.app = app;[m
[31m-  this.routes = {};[m
[31m-  this.params = {};[m
[31m-  this._params = [];[m
[31m-[m
[31m-  this.middleware = function(req, res, next){[m
[31m-    self._dispatch(req, res, next);[m
[31m-  };[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Register a param callback `fn` for the given `name`.[m
[31m- *[m
[31m- * @param {String|Function} name[m
[31m- * @param {Function} fn[m
[31m- * @return {Router} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Router.prototype.param = function(name, fn){[m
[31m-  // param logic[m
[31m-  if ('function' == typeof name) {[m
[31m-    this._params.push(name);[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  // apply param functions[m
[31m-  var params = this._params[m
[31m-    , len = params.length[m
[31m-    , ret;[m
[31m-[m
[31m-  for (var i = 0; i < len; ++i) {[m
[31m-    if (ret = params[i](name, fn)) {[m
[31m-      fn = ret;[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  // ensure we end up with a[m
[31m-  // middleware function[m
[31m-  if ('function' != typeof fn) {[m
[31m-    throw new Error('invalid param() call for ' + name + ', got ' + fn);[m
[31m-  }[m
[31m-[m
[31m-  (this.params[name] = this.params[name] || []).push(fn);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Return a `Collection` of all routes defined.[m
[31m- *[m
[31m- * @return {Collection}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Router.prototype.all = function(){[m
[31m-  return this.find(function(){[m
[31m-    return true;[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Remove the given `route`, returns[m
[31m- * a bool indicating if the route was present[m
[31m- * or not.[m
[31m- *[m
[31m- * @param {Route} route[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Router.prototype.remove = function(route){[m
[31m-  var routes = this.routes[route.method][m
[31m-    , len = routes.length;[m
[31m-[m
[31m-  for (var i = 0; i < len; ++i) {[m
[31m-    if (route == routes[i]) {[m
[31m-      routes.splice(i, 1);[m
[31m-      return true;[m
[31m-    }[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Return routes with route paths matching `path`.[m
[31m- *[m
[31m- * @param {String} method[m
[31m- * @param {String} path[m
[31m- * @return {Collection}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Router.prototype.lookup = function(method, path){[m
[31m-  return this.find(function(route){[m
[31m-    return path == route.path[m
[31m-      && (route.method == method[m
[31m-      || method == 'all');[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Return routes with regexps that match the given `url`.[m
[31m- *[m
[31m- * @param {String} method[m
[31m- * @param {String} url[m
[31m- * @return {Collection}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Router.prototype.match = function(method, url){[m
[31m-  return this.find(function(route){[m
[31m-    return route.match(url)[m
[31m-      && (route.method == method[m
[31m-      || method == 'all');[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Find routes based on the return value of `fn`[m
[31m- * which is invoked once per route.[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @return {Collection}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Router.prototype.find = function(fn){[m
[31m-  var len = methods.length[m
[31m-    , ret = new Collection(this)[m
[31m-    , method[m
[31m-    , routes[m
[31m-    , route;[m
[31m-[m
[31m-  for (var i = 0; i < len; ++i) {[m
[31m-    method = methods[i];[m
[31m-    routes = this.routes[method];[m
[31m-    if (!routes) continue;[m
[31m-    for (var j = 0, jlen = routes.length; j < jlen; ++j) {[m
[31m-      route = routes[j];[m
[31m-      if (fn(route)) ret.push(route);[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  return ret;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Route dispatcher aka the route "middleware".[m
[31m- *[m
[31m- * @param {IncomingMessage} req[m
[31m- * @param {ServerResponse} res[m
[31m- * @param {Function} next[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Router.prototype._dispatch = function(req, res, next){[m
[31m-  var params = this.params[m
[31m-    , self = this;[m
[31m-[m
[31m-  // route dispatch[m
[31m-  (function pass(i, err){[m
[31m-    var paramCallbacks[m
[31m-      , paramIndex = 0[m
[31m-      , paramVal[m
[31m-      , route[m
[31m-      , keys[m
[31m-      , key[m
[31m-      , ret;[m
[31m-[m
[31m-    // match next route[m
[31m-    function nextRoute(err) {[m
[31m-      pass(req._route_index + 1, err);[m
[31m-    }[m
[31m-[m
[31m-    // match route[m
[31m-    req.route = route = self._match(req, i);[m
[31m-[m
[31m-    // implied OPTIONS[m
[31m-    if (!route && 'OPTIONS' == req.method) return self._options(req, res);[m
[31m-[m
[31m-    // no route[m
[31m-    if (!route) return next(err);[m
[31m-[m
[31m-    // we have a route[m
[31m-    // start at param 0[m
[31m-    req.params = route.params;[m
[31m-    keys = route.keys;[m
[31m-    i = 0;[m
[31m-[m
[31m-    // param callbacks[m
[31m-    function param(err) {[m
[31m-      paramIndex = 0;[m
[31m-      key = keys[i++];[m
[31m-      paramVal = key && req.params[key.name];[m
[31m-      paramCallbacks = key && params[key.name];[m
[31m-[m
[31m-      try {[m
[31m-        if ('route' == err) {[m
[31m-          nextRoute();[m
[31m-        } else if (err) {[m
[31m-          i = 0;[m
[31m-          callbacks(err);[m
[31m-        } else if (paramCallbacks && undefined !== paramVal) {[m
[31m-          paramCallback();[m
[31m-        } else if (key) {[m
[31m-          param();[m
[31m-        } else {[m
[31m-          i = 0;[m
[31m-          callbacks();[m
[31m-        }[m
[31m-      } catch (err) {[m
[31m-        param(err);[m
[31m-      }[m
[31m-    };[m
[31m-[m
[31m-    param(err);[m
[31m-    [m
[31m-    // single param callbacks[m
[31m-    function paramCallback(err) {[m
[31m-      var fn = paramCallbacks[paramIndex++];[m
[31m-      if (err || !fn) return param(err);[m
[31m-      fn(req, res, paramCallback, paramVal, key.name);[m
[31m-    }[m
[31m-[m
[31m-    // invoke route callbacks[m
[31m-    function callbacks(err) {[m
[31m-      var fn = route.callbacks[i++];[m
[31m-      try {[m
[31m-        if ('route' == err) {[m
[31m-          nextRoute();[m
[31m-        } else if (err && fn) {[m
[31m-          if (fn.length < 4) return callbacks(err);[m
[31m-          fn(err, req, res, callbacks);[m
[31m-        } else if (fn) {[m
[31m-          fn(req, res, callbacks);[m
[31m-        } else {[m
[31m-          nextRoute(err);[m
[31m-        }[m
[31m-      } catch (err) {[m
[31m-        callbacks(err);[m
[31m-      }[m
[31m-    }[m
[31m-  })(0);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Respond to __OPTIONS__ method.[m
[31m- *[m
[31m- * @param {IncomingMessage} req[m
[31m- * @param {ServerResponse} res[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Router.prototype._options = function(req, res){[m
[31m-  var path = parse(req.url).pathname[m
[31m-    , body = this._optionsFor(path).join(',');[m
[31m-  res.send(body, { Allow: body });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Return an array of HTTP verbs or "options" for `path`.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @return {Array}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Router.prototype._optionsFor = function(path){[m
[31m-  var self = this;[m
[31m-  return methods.filter(function(method){[m
[31m-    var routes = self.routes[method];[m
[31m-    if (!routes || 'options' == method) return;[m
[31m-    for (var i = 0, len = routes.length; i < len; ++i) {[m
[31m-      if (routes[i].match(path)) return true;[m
[31m-    }[m
[31m-  }).map(function(method){[m
[31m-    return method.toUpperCase();[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Attempt to match a route for `req`[m
[31m- * starting from offset `i`.[m
[31m- *[m
[31m- * @param {IncomingMessage} req[m
[31m- * @param {Number} i[m
[31m- * @return {Route}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Router.prototype._match = function(req, i){[m
[31m-  var method = req.method.toLowerCase()[m
[31m-    , url = parse(req.url)[m
[31m-    , path = url.pathname[m
[31m-    , routes = this.routes[m
[31m-    , captures[m
[31m-    , route[m
[31m-    , keys;[m
[31m-[m
[31m-  // pass HEAD to GET routes[m
[31m-  if ('head' == method) method = 'get';[m
[31m-[m
[31m-  // routes for this method[m
[31m-  if (routes = routes[method]) {[m
[31m-[m
[31m-    // matching routes[m
[31m-    for (var len = routes.length; i < len; ++i) {[m
[31m-      route = routes[i];[m
[31m-      if (captures = route.match(path)) {[m
[31m-        keys = route.keys;[m
[31m-        route.params = [];[m
[31m-[m
[31m-        // params from capture groups[m
[31m-        for (var j = 1, jlen = captures.length; j < jlen; ++j) {[m
[31m-          var key = keys[j-1][m
[31m-            , val = 'string' == typeof captures[j][m
[31m-              ? decodeURIComponent(captures[j])[m
[31m-              : captures[j];[m
[31m-          if (key) {[m
[31m-            route.params[key.name] = val;[m
[31m-          } else {[m
[31m-            route.params.push(val);[m
[31m-          }[m
[31m-        }[m
[31m-[m
[31m-        // all done[m
[31m-        req._route_index = i;[m
[31m-        return route;[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Route `method`, `path`, and one or more callbacks.[m
[31m- *[m
[31m- * @param {String} method[m
[31m- * @param {String} path[m
[31m- * @param {Function} callback...[m
[31m- * @return {Router} for chaining[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Router.prototype._route = function(method, path, callbacks){[m
[31m-  var app = this.app[m
[31m-    , callbacks = utils.flatten(toArray(arguments, 2));[m
[31m-[m
[31m-  // ensure path was given[m
[31m-  if (!path) throw new Error('app.' + method + '() requires a path');[m
[31m-[m
[31m-  // create the route[m
[31m-  var route = new Route(method, path, callbacks, {[m
[31m-      sensitive: app.enabled('case sensitive routes')[m
[31m-    , strict: app.enabled('strict routing')[m
[31m-  });[m
[31m-[m
[31m-  // add it[m
[31m-  (this.routes[method] = this.routes[method] || [])[m
[31m-    .push(route);[m
[31m-  return this;[m
[31m-};[m
[1mdiff --git a/node_modules/express/lib/router/methods.js b/node_modules/express/lib/router/methods.js[m
[1mdeleted file mode 100644[m
[1mindex 71a969a..0000000[m
[1m--- a/node_modules/express/lib/router/methods.js[m
[1m+++ /dev/null[m
[36m@@ -1,79 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - router - methods[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Hypertext Transfer Protocol -- HTTP/1.1 [m
[31m- * http://www.ietf.org/rfc/rfc2616.txt[m
[31m- */[m
[31m-[m
[31m-var RFC2616 = ['OPTIONS', 'GET', 'POST', 'PUT', 'DELETE', 'TRACE', 'CONNECT'];[m
[31m-[m
[31m-/**[m
[31m- * HTTP Extensions for Distributed Authoring -- WEBDAV[m
[31m- * http://www.ietf.org/rfc/rfc2518.txt[m
[31m- */[m
[31m-[m
[31m-var RFC2518 = ['PROPFIND', 'PROPPATCH', 'MKCOL', 'COPY', 'MOVE', 'LOCK', 'UNLOCK'];[m
[31m-[m
[31m-/**[m
[31m- * Versioning Extensions to WebDAV [m
[31m- * http://www.ietf.org/rfc/rfc3253.txt[m
[31m- */[m
[31m-[m
[31m-var RFC3253 = ['VERSION-CONTROL', 'REPORT', 'CHECKOUT', 'CHECKIN', 'UNCHECKOUT', 'MKWORKSPACE', 'UPDATE', 'LABEL', 'MERGE', 'BASELINE-CONTROL', 'MKACTIVITY'];[m
[31m-[m
[31m-/**[m
[31m- * Ordered Collections Protocol (WebDAV) [m
[31m- * http://www.ietf.org/rfc/rfc3648.txt[m
[31m- */[m
[31m-[m
[31m-var RFC3648 = ['ORDERPATCH'];[m
[31m-[m
[31m-/**[m
[31m- * Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol [m
[31m- * http://www.ietf.org/rfc/rfc3744.txt[m
[31m- */[m
[31m-[m
[31m-var RFC3744 = ['ACL'];[m
[31m-[m
[31m-/**[m
[31m- * Web Distributed Authoring and Versioning (WebDAV) SEARCH[m
[31m- * http://www.ietf.org/rfc/rfc5323.txt[m
[31m- */[m
[31m-[m
[31m-var RFC5323 = ['SEARCH'];[m
[31m-[m
[31m-/**[m
[31m- * PATCH Method for HTTP [m
[31m- * http://www.ietf.org/rfc/rfc5789.txt[m
[31m- */[m
[31m-[m
[31m-var RFC5789 = ['PATCH'];[m
[31m-[m
[31m-/**[m
[31m- * PURGE Method for caching reverse-proxy[m
[31m- * http://wiki.squid-cache.org/SquidFaq/OperatingSquid#How_can_I_purge_an_object_from_my_cache.3F[m
[31m- * https://www.varnish-cache.org/docs/trunk/tutorial/purging.html[m
[31m- */[m
[31m-[m
[31m-var CACHE_PURGE = ['PURGE'];[m
[31m-[m
[31m-/**[m
[31m- * Expose the methods.[m
[31m- */[m
[31m-[m
[31m-module.exports = [].concat([m
[31m-    RFC2616[m
[31m-  , RFC2518[m
[31m-  , RFC3253[m
[31m-  , RFC3648[m
[31m-  , RFC3744[m
[31m-  , RFC5323[m
[31m-  , RFC5789[m
[31m-  , CACHE_PURGE).map(function(method){[m
[31m-    return method.toLowerCase();[m
[31m-  });[m
[1mdiff --git a/node_modules/express/lib/router/route.js b/node_modules/express/lib/router/route.js[m
[1mdeleted file mode 100644[m
[1mindex 7f2965c..0000000[m
[1m--- a/node_modules/express/lib/router/route.js[m
[1m+++ /dev/null[m
[36m@@ -1,88 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - router - Route[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Expose `Route`.[m
[31m- */[m
[31m-[m
[31m-module.exports = Route;[m
[31m-[m
[31m-/**[m
[31m- * Initialize `Route` with the given HTTP `method`, `path`,[m
[31m- * and an array of `callbacks` and `options`.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `sensitive`    enable case-sensitive routes[m
[31m- *   - `strict`       enable strict matching for trailing slashes[m
[31m- *[m
[31m- * @param {String} method[m
[31m- * @param {String} path[m
[31m- * @param {Array} callbacks[m
[31m- * @param {Object} options.[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function Route(method, path, callbacks, options) {[m
[31m-  options = options || {};[m
[31m-  this.path = path;[m
[31m-  this.method = method;[m
[31m-  this.callbacks = callbacks;[m
[31m-  this.regexp = normalize(path[m
[31m-    , this.keys = [][m
[31m-    , options.sensitive[m
[31m-    , options.strict);[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Check if this route matches `path` and return captures made.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @return {Array}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Route.prototype.match = function(path){[m
[31m-  return this.regexp.exec(path);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Normalize the given path string,[m
[31m- * returning a regular expression.[m
[31m- *[m
[31m- * An empty array should be passed,[m
[31m- * which will contain the placeholder[m
[31m- * key names. For example "/user/:id" will[m
[31m- * then contain ["id"].[m
[31m- *[m
[31m- * @param  {String|RegExp} path[m
[31m- * @param  {Array} keys[m
[31m- * @param  {Boolean} sensitive[m
[31m- * @param  {Boolean} strict[m
[31m- * @return {RegExp}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function normalize(path, keys, sensitive, strict) {[m
[31m-  if (path instanceof RegExp) return path;[m
[31m-  path = path[m
[31m-    .concat(strict ? '' : '/?')[m
[31m-    .replace(/\/\(/g, '(?:/')[m
[31m-    .replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g, function(_, slash, format, key, capture, optional){[m
[31m-      keys.push({ name: key, optional: !! optional });[m
[31m-      slash = slash || '';[m
[31m-      return ''[m
[31m-        + (optional ? '' : slash)[m
[31m-        + '(?:'[m
[31m-        + (optional ? slash : '')[m
[31m-        + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')'[m
[31m-        + (optional || '');[m
[31m-    })[m
[31m-    .replace(/([\/.])/g, '\\$1')[m
[31m-    .replace(/\*/g, '(.*)');[m
[31m-  return new RegExp('^' + path + '$', sensitive ? '' : 'i');[m
[31m-}[m
[1mdiff --git a/node_modules/express/lib/utils.js b/node_modules/express/lib/utils.js[m
[1mdeleted file mode 100644[m
[1mindex d579f7c..0000000[m
[1m--- a/node_modules/express/lib/utils.js[m
[1m+++ /dev/null[m
[36m@@ -1,152 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - Utils[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Check if `path` looks absolute.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @return {Boolean}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.isAbsolute = function(path){[m
[31m-  if ('/' == path[0]) return true;[m
[31m-  if (':' == path[1] && '\\' == path[2]) return true;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Merge object `b` with `a` giving precedence to[m
[31m- * values in object `a`.[m
[31m- *[m
[31m- * @param {Object} a[m
[31m- * @param {Object} b[m
[31m- * @return {Object} a[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.union = function(a, b){[m
[31m-  if (a && b) {[m
[31m-    var keys = Object.keys(b)[m
[31m-      , len = keys.length[m
[31m-      , key;[m
[31m-    for (var i = 0; i < len; ++i) {[m
[31m-      key = keys[i];[m
[31m-      if (!a.hasOwnProperty(key)) {[m
[31m-        a[key] = b[key];[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-  return a;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Flatten the given `arr`.[m
[31m- *[m
[31m- * @param {Array} arr[m
[31m- * @return {Array}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.flatten = function(arr, ret){[m
[31m-  var ret = ret || [][m
[31m-    , len = arr.length;[m
[31m-  for (var i = 0; i < len; ++i) {[m
[31m-    if (Array.isArray(arr[i])) {[m
[31m-      exports.flatten(arr[i], ret);[m
[31m-    } else {[m
[31m-      ret.push(arr[i]);[m
[31m-    }[m
[31m-  }[m
[31m-  return ret;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Parse mini markdown implementation.[m
[31m- * The following conversions are supported,[m
[31m- * primarily for the "flash" middleware:[m
[31m- *[m
[31m- *    _foo_ or *foo* become <em>foo</em>[m
[31m- *    __foo__ or **foo** become <strong>foo</strong>[m
[31m- *    [A](B) becomes <a href="B">A</a>[m
[31m- *[m
[31m- * @param {String} str[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.miniMarkdown = function(str){[m
[31m-  return String(str)[m
[31m-    .replace(/(__|\*\*)(.*?)\1/g, '<strong>$2</strong>')[m
[31m-    .replace(/(_|\*)(.*?)\1/g, '<em>$2</em>')[m
[31m-    .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>');[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Escape special characters in the given string of html.[m
[31m- *[m
[31m- * @param  {String} html[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.escape = function(html) {[m
[31m-  return String(html)[m
[31m-    .replace(/&/g, '&amp;')[m
[31m-    .replace(/"/g, '&quot;')[m
[31m-    .replace(/</g, '&lt;')[m
[31m-    .replace(/>/g, '&gt;');[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Parse "Range" header `str` relative to the given file `size`.[m
[31m- *[m
[31m- * @param {Number} size[m
[31m- * @param {String} str[m
[31m- * @return {Array}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.parseRange = function(size, str){[m
[31m-  var valid = true;[m
[31m-  var arr = str.substr(6).split(',').map(function(range){[m
[31m-    var range = range.split('-')[m
[31m-      , start = parseInt(range[0], 10)[m
[31m-      , end = parseInt(range[1], 10);[m
[31m-[m
[31m-    // -500[m
[31m-    if (isNaN(start)) {[m
[31m-      start = size - end;[m
[31m-      end = size - 1;[m
[31m-    // 500-[m
[31m-    } else if (isNaN(end)) {[m
[31m-      end = size - 1;[m
[31m-    }[m
[31m-[m
[31m-    // Invalid[m
[31m-    if (isNaN(start) || isNaN(end) || start > end) valid = false;[m
[31m-[m
[31m-    return { start: start, end: end };[m
[31m-  });[m
[31m-  return valid ? arr : undefined;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Fast alternative to `Array.prototype.slice.call()`.[m
[31m- *[m
[31m- * @param {Arguments} args[m
[31m- * @param {Number} n[m
[31m- * @return {Array}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.toArray = function(args, i){[m
[31m-  var arr = [][m
[31m-    , len = args.length[m
[31m-    , i = i || 0;[m
[31m-  for (; i < len; ++i) arr.push(args[i]);[m
[31m-  return arr;[m
[31m-};[m
[1mdiff --git a/node_modules/express/lib/view.js b/node_modules/express/lib/view.js[m
[1mdeleted file mode 100644[m
[1mindex 5258249..0000000[m
[1m--- a/node_modules/express/lib/view.js[m
[1m+++ /dev/null[m
[36m@@ -1,460 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - view[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var path = require('path')[m
[31m-  , extname = path.extname[m
[31m-  , dirname = path.dirname[m
[31m-  , basename = path.basename[m
[31m-  , utils = require('connect').utils[m
[31m-  , View = require('./view/view')[m
[31m-  , partial = require('./view/partial')[m
[31m-  , union = require('./utils').union[m
[31m-  , merge = utils.merge[m
[31m-  , http = require('http')[m
[31m-  , res = http.ServerResponse.prototype;[m
[31m-[m
[31m-/**[m
[31m- * Expose constructors.[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = View;[m
[31m-[m
[31m-/**[m
[31m- * Export template engine registrar.[m
[31m- */[m
[31m-[m
[31m-exports.register = View.register;[m
[31m-[m
[31m-/**[m
[31m- * Lookup and compile `view` with cache support by supplying[m
[31m- * both the `cache` object and `cid` string,[m
[31m- * followed by `options` passed to `exports.lookup()`.[m
[31m- *[m
[31m- * @param {String} view[m
[31m- * @param {Object} cache[m
[31m- * @param {Object} cid[m
[31m- * @param {Object} options[m
[31m- * @return {View}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.compile = function(view, cache, cid, options){[m
[31m-  if (cache && cid && cache[cid]){[m
[31m-    options.filename = cache[cid].path;[m
[31m-    return cache[cid];[m
[31m-  }[m
[31m-[m
[31m-  // lookup[m
[31m-  view = exports.lookup(view, options);[m
[31m-[m
[31m-  // hints[m
[31m-  if (!view.exists) {[m
[31m-    if (options.hint) hintAtViewPaths(view.original, options);[m
[31m-    var err = new Error('failed to locate view "' + view.original.view + '"');[m
[31m-    err.view = view.original;[m
[31m-    throw err;[m
[31m-  }[m
[31m-[m
[31m-  // compile[m
[31m-  options.filename = view.path;[m
[31m-  view.fn = view.templateEngine.compile(view.contents, options);[m
[31m-  cache[cid] = view;[m
[31m-[m
[31m-  return view;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Lookup `view`, returning an instanceof `View`.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `root` root directory path[m
[31m- *   - `defaultEngine` default template engine[m
[31m- *   - `parentView` parent `View` object[m
[31m- *   - `cache` cache object[m
[31m- *   - `cacheid` optional cache id[m
[31m- *[m
[31m- * Lookup:[m
[31m- *[m
[31m- *   - partial `_<name>`[m
[31m- *   - any `<name>/index`[m
[31m- *   - non-layout `../<name>/index`[m
[31m- *   - any `<root>/<name>`[m
[31m- *   - partial `<root>/_<name>`[m
[31m- *[m
[31m- * @param {String} view[m
[31m- * @param {Object} options[m
[31m- * @return {View}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.lookup = function(view, options){[m
[31m-  var orig = view = new View(view, options)[m
[31m-    , partial = options.isPartial[m
[31m-    , layout = options.isLayout;[m
[31m-[m
[31m-  // Try _ prefix ex: ./views/_<name>.jade[m
[31m-  // taking precedence over the direct path[m
[31m-  if (partial) {[m
[31m-    view = new View(orig.prefixPath, options);[m
[31m-    if (!view.exists) view = orig;[m
[31m-  }[m
[31m-[m
[31m-  // Try index ex: ./views/user/index.jade[m
[31m-  if (!layout && !view.exists) view = new View(orig.indexPath, options);[m
[31m-[m
[31m-  // Try ../<name>/index ex: ../user/index.jade[m
[31m-  // when calling partial('user') within the same dir[m
[31m-  if (!layout && !view.exists) view = new View(orig.upIndexPath, options);[m
[31m-[m
[31m-  // Try root ex: <root>/user.jade[m
[31m-  if (!view.exists) view = new View(orig.rootPath, options);[m
[31m-[m
[31m-  // Try root _ prefix ex: <root>/_user.jade[m
[31m-  if (!view.exists && partial) view = new View(view.prefixPath, options);[m
[31m-[m
[31m-  view.original = orig;[m
[31m-  return view;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Partial render helper.[m
[31m- *[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function renderPartial(res, view, options, parentLocals, parent){[m
[31m-  var collection, object, locals;[m
[31m-[m
[31m-  if (options) {[m
[31m-    // collection[m
[31m-    if (options.collection) {[m
[31m-      collection = options.collection;[m
[31m-      delete options.collection;[m
[31m-    } else if ('length' in options) {[m
[31m-      collection = options;[m
[31m-      options = {};[m
[31m-    }[m
[31m-[m
[31m-    // locals[m
[31m-    if (options.locals) {[m
[31m-      locals = options.locals;[m
[31m-      delete options.locals;[m
[31m-    }[m
[31m-[m
[31m-    // object[m
[31m-    if ('Object' != options.constructor.name) {[m
[31m-      object = options;[m
[31m-      options = {};[m
[31m-    } else if (undefined != options.object) {[m
[31m-      object = options.object;[m
[31m-      delete options.object;[m
[31m-    }[m
[31m-  } else {[m
[31m-    options = {};[m
[31m-  }[m
[31m-[m
[31m-  // Inherit locals from parent[m
[31m-  union(options, parentLocals);[m
[31m-[m
[31m-  // Merge locals[m
[31m-  if (locals) merge(options, locals);[m
[31m-[m
[31m-  // Partials dont need layouts[m
[31m-  options.isPartial = true;[m
[31m-  options.layout = false;[m
[31m-[m
[31m-  // Deduce name from view path[m
[31m-  var name = options.as || partial.resolveObjectName(view);[m
[31m-[m
[31m-  // Render partial[m
[31m-  function render(){[m
[31m-    if (object) {[m
[31m-      if ('string' == typeof name) {[m
[31m-        options[name] = object;[m
[31m-      } else if (name === global) {[m
[31m-        merge(options, object);[m
[31m-      }[m
[31m-    }[m
[31m-    return res.render(view, options, null, parent, true);[m
[31m-  }[m
[31m-[m
[31m-  // Collection support[m
[31m-  if (collection) {[m
[31m-    var len = collection.length[m
[31m-      , buf = ''[m
[31m-      , keys[m
[31m-      , key[m
[31m-      , val;[m
[31m-[m
[31m-    options.collectionLength = len;[m
[31m-[m
[31m-    if ('number' == typeof len || Array.isArray(collection)) {[m
[31m-      for (var i = 0; i < len; ++i) {[m
[31m-        val = collection[i];[m
[31m-        options.firstInCollection = i == 0;[m
[31m-        options.indexInCollection = i;[m
[31m-        options.lastInCollection = i == len - 1;[m
[31m-        object = val;[m
[31m-        buf += render();[m
[31m-      }[m
[31m-    } else {[m
[31m-      keys = Object.keys(collection);[m
[31m-      len = keys.length;[m
[31m-      options.collectionLength = len;[m
[31m-      options.collectionKeys = keys;[m
[31m-      for (var i = 0; i < len; ++i) {[m
[31m-        key = keys[i];[m
[31m-        val = collection[key];[m
[31m-        options.keyInCollection = key;[m
[31m-        options.firstInCollection = i == 0;[m
[31m-        options.indexInCollection = i;[m
[31m-        options.lastInCollection = i == len - 1;[m
[31m-        object = val;[m
[31m-        buf += render();[m
[31m-      }[m
[31m-    }[m
[31m-[m
[31m-    return buf;[m
[31m-  } else {[m
[31m-    return render();[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Render `view` partial with the given `options`. Optionally a[m
[31m- * callback `fn(err, str)` may be passed instead of writing to[m
[31m- * the socket.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `object` Single object with name derived from the view (unless `as` is present)[m
[31m- *[m
[31m- *   - `as` Variable name for each `collection` value, defaults to the view name.[m
[31m- *     * as: 'something' will add the `something` local variable[m
[31m- *     * as: this will use the collection value as the template context[m
[31m- *     * as: global will merge the collection value's properties with `locals`[m
[31m- *[m
[31m- *   - `collection` Array of objects, the name is derived from the view name itself.[m
[31m- *     For example _video.html_ will have a object _video_ available to it.[m
[31m- *[m
[31m- * @param  {String} view[m
[31m- * @param  {Object|Array|Function} options, collection, callback, or object[m
[31m- * @param  {Function} fn[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.partial = function(view, options, fn){[m
[31m-  var app = this.app[m
[31m-    , options = options || {}[m
[31m-    , viewEngine = app.set('view engine')[m
[31m-    , parent = {};[m
[31m-[m
[31m-  // accept callback as second argument[m
[31m-  if ('function' == typeof options) {[m
[31m-    fn = options;[m
[31m-    options = {};[m
[31m-  }[m
[31m-[m
[31m-  // root "views" option[m
[31m-  parent.dirname = app.set('views') || process.cwd() + '/views';[m
[31m-[m
[31m-  // utilize "view engine" option[m
[31m-  if (viewEngine) parent.engine = viewEngine;[m
[31m-[m
[31m-  // render the partial[m
[31m-  try {[m
[31m-    var str = renderPartial(this, view, options, null, parent);[m
[31m-  } catch (err) {[m
[31m-    if (fn) {[m
[31m-      fn(err);[m
[31m-    } else {[m
[31m-      this.req.next(err);[m
[31m-    }[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  // callback or transfer[m
[31m-  if (fn) {[m
[31m-    fn(null, str);[m
[31m-  } else {[m
[31m-    this.send(str);[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Render `view` with the given `options` and optional callback `fn`.[m
[31m- * When a callback function is given a response will _not_ be made[m
[31m- * automatically, however otherwise a response of _200_ and _text/html_ is given.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *  - `scope`     Template evaluation context (the value of `this`)[m
[31m- *  - `debug`     Output debugging information[m
[31m- *  - `status`    Response status code[m
[31m- *[m
[31m- * @param  {String} view[m
[31m- * @param  {Object|Function} options or callback function[m
[31m- * @param  {Function} fn[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.render = function(view, opts, fn, parent, sub){[m
[31m-  // support callback function as second arg[m
[31m-  if ('function' == typeof opts) {[m
[31m-    fn = opts, opts = null;[m
[31m-  }[m
[31m-[m
[31m-  try {[m
[31m-    return this._render(view, opts, fn, parent, sub);[m
[31m-  } catch (err) {[m
[31m-    // callback given[m
[31m-    if (fn) {[m
[31m-      fn(err);[m
[31m-    // unwind to root call to prevent multiple callbacks[m
[31m-    } else if (sub) {[m
[31m-      throw err;[m
[31m-    // root template, next(err)[m
[31m-    } else {[m
[31m-      this.req.next(err);[m
[31m-    }[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-// private render()[m
[31m-[m
[31m-res._render = function(view, opts, fn, parent, sub){[m
[31m-  var options = {}[m
[31m-    , self = this[m
[31m-    , app = this.app[m
[31m-    , helpers = app._locals[m
[31m-    , dynamicHelpers = app.dynamicViewHelpers[m
[31m-    , viewOptions = app.set('view options')[m
[31m-    , root = app.set('views') || process.cwd() + '/views';[m
[31m-[m
[31m-  // cache id[m
[31m-  var cid = app.enabled('view cache')[m
[31m-    ? view + (parent ? ':' + parent.path : '')[m
[31m-    : false;[m
[31m-[m
[31m-  // merge "view options"[m
[31m-  if (viewOptions) merge(options, viewOptions);[m
[31m-[m
[31m-  // merge res._locals[m
[31m-  if (this._locals) merge(options, this._locals);[m
[31m-[m
[31m-  // merge render() options[m
[31m-  if (opts) merge(options, opts);[m
[31m-[m
[31m-  // merge render() .locals[m
[31m-  if (opts && opts.locals) merge(options, opts.locals);[m
[31m-[m
[31m-  // status support[m
[31m-  if (options.status) this.statusCode = options.status;[m
[31m-[m
[31m-  // capture attempts[m
[31m-  options.attempts = [];[m
[31m-[m
[31m-  var partial = options.isPartial[m
[31m-    , layout = options.layout;[m
[31m-[m
[31m-  // Layout support[m
[31m-  if (true === layout || undefined === layout) {[m
[31m-    layout = 'layout';[m
[31m-  }[m
[31m-[m
[31m-  // Default execution scope to a plain object[m
[31m-  options.scope = options.scope || {};[m
[31m-[m
[31m-  // Populate view[m
[31m-  options.parentView = parent;[m
[31m-[m
[31m-  // "views" setting[m
[31m-  options.root = root;[m
[31m-[m
[31m-  // "view engine" setting[m
[31m-  options.defaultEngine = app.set('view engine');[m
[31m-[m
[31m-  // charset option[m
[31m-  if (options.charset) this.charset = options.charset;[m
[31m-[m
[31m-  // Dynamic helper support[m
[31m-  if (false !== options.dynamicHelpers) {[m
[31m-    // cache[m
[31m-    if (!this.__dynamicHelpers) {[m
[31m-      this.__dynamicHelpers = {};[m
[31m-      for (var key in dynamicHelpers) {[m
[31m-        this.__dynamicHelpers[key] = dynamicHelpers[key].call([m
[31m-            this.app[m
[31m-          , this.req[m
[31m-          , this);[m
[31m-      }[m
[31m-    }[m
[31m-[m
[31m-    // apply[m
[31m-    merge(options, this.__dynamicHelpers);[m
[31m-  }[m
[31m-[m
[31m-  // Merge view helpers[m
[31m-  union(options, helpers);[m
[31m-[m
[31m-  // Always expose partial() as a local[m
[31m-  options.partial = function(path, opts){[m
[31m-    return renderPartial(self, path, opts, options, view);[m
[31m-  };[m
[31m-[m
[31m-  // View lookup[m
[31m-  options.hint = app.enabled('hints');[m
[31m-  view = exports.compile(view, app.cache, cid, options);[m
[31m-[m
[31m-  // layout helper[m
[31m-  options.layout = function(path){[m
[31m-    layout = path;[m
[31m-  };[m
[31m-[m
[31m-  // render[m
[31m-  var str = view.fn.call(options.scope, options);[m
[31m-[m
[31m-  // layout expected[m
[31m-  if (layout) {[m
[31m-    options.isLayout = true;[m
[31m-    options.layout = false;[m
[31m-    options.body = str;[m
[31m-    this.render(layout, options, fn, view, true);[m
[31m-  // partial return[m
[31m-  } else if (partial) {[m
[31m-    return str;[m
[31m-  // render complete, and[m
[31m-  // callback given[m
[31m-  } else if (fn) {[m
[31m-    fn(null, str);[m
[31m-  // respond[m
[31m-  } else {[m
[31m-    this.send(str);[m
[31m-  }[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Hint at view path resolution, outputting the[m
[31m- * paths that Express has tried.[m
[31m- *[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function hintAtViewPaths(view, options) {[m
[31m-  console.error();[m
[31m-  console.error('failed to locate view "' + view.view + '", tried:');[m
[31m-  options.attempts.forEach(function(path){[m
[31m-    console.error('  - %s', path);[m
[31m-  });[m
[31m-  console.error();[m
[31m-}[m
[1mdiff --git a/node_modules/express/lib/view/partial.js b/node_modules/express/lib/view/partial.js[m
[1mdeleted file mode 100644[m
[1mindex 7d2f69b..0000000[m
[1m--- a/node_modules/express/lib/view/partial.js[m
[1m+++ /dev/null[m
[36m@@ -1,40 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - view - Partial[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Memory cache.[m
[31m- */[m
[31m-[m
[31m-var cache = {};[m
[31m-[m
[31m-/**[m
[31m- * Resolve partial object name from the view path.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *   "user.ejs" becomes "user"[m
[31m- *   "forum thread.ejs" becomes "forumThread"[m
[31m- *   "forum/thread/post.ejs" becomes "post"[m
[31m- *   "blog-post.ejs" becomes "blogPost"[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.resolveObjectName = function(view){[m
[31m-  return cache[view] || (cache[view] = view[m
[31m-    .split('/')[m
[31m-    .slice(-1)[0][m
[31m-    .split('.')[0][m
[31m-    .replace(/^_/, '')[m
[31m-    .replace(/[^a-zA-Z0-9 ]+/g, ' ')[m
[31m-    .split(/ +/).map(function(word, i){[m
[31m-      return i[m
[31m-        ? word[0].toUpperCase() + word.substr(1)[m
[31m-        : word;[m
[31m-    }).join(''));[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/lib/view/view.js b/node_modules/express/lib/view/view.js[m
[1mdeleted file mode 100644[m
[1mindex 7d9392c..0000000[m
[1m--- a/node_modules/express/lib/view/view.js[m
[1m+++ /dev/null[m
[36m@@ -1,210 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Express - View[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var path = require('path')[m
[31m-  , utils = require('../utils')[m
[31m-  , extname = path.extname[m
[31m-  , dirname = path.dirname[m
[31m-  , basename = path.basename[m
[31m-  , fs = require('fs')[m
[31m-  , stat = fs.statSync;[m
[31m-[m
[31m-/**[m
[31m- * Expose `View`.[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = View;[m
[31m-[m
[31m-/**[m
[31m- * Require cache.[m
[31m- */[m
[31m-[m
[31m-var cache = {};[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new `View` with the given `view` path and `options`.[m
[31m- *[m
[31m- * @param {String} view[m
[31m- * @param {Object} options[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function View(view, options) {[m
[31m-  options = options || {};[m
[31m-  this.view = view;[m
[31m-  this.root = options.root;[m
[31m-  this.relative = false !== options.relative;[m
[31m-  this.defaultEngine = options.defaultEngine;[m
[31m-  this.parent = options.parentView;[m
[31m-  this.basename = basename(view);[m
[31m-  this.engine = this.resolveEngine();[m
[31m-  this.extension = '.' + this.engine;[m
[31m-  this.name = this.basename.replace(this.extension, '');[m
[31m-  this.path = this.resolvePath();[m
[31m-  this.dirname = dirname(this.path);[m
[31m-  if (options.attempts) {[m
[31m-    if (!~options.attempts.indexOf(this.path))[m
[31m-      options.attempts.push(this.path);[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Check if the view path exists.[m
[31m- *[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-View.prototype.__defineGetter__('exists', function(){[m
[31m-  try {[m
[31m-    stat(this.path);[m
[31m-    return true;[m
[31m-  } catch (err) {[m
[31m-    return false;[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Resolve view engine.[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-View.prototype.resolveEngine = function(){[m
[31m-  // Explicit[m
[31m-  if (~this.basename.indexOf('.')) return extname(this.basename).substr(1);[m
[31m-  // Inherit from parent[m
[31m-  if (this.parent) return this.parent.engine;[m
[31m-  // Default[m
[31m-  return this.defaultEngine;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Resolve view path.[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-View.prototype.resolvePath = function(){[m
[31m-  var path = this.view;[m
[31m-  // Implicit engine[m
[31m-  if (!~this.basename.indexOf('.')) path += this.extension;[m
[31m-  // Absolute[m
[31m-  if (utils.isAbsolute(path)) return path;[m
[31m-  // Relative to parent[m
[31m-  if (this.relative && this.parent) return this.parent.dirname + '/' + path;[m
[31m-  // Relative to root[m
[31m-  return this.root[m
[31m-    ? this.root + '/' + path[m
[31m-    : path;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Get view contents. This is a one-time hit, so we[m
[31m- * can afford to be sync.[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-View.prototype.__defineGetter__('contents', function(){[m
[31m-  return fs.readFileSync(this.path, 'utf8');[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Get template engine api, cache exports to reduce[m
[31m- * require() calls.[m
[31m- *[m
[31m- * @return {Object}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-View.prototype.__defineGetter__('templateEngine', function(){[m
[31m-  var ext = this.extension;[m
[31m-  return cache[ext] || (cache[ext] = require(this.engine));[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Return root path alternative.[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-View.prototype.__defineGetter__('rootPath', function(){[m
[31m-  this.relative = false;[m
[31m-  return this.resolvePath();[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Return index path alternative.[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-View.prototype.__defineGetter__('indexPath', function(){[m
[31m-  return this.dirname[m
[31m-    + '/' + this.basename.replace(this.extension, '')[m
[31m-    + '/index' + this.extension;[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Return ../<name>/index path alternative.[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-View.prototype.__defineGetter__('upIndexPath', function(){[m
[31m-  return this.dirname + '/../' + this.name + '/index' + this.extension;[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Return _ prefix path alternative[m
[31m- *[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-View.prototype.__defineGetter__('prefixPath', function(){[m
[31m-  return this.dirname + '/_' + this.basename;[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Register the given template engine `exports`[m
[31m- * as `ext`. For example we may wish to map ".html"[m
[31m- * files to jade:[m
[31m- *[m
[31m- *    app.register('.html', require('jade'));[m
[31m- *[m
[31m- * or[m
[31m- *[m
[31m- *    app.register('html', require('jade'));[m
[31m- *[m
[31m- * This is also useful for libraries that may not[m
[31m- * match extensions correctly. For example my haml.js[m
[31m- * library is installed from npm as "hamljs" so instead[m
[31m- * of layout.hamljs, we can register the engine as ".haml":[m
[31m- *[m
[31m- *    app.register('.haml', require('haml-js'));[m
[31m- *[m
[31m- * @param {String} ext[m
[31m- * @param {Object} obj[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.register = function(ext, exports) {[m
[31m-  if ('.' != ext[0]) ext = '.' + ext;[m
[31m-  cache[ext] = exports;[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/.npmignore b/node_modules/express/node_modules/connect/.npmignore[m
[1mdeleted file mode 100644[m
[1mindex b04a224..0000000[m
[1m--- a/node_modules/express/node_modules/connect/.npmignore[m
[1m+++ /dev/null[m
[36m@@ -1,11 +0,0 @@[m
[31m-*.markdown[m
[31m-*.md[m
[31m-.git*[m
[31m-Makefile[m
[31m-benchmarks/[m
[31m-docs/[m
[31m-examples/[m
[31m-install.sh[m
[31m-support/[m
[31m-test/[m
[31m-.DS_Store[m
[1mdiff --git a/node_modules/express/node_modules/connect/LICENSE b/node_modules/express/node_modules/connect/LICENSE[m
[1mdeleted file mode 100644[m
[1mindex 0c5d22d..0000000[m
[1m--- a/node_modules/express/node_modules/connect/LICENSE[m
[1m+++ /dev/null[m
[36m@@ -1,24 +0,0 @@[m
[31m-(The MIT License)[m
[31m-[m
[31m-Copyright (c) 2010 Sencha Inc.[m
[31m-Copyright (c) 2011 LearnBoost[m
[31m-Copyright (c) 2011 TJ Holowaychuk[m
[31m-[m
[31m-Permission is hereby granted, free of charge, to any person obtaining[m
[31m-a copy of this software and associated documentation files (the[m
[31m-'Software'), to deal in the Software without restriction, including[m
[31m-without limitation the rights to use, copy, modify, merge, publish,[m
[31m-distribute, sublicense, and/or sell copies of the Software, and to[m
[31m-permit persons to whom the Software is furnished to do so, subject to[m
[31m-the following conditions:[m
[31m-[m
[31m-The above copyright notice and this permission notice shall be[m
[31m-included in all copies or substantial portions of the Software.[m
[31m-[m
[31m-THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,[m
[31m-EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF[m
[31m-MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.[m
[31m-IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY[m
[31m-CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,[m
[31m-TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE[m
[31m-SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/index.js b/node_modules/express/node_modules/connect/index.js[m
[1mdeleted file mode 100644[m
[1mindex 7477048..0000000[m
[1m--- a/node_modules/express/node_modules/connect/index.js[m
[1m+++ /dev/null[m
[36m@@ -1,2 +0,0 @@[m
[31m-[m
[31m-module.exports = require('./lib/connect');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/cache.js b/node_modules/express/node_modules/connect/lib/cache.js[m
[1mdeleted file mode 100644[m
[1mindex 4aa026e..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/cache.js[m
[1m+++ /dev/null[m
[36m@@ -1,81 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - Cache[m
[31m- * Copyright(c) 2011 Sencha Inc.[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Expose `Cache`.[m
[31m- */[m
[31m-[m
[31m-module.exports = Cache;[m
[31m-[m
[31m-/**[m
[31m- * LRU cache store.[m
[31m- *[m
[31m- * @param {Number} limit[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function Cache(limit) {[m
[31m-  this.store = {};[m
[31m-  this.keys = [];[m
[31m-  this.limit = limit;[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Touch `key`, promoting the object.[m
[31m- *[m
[31m- * @param {String} key[m
[31m- * @param {Number} i[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Cache.prototype.touch = function(key, i){[m
[31m-  this.keys.splice(i,1);[m
[31m-  this.keys.push(key);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Remove `key`.[m
[31m- *[m
[31m- * @param {String} key[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Cache.prototype.remove = function(key){[m
[31m-  delete this.store[key];[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Get the object stored for `key`.[m
[31m- *[m
[31m- * @param {String} key[m
[31m- * @return {Array}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Cache.prototype.get = function(key){[m
[31m-  return this.store[key];[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Add a cache `key`.[m
[31m- *[m
[31m- * @param {String} key[m
[31m- * @return {Array}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Cache.prototype.add = function(key){[m
[31m-  // initialize store[m
[31m-  var len = this.keys.push(key);[m
[31m-[m
[31m-  // limit reached, invalid LRU[m
[31m-  if (len > this.limit) this.remove(this.keys.shift());[m
[31m-[m
[31m-  var arr = this.store[key] = [];[m
[31m-  arr.createdAt = new Date;[m
[31m-  return arr;[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/connect.js b/node_modules/express/node_modules/connect/lib/connect.js[m
[1mdeleted file mode 100644[m
[1mindex 338d96f..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/connect.js[m
[1m+++ /dev/null[m
[36m@@ -1,106 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var HTTPServer = require('./http').Server[m
[31m-  , HTTPSServer = require('./https').Server[m
[31m-  , fs = require('fs');[m
[31m-[m
[31m-// node patches[m
[31m-[m
[31m-require('./patch');[m
[31m-[m
[31m-// expose createServer() as the module[m
[31m-[m
[31m-exports = module.exports = createServer;[m
[31m-[m
[31m-/**[m
[31m- * Framework version.[m
[31m- */[m
[31m-[m
[31m-exports.version = '1.9.2';[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new `connect.HTTPServer` with the middleware[m
[31m- * passed to this function. When an object is passed _first_,[m
[31m- * we assume these are the tls options, and return a `connect.HTTPSServer`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- * An example HTTP server, accepting several middleware.[m
[31m- *[m
[31m- *     var server = connect.createServer([m
[31m- *         connect.logger()[m
[31m- *       , connect.static(__dirname + '/public')[m
[31m- *     );[m
[31m- *[m
[31m- * An HTTPS server, utilizing the same middleware as above.[m
[31m- *[m
[31m- *     var server = connect.createServer([m
[31m- *         { key: key, cert: cert }[m
[31m- *       , connect.logger()[m
[31m- *       , connect.static(__dirname + '/public')[m
[31m- *     );[m
[31m- *[m
[31m- * Alternatively with connect 1.0 we may omit `createServer()`.[m
[31m- *[m
[31m- *     connect([m
[31m- *         connect.logger()[m
[31m- *       , connect.static(__dirname + '/public')[m
[31m- *     ).listen(3000);[m
[31m- *[m
[31m- * @param  {Object|Function} ...[m
[31m- * @return {Server}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-function createServer() {[m
[31m-  if ('object' == typeof arguments[0]) {[m
[31m-    return new HTTPSServer(arguments[0], Array.prototype.slice.call(arguments, 1));[m
[31m-  } else {[m
[31m-    return new HTTPServer(Array.prototype.slice.call(arguments));[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-// support connect.createServer()[m
[31m-[m
[31m-exports.createServer = createServer;[m
[31m-[m
[31m-// auto-load getters[m
[31m-[m
[31m-exports.middleware = {};[m
[31m-[m
[31m-/**[m
[31m- * Auto-load bundled middleware with getters.[m
[31m- */[m
[31m-[m
[31m-fs.readdirSync(__dirname + '/middleware').forEach(function(filename){[m
[31m-  if (/\.js$/.test(filename)) {[m
[31m-    var name = filename.substr(0, filename.lastIndexOf('.'));[m
[31m-    exports.middleware.__defineGetter__(name, function(){[m
[31m-      return require('./middleware/' + name);[m
[31m-    });[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// expose utils[m
[31m-[m
[31m-exports.utils = require('./utils');[m
[31m-[m
[31m-// expose getters as first-class exports[m
[31m-[m
[31m-exports.utils.merge(exports, exports.middleware);[m
[31m-[m
[31m-// expose constructors[m
[31m-[m
[31m-exports.HTTPServer = HTTPServer;[m
[31m-exports.HTTPSServer = HTTPSServer;[m
[31m-[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/http.js b/node_modules/express/node_modules/connect/lib/http.js[m
[1mdeleted file mode 100644[m
[1mindex 1d35f12..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/http.js[m
[1m+++ /dev/null[m
[36m@@ -1,218 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - HTTPServer[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var http = require('http')[m
[31m-  , parse = require('url').parse[m
[31m-  , assert = require('assert')[m
[31m-  , utils = require('./utils');[m
[31m-[m
[31m-// environment[m
[31m-[m
[31m-var env = process.env.NODE_ENV || 'development';[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new `Server` with the given `middleware`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     var server = connect.createServer([m
[31m- *         connect.favicon()[m
[31m- *       , connect.logger()[m
[31m- *       , connect.static(__dirname + '/public')[m
[31m- *     );[m
[31m- *[m
[31m- * @params {Array} middleware [m
[31m- * @return {Server}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-var Server = exports.Server = function HTTPServer(middleware) {[m
[31m-  this.stack = [];[m
[31m-  middleware.forEach(function(fn){[m
[31m-    this.use(fn);[m
[31m-  }, this);[m
[31m-  http.Server.call(this, this.handle);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Inherit from `http.Server.prototype`.[m
[31m- */[m
[31m-[m
[31m-Server.prototype.__proto__ = http.Server.prototype;[m
[31m-[m
[31m-/**[m
[31m- * Utilize the given middleware `handle` to the given `route`,[m
[31m- * defaulting to _/_. This "route" is the mount-point for the[m
[31m- * middleware, when given a value other than _/_ the middleware[m
[31m- * is only effective when that segment is present in the request's[m
[31m- * pathname.[m
[31m- *[m
[31m- * For example if we were to mount a function at _/admin_, it would[m
[31m- * be invoked on _/admin_, and _/admin/settings_, however it would[m
[31m- * not be invoked for _/_, or _/posts_.[m
[31m- *[m
[31m- * This is effectively the same as passing middleware to `connect.createServer()`,[m
[31m- * however provides a progressive api.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *      var server = connect.createServer();[m
[31m- *      server.use(connect.favicon());[m
[31m- *      server.use(connect.logger());[m
[31m- *      server.use(connect.static(__dirname + '/public'));[m
[31m- *[m
[31m- * If we wanted to prefix static files with _/public_, we could[m
[31m- * "mount" the `static()` middleware:[m
[31m- *[m
[31m- *      server.use('/public', connect.static(__dirname + '/public'));[m
[31m- *[m
[31m- * This api is chainable, meaning the following is valid:[m
[31m- *[m
[31m- *      connect.createServer()[m
[31m- *        .use(connect.favicon())[m
[31m- *        .use(connect.logger())[m
[31m- *        .use(connect.static(__dirname + '/public'))[m
[31m- *        .listen(3000);[m
[31m- *[m
[31m- * @param {String|Function} route or handle[m
[31m- * @param {Function} handle[m
[31m- * @return {Server}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Server.prototype.use = function(route, handle){[m
[31m-  this.route = '/';[m
[31m-[m
[31m-  // default route to '/'[m
[31m-  if ('string' != typeof route) {[m
[31m-    handle = route;[m
[31m-    route = '/';[m
[31m-  }[m
[31m-[m
[31m-  // wrap sub-apps[m
[31m-  if ('function' == typeof handle.handle) {[m
[31m-    var server = handle;[m
[31m-    server.route = route;[m
[31m-    handle = function(req, res, next) {[m
[31m-      server.handle(req, res, next);[m
[31m-    };[m
[31m-  }[m
[31m-[m
[31m-  // wrap vanilla http.Servers[m
[31m-  if (handle instanceof http.Server) {[m
[31m-    handle = handle.listeners('request')[0];[m
[31m-  }[m
[31m-[m
[31m-  // normalize route to not trail with slash[m
[31m-  if ('/' == route[route.length - 1]) {[m
[31m-    route = route.substr(0, route.length - 1);[m
[31m-  }[m
[31m-[m
[31m-  // add the middleware[m
[31m-  this.stack.push({ route: route, handle: handle });[m
[31m-[m
[31m-  // allow chaining[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Handle server requests, punting them down[m
[31m- * the middleware stack.[m
[31m- *[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Server.prototype.handle = function(req, res, out) {[m
[31m-  var writeHead = res.writeHead[m
[31m-    , stack = this.stack[m
[31m-    , removed = ''[m
[31m-    , index = 0;[m
[31m-[m
[31m-  function next(err) {[m
[31m-    var layer, path, c;[m
[31m-    req.url = removed + req.url;[m
[31m-    req.originalUrl = req.originalUrl || req.url;[m
[31m-    removed = '';[m
[31m-[m
[31m-    layer = stack[index++];[m
[31m-[m
[31m-    // all done[m
[31m-    if (!layer || res.headerSent) {[m
[31m-      // but wait! we have a parent[m
[31m-      if (out) return out(err);[m
[31m-[m
[31m-      // error[m
[31m-      if (err) {[m
[31m-        var msg = 'production' == env[m
[31m-          ? 'Internal Server Error'[m
[31m-          : err.stack || err.toString();[m
[31m-[m
[31m-        // output to stderr in a non-test env[m
[31m-        if ('test' != env) console.error(err.stack || err.toString());[m
[31m-[m
[31m-        // unable to respond[m
[31m-        if (res.headerSent) return req.socket.destroy();[m
[31m-[m
[31m-        res.statusCode = 500;[m
[31m-        res.setHeader('Content-Type', 'text/plain');[m
[31m-        if ('HEAD' == req.method) return res.end();[m
[31m-        res.end(msg);[m
[31m-      } else {[m
[31m-        res.statusCode = 404;[m
[31m-        res.setHeader('Content-Type', 'text/plain');[m
[31m-        if ('HEAD' == req.method) return res.end();[m
[31m-        res.end('Cannot ' + req.method + ' ' + utils.escape(req.originalUrl));[m
[31m-      }[m
[31m-      return;[m
[31m-    }[m
[31m-[m
[31m-    try {[m
[31m-      path = parse(req.url).pathname;[m
[31m-      if (undefined == path) path = '/';[m
[31m-[m
[31m-      // skip this layer if the route doesn't match.[m
[31m-      if (0 != path.indexOf(layer.route)) return next(err);[m
[31m-[m
[31m-      c = path[layer.route.length];[m
[31m-      if (c && '/' != c && '.' != c) return next(err);[m
[31m-[m
[31m-      // Call the layer handler[m
[31m-      // Trim off the part of the url that matches the route[m
[31m-      removed = layer.route;[m
[31m-      req.url = req.url.substr(removed.length);[m
[31m-[m
[31m-      // Ensure leading slash[m
[31m-      if ('/' != req.url[0]) req.url = '/' + req.url;[m
[31m-[m
[31m-      var arity = layer.handle.length;[m
[31m-      if (err) {[m
[31m-        if (arity === 4) {[m
[31m-          layer.handle(err, req, res, next);[m
[31m-        } else {[m
[31m-          next(err);[m
[31m-        }[m
[31m-      } else if (arity < 4) {[m
[31m-        layer.handle(req, res, next);[m
[31m-      } else {[m
[31m-        next();[m
[31m-      }[m
[31m-    } catch (e) {[m
[31m-      if (e instanceof assert.AssertionError) {[m
[31m-        console.error(e.stack + '\n');[m
[31m-        next(e);[m
[31m-      } else {[m
[31m-        next(e);[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-  next();[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/https.js b/node_modules/express/node_modules/connect/lib/https.js[m
[1mdeleted file mode 100644[m
[1mindex 9b09fa4..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/https.js[m
[1m+++ /dev/null[m
[36m@@ -1,47 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - HTTPServer[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var HTTPServer = require('./http').Server[m
[31m-  , https = require('https');[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new `Server` with the given[m
[31m- *`options` and `middleware`. The HTTPS api[m
[31m- * is identical to the [HTTP](http.html) server,[m
[31m- * however TLS `options` must be provided before[m
[31m- * passing in the optional middleware.[m
[31m- *[m
[31m- * @params {Object} options[m
[31m- * @params {Array} middleawre[m
[31m- * @return {Server}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-var Server = exports.Server = function HTTPSServer(options, middleware) {[m
[31m-  this.stack = [];[m
[31m-  middleware.forEach(function(fn){[m
[31m-    this.use(fn);[m
[31m-  }, this);[m
[31m-  https.Server.call(this, options, this.handle);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Inherit from `http.Server.prototype`.[m
[31m- */[m
[31m-[m
[31m-Server.prototype.__proto__ = https.Server.prototype;[m
[31m-[m
[31m-// mixin HTTPServer methods[m
[31m-[m
[31m-Object.keys(HTTPServer.prototype).forEach(function(method){[m
[31m-  Server.prototype[method] = HTTPServer.prototype[method];[m
[31m-});[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/index.js b/node_modules/express/node_modules/connect/lib/index.js[m
[1mdeleted file mode 100644[m
[1mindex 77b14c3..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/index.js[m
[1m+++ /dev/null[m
[36m@@ -1,46 +0,0 @@[m
[31m-[m
[31m-/**[m
[31m- * # Connect[m
[31m- *[m
[31m- * Connect is a middleware framework for node,[m
[31m- * shipping with over 11 bundled middleware and a rich choice of[m
[31m- * [3rd-party middleware](https://github.com/senchalabs/connect/wiki).[m
[31m- *[m
[31m- * Installation:[m
[31m- * [m
[31m- *     $ npm install connect[m
[31m- * [m
[31m- * API:[m
[31m- *[m
[31m- *  - [connect](connect.html) general[m
[31m- *  - [http](http.html) http server[m
[31m- *  - [https](https.html) https server[m
[31m- *[m
[31m- * Middleware:[m
[31m- *[m
[31m- *  - [logger](middleware-logger.html) request logger with custom format support[m
[31m- *  - [csrf](middleware-csrf.html) Cross-site request forgery protection[m
[31m- *  - [basicAuth](middleware-basicAuth.html) basic http authentication[m
[31m- *  - [bodyParser](middleware-bodyParser.html) extensible request body parser[m
[31m- *  - [cookieParser](middleware-cookieParser.html) cookie parser[m
[31m- *  - [session](middleware-session.html) session management support with bundled [MemoryStore](middleware-session-memory.html)[m
[31m- *  - [compiler](middleware-compiler.html) static asset compiler (sass, less, coffee-script, etc)[m
[31m- *  - [methodOverride](middleware-methodOverride.html) faux HTTP method support[m
[31m- *  - [responseTime](middleware-responseTime.html) calculates response-time and exposes via X-Response-Time[m
[31m- *  - [router](middleware-router.html) provides rich Sinatra / Express-like routing[m
[31m- *  - [staticCache](middleware-staticCache.html) memory cache layer for the static() middleware[m
[31m- *  - [static](middleware-static.html) streaming static file server supporting `Range` and more[m
[31m- *  - [directory](middleware-directory.html) directory listing middleware[m
[31m- *  - [vhost](middleware-vhost.html) virtual host sub-domain mapping middleware[m
[31m- *  - [favicon](middleware-favicon.html) efficient favicon server (with default icon)[m
[31m- *  - [limit](middleware-limit.html) limit the bytesize of request bodies[m
[31m- *  - [profiler](middleware-profiler.html) request profiler reporting response-time, memory usage, etc[m
[31m- *  - [query](middleware-query.html) automatic querystring parser, populating `req.query`[m
[31m- *  - [errorHandler](middleware-errorHandler.html) flexible error handler[m
[31m- *[m
[31m- * Internals:[m
[31m- *[m
[31m- *  - connect [utilities](utils.html)[m
[31m- *  - node monkey [patches](patch.html)[m
[31m- *[m
[31m- */[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/basicAuth.js b/node_modules/express/node_modules/connect/lib/middleware/basicAuth.js[m
[1mdeleted file mode 100644[m
[1mindex 3ff472b..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/basicAuth.js[m
[1m+++ /dev/null[m
[36m@@ -1,93 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - basicAuth[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var utils = require('../utils')[m
[31m-  , unauthorized = utils.unauthorized[m
[31m-  , badRequest = utils.badRequest;[m
[31m-[m
[31m-/**[m
[31m- * Enfore basic authentication by providing a `callback(user, pass)`,[m
[31m- * which must return `true` in order to gain access. Alternatively an async[m
[31m- * method is provided as well, invoking `callback(user, pass, callback)`. Populates[m
[31m- * `req.remoteUser`. The final alternative is simply passing username / password[m
[31m- * strings.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     connect(connect.basicAuth('username', 'password'));[m
[31m- *[m
[31m- *     connect([m
[31m- *       connect.basicAuth(function(user, pass){[m
[31m- *         return 'tj' == user & 'wahoo' == pass;[m
[31m- *       })[m
[31m- *     );[m
[31m- *[m
[31m- *     connect([m
[31m- *       connect.basicAuth(function(user, pass, fn){[m
[31m- *         User.authenticate({ user: user, pass: pass }, fn);[m
[31m- *       })[m
[31m- *     );[m
[31m- *[m
[31m- * @param {Function|String} callback or username[m
[31m- * @param {String} realm[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function basicAuth(callback, realm) {[m
[31m-  var username, password;[m
[31m-[m
[31m-  // user / pass strings[m
[31m-  if ('string' == typeof callback) {[m
[31m-    username = callback;[m
[31m-    password = realm;[m
[31m-    if ('string' != typeof password) throw new Error('password argument required');[m
[31m-    realm = arguments[2];[m
[31m-    callback = function(user, pass){[m
[31m-      return user == username && pass == password;[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  realm = realm || 'Authorization Required';[m
[31m-[m
[31m-  return function(req, res, next) {[m
[31m-    var authorization = req.headers.authorization;[m
[31m-[m
[31m-    if (req.remoteUser) return next();[m
[31m-    if (!authorization) return unauthorized(res, realm);[m
[31m-[m
[31m-    var parts = authorization.split(' ')[m
[31m-      , scheme = parts[0][m
[31m-      , credentials = new Buffer(parts[1], 'base64').toString().split(':');[m
[31m-[m
[31m-    if ('Basic' != scheme) return badRequest(res);[m
[31m-[m
[31m-    // async[m
[31m-    if (callback.length >= 3) {[m
[31m-      var pause = utils.pause(req);[m
[31m-      callback(credentials[0], credentials[1], function(err, user){[m
[31m-        if (err || !user)  return unauthorized(res, realm);[m
[31m-        req.remoteUser = user;[m
[31m-        next();[m
[31m-        pause.resume();[m
[31m-      });[m
[31m-    // sync[m
[31m-    } else {[m
[31m-      if (callback(credentials[0], credentials[1])) {[m
[31m-        req.remoteUser = credentials[0];[m
[31m-        next();[m
[31m-      } else {[m
[31m-        unauthorized(res, realm);[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-};[m
[31m-[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js b/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js[m
[1mdeleted file mode 100644[m
[1mindex a52568c..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js[m
[1m+++ /dev/null[m
[36m@@ -1,196 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - bodyParser[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var qs = require('qs')[m
[31m-  , formidable = require('formidable');[m
[31m-[m
[31m-/**[m
[31m- * Extract the mime type from the given request's[m
[31m- * _Content-Type_ header.[m
[31m- *[m
[31m- * @param  {IncomingMessage} req[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function mime(req) {[m
[31m-  var str = req.headers['content-type'] || '';[m
[31m-  return str.split(';')[0];[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Parse request bodies.[m
[31m- *[m
[31m- * By default _application/json_, _application/x-www-form-urlencoded_,[m
[31m- * and _multipart/form-data_ are supported, however you may map `connect.bodyParser.parse[contentType]`[m
[31m- * to a function receiving `(req, options, callback)`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *      connect.createServer([m
[31m- *          connect.bodyParser()[m
[31m- *        , function(req, res) {[m
[31m- *          res.end('viewing user ' + req.body.user.name);[m
[31m- *        }[m
[31m- *      );[m
[31m- *[m
[31m- *      $ curl -d 'user[name]=tj' http://localhost/[m
[31m- *      $ curl -d '{"user":{"name":"tj"}}' -H "Content-Type: application/json" http://localhost/[m
[31m- *[m
[31m- * Multipart req.files:[m
[31m- *[m
[31m- *   As a security measure files are stored in a separate object, stored[m
[31m- *   as `req.files`. This prevents attacks that may potentially alter[m
[31m- *   filenames, and depending on the application gain access to restricted files.[m
[31m- *[m
[31m- * Multipart configuration:[m
[31m- *[m
[31m- *  The `options` passed are provided to each parser function.[m
[31m- *  The _multipart/form-data_ parser merges these with formidable's[m
[31m- *  IncomingForm object, allowing you to tweak the upload directory,[m
[31m- *  size limits, etc. For example you may wish to retain the file extension[m
[31m- *  and change the upload directory:[m
[31m- *[m
[31m- *      server.use(bodyParser({ uploadDir: '/www/mysite.com/uploads' }));[m
[31m- *[m
[31m- *  View [node-formidable](https://github.com/felixge/node-formidable) for more information.[m
[31m- *[m
[31m- *  If you wish to use formidable directly within your app, and do not[m
[31m- *  desire this behaviour for multipart requests simply remove the[m
[31m- *  parser: [m
[31m- *[m
[31m- *     delete connect.bodyParser.parse['multipart/form-data'];[m
[31m- *[m
[31m- *  Or[m
[31m- *[m
[31m- *     delete express.bodyParser.parse['multipart/form-data'];[m
[31m- *[m
[31m- * @param {Object} options[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = function bodyParser(options){[m
[31m-  options = options || {};[m
[31m-  return function bodyParser(req, res, next) {[m
[31m-    if (req.body) return next();[m
[31m-    req.body = {};[m
[31m-[m
[31m-    if ('GET' == req.method || 'HEAD' == req.method) return next();[m
[31m-    var parser = exports.parse[mime(req)];[m
[31m-    if (parser) {[m
[31m-      parser(req, options, next);[m
[31m-    } else {[m
[31m-      next();[m
[31m-    }[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Parsers.[m
[31m- */[m
[31m-[m
[31m-exports.parse = {};[m
[31m-[m
[31m-/**[m
[31m- * Parse application/x-www-form-urlencoded.[m
[31m- */[m
[31m-[m
[31m-exports.parse['application/x-www-form-urlencoded'] = function(req, options, fn){[m
[31m-  var buf = '';[m
[31m-  req.setEncoding('utf8');[m
[31m-  req.on('data', function(chunk){ buf += chunk });[m
[31m-  req.on('end', function(){[m
[31m-    try {[m
[31m-      req.body = buf.length[m
[31m-        ? qs.parse(buf)[m
[31m-        : {};[m
[31m-      fn();[m
[31m-    } catch (err){[m
[31m-      fn(err);[m
[31m-    }[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Parse application/json.[m
[31m- */[m
[31m-[m
[31m-exports.parse['application/json'] = function(req, options, fn){[m
[31m-  var buf = '';[m
[31m-  req.setEncoding('utf8');[m
[31m-  req.on('data', function(chunk){ buf += chunk });[m
[31m-  req.on('end', function(){[m
[31m-    try {[m
[31m-      req.body = buf.length[m
[31m-        ? JSON.parse(buf)[m
[31m-        : {};[m
[31m-      fn();[m
[31m-    } catch (err){[m
[31m-      fn(err);[m
[31m-    }[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Parse multipart/form-data.[m
[31m- *[m
[31m- * TODO: make multiple support optional[m
[31m- * TODO: revisit "error" flag if it's a formidable bug[m
[31m- */[m
[31m-[m
[31m-exports.parse['multipart/form-data'] = function(req, options, fn){[m
[31m-  var form = new formidable.IncomingForm[m
[31m-    , data = {}[m
[31m-    , files = {}[m
[31m-    , done;[m
[31m-[m
[31m-  Object.keys(options).forEach(function(key){[m
[31m-    form[key] = options[key];[m
[31m-  });[m
[31m-[m
[31m-  function ondata(name, val, data){[m
[31m-    if (Array.isArray(data[name])) {[m
[31m-      data[name].push(val);[m
[31m-    } else if (data[name]) {[m
[31m-      data[name] = [data[name], val];[m
[31m-    } else {[m
[31m-      data[name] = val;[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  form.on('field', function(name, val){[m
[31m-    ondata(name, val, data);[m
[31m-  });[m
[31m-[m
[31m-  form.on('file', function(name, val){[m
[31m-    ondata(name, val, files);[m
[31m-  });[m
[31m-[m
[31m-  form.on('error', function(err){[m
[31m-    fn(err);[m
[31m-    done = true;[m
[31m-  });[m
[31m-[m
[31m-  form.on('end', function(){[m
[31m-    if (done) return;[m
[31m-    try {[m
[31m-      req.body = qs.parse(data);[m
[31m-      req.files = qs.parse(files);[m
[31m-      fn();[m
[31m-    } catch (err) {[m
[31m-      fn(err);[m
[31m-    }[m
[31m-  });[m
[31m-[m
[31m-  form.parse(req);[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/compiler.js b/node_modules/express/node_modules/connect/lib/middleware/compiler.js[m
[1mdeleted file mode 100644[m
[1mindex dc4dd66..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/compiler.js[m
[1m+++ /dev/null[m
[36m@@ -1,163 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - compiler[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var fs = require('fs')[m
[31m-  , path = require('path')[m
[31m-  , parse = require('url').parse;[m
[31m-[m
[31m-/**[m
[31m- * Require cache.[m
[31m- */[m
[31m-[m
[31m-var cache = {};[m
[31m-[m
[31m-/**[m
[31m- * Setup compiler.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `src`     Source directory, defaults to **CWD**.[m
[31m- *   - `dest`    Destination directory, defaults `src`.[m
[31m- *   - `enable`  Array of enabled compilers.[m
[31m- *[m
[31m- * Compilers:[m
[31m- *[m
[31m- *   - `sass`   Compiles sass to css[m
[31m- *   - `less`   Compiles less to css[m
[31m- *   - `coffeescript`   Compiles coffee to js[m
[31m- *[m
[31m- * @param {Object} options[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = function compiler(options){[m
[31m-  options = options || {};[m
[31m-[m
[31m-  var srcDir = options.src || process.cwd()[m
[31m-    , destDir = options.dest || srcDir[m
[31m-    , enable = options.enable;[m
[31m-[m
[31m-  if (!enable || enable.length === 0) {[m
[31m-    throw new Error('compiler\'s "enable" option is not set, nothing will be compiled.');[m
[31m-  }[m
[31m-[m
[31m-  return function compiler(req, res, next){[m
[31m-    if ('GET' != req.method) return next();[m
[31m-    var pathname = parse(req.url).pathname;[m
[31m-    for (var i = 0, len = enable.length; i < len; ++i) {[m
[31m-      var name = enable[i][m
[31m-        , compiler = compilers[name];[m
[31m-      if (compiler.match.test(pathname)) {[m
[31m-        var src = (srcDir + pathname).replace(compiler.match, compiler.ext)[m
[31m-          , dest = destDir + pathname;[m
[31m-[m
[31m-        // Compare mtimes[m
[31m-        fs.stat(src, function(err, srcStats){[m
[31m-          if (err) {[m
[31m-            if ('ENOENT' == err.code) {[m
[31m-              next();[m
[31m-            } else {[m
[31m-              next(err);[m
[31m-            }[m
[31m-          } else {[m
[31m-            fs.stat(dest, function(err, destStats){[m
[31m-              if (err) {[m
[31m-                // Oh snap! it does not exist, compile it[m
[31m-                if ('ENOENT' == err.code) {[m
[31m-                  compile();[m
[31m-                } else {[m
[31m-                  next(err);[m
[31m-                }[m
[31m-              } else {[m
[31m-                // Source has changed, compile it[m
[31m-                if (srcStats.mtime > destStats.mtime) {[m
[31m-                  compile();[m
[31m-                } else {[m
[31m-                  // Defer file serving[m
[31m-                  next();[m
[31m-                }[m
[31m-              }[m
[31m-            });[m
[31m-          }[m
[31m-        });[m
[31m-[m
[31m-        // Compile to the destination[m
[31m-        function compile() {[m
[31m-          fs.readFile(src, 'utf8', function(err, str){[m
[31m-            if (err) {[m
[31m-              next(err);[m
[31m-            } else {[m
[31m-              compiler.compile(str, function(err, str){[m
[31m-                if (err) {[m
[31m-                  next(err);[m
[31m-                } else {[m
[31m-                  fs.writeFile(dest, str, 'utf8', function(err){[m
[31m-                    next(err);[m
[31m-                  });[m
[31m-                }[m
[31m-              });[m
[31m-            }[m
[31m-          });[m
[31m-        }[m
[31m-        return;[m
[31m-      }[m
[31m-    }[m
[31m-    next();[m
[31m-  };[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Bundled compilers:[m
[31m- *[m
[31m- *  - [sass](http://github.com/visionmedia/sass.js) to _css_[m
[31m- *  - [less](http://github.com/cloudhead/less.js) to _css_[m
[31m- *  - [coffee](http://github.com/jashkenas/coffee-script) to _js_[m
[31m- */[m
[31m-[m
[31m-var compilers = exports.compilers = {[m
[31m-  sass: {[m
[31m-    match: /\.css$/,[m
[31m-    ext: '.sass',[m
[31m-    compile: function(str, fn){[m
[31m-      var sass = cache.sass || (cache.sass = require('sass'));[m
[31m-      try {[m
[31m-        fn(null, sass.render(str));[m
[31m-      } catch (err) {[m
[31m-        fn(err);[m
[31m-      }[m
[31m-    }[m
[31m-  },[m
[31m-  less: {[m
[31m-    match: /\.css$/,[m
[31m-    ext: '.less',[m
[31m-    compile: function(str, fn){[m
[31m-      var less = cache.less || (cache.less = require('less'));[m
[31m-      try {[m
[31m-        less.render(str, fn);[m
[31m-      } catch (err) {[m
[31m-        fn(err);[m
[31m-      }[m
[31m-    }[m
[31m-  },[m
[31m-  coffeescript: {[m
[31m-    match: /\.js$/,[m
[31m-    ext: '.coffee',[m
[31m-    compile: function(str, fn){[m
[31m-      var coffee = cache.coffee || (cache.coffee = require('coffee-script'));[m
[31m-      try {[m
[31m-        fn(null, coffee.compile(str));[m
[31m-      } catch (err) {[m
[31m-        fn(err);[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/compress.js b/node_modules/express/node_modules/connect/lib/middleware/compress.js[m
[1mdeleted file mode 100644[m
[1mindex addc5c9..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/compress.js[m
[1m+++ /dev/null[m
[36m@@ -1,146 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - compress[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * Copyright(c) 2012 Nebojsa Sabovic[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var zlib = require('zlib');[m
[31m-[m
[31m-/**[m
[31m- * Supported content-encoding methods.[m
[31m- */[m
[31m-[m
[31m-exports.methods = {[m
[31m-    gzip: zlib.createGzip[m
[31m-  , deflate: zlib.createDeflate[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Default filter function.[m
[31m- */[m
[31m-[m
[31m-exports.filter = function(req, res){[m
[31m-  var type = res.getHeader('Content-Type') || '';[m
[31m-  return type.match(/json|text|javascript/);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Compress:[m
[31m- *[m
[31m- * Compress response data with gzip/deflate.[m
[31m- *[m
[31m- * Filter:[m
[31m- *[m
[31m- *  A `filter` callback function may be passed to[m
[31m- *  replace the default logic of:[m
[31m- *[m
[31m- *     exports.filter = function(req, res){[m
[31m- *       var type = res.getHeader('Content-Type') || '';[m
[31m- *       return type.match(/json|text|javascript/);[m
[31m- *     };[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *  All remaining options are passed to the gzip/deflate[m
[31m- *  creation functions. Consult node's docs for additional details.[m
[31m- *[m
[31m- *   - `chunkSize` (default: 16*1024)[m
[31m- *   - `windowBits`[m
[31m- *   - `level`: 0-9 where 0 is no compression, and 9 is slow but best compression[m
[31m- *   - `memLevel`: 1-9 low is slower but uses less memory, high is fast but uses more[m
[31m- *   - `strategy`: compression strategy[m
[31m- *[m
[31m- * @param {Object} options[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function compress(options) {[m
[31m-  var options = options || {}[m
[31m-    , names = Object.keys(exports.methods)[m
[31m-    , filter = options.filter || exports.filter;[m
[31m-[m
[31m-  return function(req, res, next){[m
[31m-    var accept = req.headers['accept-encoding'][m
[31m-      , write = res.write[m
[31m-      , writeHead = res.writeHead[m
[31m-      , end = res.end[m
[31m-      , stream[m
[31m-      , method;[m
[31m-[m
[31m-    // vary[m
[31m-    res.setHeader('Vary', 'Accept-Encoding');[m
[31m-[m
[31m-    // proxy[m
[31m-[m
[31m-    res.write = function(chunk, encoding){[m
[31m-      if (!this._header) this._implicitHeader();[m
[31m-      return stream[m
[31m-        ? stream.write(chunk, encoding)[m
[31m-        : write.call(this, chunk, encoding);[m
[31m-    };[m
[31m-[m
[31m-    res.end = function(chunk, encoding){[m
[31m-      if (!this._header) {[m
[31m-        this._implicitHeader();[m
[31m-      }[m
[31m-      if (chunk) this.write(chunk, encoding);[m
[31m-      return stream[m
[31m-        ? stream.end()[m
[31m-        : end.call(this);[m
[31m-    };[m
[31m-[m
[31m-    res.writeHead = function(){[m
[31m-      res.writeHead = writeHead;[m
[31m-[m
[31m-      // default request filter, SHOULD use identity, head[m
[31m-      if (filter(req, res) && accept && 'HEAD' != req.method) {[m
[31m-        // default to gzip[m
[31m-        if ('*' == accept.trim()) {[m
[31m-          method = 'gzip';[m
[31m-        } else {[m
[31m-          for (var i = 0, len = names.length; i < len; ++i) {[m
[31m-            if (~accept.indexOf(names[i])) {[m
[31m-              method = names[i];[m
[31m-              break;[m
[31m-            }[m
[31m-          }[m
[31m-        }[m
[31m-[m
[31m-        // compression method[m
[31m-        if (method) {[m
[31m-          // compression stream[m
[31m-          stream = exports.methods[method](options);[m
[31m-[m
[31m-          // header fields[m
[31m-          res.setHeader('Content-Encoding', method);[m
[31m-          res.removeHeader('Content-Length');[m
[31m-          // WARNING: We do not strip content-length out of passed-in headers[m
[31m-[m
[31m-          // compression[m
[31m-          stream.on('data', function(chunk){[m
[31m-            write.call(res, chunk);[m
[31m-          });[m
[31m-[m
[31m-          stream.on('end', function(){[m
[31m-            end.call(res);[m
[31m-          });[m
[31m-[m
[31m-          stream.on('drain', function() {[m
[31m-            res.emit('drain');[m
[31m-          });[m
[31m-        }[m
[31m-      }[m
[31m-      return res.writeHead.apply(this, arguments);[m
[31m-    };[m
[31m-[m
[31m-    next();[m
[31m-  };[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/cookieParser.js b/node_modules/express/node_modules/connect/lib/middleware/cookieParser.js[m
[1mdeleted file mode 100644[m
[1mindex d6b69de..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/cookieParser.js[m
[1m+++ /dev/null[m
[36m@@ -1,46 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - cookieParser[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var utils = require('./../utils');[m
[31m-[m
[31m-/**[m
[31m- * Parse _Cookie_ header and populate `req.cookies`[m
[31m- * with an object keyed by the cookie names.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     connect.createServer([m
[31m- *         connect.cookieParser()[m
[31m- *       , function(req, res, next){[m
[31m- *         res.end(JSON.stringify(req.cookies));[m
[31m- *       }[m
[31m- *     );[m
[31m- *[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function cookieParser(){[m
[31m-  return function cookieParser(req, res, next) {[m
[31m-    var cookie = req.headers.cookie;[m
[31m-    if (req.cookies) return next();[m
[31m-    req.cookies = {};[m
[31m-    if (cookie) {[m
[31m-      try {[m
[31m-        req.cookies = utils.parseCookie(cookie);[m
[31m-      } catch (err) {[m
[31m-        return next(err);[m
[31m-      }[m
[31m-    }[m
[31m-    next();[m
[31m-  };[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/csrf.js b/node_modules/express/node_modules/connect/lib/middleware/csrf.js[m
[1mdeleted file mode 100644[m
[1mindex 53347e7..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/csrf.js[m
[1m+++ /dev/null[m
[36m@@ -1,105 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - csrf[m
[31m- * Copyright(c) 2011 Sencha Inc.[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var utils = require('../utils')[m
[31m-  , crypto = require('crypto');[m
[31m-[m
[31m-/**[m
[31m- * CRSF protection middleware.[m
[31m- *[m
[31m- * By default this middleware generates a token named "_csrf"[m
[31m- * which should be added to requests which mutate[m
[31m- * state, within a hidden form field, query-string etc. This[m
[31m- * token is validated against the visitor's `req.session._csrf`[m
[31m- * property which is re-generated per request.[m
[31m- *[m
[31m- * The default `value` function checks `req.body` generated[m
[31m- * by the `bodyParser()` middleware, `req.query` generated[m
[31m- * by `query()`, and the "X-CSRF-Token" header field.[m
[31m- *[m
[31m- * This middleware requires session support, thus should be added[m
[31m- * somewhere _below_ `session()` and `cookieParser()`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *      var form = '\n\[m
[31m- *        <form action="/" method="post">\n\[m
[31m- *          <input type="hidden" name="_csrf" value="{token}" />\n\[m
[31m- *          <input type="text" name="user[name]" value="{user}" />\n\[m
[31m- *          <input type="password" name="user[pass]" />\n\[m
[31m- *          <input type="submit" value="Login" />\n\[m
[31m- *        </form>\n\[m
[31m- *      '; [m
[31m- *      [m
[31m- *      connect([m
[31m- *          connect.cookieParser()[m
[31m- *        , connect.session({ secret: 'keyboard cat' })[m
[31m- *        , connect.bodyParser()[m
[31m- *        , connect.csrf()[m
[31m- *      [m
[31m- *        , function(req, res, next){[m
[31m- *          if ('POST' != req.method) return next();[m
[31m- *          req.session.user = req.body.user;[m
[31m- *          next();[m
[31m- *        }[m
[31m- *      [m
[31m- *        , function(req, res){[m
[31m- *          res.setHeader('Content-Type', 'text/html');[m
[31m- *          var body = form[m
[31m- *            .replace('{token}', req.session._csrf)[m
[31m- *            .replace('{user}', req.session.user && req.session.user.name || '');[m
[31m- *          res.end(body);[m
[31m- *        }[m
[31m- *      ).listen(3000);[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *    - `value` a function accepting the request, returning the token [m
[31m- *[m
[31m- * @param {Object} options[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function csrf(options) {[m
[31m-  var options = options || {}[m
[31m-    , value = options.value || defaultValue;[m
[31m-[m
[31m-  return function(req, res, next){[m
[31m-    // generate CSRF token[m
[31m-    var token = req.session._csrf || (req.session._csrf = utils.uid(24));[m
[31m-[m
[31m-    // ignore GET (for now)[m
[31m-    if ('GET' == req.method || 'HEAD' == req.method || 'OPTIONS' == req.method) return next();[m
[31m-[m
[31m-    // determine value[m
[31m-    var val = value(req);[m
[31m-[m
[31m-    // check[m
[31m-    if (val != token) return utils.forbidden(res);[m
[31m-    [m
[31m-    next();[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Default value function, checking the `req.body`[m
[31m- * and `req.query` for the CSRF token.[m
[31m- *[m
[31m- * @param {IncomingMessage} req[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function defaultValue(req) {[m
[31m-  return (req.body && req.body._csrf)[m
[31m-    || (req.query && req.query._csrf)[m
[31m-    || (req.headers['x-csrf-token']);[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/directory.js b/node_modules/express/node_modules/connect/lib/middleware/directory.js[m
[1mdeleted file mode 100644[m
[1mindex df5b5e6..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/directory.js[m
[1m+++ /dev/null[m
[36m@@ -1,222 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - directory[m
[31m- * Copyright(c) 2011 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-// TODO: icon / style for directories[m
[31m-// TODO: arrow key navigation[m
[31m-// TODO: make icons extensible[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var fs = require('fs')[m
[31m-  , parse = require('url').parse[m
[31m-  , utils = require('../utils')[m
[31m-  , path = require('path')[m
[31m-  , normalize = path.normalize[m
[31m-  , extname = path.extname[m
[31m-  , join = path.join;[m
[31m-[m
[31m-/**[m
[31m- * Icon cache.[m
[31m- */[m
[31m-[m
[31m-var cache = {};[m
[31m-[m
[31m-/**[m
[31m- * Serve directory listings with the given `root` path.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *  - `hidden` display hidden (dot) files. Defaults to false.[m
[31m- *  - `icons`  display icons. Defaults to false.[m
[31m- *  - `filter` Apply this filter function to files. Defaults to false.[m
[31m- *[m
[31m- * @param {String} root[m
[31m- * @param {Object} options[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = function directory(root, options){[m
[31m-  options = options || {};[m
[31m-[m
[31m-  // root required[m
[31m-  if (!root) throw new Error('directory() root path required');[m
[31m-  var hidden = options.hidden[m
[31m-    , icons = options.icons[m
[31m-    , filter = options.filter[m
[31m-    , root = normalize(root);[m
[31m-[m
[31m-  return function directory(req, res, next) {[m
[31m-    var accept = req.headers.accept || 'text/plain'[m
[31m-      , url = parse(req.url)[m
[31m-      , dir = decodeURIComponent(url.pathname)[m
[31m-      , path = normalize(join(root, dir))[m
[31m-      , originalUrl = parse(req.originalUrl)[m
[31m-      , originalDir = decodeURIComponent(originalUrl.pathname)[m
[31m-      , showUp = path != root && path != root + '/';[m
[31m-[m
[31m-    // null byte(s)[m
[31m-    if (~path.indexOf('\0')) return utils.badRequest(res);[m
[31m-[m
[31m-    // malicious path[m
[31m-    if (0 != path.indexOf(root)) return utils.forbidden(res);[m
[31m-[m
[31m-    // check if we have a directory[m
[31m-    fs.stat(path, function(err, stat){[m
[31m-      if (err) return 'ENOENT' == err.code[m
[31m-        ? next()[m
[31m-        : next(err);[m
[31m-[m
[31m-      if (!stat.isDirectory()) return next();[m
[31m-[m
[31m-      // fetch files[m
[31m-      fs.readdir(path, function(err, files){[m
[31m-        if (err) return next(err);[m
[31m-        if (!hidden) files = removeHidden(files);[m
[31m-        if (filter) files = files.filter(filter);[m
[31m-        files.sort();[m
[31m-        // content-negotiation[m
[31m-        for (var key in exports) {[m
[31m-          if (~accept.indexOf(key) || ~accept.indexOf('*/*')) {[m
[31m-            exports[key](req, res, files, next, originalDir, showUp, icons);[m
[31m-            return;[m
[31m-          }[m
[31m-        }[m
[31m-        utils.notAcceptable(res);[m
[31m-      });[m
[31m-    });[m
[31m-  };[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Respond with text/html.[m
[31m- */[m
[31m-[m
[31m-exports.html = function(req, res, files, next, dir, showUp, icons){[m
[31m-  fs.readFile(__dirname + '/../public/directory.html', 'utf8', function(err, str){[m
[31m-    if (err) return next(err);[m
[31m-    fs.readFile(__dirname + '/../public/style.css', 'utf8', function(err, style){[m
[31m-      if (err) return next(err);[m
[31m-      if (showUp) files.unshift('..');[m
[31m-      str = str[m
[31m-        .replace('{style}', style)[m
[31m-        .replace('{files}', html(files, dir, icons))[m
[31m-        .replace('{directory}', dir)[m
[31m-		.replace('{linked-path}', htmlPath(dir));[m
[31m-      res.setHeader('Content-Type', 'text/html');[m
[31m-      res.setHeader('Content-Length', str.length);[m
[31m-      res.end(str);[m
[31m-    });[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Respond with application/json.[m
[31m- */[m
[31m-[m
[31m-exports.json = function(req, res, files){[m
[31m-  files = JSON.stringify(files);[m
[31m-  res.setHeader('Content-Type', 'application/json');[m
[31m-  res.setHeader('Content-Length', files.length);[m
[31m-  res.end(files);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Respond with text/plain.[m
[31m- */[m
[31m-[m
[31m-exports.plain = function(req, res, files){[m
[31m-  files = files.join('\n') + '\n';[m
[31m-  res.setHeader('Content-Type', 'text/plain');[m
[31m-  res.setHeader('Content-Length', files.length);[m
[31m-  res.end(files);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Map html `dir`, returning a linked path.[m
[31m- */[m
[31m-[m
[31m-function htmlPath(dir) {[m
[31m-  var curr = [];[m
[31m-  return dir.split('/').map(function(part){[m
[31m-    curr.push(part);[m
[31m-    return '<a href="' + curr.join('/') + '">' + part + '</a>';[m
[31m-  }).join(' / ');[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Map html `files`, returning an html unordered list.[m
[31m- */[m
[31m-[m
[31m-function html(files, dir, useIcons) {[m
[31m-  return '<ul id="files">' + files.map(function(file){[m
[31m-    var icon = ''[m
[31m-      , classes = [];[m
[31m-[m
[31m-    if (useIcons && '..' != file) {[m
[31m-      icon = icons[extname(file)] || icons.default;[m
[31m-      icon = '<img src="data:image/png;base64,' + load(icon) + '" />';[m
[31m-      classes.push('icon');[m
[31m-    }[m
[31m-[m
[31m-    return '<li><a href="'[m
[31m-      + join(dir, file)[m
[31m-      + '" class="'[m
[31m-      + classes.join(' ') + '"'[m
[31m-      + ' title="' + file + '">'[m
[31m-      + icon + file + '</a></li>';[m
[31m-[m
[31m-  }).join('\n') + '</ul>';[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Load and cache the given `icon`.[m
[31m- *[m
[31m- * @param {String} icon[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function load(icon) {[m
[31m-  if (cache[icon]) return cache[icon];[m
[31m-  return cache[icon] = fs.readFileSync(__dirname + '/../public/icons/' + icon, 'base64');[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Filter "hidden" `files`, aka files[m
[31m- * beginning with a `.`.[m
[31m- *[m
[31m- * @param {Array} files[m
[31m- * @return {Array}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function removeHidden(files) {[m
[31m-  return files.filter(function(file){[m
[31m-    return '.' != file[0];[m
[31m-  });[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Icon map.[m
[31m- */[m
[31m-[m
[31m-var icons = {[m
[31m-    '.js': 'page_white_code_red.png'[m
[31m-  , '.c': 'page_white_c.png'[m
[31m-  , '.h': 'page_white_h.png'[m
[31m-  , '.cc': 'page_white_cplusplus.png'[m
[31m-  , '.php': 'page_white_php.png'[m
[31m-  , '.rb': 'page_white_ruby.png'[m
[31m-  , '.cpp': 'page_white_cplusplus.png'[m
[31m-  , '.swf': 'page_white_flash.png'[m
[31m-  , '.pdf': 'page_white_acrobat.png'[m
[31m-  , 'default': 'page_white.png'[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/errorHandler.js b/node_modules/express/node_modules/connect/lib/middleware/errorHandler.js[m
[1mdeleted file mode 100644[m
[1mindex f2fc44f..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/errorHandler.js[m
[1m+++ /dev/null[m
[36m@@ -1,100 +0,0 @@[m
[31m-/*![m
[31m- * Connect - errorHandler[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var utils = require('../utils')[m
[31m-  , url = require('url')[m
[31m-  , fs = require('fs');[m
[31m-[m
[31m-/**[m
[31m- * Flexible error handler, providing (_optional_) stack traces[m
[31m- * and error message responses for requests accepting text, html,[m
[31m- * or json.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `showStack`, `stack` respond with both the error message and stack trace. Defaults to `false`[m
[31m- *   - `showMessage`, `message`, respond with the exception message only. Defaults to `false`[m
[31m- *   - `dumpExceptions`, `dump`, dump exceptions to stderr (without terminating the process). Defaults to `false`[m
[31m- *[m
[31m- * Text:[m
[31m- *[m
[31m- *   By default, and when _text/plain_ is accepted a simple stack trace[m
[31m- *   or error message will be returned.[m
[31m- *[m
[31m- * JSON:[m
[31m- *[m
[31m- *   When _application/json_ is accepted, connect will respond with[m
[31m- *   an object in the form of `{ "error": error }`. [m
[31m- *[m
[31m- * HTML:[m
[31m- *[m
[31m- *   When accepted connect will output a nice html stack trace.[m
[31m- *[m
[31m- * @param {Object} options[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = function errorHandler(options){[m
[31m-  options = options || {};[m
[31m-[m
[31m-  // defaults[m
[31m-  var showStack = options.showStack || options.stack[m
[31m-    , showMessage = options.showMessage || options.message[m
[31m-    , dumpExceptions = options.dumpExceptions || options.dump[m
[31m-    , formatUrl = options.formatUrl;[m
[31m-[m
[31m-  return function errorHandler(err, req, res, next){[m
[31m-    res.statusCode = 500;[m
[31m-    if (dumpExceptions) console.error(err.stack);[m
[31m-    if (showStack) {[m
[31m-      var accept = req.headers.accept || '';[m
[31m-      // html[m
[31m-      if (~accept.indexOf('html')) {[m
[31m-        fs.readFile(__dirname + '/../public/style.css', 'utf8', function(e, style){[m
[31m-          fs.readFile(__dirname + '/../public/error.html', 'utf8', function(e, html){[m
[31m-            var stack = (err.stack || '')[m
[31m-              .split('\n').slice(1)[m
[31m-              .map(function(v){ return '<li>' + v + '</li>'; }).join('');[m
[31m-              html = html[m
[31m-                .replace('{style}', style)[m
[31m-                .replace('{stack}', stack)[m
[31m-                .replace('{title}', exports.title)[m
[31m-                .replace(/\{error\}/g, utils.escape(err.toString()));[m
[31m-              res.setHeader('Content-Type', 'text/html');[m
[31m-              res.end(html);[m
[31m-          });[m
[31m-        });[m
[31m-      // json[m
[31m-      } else if (~accept.indexOf('json')) {[m
[31m-        var json = JSON.stringify({ error: err });[m
[31m-        res.setHeader('Content-Type', 'application/json');[m
[31m-        res.end(json);[m
[31m-      // plain text[m
[31m-      } else {[m
[31m-        res.writeHead(500, { 'Content-Type': 'text/plain' });[m
[31m-        res.end(err.stack);[m
[31m-      }[m
[31m-    } else {[m
[31m-      var body = showMessage[m
[31m-        ? err.toString()[m
[31m-        : 'Internal Server Error';[m
[31m-      res.setHeader('Content-Type', 'text/plain');[m
[31m-      res.end(body);[m
[31m-    }[m
[31m-  };[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Template title.[m
[31m- */[m
[31m-[m
[31m-exports.title = 'Connect';[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/favicon.js b/node_modules/express/node_modules/connect/lib/middleware/favicon.js[m
[1mdeleted file mode 100644[m
[1mindex 8eeafba..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/favicon.js[m
[1m+++ /dev/null[m
[36m@@ -1,76 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - favicon[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var fs = require('fs')[m
[31m-  , utils = require('../utils');[m
[31m-[m
[31m-/**[m
[31m- * Favicon cache.[m
[31m- */[m
[31m-[m
[31m-var icon;[m
[31m-[m
[31m-/**[m
[31m- * By default serves the connect favicon, or the favicon[m
[31m- * located by the given `path`.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `maxAge`  cache-control max-age directive, defaulting to 1 day[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     connect.createServer([m
[31m- *       connect.favicon()    [m
[31m- *     );[m
[31m- *[m
[31m- *     connect.createServer([m
[31m- *       connect.favicon(__dirname + '/public/favicon.ico')    [m
[31m- *     );[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @param {Object} options[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function favicon(path, options){[m
[31m-  var options = options || {}[m
[31m-    , path = path || __dirname + '/../public/favicon.ico'[m
[31m-    , maxAge = options.maxAge || 86400000;[m
[31m-[m
[31m-  return function favicon(req, res, next){[m
[31m-    if ('/favicon.ico' == req.url) {[m
[31m-      if (icon) {[m
[31m-        res.writeHead(200, icon.headers);[m
[31m-        res.end(icon.body);[m
[31m-      } else {[m
[31m-        fs.readFile(path, function(err, buf){[m
[31m-          if (err) return next(err);[m
[31m-          icon = {[m
[31m-            headers: {[m
[31m-                'Content-Type': 'image/x-icon'[m
[31m-              , 'Content-Length': buf.length[m
[31m-              , 'ETag': '"' + utils.md5(buf) + '"'[m
[31m-              , 'Cache-Control': 'public, max-age=' + (maxAge / 1000)[m
[31m-            },[m
[31m-            body: buf[m
[31m-          };[m
[31m-          res.writeHead(200, icon.headers);[m
[31m-          res.end(icon.body);[m
[31m-        });[m
[31m-      }[m
[31m-    } else {[m
[31m-      next();[m
[31m-    }[m
[31m-  };[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/limit.js b/node_modules/express/node_modules/connect/lib/middleware/limit.js[m
[1mdeleted file mode 100644[m
[1mindex a604ffb..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/limit.js[m
[1m+++ /dev/null[m
[36m@@ -1,80 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - limit[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Limit request bodies to the given size in `bytes`.[m
[31m- *[m
[31m- * A string representation of the bytesize may also be passed,[m
[31m- * for example "5mb", "200kb", "1gb", etc.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     var server = connect([m
[31m- *       connect.limit('5.5mb')[m
[31m- *     ).listen(3000);[m
[31m- *[m
[31m- * @param {Number|String} bytes[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function limit(bytes){[m
[31m-  if ('string' == typeof bytes) bytes = parse(bytes);[m
[31m-  if ('number' != typeof bytes) throw new Error('limit() bytes required');[m
[31m-  return function limit(req, res, next){[m
[31m-    var received = 0[m
[31m-      , len = req.headers['content-length'][m
[31m-        ? parseInt(req.headers['content-length'], 10)[m
[31m-        : null;[m
[31m-[m
[31m-    // deny the request[m
[31m-    function deny() {[m
[31m-      req.destroy();[m
[31m-    }[m
[31m-[m
[31m-    // self-awareness[m
[31m-    if (req._limit) return next();[m
[31m-    req._limit = true;[m
[31m-[m
[31m-    // limit by content-length[m
[31m-    if (len && len > bytes) {[m
[31m-      res.statusCode = 413;[m
[31m-      res.end('Request Entity Too Large');[m
[31m-      return;[m
[31m-    }[m
[31m-[m
[31m-    // limit[m
[31m-    req.on('data', function(chunk){[m
[31m-      received += chunk.length;[m
[31m-      if (received > bytes) deny();[m
[31m-    });[m
[31m-[m
[31m-    next();[m
[31m-  };[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Parse byte `size` string.[m
[31m- *[m
[31m- * @param {String} size[m
[31m- * @return {Number}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function parse(size) {[m
[31m-  var parts = size.match(/^(\d+(?:\.\d+)?) *(kb|mb|gb)$/)[m
[31m-    , n = parseFloat(parts[1])[m
[31m-    , type = parts[2];[m
[31m-[m
[31m-  var map = {[m
[31m-      kb: 1024[m
[31m-    , mb: 1024 * 1024[m
[31m-    , gb: 1024 * 1024 * 1024[m
[31m-  };[m
[31m-[m
[31m-  return map[type] * n;[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/logger.js b/node_modules/express/node_modules/connect/lib/middleware/logger.js[m
[1mdeleted file mode 100644[m
[1mindex 75cc5aa..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/logger.js[m
[1m+++ /dev/null[m
[36m@@ -1,299 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - logger[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Log buffer.[m
[31m- */[m
[31m-[m
[31m-var buf = [];[m
[31m-[m
[31m-/**[m
[31m- * Default log buffer duration.[m
[31m- */[m
[31m-[m
[31m-var defaultBufferDuration = 1000;[m
[31m-[m
[31m-/**[m
[31m- * Log requests with the given `options` or a `format` string.[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `format`  Format string, see below for tokens[m
[31m- *   - `stream`  Output stream, defaults to _stdout_[m
[31m- *   - `buffer`  Buffer duration, defaults to 1000ms when _true_[m
[31m- *   - `immediate`  Write log line on request instead of response (for response times)[m
[31m- *[m
[31m- * Tokens:[m
[31m- *[m
[31m- *   - `:req[header]` ex: `:req[Accept]`[m
[31m- *   - `:res[header]` ex: `:res[Content-Length]`[m
[31m- *   - `:http-version`[m
[31m- *   - `:response-time`[m
[31m- *   - `:remote-addr`[m
[31m- *   - `:date`[m
[31m- *   - `:method`[m
[31m- *   - `:url`[m
[31m- *   - `:referrer`[m
[31m- *   - `:user-agent`[m
[31m- *   - `:status`[m
[31m- *[m
[31m- * Formats:[m
[31m- *[m
[31m- *   Pre-defined formats that ship with connect:[m
[31m- *[m
[31m- *    - `default` ':remote-addr - - [:date] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"'[m
[31m- *    - `short` ':remote-addr - :method :url HTTP/:http-version :status :res[content-length] - :response-time ms'[m
[31m- *    - `tiny`  ':method :url :status :res[content-length] - :response-time ms'[m
[31m- *    - `dev` concise output colored by response status for development use[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *      connect.logger() // default[m
[31m- *      connect.logger('short')[m
[31m- *      connect.logger('tiny')[m
[31m- *      connect.logger('dev')[m
[31m- *      connect.logger(':method :url - :referrer')[m
[31m- *      connect.logger(':req[content-type] -> :res[content-type]')[m
[31m- *      connect.logger(function(req, res){ return 'some format string' })[m
[31m- *[m
[31m- * Defining Tokens:[m
[31m- *[m
[31m- *   To define a token, simply invoke `connect.logger.token()` with the[m
[31m- *   name and a callback function. The value returned is then available[m
[31m- *   as ":type" in this case.[m
[31m- *[m
[31m- *      connect.logger.token('type', function(req, res){ return req.headers['content-type']; })[m
[31m- *[m
[31m- * Defining Formats:[m
[31m- *[m
[31m- *   All default formats are defined this way, however it's public API as well:[m
[31m- *[m
[31m- *       connect.logger.format('name', 'string or function')[m
[31m- *[m
[31m- * @param {String|Function|Object} format or options[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = function logger(options) {[m
[31m-  if ('object' == typeof options) {[m
[31m-    options = options || {};[m
[31m-  } else if (options) {[m
[31m-    options = { format: options };[m
[31m-  } else {[m
[31m-    options = {};[m
[31m-  }[m
[31m-[m
[31m-  // output on request instead of response[m
[31m-  var immediate = options.immediate;[m
[31m-[m
[31m-  // format name[m
[31m-  var fmt = exports[options.format] || options.format || exports.default;[m
[31m-[m
[31m-  // compile format[m
[31m-  if ('function' != typeof fmt) fmt = compile(fmt);[m
[31m-[m
[31m-  // options[m
[31m-  var stream = options.stream || process.stdout[m
[31m-    , buffer = options.buffer;[m
[31m-[m
[31m-  // buffering support[m
[31m-  if (buffer) {[m
[31m-    var realStream = stream[m
[31m-      , interval = 'number' == typeof buffer[m
[31m-        ? buffer[m
[31m-        : defaultBufferDuration;[m
[31m-[m
[31m-    // flush interval[m
[31m-    setInterval(function(){[m
[31m-      if (buf.length) {[m
[31m-        realStream.write(buf.join(''), 'ascii');[m
[31m-        buf.length = 0;[m
[31m-      }[m
[31m-    }, interval); [m
[31m-[m
[31m-    // swap the stream[m
[31m-    stream = {[m
[31m-      write: function(str){[m
[31m-        buf.push(str);[m
[31m-      }[m
[31m-    };[m
[31m-  }[m
[31m-[m
[31m-  return function logger(req, res, next) {[m
[31m-    req._startTime = new Date;[m
[31m-[m
[31m-    // mount safety[m
[31m-    if (req._logging) return next();[m
[31m-[m
[31m-    // flag as logging[m
[31m-    req._logging = true;[m
[31m-[m
[31m-    // immediate[m
[31m-    if (immediate) {[m
[31m-      var line = fmt(exports, req, res);[m
[31m-      if (null == line) return;[m
[31m-      stream.write(line + '\n', 'ascii');[m
[31m-    } else {[m
[31m-      // proxy end to output loggging[m
[31m-      var end = res.end;[m
[31m-      res.end = function(chunk, encoding){[m
[31m-        res.end = end;[m
[31m-        res.end(chunk, encoding);[m
[31m-        var line = fmt(exports, req, res);[m
[31m-        if (null == line) return;[m
[31m-        stream.write(line + '\n', 'ascii');[m
[31m-      };[m
[31m-    }[m
[31m-[m
[31m-[m
[31m-    next();[m
[31m-  };[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Compile `fmt` into a function.[m
[31m- *[m
[31m- * @param {String} fmt[m
[31m- * @return {Function}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function compile(fmt) {[m
[31m-  fmt = fmt.replace(/"/g, '\\"');[m
[31m-  var js = '  return "' + fmt.replace(/:([-\w]{2,})(?:\[([^\]]+)\])?/g, function(_, name, arg){[m
[31m-    return '"\n    + (tokens["' + name + '"](req, res, "' + arg + '") || "-") + "';[m
[31m-  }) + '";'[m
[31m-  return new Function('tokens, req, res', js);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Define a token function with the given `name`,[m
[31m- * and callback `fn(req, res)`.[m
[31m- *[m
[31m- * @param {String} name[m
[31m- * @param {Function} fn[m
[31m- * @return {Object} exports for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.token = function(name, fn) {[m
[31m-  exports[name] = fn;[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Define a `fmt` with the given `name`.[m
[31m- *[m
[31m- * @param {String} name[m
[31m- * @param {String|Function} fmt[m
[31m- * @return {Object} exports for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.format = function(name, str){[m
[31m-  exports[name] = str;[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-// default format[m
[31m-[m
[31m-exports.format('default', ':remote-addr - - [:date] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"');[m
[31m-[m
[31m-// short format[m
[31m-[m
[31m-exports.format('short', ':remote-addr - :method :url HTTP/:http-version :status :res[content-length] - :response-time ms');[m
[31m-[m
[31m-// tiny format[m
[31m-[m
[31m-exports.format('tiny', ':method :url :status :res[content-length] - :response-time ms');[m
[31m-[m
[31m-// dev (colored)[m
[31m-[m
[31m-exports.format('dev', function(tokens, req, res){[m
[31m-  var status = res.statusCode[m
[31m-    , color = 32;[m
[31m-[m
[31m-  if (status >= 500) color = 31[m
[31m-  else if (status >= 400) color = 33[m
[31m-  else if (status >= 300) color = 36;[m
[31m-[m
[31m-  return '\033[90m' + req.method[m
[31m-    + ' ' + req.originalUrl + ' '[m
[31m-    + '\033[' + color + 'm' + res.statusCode[m
[31m-    + ' \033[90m'[m
[31m-    + (new Date - req._startTime)[m
[31m-    + 'ms\033[0m';[m
[31m-});[m
[31m-[m
[31m-// request url[m
[31m-[m
[31m-exports.token('url', function(req){[m
[31m-  return req.originalUrl;[m
[31m-});[m
[31m-[m
[31m-// request method[m
[31m-[m
[31m-exports.token('method', function(req){[m
[31m-  return req.method;[m
[31m-});[m
[31m-[m
[31m-// response time in milliseconds[m
[31m-[m
[31m-exports.token('response-time', function(req){[m
[31m-  return new Date - req._startTime;[m
[31m-});[m
[31m-[m
[31m-// UTC date[m
[31m-[m
[31m-exports.token('date', function(){[m
[31m-  return new Date().toUTCString();[m
[31m-});[m
[31m-[m
[31m-// response status code[m
[31m-[m
[31m-exports.token('status', function(req, res){[m
[31m-  return res.statusCode;[m
[31m-});[m
[31m-[m
[31m-// normalized referrer[m
[31m-[m
[31m-exports.token('referrer', function(req){[m
[31m-  return req.headers['referer'] || req.headers['referrer'];[m
[31m-});[m
[31m-[m
[31m-// remote address[m
[31m-[m
[31m-exports.token('remote-addr', function(req){[m
[31m-  return req.socket && (req.socket.remoteAddress || (req.socket.socket && req.socket.socket.remoteAddress));[m
[31m-});[m
[31m-[m
[31m-// HTTP version[m
[31m-[m
[31m-exports.token('http-version', function(req){[m
[31m-  return req.httpVersionMajor + '.' + req.httpVersionMinor;[m
[31m-});[m
[31m-[m
[31m-// UA string[m
[31m-[m
[31m-exports.token('user-agent', function(req){[m
[31m-  return req.headers['user-agent'];[m
[31m-});[m
[31m-[m
[31m-// request header[m
[31m-[m
[31m-exports.token('req', function(req, res, field){[m
[31m-  return req.headers[field.toLowerCase()];[m
[31m-});[m
[31m-[m
[31m-// response header[m
[31m-[m
[31m-exports.token('res', function(req, res, field){[m
[31m-  return (res._headers || {})[field.toLowerCase()];[m
[31m-});[m
[31m-[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js b/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js[m
[1mdeleted file mode 100644[m
[1mindex db4e9f3..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js[m
[1m+++ /dev/null[m
[36m@@ -1,38 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - methodOverride[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Provides faux HTTP method support.[m
[31m- * [m
[31m- * Pass an optional `key` to use when checking for[m
[31m- * a method override, othewise defaults to _\_method_.[m
[31m- * The original method is available via `req.originalMethod`.[m
[31m- *[m
[31m- * @param {String} key[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function methodOverride(key){[m
[31m-  key = key || "_method";[m
[31m-  return function methodOverride(req, res, next) {[m
[31m-    req.originalMethod = req.originalMethod || req.method;[m
[31m-[m
[31m-    // req.body[m
[31m-    if (req.body && key in req.body) {[m
[31m-      req.method = req.body[key].toUpperCase();[m
[31m-      delete req.body[key];[m
[31m-    // check X-HTTP-Method-Override[m
[31m-    } else if (req.headers['x-http-method-override']) {[m
[31m-      req.method = req.headers['x-http-method-override'].toUpperCase();[m
[31m-    }[m
[31m-    [m
[31m-    next();[m
[31m-  };[m
[31m-};[m
[31m-[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/profiler.js b/node_modules/express/node_modules/connect/lib/middleware/profiler.js[m
[1mdeleted file mode 100644[m
[1mindex b0b5bac..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/profiler.js[m
[1m+++ /dev/null[m
[36m@@ -1,100 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - profiler[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Profile the duration of a request.[m
[31m- *[m
[31m- * Typically this middleware should be utilized[m
[31m- * _above_ all others, as it proxies the `res.end()`[m
[31m- * method, being first allows it to encapsulate all[m
[31m- * other middleware.[m
[31m- *[m
[31m- * Example Output:[m
[31m- *[m
[31m- *      GET /[m
[31m- *      response time 2ms[m
[31m- *      memory rss 52.00kb[m
[31m- *      memory vsize 2.07mb[m
[31m- *      heap before 3.76mb / 8.15mb[m
[31m- *      heap after 3.80mb / 8.15mb[m
[31m- *[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function profiler(){[m
[31m-  return function(req, res, next){[m
[31m-    var end = res.end[m
[31m-      , start = snapshot();[m
[31m-[m
[31m-    // state snapshot[m
[31m-    function snapshot() {[m
[31m-      return {[m
[31m-          mem: process.memoryUsage()[m
[31m-        , time: new Date[m
[31m-      };[m
[31m-    }[m
[31m-[m
[31m-    // proxy res.end()[m
[31m-    res.end = function(data, encoding){[m
[31m-      res.end = end;[m
[31m-      res.end(data, encoding);[m
[31m-      compare(req, start, snapshot())[m
[31m-    };[m
[31m-[m
[31m-    next();[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Compare `start` / `end` snapshots.[m
[31m- *[m
[31m- * @param {IncomingRequest} req[m
[31m- * @param {Object} start[m
[31m- * @param {Object} end[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function compare(req, start, end) {[m
[31m-  console.log();[m
[31m-  row(req.method, req.url);[m
[31m-  row('response time:', (end.time - start.time) + 'ms');[m
[31m-  row('memory rss:', formatBytes(end.mem.rss - start.mem.rss));[m
[31m-  row('memory vsize:', formatBytes(end.mem.vsize - start.mem.vsize));[m
[31m-  row('heap before:', formatBytes(start.mem.heapUsed) + ' / ' + formatBytes(start.mem.heapTotal));[m
[31m-  row('heap after:', formatBytes(end.mem.heapUsed) + ' / ' + formatBytes(end.mem.heapTotal));[m
[31m-  console.log();[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Row helper[m
[31m- *[m
[31m- * @param {String} key[m
[31m- * @param {String} val[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function row(key, val) {[m
[31m-  console.log('  \033[90m%s\033[0m \033[36m%s\033[0m', key, val);[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Format byte-size.[m
[31m- *[m
[31m- * @param {Number} bytes[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function formatBytes(bytes) {[m
[31m-  var kb = 1024[m
[31m-    , mb = 1024 * kb[m
[31m-    , gb = 1024 * mb;[m
[31m-  if (bytes < kb) return bytes + 'b';[m
[31m-  if (bytes < mb) return (bytes / kb).toFixed(2) + 'kb';[m
[31m-  if (bytes < gb) return (bytes / mb).toFixed(2) + 'mb';[m
[31m-  return (bytes / gb).toFixed(2) + 'gb';[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/query.js b/node_modules/express/node_modules/connect/lib/middleware/query.js[m
[1mdeleted file mode 100644[m
[1mindex d3b1acd..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/query.js[m
[1m+++ /dev/null[m
[36m@@ -1,40 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - query[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * Copyright(c) 2011 Sencha Inc.[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var qs = require('qs')[m
[31m-  , parse = require('url').parse;[m
[31m-[m
[31m-/**[m
[31m- * Automatically parse the query-string when available,[m
[31m- * populating the `req.query` object.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     connect([m
[31m- *         connect.query()[m
[31m- *       , function(req, res){[m
[31m- *         res.end(JSON.stringify(req.query));[m
[31m- *       }[m
[31m- *     ).listen(3000);[m
[31m- *[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function query(){[m
[31m-  return function query(req, res, next){[m
[31m-    req.query = ~req.url.indexOf('?')[m
[31m-      ? qs.parse(parse(req.url).query)[m
[31m-      : {};[m
[31m-    next();[m
[31m-  };[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/responseTime.js b/node_modules/express/node_modules/connect/lib/middleware/responseTime.js[m
[1mdeleted file mode 100644[m
[1mindex 2b2133a..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/responseTime.js[m
[1m+++ /dev/null[m
[36m@@ -1,34 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - responseTime[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Adds the `X-Response-Time` header displaying the response[m
[31m- * duration in milliseconds.[m
[31m- *[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function responseTime(){[m
[31m-  return function(req, res, next){[m
[31m-    var writeHead = res.writeHead[m
[31m-      , start = new Date;[m
[31m-[m
[31m-    if (res._responseTime) return next();[m
[31m-    res._responseTime = true;[m
[31m-[m
[31m-    // proxy writeHead to calculate duration[m
[31m-    res.writeHead = function(status, headers){[m
[31m-      var duration = new Date - start;[m
[31m-      res.setHeader('X-Response-Time', duration + 'ms');[m
[31m-      res.writeHead = writeHead;[m
[31m-      res.writeHead(status, headers);[m
[31m-    };[m
[31m-[m
[31m-    next();[m
[31m-  };[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/router.js b/node_modules/express/node_modules/connect/lib/middleware/router.js[m
[1mdeleted file mode 100644[m
[1mindex a07452e..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/router.js[m
[1m+++ /dev/null[m
[36m@@ -1,379 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - router[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var utils = require('../utils')[m
[31m-  , parse = require('url').parse;[m
[31m-[m
[31m-/**[m
[31m- * Expose router.[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = router;[m
[31m-[m
[31m-/**[m
[31m- * Supported HTTP / WebDAV methods.[m
[31m- */[m
[31m-[m
[31m-var _methods = exports.methods = [[m
[31m-    'get'[m
[31m-  , 'post'[m
[31m-  , 'put'[m
[31m-  , 'delete'[m
[31m-  , 'connect'[m
[31m-  , 'options'[m
[31m-  , 'trace'[m
[31m-  , 'copy'[m
[31m-  , 'lock'[m
[31m-  , 'mkcol'[m
[31m-  , 'move'[m
[31m-  , 'propfind'[m
[31m-  , 'proppatch'[m
[31m-  , 'unlock'[m
[31m-  , 'report'[m
[31m-  , 'mkactivity'[m
[31m-  , 'checkout'[m
[31m-  , 'merge'[m
[31m-];[m
[31m-[m
[31m-/**[m
[31m- * Provides Sinatra and Express-like routing capabilities.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     connect.router(function(app){[m
[31m- *       app.get('/user/:id', function(req, res, next){[m
[31m- *         // populates req.params.id[m
[31m- *       });[m
[31m- *       app.put('/user/:id', function(req, res, next){[m
[31m- *         // populates req.params.id[m
[31m- *       });[m
[31m- *     })[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-function router(fn){[m
[31m-  var self = this[m
[31m-    , methods = {}[m
[31m-    , routes = {}[m
[31m-    , params = {};[m
[31m-[m
[31m-  if (!fn) throw new Error('router provider requires a callback function');[m
[31m-[m
[31m-  // Generate method functions[m
[31m-  _methods.forEach(function(method){[m
[31m-    methods[method] = generateMethodFunction(method.toUpperCase());[m
[31m-  });[m
[31m-[m
[31m-  // Alias del -> delete[m
[31m-  methods.del = methods.delete;[m
[31m-[m
[31m-  // Apply callback to all methods[m
[31m-  methods.all = function(){[m
[31m-    var args = arguments;[m
[31m-    _methods.forEach(function(name){[m
[31m-      methods[name].apply(this, args);[m
[31m-    });[m
[31m-    return self;[m
[31m-  };[m
[31m-[m
[31m-  // Register param callback[m
[31m-  methods.param = function(name, fn){[m
[31m-    params[name] = fn;[m
[31m-  };[m
[31m-      [m
[31m-  fn.call(this, methods);[m
[31m-[m
[31m-  function generateMethodFunction(name) {[m
[31m-    var localRoutes = routes[name] = routes[name] || [];[m
[31m-    return function(path, fn){[m
[31m-      var keys = [][m
[31m-        , middleware = [];[m
[31m-[m
[31m-      // slice middleware[m
[31m-      if (arguments.length > 2) {[m
[31m-        middleware = Array.prototype.slice.call(arguments, 1, arguments.length);[m
[31m-        fn = middleware.pop();[m
[31m-        middleware = utils.flatten(middleware);[m
[31m-      }[m
[31m-[m
[31m-      fn.middleware = middleware;[m
[31m-[m
[31m-      if (!path) throw new Error(name + ' route requires a path');[m
[31m-      if (!fn) throw new Error(name + ' route ' + path + ' requires a callback');[m
[31m-      var regexp = path instanceof RegExp[m
[31m-        ? path[m
[31m-        : normalizePath(path, keys);[m
[31m-      localRoutes.push({[m
[31m-          fn: fn[m
[31m-        , path: regexp[m
[31m-        , keys: keys[m
[31m-        , orig: path[m
[31m-        , method: name[m
[31m-      });[m
[31m-      return self;[m
[31m-    };[m
[31m-  }[m
[31m-[m
[31m-  function router(req, res, next){[m
[31m-    var route[m
[31m-      , self = this;[m
[31m-[m
[31m-    (function pass(i){[m
[31m-      if (route = match(req, routes, i)) {[m
[31m-        var i = 0[m
[31m-          , keys = route.keys;[m
[31m-[m
[31m-        req.params = route.params;[m
[31m-[m
[31m-        // Param preconditions[m
[31m-        (function param(err) {[m
[31m-          try {[m
[31m-            var key = keys[i++][m
[31m-              , val = req.params[key][m
[31m-              , fn = params[key];[m
[31m-[m
[31m-            if ('route' == err) {[m
[31m-              pass(req._route_index + 1);[m
[31m-            // Error[m
[31m-            } else if (err) {[m
[31m-              next(err);[m
[31m-            // Param has callback[m
[31m-            } else if (fn) {[m
[31m-              // Return style[m
[31m-              if (1 == fn.length) {[m
[31m-                req.params[key] = fn(val);[m
[31m-                param();[m
[31m-              // Middleware style[m
[31m-              } else {[m
[31m-                fn(req, res, param, val);[m
[31m-              }[m
[31m-            // Finished processing params[m
[31m-            } else if (!key) {[m
[31m-              // route middleware[m
[31m-              i = 0;[m
[31m-              (function nextMiddleware(err){[m
[31m-                var fn = route.middleware[i++];[m
[31m-                if ('route' == err) {[m
[31m-                  pass(req._route_index + 1);[m
[31m-                } else if (err) {[m
[31m-                  next(err);[m
[31m-                } else if (fn) {[m
[31m-                  fn(req, res, nextMiddleware);[m
[31m-                } else {[m
[31m-                  route.call(self, req, res, function(err){[m
[31m-                    if (err) {[m
[31m-                      next(err);[m
[31m-                    } else {[m
[31m-                      pass(req._route_index + 1);[m
[31m-                    }[m
[31m-                  });[m
[31m-                }[m
[31m-              })();[m
[31m-            // More params[m
[31m-            } else {[m
[31m-              param();[m
[31m-            }[m
[31m-          } catch (err) {[m
[31m-            next(err);[m
[31m-          }[m
[31m-        })();[m
[31m-      } else if ('OPTIONS' == req.method) {[m
[31m-        options(req, res, routes);[m
[31m-      } else {[m
[31m-        next();[m
[31m-      }[m
[31m-    })();[m
[31m-  };[m
[31m-[m
[31m-  router.remove = function(path, method){[m
[31m-    var fns = router.lookup(path, method);[m
[31m-    fns.forEach(function(fn){[m
[31m-      routes[fn.method].splice(fn.index, 1);[m
[31m-    });[m
[31m-  };[m
[31m-[m
[31m-  router.lookup = function(path, method, ret){[m
[31m-    ret = ret || [];[m
[31m-[m
[31m-    // method specific lookup[m
[31m-    if (method) {[m
[31m-      method = method.toUpperCase();[m
[31m-      if (routes[method]) {[m
[31m-        routes[method].forEach(function(route, i){[m
[31m-          if (path == route.orig) {[m
[31m-            var fn = route.fn;[m
[31m-            fn.regexp = route.path;[m
[31m-            fn.keys = route.keys;[m
[31m-            fn.path = route.orig;[m
[31m-            fn.method = route.method;[m
[31m-            fn.index = i;[m
[31m-            ret.push(fn);[m
[31m-          }[m
[31m-        });[m
[31m-      }[m
[31m-    // global lookup[m
[31m-    } else {[m
[31m-      _methods.forEach(function(method){[m
[31m-        router.lookup(path, method, ret);[m
[31m-      });[m
[31m-    }[m
[31m-[m
[31m-    return ret;[m
[31m-  };[m
[31m-[m
[31m-  router.match = function(url, method, ret){[m
[31m-    var ret = ret || [][m
[31m-      , i = 0[m
[31m-      , fn[m
[31m-      , req;[m
[31m-[m
[31m-    // method specific matches[m
[31m-    if (method) {[m
[31m-      method = method.toUpperCase();[m
[31m-      req = { url: url, method: method };[m
[31m-      while (fn = match(req, routes, i)) {[m
[31m-        i = req._route_index + 1;[m
[31m-        ret.push(fn);[m
[31m-      } [m
[31m-    // global matches[m
[31m-    } else {[m
[31m-      _methods.forEach(function(method){[m
[31m-        router.match(url, method, ret);[m
[31m-      });[m
[31m-    }[m
[31m-[m
[31m-    return ret;[m
[31m-  };[m
[31m-[m
[31m-  return router;[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Respond to OPTIONS.[m
[31m- *[m
[31m- * @param {ServerRequest} req[m
[31m- * @param {ServerResponse} req[m
[31m- * @param {Array} routes[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function options(req, res, routes) {[m
[31m-  var pathname = parse(req.url).pathname[m
[31m-    , body = optionsFor(pathname, routes).join(',');[m
[31m-  res.writeHead(200, {[m
[31m-      'Content-Length': body.length[m
[31m-    , 'Allow': body[m
[31m-  });[m
[31m-  res.end(body);[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Return OPTIONS array for the given `path`, matching `routes`.[m
[31m- *[m
[31m- * @param {String} path[m
[31m- * @param {Array} routes[m
[31m- * @return {Array}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function optionsFor(path, routes) {[m
[31m-  return _methods.filter(function(method){[m
[31m-    var arr = routes[method.toUpperCase()];[m
[31m-    for (var i = 0, len = arr.length; i < len; ++i) {[m
[31m-      if (arr[i].path.test(path)) return true;[m
[31m-    }[m
[31m-  }).map(function(method){[m
[31m-    return method.toUpperCase();[m
[31m-  });[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Normalize the given path string,[m
[31m- * returning a regular expression.[m
[31m- *[m
[31m- * An empty array should be passed,[m
[31m- * which will contain the placeholder[m
[31m- * key names. For example "/user/:id" will[m
[31m- * then contain ["id"].[m
[31m- *[m
[31m- * @param  {String} path[m
[31m- * @param  {Array} keys[m
[31m- * @return {RegExp}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function normalizePath(path, keys) {[m
[31m-  path = path[m
[31m-    .concat('/?')[m
[31m-    .replace(/\/\(/g, '(?:/')[m
[31m-    .replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g, function(_, slash, format, key, capture, optional){[m
[31m-      keys.push(key);[m
[31m-      slash = slash || '';[m
[31m-      return ''[m
[31m-        + (optional ? '' : slash)[m
[31m-        + '(?:'[m
[31m-        + (optional ? slash : '')[m
[31m-        + (format || '') + (capture || '([^/]+?)') + ')'[m
[31m-        + (optional || '');[m
[31m-    })[m
[31m-    .replace(/([\/.])/g, '\\$1')[m
[31m-    .replace(/\*/g, '(.+)');[m
[31m-  return new RegExp('^' + path + '$', 'i');[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Attempt to match the given request to[m
[31m- * one of the routes. When successful[m
[31m- * a route function is returned.[m
[31m- *[m
[31m- * @param  {ServerRequest} req[m
[31m- * @param  {Object} routes[m
[31m- * @return {Function}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function match(req, routes, i) {[m
[31m-  var captures[m
[31m-    , method = req.method[m
[31m-    , i = i || 0;[m
[31m-  if ('HEAD' == method) method = 'GET';[m
[31m-  if (routes = routes[method]) {[m
[31m-    var url = parse(req.url)[m
[31m-      , pathname = url.pathname;[m
[31m-    for (var len = routes.length; i < len; ++i) {[m
[31m-      var route = routes[i][m
[31m-        , fn = route.fn[m
[31m-        , path = route.path[m
[31m-        , keys = fn.keys = route.keys;[m
[31m-      if (captures = path.exec(pathname)) {[m
[31m-        fn.method = method;[m
[31m-        fn.params = [];[m
[31m-        for (var j = 1, len = captures.length; j < len; ++j) {[m
[31m-          var key = keys[j-1],[m
[31m-            val = typeof captures[j] === 'string'[m
[31m-              ? decodeURIComponent(captures[j])[m
[31m-              : captures[j];[m
[31m-          if (key) {[m
[31m-            fn.params[key] = val;[m
[31m-          } else {[m
[31m-            fn.params.push(val);[m
[31m-          }[m
[31m-        }[m
[31m-        req._route_index = i;[m
[31m-        return fn;[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session.js b/node_modules/express/node_modules/connect/lib/middleware/session.js[m
[1mdeleted file mode 100644[m
[1mindex 6616fad..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/session.js[m
[1m+++ /dev/null[m
[36m@@ -1,345 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - session[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var Session = require('./session/session')[m
[31m-  , MemoryStore = require('./session/memory')[m
[31m-  , Cookie = require('./session/cookie')[m
[31m-  , Store = require('./session/store')[m
[31m-  , utils = require('./../utils')[m
[31m-  , parse = require('url').parse[m
[31m-  , crypto = require('crypto');[m
[31m-[m
[31m-// environment[m
[31m-[m
[31m-var env = process.env.NODE_ENV;[m
[31m-[m
[31m-/**[m
[31m- * Expose the middleware.[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = session;[m
[31m-[m
[31m-/**[m
[31m- * Expose constructors.[m
[31m- */[m
[31m-[m
[31m-exports.Store = Store;[m
[31m-exports.Cookie = Cookie;[m
[31m-exports.Session = Session;[m
[31m-exports.MemoryStore = MemoryStore;[m
[31m-[m
[31m-/**[m
[31m- * Warning message for `MemoryStore` usage in production.[m
[31m- */[m
[31m-[m
[31m-var warning = 'Warning: connection.session() MemoryStore is not\n'[m
[31m-  + 'designed for a production environment, as it will leak\n'[m
[31m-  + 'memory, and obviously only work within a single process.';[m
[31m-[m
[31m-/**[m
[31m- * Default finger-printing function.[m
[31m- */[m
[31m-[m
[31m-function defaultFingerprint(req) {[m
[31m-  return '';[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Paths to ignore.[m
[31m- */[m
[31m-[m
[31m-exports.ignore = [];[m
[31m-[m
[31m-/**[m
[31m- * Setup session store with the given `options`.[m
[31m- *[m
[31m- * Session data is _not_ saved in the cookie itself, however[m
[31m- * cookies are used, so we must use the [cookieParser()](middleware-cookieParser.html)[m
[31m- * middleware _before_ `session()`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     connect.createServer([m
[31m- *         connect.cookieParser()[m
[31m- *       , connect.session({ secret: 'keyboard cat' })[m
[31m- *     );[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `key`           cookie name defaulting to `connect.sid`[m
[31m- *   - `store`         Session store instance[m
[31m- *   - `fingerprint`   Custom fingerprint generating function[m
[31m- *   - `cookie`        Session cookie settings, defaulting to `{ path: '/', httpOnly: true, maxAge: 14400000 }`[m
[31m- *   - `secret`        Secret string used to compute hash[m
[31m- *[m
[31m- * Ignore Paths:[m
[31m- *[m
[31m- *  By default `/favicon.ico` is the only ignored path, all others[m
[31m- *  will utilize sessions, to manipulate the paths ignored, use[m
[31m- * `connect.session.ignore.push('/my/path')`. This works for _full_[m
[31m- *  pathnames only, not segments nor substrings.[m
[31m- *[m
[31m- *     connect.session.ignore.push('/robots.txt');[m
[31m- *[m
[31m- * ## req.session[m
[31m- *[m
[31m- *  To store or access session data, simply use the request property `req.session`,[m
[31m- *  which is (generally) serialized as JSON by the store, so nested objects [m
[31m- *  are typically fine. For example below is a user-specific view counter:[m
[31m- *[m
[31m- *       connect([m
[31m- *           connect.cookieParser()[m
[31m- *         , connect.session({ secret: 'keyboard cat', cookie: { maxAge: 60000 }})[m
[31m- *         , connect.favicon()[m
[31m- *         , function(req, res, next){[m
[31m- *           var sess = req.session;[m
[31m- *           if (sess.views) {[m
[31m- *             res.setHeader('Content-Type', 'text/html');[m
[31m- *             res.write('<p>views: ' + sess.views + '</p>');[m
[31m- *             res.write('<p>expires in: ' + (sess.cookie.maxAge / 1000) + 's</p>');[m
[31m- *             res.end();[m
[31m- *             sess.views++;[m
[31m- *           } else {[m
[31m- *             sess.views = 1;[m
[31m- *             res.end('welcome to the session demo. refresh!');[m
[31m- *           }[m
[31m- *         }[m
[31m- *       ).listen(3000);[m
[31m- *[m
[31m- * ## Session#regenerate()[m
[31m- *[m
[31m- *  To regenerate the session simply invoke the method, once complete[m
[31m- *  a new SID and `Session` instance will be initialized at `req.session`.[m
[31m- *[m
[31m- *      req.session.regenerate(function(err){[m
[31m- *        // will have a new session here[m
[31m- *      });[m
[31m- *[m
[31m- * ## Session#destroy()[m
[31m- *[m
[31m- *  Destroys the session, removing `req.session`, will be re-generated next request.[m
[31m- *[m
[31m- *      req.session.destroy(function(err){[m
[31m- *        // cannot access session here[m
[31m- *      });[m
[31m- * [m
[31m- * ## Session#reload()[m
[31m- *[m
[31m- *  Reloads the session data.[m
[31m- *[m
[31m- *      req.session.reload(function(err){[m
[31m- *        // session updated[m
[31m- *      });[m
[31m- *[m
[31m- * ## Session#save()[m
[31m- *[m
[31m- *  Save the session.[m
[31m- *[m
[31m- *      req.session.save(function(err){[m
[31m- *        // session saved[m
[31m- *      });[m
[31m- *[m
[31m- * ## Session#touch()[m
[31m- *[m
[31m- *   Updates the `.maxAge`, and `.lastAccess` properties. Typically this is[m
[31m- *   not necessary to call, as the session middleware does this for you.[m
[31m- *[m
[31m- * ## Session#cookie[m
[31m- *[m
[31m- *  Each session has a unique cookie object accompany it. This allows[m
[31m- *  you to alter the session cookie per visitor. For example we can[m
[31m- *  set `req.session.cookie.expires` to `false` to enable the cookie[m
[31m- *  to remain for only the duration of the user-agent.[m
[31m- *[m
[31m- * ## Session#maxAge[m
[31m- *[m
[31m- *  Alternatively `req.session.cookie.maxAge` will return the time[m
[31m- *  remaining in milliseconds, which we may also re-assign a new value[m
[31m- *  to adjust the `.expires` property appropriately. The following[m
[31m- *  are essentially equivalent[m
[31m- *[m
[31m- *     var hour = 3600000;[m
[31m- *     req.session.cookie.expires = new Date(Date.now() + hour);[m
[31m- *     req.session.cookie.maxAge = hour;[m
[31m- *[m
[31m- * For example when `maxAge` is set to `60000` (one minute), and 30 seconds[m
[31m- * has elapsed it will return `30000` until the current request has completed,[m
[31m- * at which time `req.session.touch()` is called to update `req.session.lastAccess`,[m
[31m- * and reset `req.session.maxAge` to its original value.[m
[31m- *[m
[31m- *     req.session.cookie.maxAge;[m
[31m- *     // => 30000[m
[31m- *[m
[31m- * Session Store Implementation:[m
[31m- *[m
[31m- * Every session store _must_ implement the following methods[m
[31m- *[m
[31m- *    - `.get(sid, callback)`[m
[31m- *    - `.set(sid, session, callback)`[m
[31m- *    - `.destroy(sid, callback)`[m
[31m- *[m
[31m- * Recommended methods include, but are not limited to:[m
[31m- *[m
[31m- *    - `.length(callback)`[m
[31m- *    - `.clear(callback)`[m
[31m- *[m
[31m- * For an example implementation view the [connect-redis](http://github.com/visionmedia/connect-redis) repo.[m
[31m- *[m
[31m- * @param {Object} options[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-function session(options){[m
[31m-  var options = options || {}[m
[31m-    , key = options.key || 'connect.sid'[m
[31m-    , secret = options.secret[m
[31m-    , store = options.store || new MemoryStore[m
[31m-    , fingerprint = options.fingerprint || defaultFingerprint[m
[31m-    , cookie = options.cookie;[m
[31m-[m
[31m-  // notify user that this store is not[m
[31m-  // meant for a production environment[m
[31m-  if ('production' == env && store instanceof MemoryStore) {[m
[31m-    console.warn(warning);[m
[31m-  }[m
[31m-[m
[31m-  // ensure secret is present[m
[31m-  if (!secret) {[m
[31m-    throw new Error('connect.session({ secret: "string" }) required for security');[m
[31m-  }[m
[31m-[m
[31m-  // session hashing function[m
[31m-  store.hash = function(req, base) {[m
[31m-    return crypto[m
[31m-      .createHmac('sha256', secret)[m
[31m-      .update(base + fingerprint(req))[m
[31m-      .digest('base64')[m
[31m-      .replace(/=*$/, '');[m
[31m-  };[m
[31m-[m
[31m-  // generates the new session[m
[31m-  store.generate = function(req){[m
[31m-    var base = utils.uid(24);[m
[31m-    var sessionID = base + '.' + store.hash(req, base);[m
[31m-    req.sessionID = sessionID;[m
[31m-    req.session = new Session(req);[m
[31m-    req.session.cookie = new Cookie(cookie);[m
[31m-  };[m
[31m-[m
[31m-  return function session(req, res, next) {[m
[31m-    // self-awareness[m
[31m-    if (req.session) return next();[m
[31m-[m
[31m-    // parse url[m
[31m-    var url = parse(req.url)[m
[31m-      , path = url.pathname;[m
[31m-[m
[31m-    // ignorable paths[m
[31m-    if (~exports.ignore.indexOf(path)) return next();[m
[31m-[m
[31m-    // expose store[m
[31m-    req.sessionStore = store;[m
[31m-[m
[31m-    // proxy writeHead() to Set-Cookie[m
[31m-    var writeHead = res.writeHead;[m
[31m-    res.writeHead = function(status, headers){[m
[31m-      if (req.session) {[m
[31m-        var cookie = req.session.cookie;[m
[31m-        // only send secure session cookies when there is a secure connection.[m
[31m-        // proxySecure is a custom attribute to allow for a reverse proxy[m
[31m-        // to handle SSL connections and to communicate to connect over HTTP that[m
[31m-        // the incoming connection is secure.[m
[31m-        var secured = cookie.secure && (req.connection.encrypted || req.connection.proxySecure);[m
[31m-        if (secured || !cookie.secure) {[m
[31m-          res.setHeader('Set-Cookie', cookie.serialize(key, req.sessionID));[m
[31m-        }[m
[31m-      }[m
[31m-[m
[31m-      res.writeHead = writeHead;[m
[31m-      return res.writeHead(status, headers);[m
[31m-    };[m
[31m-[m
[31m-    // proxy end() to commit the session[m
[31m-    var end = res.end;[m
[31m-    res.end = function(data, encoding){[m
[31m-      res.end = end;[m
[31m-      if (req.session) {[m
[31m-        // HACK: ensure Set-Cookie for implicit writeHead()[m
[31m-        if (!res._header) res._implicitHeader();[m
[31m-        req.session.resetMaxAge();[m
[31m-        req.session.save(function(){[m
[31m-          res.end(data, encoding);[m
[31m-        });[m
[31m-      } else {[m
[31m-        res.end(data, encoding);[m
[31m-      }[m
[31m-    };[m
[31m-[m
[31m-    // session hashing[m
[31m-    function hash(base) {[m
[31m-      return store.hash(req, base);[m
[31m-    }[m
[31m-[m
[31m-    // generate the session[m
[31m-    function generate() {[m
[31m-      store.generate(req);[m
[31m-    }[m
[31m-[m
[31m-    // get the sessionID from the cookie[m
[31m-    req.sessionID = req.cookies[key];[m
[31m-[m
[31m-    // make a new session if the browser doesn't send a sessionID[m
[31m-    if (!req.sessionID) {[m
[31m-      generate();[m
[31m-      next();[m
[31m-      return;[m
[31m-    }[m
[31m-[m
[31m-    // check the fingerprint[m
[31m-    var parts = req.sessionID.split('.');[m
[31m-    if (parts[1] != hash(parts[0])) {[m
[31m-      generate();[m
[31m-      next();[m
[31m-      return;[m
[31m-    }[m
[31m-[m
[31m-    // generate the session object[m
[31m-    var pause = utils.pause(req);[m
[31m-    store.get(req.sessionID, function(err, sess){[m
[31m-      // proxy to resume() events[m
[31m-      var _next = next;[m
[31m-      next = function(err){[m
[31m-        _next(err);[m
[31m-        pause.resume();[m
[31m-      }[m
[31m-[m
[31m-      // error handling[m
[31m-      if (err) {[m
[31m-        if ('ENOENT' == err.code) {[m
[31m-          generate();[m
[31m-          next();[m
[31m-        } else {[m
[31m-          next(err);[m
[31m-        }[m
[31m-      // no session[m
[31m-      } else if (!sess) {[m
[31m-        generate();[m
[31m-        next();[m
[31m-      // populate req.session[m
[31m-      } else {[m
[31m-        store.createSession(req, sess);[m
[31m-        next();[m
[31m-      }[m
[31m-    });[m
[31m-  };[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session/cookie.js b/node_modules/express/node_modules/connect/lib/middleware/session/cookie.js[m
[1mdeleted file mode 100644[m
[1mindex 793c2e9..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/session/cookie.js[m
[1m+++ /dev/null[m
[36m@@ -1,126 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - session - Cookie[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var utils = require('../../utils');[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new `Cookie` with the given `options`.[m
[31m- *[m
[31m- * @param {Object} options[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-var Cookie = module.exports = function Cookie(options) {[m
[31m-  this.path = '/';[m
[31m-  this.httpOnly = true;[m
[31m-  this.maxAge = 14400000;[m
[31m-  if (options) utils.merge(this, options);[m
[31m-  this.originalMaxAge = undefined == this.originalMaxAge[m
[31m-    ? this.maxAge[m
[31m-    : this.originalMaxAge;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Prototype.[m
[31m- */[m
[31m-[m
[31m-Cookie.prototype = {[m
[31m-[m
[31m-  /**[m
[31m-   * Set expires `date`.[m
[31m-   *[m
[31m-   * @param {Date} date[m
[31m-   * @api public[m
[31m-   */[m
[31m-  [m
[31m-  set expires(date) {[m
[31m-    this._expires = date;[m
[31m-    this.originalMaxAge = this.maxAge;[m
[31m-  },[m
[31m-[m
[31m-  /**[m
[31m-   * Get expires `date`.[m
[31m-   *[m
[31m-   * @return {Date}[m
[31m-   * @api public[m
[31m-   */[m
[31m-[m
[31m-  get expires() {[m
[31m-    return this._expires;[m
[31m-  },[m
[31m-  [m
[31m-  /**[m
[31m-   * Set expires via max-age in `ms`.[m
[31m-   *[m
[31m-   * @param {Number} ms[m
[31m-   * @api public[m
[31m-   */[m
[31m-  [m
[31m-  set maxAge(ms) {[m
[31m-    this.expires = 'number' == typeof ms[m
[31m-      ? new Date(Date.now() + ms)[m
[31m-      : ms;[m
[31m-  },[m
[31m-[m
[31m-  /**[m
[31m-   * Get expires max-age in `ms`.[m
[31m-   *[m
[31m-   * @return {Number}[m
[31m-   * @api public[m
[31m-   */[m
[31m-[m
[31m-  get maxAge() {[m
[31m-    return this.expires instanceof Date[m
[31m-      ? this.expires.valueOf() - Date.now()[m
[31m-      : this.expires;[m
[31m-  },[m
[31m-[m
[31m-  /**[m
[31m-   * Return cookie data object.[m
[31m-   *[m
[31m-   * @return {Object}[m
[31m-   * @api private[m
[31m-   */[m
[31m-[m
[31m-  get data() {[m
[31m-    return {[m
[31m-        originalMaxAge: this.originalMaxAge[m
[31m-      , expires: this._expires[m
[31m-      , secure: this.secure[m
[31m-      , httpOnly: this.httpOnly[m
[31m-      , domain: this.domain[m
[31m-      , path: this.path[m
[31m-    }[m
[31m-  },[m
[31m-[m
[31m-  /**[m
[31m-   * Return a serialized cookie string.[m
[31m-   *[m
[31m-   * @return {String}[m
[31m-   * @api public[m
[31m-   */[m
[31m-[m
[31m-  serialize: function(name, val){[m
[31m-    return utils.serializeCookie(name, val, this.data);[m
[31m-  },[m
[31m-[m
[31m-  /**[m
[31m-   * Return JSON representation of this cookie.[m
[31m-   *[m
[31m-   * @return {Object}[m
[31m-   * @api private[m
[31m-   */[m
[31m-  [m
[31m-  toJSON: function(){[m
[31m-    return this.data;[m
[31m-  }[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session/memory.js b/node_modules/express/node_modules/connect/lib/middleware/session/memory.js[m
[1mdeleted file mode 100644[m
[1mindex ec569f5..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/session/memory.js[m
[1m+++ /dev/null[m
[36m@@ -1,131 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - session - MemoryStore[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var Store = require('./store')[m
[31m-  , utils = require('../../utils')[m
[31m-  , Session = require('./session');[m
[31m-[m
[31m-/**[m
[31m- * Initialize a new `MemoryStore`.[m
[31m- *[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-var MemoryStore = module.exports = function MemoryStore() {[m
[31m-  this.sessions = {};[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Inherit from `Store.prototype`.[m
[31m- */[m
[31m-[m
[31m-MemoryStore.prototype.__proto__ = Store.prototype;[m
[31m-[m
[31m-/**[m
[31m- * Attempt to fetch session by the given `sid`.[m
[31m- *[m
[31m- * @param {String} sid[m
[31m- * @param {Function} fn[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-MemoryStore.prototype.get = function(sid, fn){[m
[31m-  var self = this;[m
[31m-  process.nextTick(function(){[m
[31m-    var expires[m
[31m-      , sess = self.sessions[sid];[m
[31m-    if (sess) {[m
[31m-      sess = JSON.parse(sess);[m
[31m-      expires = 'string' == typeof sess.cookie.expires[m
[31m-        ? new Date(sess.cookie.expires)[m
[31m-        : sess.cookie.expires;[m
[31m-      if (!expires || new Date < expires) {[m
[31m-        fn(null, sess);[m
[31m-      } else {[m
[31m-        self.destroy(sid, fn);[m
[31m-      }[m
[31m-    } else {[m
[31m-      fn();[m
[31m-    }[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Commit the given `sess` object associated with the given `sid`.[m
[31m- *[m
[31m- * @param {String} sid[m
[31m- * @param {Session} sess[m
[31m- * @param {Function} fn[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-MemoryStore.prototype.set = function(sid, sess, fn){[m
[31m-  var self = this;[m
[31m-  process.nextTick(function(){[m
[31m-    self.sessions[sid] = JSON.stringify(sess);[m
[31m-    fn && fn();[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Destroy the session associated with the given `sid`.[m
[31m- *[m
[31m- * @param {String} sid[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-MemoryStore.prototype.destroy = function(sid, fn){[m
[31m-  var self = this;[m
[31m-  process.nextTick(function(){[m
[31m-    delete self.sessions[sid];[m
[31m-    fn && fn();[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Invoke the given callback `fn` with all active sessions.[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-MemoryStore.prototype.all = function(fn){[m
[31m-  var arr = [][m
[31m-    , keys = Object.keys(this.sessions);[m
[31m-  for (var i = 0, len = keys.length; i < len; ++i) {[m
[31m-    arr.push(this.sessions[keys[i]]);[m
[31m-  }[m
[31m-  fn(null, arr);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Clear all sessions.[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-MemoryStore.prototype.clear = function(fn){[m
[31m-  this.sessions = {};[m
[31m-  fn && fn();[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Fetch number of sessions.[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-MemoryStore.prototype.length = function(fn){[m
[31m-  fn(null, Object.keys(this.sessions).length);[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session/session.js b/node_modules/express/node_modules/connect/lib/middleware/session/session.js[m
[1mdeleted file mode 100644[m
[1mindex 4e7e1a6..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/session/session.js[m
[1m+++ /dev/null[m
[36m@@ -1,137 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - session - Session[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var utils = require('../../utils')[m
[31m-  , Cookie = require('./cookie');[m
[31m-[m
[31m-/**[m
[31m- * Create a new `Session` with the given request and `data`.[m
[31m- *[m
[31m- * @param {IncomingRequest} req[m
[31m- * @param {Object} data[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-var Session = module.exports = function Session(req, data) {[m
[31m-  Object.defineProperty(this, 'req', { value: req });[m
[31m-  Object.defineProperty(this, 'id', { value: req.sessionID });[m
[31m-  if ('object' == typeof data) {[m
[31m-    utils.merge(this, data);[m
[31m-  } else {[m
[31m-    this.lastAccess = Date.now();[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Update `.lastAccess` timestamp,[m
[31m- * and reset `.cookie.maxAge` to prevent[m
[31m- * the cookie from expiring when the[m
[31m- * session is still active.[m
[31m- *[m
[31m- * @return {Session} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Session.prototype.touch = function(){[m
[31m-  return this[m
[31m-    .resetLastAccess()[m
[31m-    .resetMaxAge();[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Update `.lastAccess` timestamp.[m
[31m- *[m
[31m- * @return {Session} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Session.prototype.resetLastAccess = function(){[m
[31m-  this.lastAccess = Date.now();[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Reset `.maxAge` to `.originalMaxAge`.[m
[31m- *[m
[31m- * @return {Session} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Session.prototype.resetMaxAge = function(){[m
[31m-  this.cookie.maxAge = this.cookie.originalMaxAge;[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Save the session data with optional callback `fn(err)`.[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @return {Session} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Session.prototype.save = function(fn){[m
[31m-  this.req.sessionStore.set(this.id, this, fn || function(){});[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Re-loads the session data _without_ altering[m
[31m- * the maxAge or lastAccess properties. Invokes the[m
[31m- * callback `fn(err)`, after which time if no exception[m
[31m- * has occurred the `req.session` property will be[m
[31m- * a new `Session` object, although representing the[m
[31m- * same session.[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @return {Session} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Session.prototype.reload = function(fn){[m
[31m-  var req = this.req[m
[31m-    , store = this.req.sessionStore;[m
[31m-  store.get(this.id, function(err, sess){[m
[31m-    if (err) return fn(err);[m
[31m-    if (!sess) return fn(new Error('failed to load session'));[m
[31m-    store.createSession(req, sess);[m
[31m-    fn();[m
[31m-  });[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Destroy `this` session.[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @return {Session} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Session.prototype.destroy = function(fn){[m
[31m-  delete this.req.session;[m
[31m-  this.req.sessionStore.destroy(this.id, fn);[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Regenerate this request's session.[m
[31m- *[m
[31m- * @param {Function} fn[m
[31m- * @return {Session} for chaining[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Session.prototype.regenerate = function(fn){[m
[31m-  this.req.sessionStore.regenerate(this.req, fn);[m
[31m-  return this;[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session/store.js b/node_modules/express/node_modules/connect/lib/middleware/session/store.js[m
[1mdeleted file mode 100644[m
[1mindex 6a3d47d..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/session/store.js[m
[1m+++ /dev/null[m
[36m@@ -1,87 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - session - Store[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var EventEmitter = require('events').EventEmitter[m
[31m-  , Session = require('./session')[m
[31m-  , Cookie = require('./cookie')[m
[31m-  , utils = require('../../utils');[m
[31m-[m
[31m-/**[m
[31m- * Initialize abstract `Store`.[m
[31m- *[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-var Store = module.exports = function Store(options){};[m
[31m-[m
[31m-/**[m
[31m- * Inherit from `EventEmitter.prototype`.[m
[31m- */[m
[31m-[m
[31m-Store.prototype.__proto__ = EventEmitter.prototype;[m
[31m-[m
[31m-/**[m
[31m- * Re-generate the given requests's session.[m
[31m- *[m
[31m- * @param {IncomingRequest} req[m
[31m- * @return {Function} fn[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Store.prototype.regenerate = function(req, fn){[m
[31m-  var self = this;[m
[31m-  this.destroy(req.sessionID, function(err){[m
[31m-    self.generate(req);[m
[31m-    fn(err);[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Load a `Session` instance via the given `sid`[m
[31m- * and invoke the callback `fn(err, sess)`.[m
[31m- *[m
[31m- * @param {String} sid[m
[31m- * @param {Function} fn[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-Store.prototype.load = function(sid, fn){[m
[31m-  var self = this;[m
[31m-  this.get(sid, function(err, sess){[m
[31m-    if (err) return fn(err);[m
[31m-    if (!sess) return fn();[m
[31m-    var req = { sessionID: sid, sessionStore: self };[m
[31m-    sess = self.createSession(req, sess, false);[m
[31m-    fn(null, sess);[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Create session from JSON `sess` data.[m
[31m- *[m
[31m- * @param {IncomingRequest} req[m
[31m- * @param {Object} sess[m
[31m- * @return {Session}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-Store.prototype.createSession = function(req, sess, update){[m
[31m-  var expires = sess.cookie.expires[m
[31m-    , orig = sess.cookie.originalMaxAge[m
[31m-    , update = null == update ? true : false;[m
[31m-  sess.cookie = new Cookie(sess.cookie);[m
[31m-  if ('string' == typeof expires) sess.cookie.expires = new Date(expires);[m
[31m-  sess.cookie.originalMaxAge = orig;[m
[31m-  req.session = new Session(req, sess);[m
[31m-  if (update) req.session.resetLastAccess();[m
[31m-  return req.session;[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/static.js b/node_modules/express/node_modules/connect/lib/middleware/static.js[m
[1mdeleted file mode 100644[m
[1mindex b9c2c86..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/static.js[m
[1m+++ /dev/null[m
[36m@@ -1,225 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - staticProvider[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var fs = require('fs')[m
[31m-  , path = require('path')[m
[31m-  , join = path.join[m
[31m-  , basename = path.basename[m
[31m-  , normalize = path.normalize[m
[31m-  , utils = require('../utils')[m
[31m-  , Buffer = require('buffer').Buffer[m
[31m-  , parse = require('url').parse[m
[31m-  , mime = require('mime');[m
[31m-[m
[31m-/**[m
[31m- * Static file server with the given `root` path.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     var oneDay = 86400000;[m
[31m- *[m
[31m- *     connect([m
[31m- *       connect.static(__dirname + '/public')[m
[31m- *     ).listen(3000);[m
[31m- *[m
[31m- *     connect([m
[31m- *       connect.static(__dirname + '/public', { maxAge: oneDay })[m
[31m- *     ).listen(3000);[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *    - `maxAge`   Browser cache maxAge in milliseconds. defaults to 0[m
[31m- *    - `hidden`   Allow transfer of hidden files. defaults to false[m
[31m- *    - `redirect`   Redirect to trailing "/" when the pathname is a dir[m
[31m- *[m
[31m- * @param {String} root[m
[31m- * @param {Object} options[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports = module.exports = function static(root, options){[m
[31m-  options = options || {};[m
[31m-[m
[31m-  // root required[m
[31m-  if (!root) throw new Error('static() root path required');[m
[31m-  options.root = root;[m
[31m-[m
[31m-  return function static(req, res, next) {[m
[31m-    options.path = req.url;[m
[31m-    options.getOnly = true;[m
[31m-    send(req, res, next, options);[m
[31m-  };[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Expose mime module.[m
[31m- */[m
[31m-[m
[31m-exports.mime = mime;[m
[31m-[m
[31m-/**[m
[31m- * Respond with 416  "Requested Range Not Satisfiable"[m
[31m- *[m
[31m- * @param {ServerResponse} res[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function invalidRange(res) {[m
[31m-  var body = 'Requested Range Not Satisfiable';[m
[31m-  res.setHeader('Content-Type', 'text/plain');[m
[31m-  res.setHeader('Content-Length', body.length);[m
[31m-  res.statusCode = 416;[m
[31m-  res.end(body);[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Attempt to tranfer the requseted file to `res`.[m
[31m- *[m
[31m- * @param {ServerRequest}[m
[31m- * @param {ServerResponse}[m
[31m- * @param {Function} next[m
[31m- * @param {Object} options[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-var send = exports.send = function(req, res, next, options){[m
[31m-  options = options || {};[m
[31m-  if (!options.path) throw new Error('path required');[m
[31m-[m
[31m-  // setup[m
[31m-  var maxAge = options.maxAge || 0[m
[31m-    , ranges = req.headers.range[m
[31m-    , head = 'HEAD' == req.method[m
[31m-    , get = 'GET' == req.method[m
[31m-    , root = options.root ? normalize(options.root) : null[m
[31m-    , redirect = false === options.redirect ? false : true[m
[31m-    , getOnly = options.getOnly[m
[31m-    , fn = options.callback[m
[31m-    , hidden = options.hidden[m
[31m-    , done;[m
[31m-[m
[31m-  // replace next() with callback when available[m
[31m-  if (fn) next = fn;[m
[31m-[m
[31m-  // ignore non-GET requests[m
[31m-  if (getOnly && !get && !head) return next();[m
[31m-[m
[31m-  // parse url[m
[31m-  var url = parse(options.path)[m
[31m-    , path = decodeURIComponent(url.pathname)[m
[31m-    , type;[m
[31m-[m
[31m-  // null byte(s)[m
[31m-  if (~path.indexOf('\0')) return utils.badRequest(res);[m
[31m-[m
[31m-  // when root is not given, consider .. malicious[m
[31m-  if (!root && ~path.indexOf('..')) return utils.forbidden(res);[m
[31m-[m
[31m-  // join / normalize from optional root dir[m
[31m-  path = normalize(join(root, path));[m
[31m-[m
[31m-  // malicious path[m
[31m-  if (root && 0 != path.indexOf(root)) return fn[m
[31m-    ? fn(new Error('Forbidden'))[m
[31m-    : utils.forbidden(res);[m
[31m-[m
[31m-  // index.html support[m
[31m-  if (normalize('/') == path[path.length - 1]) path += 'index.html';[m
[31m-[m
[31m-  // "hidden" file[m
[31m-  if (!hidden && '.' == basename(path)[0]) return next();[m
[31m-[m
[31m-  fs.stat(path, function(err, stat){[m
[31m-    // mime type[m
[31m-    type = mime.lookup(path);[m
[31m-[m
[31m-    // ignore ENOENT[m
[31m-    if (err) {[m
[31m-      if (fn) return fn(err);[m
[31m-      return 'ENOENT' == err.code[m
[31m-        ? next()[m
[31m-        : next(err);[m
[31m-    // redirect directory in case index.html is present[m
[31m-    } else if (stat.isDirectory()) {[m
[31m-      if (!redirect) return next();[m
[31m-      res.statusCode = 301;[m
[31m-      res.setHeader('Location', url.pathname + '/');[m
[31m-      res.end('Redirecting to ' + url.pathname + '/');[m
[31m-      return;[m
[31m-    }[m
[31m-[m
[31m-    // header fields[m
[31m-    if (!res.getHeader('Date')) res.setHeader('Date', new Date().toUTCString());[m
[31m-    if (!res.getHeader('Cache-Control')) res.setHeader('Cache-Control', 'public, max-age=' + (maxAge / 1000));[m
[31m-    if (!res.getHeader('Last-Modified')) res.setHeader('Last-Modified', stat.mtime.toUTCString());[m
[31m-    if (!res.getHeader('ETag')) res.setHeader('ETag', utils.etag(stat));[m
[31m-    if (!res.getHeader('content-type')) {[m
[31m-      var charset = mime.charsets.lookup(type);[m
[31m-      res.setHeader('Content-Type', type + (charset ? '; charset=' + charset : ''));[m
[31m-    }[m
[31m-    res.setHeader('Accept-Ranges', 'bytes');[m
[31m-[m
[31m-    // conditional GET support[m
[31m-    if (utils.conditionalGET(req)) {[m
[31m-      if (!utils.modified(req, res)) {[m
[31m-        req.emit('static');[m
[31m-        return utils.notModified(res);[m
[31m-      }[m
[31m-    }[m
[31m-[m
[31m-    var opts = {};[m
[31m-    var chunkSize = stat.size;[m
[31m-[m
[31m-    // we have a Range request[m
[31m-    if (ranges) {[m
[31m-      ranges = utils.parseRange(stat.size, ranges);[m
[31m-      // valid[m
[31m-      if (ranges) {[m
[31m-        // TODO: stream options[m
[31m-        // TODO: multiple support[m
[31m-        opts.start = ranges[0].start;[m
[31m-        opts.end = ranges[0].end;[m
[31m-        chunkSize = opts.end - opts.start + 1;[m
[31m-        res.statusCode = 206;[m
[31m-        res.setHeader('Content-Range', 'bytes '[m
[31m-          + opts.start[m
[31m-          + '-'[m
[31m-          + opts.end[m
[31m-          + '/'[m
[31m-          + stat.size);[m
[31m-      // invalid[m
[31m-      } else {[m
[31m-        return fn[m
[31m-          ? fn(new Error('Requested Range Not Satisfiable'))[m
[31m-          : invalidRange(res);[m
[31m-      }[m
[31m-    }[m
[31m-[m
[31m-    res.setHeader('Content-Length', chunkSize);[m
[31m-[m
[31m-    // transfer[m
[31m-    if (head) return res.end();[m
[31m-[m
[31m-    // stream[m
[31m-    var stream = fs.createReadStream(path, opts);[m
[31m-    req.emit('static', stream);[m
[31m-    stream.pipe(res);[m
[31m-[m
[31m-    // callback[m
[31m-    if (fn) {[m
[31m-      function callback(err) { done || fn(err); done = true }[m
[31m-      req.on('close', callback);[m
[31m-      stream.on('end', callback);[m
[31m-    }[m
[31m-  });[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/staticCache.js b/node_modules/express/node_modules/connect/lib/middleware/staticCache.js[m
[1mdeleted file mode 100644[m
[1mindex 9ea8eb7..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/staticCache.js[m
[1m+++ /dev/null[m
[36m@@ -1,175 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - staticCache[m
[31m- * Copyright(c) 2011 Sencha Inc.[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var http = require('http')[m
[31m-  , utils = require('../utils')[m
[31m-  , Cache = require('../cache')[m
[31m-  , url = require('url')[m
[31m-  , fs = require('fs');[m
[31m-[m
[31m-/**[m
[31m- * Enables a memory cache layer on top of[m
[31m- * the `static()` middleware, serving popular[m
[31m- * static files.[m
[31m- *[m
[31m- * By default a maximum of 128 objects are[m
[31m- * held in cache, with a max of 256k each,[m
[31m- * totalling ~32mb.[m
[31m- *[m
[31m- * A Least-Recently-Used (LRU) cache algo[m
[31m- * is implemented through the `Cache` object,[m
[31m- * simply rotating cache objects as they are[m
[31m- * hit. This means that increasingly popular[m
[31m- * objects maintain their positions while[m
[31m- * others get shoved out of the stack and[m
[31m- * garbage collected.[m
[31m- *[m
[31m- * Benchmarks:[m
[31m- *[m
[31m- *     static(): 2700 rps[m
[31m- *     node-static: 5300 rps[m
[31m- *     static() + staticCache(): 7500 rps[m
[31m- *[m
[31m- * Options:[m
[31m- *[m
[31m- *   - `maxObjects`  max cache objects [128][m
[31m- *   - `maxLength`  max cache object length 256kb[m
[31m- *[m
[31m- * @param {Type} name[m
[31m- * @return {Type}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function staticCache(options){[m
[31m-  var options = options || {}[m
[31m-    , cache = new Cache(options.maxObjects || 128)[m
[31m-    , maxlen = options.maxLength || 1024 * 256;[m
[31m-[m
[31m-  return function staticCache(req, res, next){[m
[31m-    var path = url.parse(req.url).pathname[m
[31m-      , ranges = req.headers.range[m
[31m-      , hit = cache.get(path)[m
[31m-      , hitCC[m
[31m-      , uaCC[m
[31m-      , header[m
[31m-      , age;[m
[31m-[m
[31m-    // cache static[m
[31m-    req.on('static', function(stream){[m
[31m-      var headers = res._headers[m
[31m-        , cc = utils.parseCacheControl(headers['cache-control'] || '')[m
[31m-        , contentLength = headers['content-length'][m
[31m-        , hit;[m
[31m-[m
[31m-      // ignore larger files[m
[31m-      if (!contentLength || contentLength > maxlen) return;[m
[31m-[m
[31m-      // dont cache items we shouldn't be[m
[31m-      if ( cc['no-cache'][m
[31m-        || cc['no-store'][m
[31m-        || cc['private'][m
[31m-        || cc['must-revalidate']) return;[m
[31m-[m
[31m-      // if already in cache then validate[m
[31m-      if (hit = cache.get(path)){[m
[31m-        if (headers.etag == hit[0].etag) {[m
[31m-          hit[0].date = new Date;[m
[31m-          return;[m
[31m-        } else {[m
[31m-          cache.remove(path);[m
[31m-        }[m
[31m-      }[m
[31m-[m
[31m-      // validation notifiactions don't contain a steam[m
[31m-      if (null == stream) return;[m
[31m-[m
[31m-      // add the cache object[m
[31m-      var arr = cache.add(path);[m
[31m-      arr.push(headers);[m
[31m-[m
[31m-      // store the chunks[m
[31m-      stream.on('data', function(chunk){[m
[31m-        arr.push(chunk);[m
[31m-      });[m
[31m-[m
[31m-      // flag it as complete[m
[31m-      stream.on('end', function(){[m
[31m-        arr.complete = true;[m
[31m-      });[m
[31m-    });[m
[31m-[m
[31m-    // cache hit, doesnt support range requests[m
[31m-    if (hit && hit.complete && !ranges) {[m
[31m-      header = utils.merge({}, hit[0]);[m
[31m-      header.Age = age = (new Date - new Date(header.date)) / 1000 | 0;[m
[31m-      header.date = new Date().toUTCString();[m
[31m-[m
[31m-      // parse cache-controls[m
[31m-      hitCC = utils.parseCacheControl(header['cache-control'] || '');[m
[31m-      uaCC = utils.parseCacheControl(req.headers['cache-control'] || '');[m
[31m-[m
[31m-      // check if we must revalidate(bypass)[m
[31m-      if (hitCC['no-cache'] || uaCC['no-cache']) return next();[m
[31m-[m
[31m-      // check freshness of entity[m
[31m-      if (isStale(hitCC, age) || isStale(uaCC, age)) return next();[m
[31m-[m
[31m-      // conditional GET support[m
[31m-      if (utils.conditionalGET(req)) {[m
[31m-        if (!utils.modified(req, res, header)) {[m
[31m-          header['content-length'] = 0;[m
[31m-          res.writeHead(304, header);[m
[31m-          return res.end();[m
[31m-        }[m
[31m-      }[m
[31m-[m
[31m-      // HEAD support[m
[31m-      if ('HEAD' == req.method) {[m
[31m-        header['content-length'] = 0;[m
[31m-        res.writeHead(200, header);[m
[31m-        return res.end();[m
[31m-      }[m
[31m-[m
[31m-      // respond with cache[m
[31m-      res.writeHead(200, header);[m
[31m-[m
[31m-      // backpressure[m
[31m-      function write(i) {[m
[31m-        var buf = hit[i];[m
[31m-        if (!buf) return res.end();[m
[31m-        if (false === res.write(buf)) {[m
[31m-          res.once('drain', function(){[m
[31m-            write(++i);[m
[31m-          });[m
[31m-        } else {[m
[31m-          write(++i);[m
[31m-        }[m
[31m-      }[m
[31m-[m
[31m-      return write(1);[m
[31m-    }[m
[31m-[m
[31m-    next();[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Check if cache item is stale[m
[31m- *[m
[31m- * @param {Object} cc[m
[31m- * @param {Number} age[m
[31m- * @return {Boolean}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function isStale(cc, age) {[m
[31m-  return cc['max-age'] && cc['max-age'] <= age;[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/vhost.js b/node_modules/express/node_modules/connect/lib/middleware/vhost.js[m
[1mdeleted file mode 100644[m
[1mindex 913d756..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/middleware/vhost.js[m
[1m+++ /dev/null[m
[36m@@ -1,44 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - vhost[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Setup vhost for the given `hostname` and `server`.[m
[31m- *[m
[31m- * Examples:[m
[31m- *[m
[31m- *     connect([m
[31m- *       connect.vhost('foo.com',[m
[31m- *         connect.createServer(...middleware...)[m
[31m- *       ),[m
[31m- *       connect.vhost('bar.com',[m
[31m- *         connect.createServer(...middleware...)[m
[31m- *       )[m
[31m- *     );[m
[31m- *[m
[31m- * @param {String} hostname[m
[31m- * @param {Server} server[m
[31m- * @return {Function}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-module.exports = function vhost(hostname, server){[m
[31m-  if (!hostname) throw new Error('vhost hostname required');[m
[31m-  if (!server) throw new Error('vhost server required');[m
[31m-  var regexp = new RegExp('^' + hostname.replace(/[*]/g, '(.*?)') + '$');[m
[31m-  if (server.onvhost) server.onvhost(hostname);[m
[31m-  return function vhost(req, res, next){[m
[31m-    if (!req.headers.host) return next();[m
[31m-    var host = req.headers.host.split(':')[0];[m
[31m-    if (req.subdomains = regexp.exec(host)) {[m
[31m-      req.subdomains = req.subdomains[0].split('.').slice(0, -1);[m
[31m-      server.emit("request", req, res);[m
[31m-    } else {[m
[31m-      next();[m
[31m-    }[m
[31m-  };[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/patch.js b/node_modules/express/node_modules/connect/lib/patch.js[m
[1mdeleted file mode 100644[m
[1mindex a6ff297..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/patch.js[m
[1m+++ /dev/null[m
[36m@@ -1,79 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var http = require('http')[m
[31m-  , res = http.OutgoingMessage.prototype;[m
[31m-[m
[31m-// original setHeader()[m
[31m-[m
[31m-var setHeader = res.setHeader;[m
[31m-[m
[31m-// original _renderHeaders()[m
[31m-[m
[31m-var _renderHeaders = res._renderHeaders;[m
[31m-[m
[31m-if (res._hasConnectPatch) return;[m
[31m-[m
[31m-/**[m
[31m- * Provide a public "header sent" flag[m
[31m- * until node does.[m
[31m- *[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.__defineGetter__('headerSent', function(){[m
[31m-  return this._headerSent;[m
[31m-});[m
[31m-[m
[31m-/**[m
[31m- * Set header `field` to `val`, special-casing[m
[31m- * the `Set-Cookie` field for multiple support.[m
[31m- *[m
[31m- * @param {String} field[m
[31m- * @param {String} val[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-res.setHeader = function(field, val){[m
[31m-  var key = field.toLowerCase()[m
[31m-    , prev;[m
[31m-[m
[31m-  // special-case Set-Cookie[m
[31m-  if (this._headers && 'set-cookie' == key) {[m
[31m-    if (prev = this.getHeader(field)) {[m
[31m-      val = Array.isArray(prev)[m
[31m-        ? prev.concat(val)[m
[31m-        : [prev, val];[m
[31m-    }[m
[31m-  // charset[m
[31m-  } else if ('content-type' == key && this.charset) {[m
[31m-    val += '; charset=' + this.charset;[m
[31m-  }[m
[31m-[m
[31m-  return setHeader.call(this, field, val);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Proxy `res.end()` to expose a 'header' event,[m
[31m- * allowing arbitrary augmentation before the header[m
[31m- * fields are written to the socket.[m
[31m- *[m
[31m- * NOTE: this _only_ supports node's progressive header[m
[31m- * field API aka `res.setHeader()`.[m
[31m- */[m
[31m-[m
[31m-res._renderHeaders = function(){[m
[31m-  this.emit('header');[m
[31m-  return _renderHeaders.call(this);[m
[31m-};[m
[31m-[m
[31m-res._hasConnectPatch = true;[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/directory.html b/node_modules/express/node_modules/connect/lib/public/directory.html[m
[1mdeleted file mode 100644[m
[1mindex 15164bb..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/public/directory.html[m
[1m+++ /dev/null[m
[36m@@ -1,75 +0,0 @@[m
[31m-<html>[m
[31m-  <head>[m
[31m-    <title>listing directory {directory}</title>[m
[31m-    <style>{style}</style>[m
[31m-    <script>[m
[31m-      function $(id){[m
[31m-        var el = 'string' == typeof id[m
[31m-          ? document.getElementById(id)[m
[31m-          : id;[m
[31m-[m
[31m-        el.on = function(event, fn){[m
[31m-          if ('content loaded' == event) event = 'DOMContentLoaded';[m
[31m-          el.addEventListener(event, fn, false);[m
[31m-        };[m
[31m-[m
[31m-        el.all = function(selector){[m
[31m-          return $(el.querySelectorAll(selector));[m
[31m-        };[m
[31m-[m
[31m-        el.each = function(fn){[m
[31m-          for (var i = 0, len = el.length; i < len; ++i) {[m
[31m-            fn($(el[i]), i);[m
[31m-          }[m
[31m-        };[m
[31m-[m
[31m-        el.getClasses = function(){[m
[31m-          return this.getAttribute('class').split(/\s+/);[m
[31m-        };[m
[31m-[m
[31m-        el.addClass = function(name){[m
[31m-          var classes = this.getAttribute('class');[m
[31m-          el.setAttribute('class', classes[m
[31m-            ? classes + ' ' + name[m
[31m-            : name);[m
[31m-        };[m
[31m-[m
[31m-        el.removeClass = function(name){[m
[31m-          var classes = this.getClasses().filter(function(curr){[m
[31m-            return curr != name;[m
[31m-          });[m
[31m-          this.setAttribute('class', classes);[m
[31m-        };[m
[31m-[m
[31m-        return el;[m
[31m-      }[m
[31m-[m
[31m-      function search() {[m
[31m-        var str = $('search').value[m
[31m-          , links = $('files').all('a');[m
[31m-[m
[31m-        links.each(function(link){[m
[31m-          var text = link.textContent;[m
[31m-[m
[31m-          if ('..' == text) return;[m
[31m-          if (str.length && ~text.indexOf(str)) {[m
[31m-            link.addClass('highlight');[m
[31m-          } else {[m
[31m-            link.removeClass('highlight');[m
[31m-          }[m
[31m-        });[m
[31m-      }[m
[31m-[m
[31m-      $(window).on('content loaded', function(){[m
[31m-        $('search').on('keyup', search);[m
[31m-      });[m
[31m-    </script>[m
[31m-  </head>[m
[31m-  <body class="directory">[m
[31m-    <input id="search" type="text" placeholder="Search" autocomplete="off" />[m
[31m-    <div id="wrapper">[m
[31m-      <h1>{linked-path}</h1>[m
[31m-      {files}[m
[31m-    </div>[m
[31m-  </body>[m
[31m-</html>[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/error.html b/node_modules/express/node_modules/connect/lib/public/error.html[m
[1mdeleted file mode 100644[m
[1mindex 34e0df5..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/public/error.html[m
[1m+++ /dev/null[m
[36m@@ -1,13 +0,0 @@[m
[31m-<html>[m
[31m-  <head>[m
[31m-    <title>{error}</title>[m
[31m-    <style>{style}</style>[m
[31m-  </head>[m
[31m-  <body>[m
[31m-    <div id="wrapper">[m
[31m-      <h1>{title}</h1>[m
[31m-      <h2><em>500</em> {error}</h2>[m
[31m-      <ul id="stacktrace">{stack}</ul>[m
[31m-    </div>[m
[31m-  </body>[m
[31m-</html>[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/favicon.ico b/node_modules/express/node_modules/connect/lib/public/favicon.ico[m
[1mdeleted file mode 100644[m
[1mindex 895fc96..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/favicon.ico and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page.png b/node_modules/express/node_modules/connect/lib/public/icons/page.png[m
[1mdeleted file mode 100755[m
[1mindex 03ddd79..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_add.png b/node_modules/express/node_modules/connect/lib/public/icons/page_add.png[m
[1mdeleted file mode 100755[m
[1mindex d5bfa07..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_add.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_attach.png b/node_modules/express/node_modules/connect/lib/public/icons/page_attach.png[m
[1mdeleted file mode 100755[m
[1mindex 89ee2da..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_attach.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_code.png b/node_modules/express/node_modules/connect/lib/public/icons/page_code.png[m
[1mdeleted file mode 100755[m
[1mindex f7ea904..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_code.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_copy.png b/node_modules/express/node_modules/connect/lib/public/icons/page_copy.png[m
[1mdeleted file mode 100755[m
[1mindex 195dc6d..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_copy.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_delete.png b/node_modules/express/node_modules/connect/lib/public/icons/page_delete.png[m
[1mdeleted file mode 100755[m
[1mindex 3141467..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_delete.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_edit.png b/node_modules/express/node_modules/connect/lib/public/icons/page_edit.png[m
[1mdeleted file mode 100755[m
[1mindex 046811e..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_edit.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_error.png b/node_modules/express/node_modules/connect/lib/public/icons/page_error.png[m
[1mdeleted file mode 100755[m
[1mindex f07f449..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_error.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_excel.png b/node_modules/express/node_modules/connect/lib/public/icons/page_excel.png[m
[1mdeleted file mode 100755[m
[1mindex eb6158e..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_excel.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_find.png b/node_modules/express/node_modules/connect/lib/public/icons/page_find.png[m
[1mdeleted file mode 100755[m
[1mindex 2f19388..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_find.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_gear.png b/node_modules/express/node_modules/connect/lib/public/icons/page_gear.png[m
[1mdeleted file mode 100755[m
[1mindex 8e83281..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_gear.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_go.png b/node_modules/express/node_modules/connect/lib/public/icons/page_go.png[m
[1mdeleted file mode 100755[m
[1mindex 80fe1ed..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_go.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_green.png b/node_modules/express/node_modules/connect/lib/public/icons/page_green.png[m
[1mdeleted file mode 100755[m
[1mindex de8e003..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_green.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_key.png b/node_modules/express/node_modules/connect/lib/public/icons/page_key.png[m
[1mdeleted file mode 100755[m
[1mindex d6626cb..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_key.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_lightning.png b/node_modules/express/node_modules/connect/lib/public/icons/page_lightning.png[m
[1mdeleted file mode 100755[m
[1mindex 7e56870..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_lightning.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_link.png b/node_modules/express/node_modules/connect/lib/public/icons/page_link.png[m
[1mdeleted file mode 100755[m
[1mindex 312eab0..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_link.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_paintbrush.png b/node_modules/express/node_modules/connect/lib/public/icons/page_paintbrush.png[m
[1mdeleted file mode 100755[m
[1mindex 246a2f0..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_paintbrush.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_paste.png b/node_modules/express/node_modules/connect/lib/public/icons/page_paste.png[m
[1mdeleted file mode 100755[m
[1mindex 968f073..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_paste.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_red.png b/node_modules/express/node_modules/connect/lib/public/icons/page_red.png[m
[1mdeleted file mode 100755[m
[1mindex 0b18247..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_red.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_refresh.png b/node_modules/express/node_modules/connect/lib/public/icons/page_refresh.png[m
[1mdeleted file mode 100755[m
[1mindex cf347c7..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_refresh.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_save.png b/node_modules/express/node_modules/connect/lib/public/icons/page_save.png[m
[1mdeleted file mode 100755[m
[1mindex caea546..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_save.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white.png[m
[1mdeleted file mode 100755[m
[1mindex 8b8b1ca..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_acrobat.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_acrobat.png[m
[1mdeleted file mode 100755[m
[1mindex 8f8095e..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_acrobat.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_actionscript.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_actionscript.png[m
[1mdeleted file mode 100755[m
[1mindex 159b240..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_actionscript.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_add.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_add.png[m
[1mdeleted file mode 100755[m
[1mindex aa23dde..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_add.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_c.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_c.png[m
[1mdeleted file mode 100755[m
[1mindex 34a05cc..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_c.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_camera.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_camera.png[m
[1mdeleted file mode 100755[m
[1mindex f501a59..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_camera.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_cd.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_cd.png[m
[1mdeleted file mode 100755[m
[1mindex 848bdaf..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_cd.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_code.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_code.png[m
[1mdeleted file mode 100755[m
[1mindex 0c76bd1..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_code.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_code_red.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_code_red.png[m
[1mdeleted file mode 100755[m
[1mindex 87a6914..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_code_red.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_coldfusion.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_coldfusion.png[m
[1mdeleted file mode 100755[m
[1mindex c66011f..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_coldfusion.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_compressed.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_compressed.png[m
[1mdeleted file mode 100755[m
[1mindex 2b6b100..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_compressed.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_copy.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_copy.png[m
[1mdeleted file mode 100755[m
[1mindex a9f31a2..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_copy.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_cplusplus.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_cplusplus.png[m
[1mdeleted file mode 100755[m
[1mindex a87cf84..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_cplusplus.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_csharp.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_csharp.png[m
[1mdeleted file mode 100755[m
[1mindex ffb8fc9..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_csharp.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_cup.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_cup.png[m
[1mdeleted file mode 100755[m
[1mindex 0a7d6f4..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_cup.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_database.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_database.png[m
[1mdeleted file mode 100755[m
[1mindex bddba1f..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_database.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_delete.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_delete.png[m
[1mdeleted file mode 100755[m
[1mindex af1ecaf..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_delete.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_dvd.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_dvd.png[m
[1mdeleted file mode 100755[m
[1mindex 4cc537a..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_dvd.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_edit.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_edit.png[m
[1mdeleted file mode 100755[m
[1mindex b93e776..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_edit.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_error.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_error.png[m
[1mdeleted file mode 100755[m
[1mindex 9fc5a0a..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_error.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_excel.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_excel.png[m
[1mdeleted file mode 100755[m
[1mindex b977d7e..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_excel.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_find.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_find.png[m
[1mdeleted file mode 100755[m
[1mindex 5818436..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_find.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_flash.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_flash.png[m
[1mdeleted file mode 100755[m
[1mindex 5769120..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_flash.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_freehand.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_freehand.png[m
[1mdeleted file mode 100755[m
[1mindex 8d719df..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_freehand.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_gear.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_gear.png[m
[1mdeleted file mode 100755[m
[1mindex 106f5aa..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_gear.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_get.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_get.png[m
[1mdeleted file mode 100755[m
[1mindex e4a1ecb..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_get.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_go.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_go.png[m
[1mdeleted file mode 100755[m
[1mindex 7e62a92..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_go.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_h.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_h.png[m
[1mdeleted file mode 100755[m
[1mindex e902abb..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_h.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_horizontal.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_horizontal.png[m
[1mdeleted file mode 100755[m
[1mindex 1d2d0a4..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_horizontal.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_key.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_key.png[m
[1mdeleted file mode 100755[m
[1mindex d616484..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_key.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_lightning.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_lightning.png[m
[1mdeleted file mode 100755[m
[1mindex 7215d1e..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_lightning.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_link.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_link.png[m
[1mdeleted file mode 100755[m
[1mindex bf7bd1c..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_link.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_magnify.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_magnify.png[m
[1mdeleted file mode 100755[m
[1mindex f6b74cc..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_magnify.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_medal.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_medal.png[m
[1mdeleted file mode 100755[m
[1mindex d3fffb6..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_medal.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_office.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_office.png[m
[1mdeleted file mode 100755[m
[1mindex a65bcb3..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_office.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_paint.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_paint.png[m
[1mdeleted file mode 100755[m
[1mindex 23a37b8..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_paint.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_paintbrush.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_paintbrush.png[m
[1mdeleted file mode 100755[m
[1mindex f907e44..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_paintbrush.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_paste.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_paste.png[m
[1mdeleted file mode 100755[m
[1mindex 5b2cbb3..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_paste.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_php.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_php.png[m
[1mdeleted file mode 100755[m
[1mindex 7868a25..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_php.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_picture.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_picture.png[m
[1mdeleted file mode 100755[m
[1mindex 134b669..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_picture.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_powerpoint.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_powerpoint.png[m
[1mdeleted file mode 100755[m
[1mindex c4eff03..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_powerpoint.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_put.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_put.png[m
[1mdeleted file mode 100755[m
[1mindex 884ffd6..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_put.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_ruby.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_ruby.png[m
[1mdeleted file mode 100755[m
[1mindex f59b7c4..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_ruby.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_stack.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_stack.png[m
[1mdeleted file mode 100755[m
[1mindex 44084ad..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_stack.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_star.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_star.png[m
[1mdeleted file mode 100755[m
[1mindex 3a1441c..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_star.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_swoosh.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_swoosh.png[m
[1mdeleted file mode 100755[m
[1mindex e770829..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_swoosh.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_text.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_text.png[m
[1mdeleted file mode 100755[m
[1mindex 813f712..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_text.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_text_width.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_text_width.png[m
[1mdeleted file mode 100755[m
[1mindex d9cf132..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_text_width.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_tux.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_tux.png[m
[1mdeleted file mode 100755[m
[1mindex 52699bf..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_tux.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_vector.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_vector.png[m
[1mdeleted file mode 100755[m
[1mindex 4a05955..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_vector.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_visualstudio.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_visualstudio.png[m
[1mdeleted file mode 100755[m
[1mindex a0a433d..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_visualstudio.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_width.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_width.png[m
[1mdeleted file mode 100755[m
[1mindex 1eb8809..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_width.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_word.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_word.png[m
[1mdeleted file mode 100755[m
[1mindex ae8ecbf..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_word.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_world.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_world.png[m
[1mdeleted file mode 100755[m
[1mindex 6ed2490..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_world.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_wrench.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_wrench.png[m
[1mdeleted file mode 100755[m
[1mindex fecadd0..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_wrench.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_zip.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_zip.png[m
[1mdeleted file mode 100755[m
[1mindex fd4bbcc..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_white_zip.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_word.png b/node_modules/express/node_modules/connect/lib/public/icons/page_word.png[m
[1mdeleted file mode 100755[m
[1mindex 834cdfa..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_word.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_world.png b/node_modules/express/node_modules/connect/lib/public/icons/page_world.png[m
[1mdeleted file mode 100755[m
[1mindex b8895dd..0000000[m
Binary files a/node_modules/express/node_modules/connect/lib/public/icons/page_world.png and /dev/null differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/style.css b/node_modules/express/node_modules/connect/lib/public/style.css[m
[1mdeleted file mode 100644[m
[1mindex 32b6507..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/public/style.css[m
[1m+++ /dev/null[m
[36m@@ -1,141 +0,0 @@[m
[31m-body {[m
[31m-  margin: 0;[m
[31m-  padding: 80px 100px;[m
[31m-  font: 13px "Helvetica Neue", "Lucida Grande", "Arial";[m
[31m-  background: #ECE9E9 -webkit-gradient(linear, 0% 0%, 0% 100%, from(#fff), to(#ECE9E9));[m
[31m-  background: #ECE9E9 -moz-linear-gradient(top, #fff, #ECE9E9);[m
[31m-  background-repeat: no-repeat;[m
[31m-  color: #555;[m
[31m-  -webkit-font-smoothing: antialiased;[m
[31m-}[m
[31m-h1, h2, h3 {[m
[31m-  margin: 0;[m
[31m-  font-size: 22px;[m
[31m-  color: #343434;[m
[31m-}[m
[31m-h1 em, h2 em {[m
[31m-  padding: 0 5px;[m
[31m-  font-weight: normal;[m
[31m-}[m
[31m-h1 {[m
[31m-  font-size: 60px;[m
[31m-}[m
[31m-h2 {[m
[31m-	margin-top: 10px;[m
[31m-}[m
[31m-h3 {[m
[31m-  margin: 5px 0 10px 0;[m
[31m-  padding-bottom: 5px;[m
[31m-  border-bottom: 1px solid #eee;[m
[31m-  font-size: 18px;[m
[31m-}[m
[31m-ul {[m
[31m-  margin: 0;[m
[31m-  padding: 0;[m
[31m-}[m
[31m-ul li {[m
[31m-  margin: 5px 0;[m
[31m-  padding: 3px 8px;[m
[31m-  list-style: none;[m
[31m-}[m
[31m-ul li:hover {[m
[31m-  cursor: pointer;[m
[31m-  color: #2e2e2e;[m
[31m-}[m
[31m-ul li .path {[m
[31m-  padding-left: 5px;[m
[31m-  font-weight: bold;[m
[31m-}[m
[31m-ul li .line {[m
[31m-  padding-right: 5px;[m
[31m-  font-style: italic;[m
[31m-}[m
[31m-ul li:first-child .path {[m
[31m-  padding-left: 0;[m
[31m-}[m
[31m-p {[m
[31m-  line-height: 1.5;[m
[31m-}[m
[31m-a {[m
[31m-  color: #555;[m
[31m-  text-decoration: none;[m
[31m-}[m
[31m-a:hover {[m
[31m-  color: #303030;[m
[31m-}[m
[31m-#stacktrace {[m
[31m-	margin-top: 15px;[m
[31m-}[m
[31m-.directory h1 {[m
[31m-  margin-bottom: 15px;[m
[31m-  font-size: 18px;[m
[31m-}[m
[31m-ul#files {[m
[31m-  width: 100%;[m
[31m-  height: 500px;[m
[31m-}[m
[31m-ul#files li {[m
[31m-  padding: 0;[m
[31m-}[m
[31m-ul#files li img {[m
[31m-  position: absolute;[m
[31m-  top: 5px;[m
[31m-  left: 5px;[m
[31m-}[m
[31m-ul#files li a {[m
[31m-   position: relative;[m
[31m-  display: block;[m
[31m-  margin: 1px;[m
[31m-  width: 30%;[m
[31m-  height: 25px;[m
[31m-  line-height: 25px;[m
[31m-  text-indent: 8px;[m
[31m-  float: left;[m
[31m-  border: 1px solid transparent;[m
[31m-  -webkit-border-radius: 5px;[m
[31m-  -moz-border-radius: 5px;[m
[31m-  border-radius: 5px;[m
[31m-  overflow: hidden;[m
[31m-  text-overflow: ellipsis;[m
[31m-}[m
[31m-ul#files li a.icon {[m
[31m-  text-indent: 25px;[m
[31m-}[m
[31m-ul#files li a:focus,[m
[31m-ul#files li a:hover {[m
[31m-  outline: none;[m
[31m-  background: rgba(255,255,255,0.65);[m
[31m-  border: 1px solid #ececec;[m
[31m-}[m
[31m-ul#files li a.highlight {[m
[31m-  -webkit-transition: background .4s ease-in-out;[m
[31m-  background: #ffff4f;[m
[31m-  border-color: #E9DC51;[m
[31m-}[m
[31m-#search {[m
[31m-  display: block;[m
[31m-  position: fixed;[m
[31m-  top: 20px;[m
[31m-  right: 20px;[m
[31m-  width: 90px;[m
[31m-  -webkit-transition: width ease 0.2s, opacity ease 0.4s;[m
[31m-  -moz-transition: width ease 0.2s, opacity ease 0.4s;[m
[31m-  -webkit-border-radius: 32px;[m
[31m-  -moz-border-radius: 32px;[m
[31m-  -webkit-box-shadow: inset 0px 0px 3px rgba(0, 0, 0, 0.25), inset 0px 1px 3px rgba(0, 0, 0, 0.7), 0px 1px 0px rgba(255, 255, 255, 0.03);[m
[31m-  -moz-box-shadow: inset 0px 0px 3px rgba(0, 0, 0, 0.25), inset 0px 1px 3px rgba(0, 0, 0, 0.7), 0px 1px 0px rgba(255, 255, 255, 0.03);[m
[31m-  -webkit-font-smoothing: antialiased;[m
[31m-  text-align: left;[m
[31m-  font: 13px "Helvetica Neue", Arial, sans-serif;[m
[31m-  padding: 4px 10px;[m
[31m-  border: none;[m
[31m-  background: transparent;[m
[31m-  margin-bottom: 0;[m
[31m-  outline: none;[m
[31m-  opacity: 0.7;[m
[31m-  color: #888;[m
[31m-}[m
[31m-#search:focus {[m
[31m-  width: 120px;[m
[31m-  opacity: 1.0; [m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/utils.js b/node_modules/express/node_modules/connect/lib/utils.js[m
[1mdeleted file mode 100644[m
[1mindex d0bc172..0000000[m
[1m--- a/node_modules/express/node_modules/connect/lib/utils.js[m
[1m+++ /dev/null[m
[36m@@ -1,451 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * Connect - utils[m
[31m- * Copyright(c) 2010 Sencha Inc.[m
[31m- * Copyright(c) 2011 TJ Holowaychuk[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var crypto = require('crypto')[m
[31m-  , Path = require('path')[m
[31m-  , fs = require('fs');[m
[31m-[m
[31m-/**[m
[31m- * Flatten the given `arr`.[m
[31m- *[m
[31m- * @param {Array} arr[m
[31m- * @return {Array}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-exports.flatten = function(arr, ret){[m
[31m-  var ret = ret || [][m
[31m-    , len = arr.length;[m
[31m-  for (var i = 0; i < len; ++i) {[m
[31m-    if (Array.isArray(arr[i])) {[m
[31m-      exports.flatten(arr[i], ret);[m
[31m-    } else {[m
[31m-      ret.push(arr[i]);[m
[31m-    }[m
[31m-  }[m
[31m-  return ret;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Return md5 hash of the given string and optional encoding,[m
[31m- * defaulting to hex.[m
[31m- *[m
[31m- *     utils.md5('wahoo');[m
[31m- *     // => "e493298061761236c96b02ea6aa8a2ad"[m
[31m- *[m
[31m- * @param {String} str[m
[31m- * @param {String} encoding[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.md5 = function(str, encoding){[m
[31m-  return crypto[m
[31m-    .createHash('md5')[m
[31m-    .update(str)[m
[31m-    .digest(encoding || 'hex');[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Merge object b with object a.[m
[31m- *[m
[31m- *     var a = { foo: 'bar' }[m
[31m- *       , b = { bar: 'baz' };[m
[31m- *     [m
[31m- *     utils.merge(a, b);[m
[31m- *     // => { foo: 'bar', bar: 'baz' }[m
[31m- *[m
[31m- * @param {Object} a[m
[31m- * @param {Object} b[m
[31m- * @return {Object}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.merge = function(a, b){[m
[31m-  if (a && b) {[m
[31m-    for (var key in b) {[m
[31m-      a[key] = b[key];[m
[31m-    }[m
[31m-  }[m
[31m-  return a;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Escape the given string of `html`.[m
[31m- *[m
[31m- * @param {String} html[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.escape = function(html){[m
[31m-  return String(html)[m
[31m-    .replace(/&(?!\w+;)/g, '&amp;')[m
[31m-    .replace(/</g, '&lt;')[m
[31m-    .replace(/>/g, '&gt;')[m
[31m-    .replace(/"/g, '&quot;');[m
[31m-};[m
[31m-[m
[31m-[m
[31m-/**[m
[31m- * Return a unique identifier with the given `len`.[m
[31m- *[m
[31m- *     utils.uid(10);[m
[31m- *     // => "FDaS435D2z"[m
[31m- *[m
[31m- * @param {Number} len[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.uid = function(len) {[m
[31m-  var buf = [][m
[31m-    , chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'[m
[31m-    , charlen = chars.length;[m
[31m-[m
[31m-  for (var i = 0; i < len; ++i) {[m
[31m-    buf.push(chars[getRandomInt(0, charlen - 1)]);[m
[31m-  }[m
[31m-[m
[31m-  return buf.join('');[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Parse the given cookie string into an object.[m
[31m- *[m
[31m- * @param {String} str[m
[31m- * @return {Object}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.parseCookie = function(str){[m
[31m-  var obj = {}[m
[31m-    , pairs = str.split(/[;,] */);[m
[31m-  for (var i = 0, len = pairs.length; i < len; ++i) {[m
[31m-    var pair = pairs[i][m
[31m-      , eqlIndex = pair.indexOf('=')[m
[31m-      , key = pair.substr(0, eqlIndex).trim().toLowerCase()[m
[31m-      , val = pair.substr(++eqlIndex, pair.length).trim();[m
[31m-[m
[31m-    // quoted values[m
[31m-    if ('"' == val[0]) val = val.slice(1, -1);[m
[31m-[m
[31m-    // only assign once[m
[31m-    if (undefined == obj[key]) {[m
[31m-      val = val.replace(/\+/g, ' ');[m
[31m-      try {[m
[31m-        obj[key] = decodeURIComponent(val);[m
[31m-      } catch (err) {[m
[31m-        if (err instanceof URIError) {[m
[31m-          obj[key] = val;[m
[31m-        } else {[m
[31m-          throw err;[m
[31m-        }[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-  return obj;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Serialize the given object into a cookie string.[m
[31m- *[m
[31m- *      utils.serializeCookie('name', 'tj', { httpOnly: true })[m
[31m- *      // => "name=tj; httpOnly"[m
[31m- *[m
[31m- * @param {String} name[m
[31m- * @param {String} val[m
[31m- * @param {Object} obj[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.serializeCookie = function(name, val, obj){[m
[31m-  var pairs = [name + '=' + encodeURIComponent(val)][m
[31m-    , obj = obj || {};[m
[31m-[m
[31m-  if (obj.domain) pairs.push('domain=' + obj.domain);[m
[31m-  if (obj.path) pairs.push('path=' + obj.path);[m
[31m-  if (obj.expires) pairs.push('expires=' + obj.expires.toUTCString());[m
[31m-  if (obj.httpOnly) pairs.push('httpOnly');[m
[31m-  if (obj.secure) pairs.push('secure');[m
[31m-[m
[31m-  return pairs.join('; ');[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Pause `data` and `end` events on the given `obj`.[m
[31m- * Middleware performing async tasks _should_ utilize[m
[31m- * this utility (or similar), to re-emit data once[m
[31m- * the async operation has completed, otherwise these[m
[31m- * events may be lost.[m
[31m- *[m
[31m- *      var pause = utils.pause(req);[m
[31m- *      fs.readFile(path, function(){[m
[31m- *         next();[m
[31m- *         pause.resume();[m
[31m- *      });[m
[31m- *[m
[31m- * @param {Object} obj[m
[31m- * @return {Object}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.pause = function(obj){[m
[31m-  var onData[m
[31m-    , onEnd[m
[31m-    , events = [];[m
[31m-[m
[31m-  // buffer data[m
[31m-  obj.on('data', onData = function(data, encoding){[m
[31m-    events.push(['data', data, encoding]);[m
[31m-  });[m
[31m-[m
[31m-  // buffer end[m
[31m-  obj.on('end', onEnd = function(data, encoding){[m
[31m-    events.push(['end', data, encoding]);[m
[31m-  });[m
[31m-[m
[31m-  return {[m
[31m-    end: function(){[m
[31m-      obj.removeListener('data', onData);[m
[31m-      obj.removeListener('end', onEnd);[m
[31m-    },[m
[31m-    resume: function(){[m
[31m-      this.end();[m
[31m-      for (var i = 0, len = events.length; i < len; ++i) {[m
[31m-        obj.emit.apply(obj, events[i]);[m
[31m-      }[m
[31m-    }[m
[31m-  };[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Check `req` and `res` to see if it has been modified.[m
[31m- *[m
[31m- * @param {IncomingMessage} req[m
[31m- * @param {ServerResponse} res[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.modified = function(req, res, headers) {[m
[31m-  var headers = headers || res._headers || {}[m
[31m-    , modifiedSince = req.headers['if-modified-since'][m
[31m-    , lastModified = headers['last-modified'][m
[31m-    , noneMatch = req.headers['if-none-match'][m
[31m-    , etag = headers['etag'];[m
[31m-[m
[31m-  if (noneMatch) noneMatch = noneMatch.split(/ *, */);[m
[31m-[m
[31m-  // check If-None-Match[m
[31m-  if (noneMatch && etag && ~noneMatch.indexOf(etag)) {[m
[31m-    return false;[m
[31m-  }[m
[31m-[m
[31m-  // check If-Modified-Since[m
[31m-  if (modifiedSince && lastModified) {[m
[31m-    modifiedSince = new Date(modifiedSince);[m
[31m-    lastModified = new Date(lastModified);[m
[31m-    // Ignore invalid dates[m
[31m-    if (!isNaN(modifiedSince.getTime())) {[m
[31m-      if (lastModified <= modifiedSince) return false;[m
[31m-    }[m
[31m-  }[m
[31m-  [m
[31m-  return true;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Strip `Content-*` headers from `res`.[m
[31m- *[m
[31m- * @param {ServerResponse} res[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.removeContentHeaders = function(res){[m
[31m-  Object.keys(res._headers).forEach(function(field){[m
[31m-    if (0 == field.indexOf('content')) {[m
[31m-      res.removeHeader(field);[m
[31m-    }[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Check if `req` is a conditional GET request.[m
[31m- *[m
[31m- * @param {IncomingMessage} req[m
[31m- * @return {Boolean}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.conditionalGET = function(req) {[m
[31m-  return req.headers['if-modified-since'][m
[31m-    || req.headers['if-none-match'];[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Respond with 403 "Forbidden".[m
[31m- *[m
[31m- * @param {ServerResponse} res[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.forbidden = function(res) {[m
[31m-  var body = 'Forbidden';[m
[31m-  res.setHeader('Content-Type', 'text/plain');[m
[31m-  res.setHeader('Content-Length', body.length);[m
[31m-  res.statusCode = 403;[m
[31m-  res.end(body);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Respond with 401 "Unauthorized".[m
[31m- *[m
[31m- * @param {ServerResponse} res[m
[31m- * @param {String} realm[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.unauthorized = function(res, realm) {[m
[31m-  res.statusCode = 401;[m
[31m-  res.setHeader('WWW-Authenticate', 'Basic realm="' + realm + '"');[m
[31m-  res.end('Unauthorized');[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Respond with 400 "Bad Request".[m
[31m- *[m
[31m- * @param {ServerResponse} res[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.badRequest = function(res) {[m
[31m-  res.statusCode = 400;[m
[31m-  res.end('Bad Request');[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Respond with 304 "Not Modified".[m
[31m- *[m
[31m- * @param {ServerResponse} res[m
[31m- * @param {Object} headers[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.notModified = function(res) {[m
[31m-  exports.removeContentHeaders(res);[m
[31m-  res.statusCode = 304;[m
[31m-  res.end();[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Return an ETag in the form of `"<size>-<mtime>"`[m
[31m- * from the given `stat`.[m
[31m- *[m
[31m- * @param {Object} stat[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.etag = function(stat) {[m
[31m-  return '"' + stat.size + '-' + Number(stat.mtime) + '"';[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Parse "Range" header `str` relative to the given file `size`.[m
[31m- *[m
[31m- * @param {Number} size[m
[31m- * @param {String} str[m
[31m- * @return {Array}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.parseRange = function(size, str){[m
[31m-  var valid = true;[m
[31m-  var arr = str.substr(6).split(',').map(function(range){[m
[31m-    var range = range.split('-')[m
[31m-      , start = parseInt(range[0], 10)[m
[31m-      , end = parseInt(range[1], 10);[m
[31m-[m
[31m-    // -500[m
[31m-    if (isNaN(start)) {[m
[31m-      start = size - end;[m
[31m-      end = size - 1;[m
[31m-    // 500-[m
[31m-    } else if (isNaN(end)) {[m
[31m-      end = size - 1;[m
[31m-    }[m
[31m-[m
[31m-    // Invalid[m
[31m-    if (isNaN(start) || isNaN(end) || start > end) valid = false;[m
[31m-[m
[31m-    return { start: start, end: end };[m
[31m-  });[m
[31m-  return valid ? arr : undefined;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Parse the given Cache-Control `str`.[m
[31m- *[m
[31m- * @param {String} str[m
[31m- * @return {Object}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.parseCacheControl = function(str){[m
[31m-  var directives = str.split(',')[m
[31m-    , obj = {};[m
[31m-[m
[31m-  for(var i = 0, len = directives.length; i < len; i++) {[m
[31m-    var parts = directives[i].split('=')[m
[31m-      , key = parts.shift().trim()[m
[31m-      , val = parseInt(parts.shift(), 10);[m
[31m-[m
[31m-    obj[key] = isNaN(val) ? true : val;[m
[31m-  }[m
[31m-[m
[31m-  return obj;[m
[31m-};[m
[31m-[m
[31m-[m
[31m-/**[m
[31m- * Convert array-like object to an `Array`.[m
[31m- *[m
[31m- * node-bench measured "16.5 times faster than Array.prototype.slice.call()"[m
[31m- *[m
[31m- * @param {Object} obj[m
[31m- * @return {Array}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-var toArray = exports.toArray = function(obj){[m
[31m-  var len = obj.length[m
[31m-    , arr = new Array(len);[m
[31m-  for (var i = 0; i < len; ++i) {[m
[31m-    arr[i] = obj[i];[m
[31m-  }[m
[31m-  return arr;[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Retrun a random int, used by `utils.uid()`[m
[31m- *[m
[31m- * @param {Number} min[m
[31m- * @param {Number} max[m
[31m- * @return {Number}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function getRandomInt(min, max) {[m
[31m-  return Math.floor(Math.random() * (max - min + 1)) + min;[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/.npmignore b/node_modules/express/node_modules/connect/node_modules/formidable/.npmignore[m
[1mdeleted file mode 100644[m
[1mindex 4fbabb3..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/.npmignore[m
[1m+++ /dev/null[m
[36m@@ -1,4 +0,0 @@[m
[31m-/test/tmp/[m
[31m-*.upload[m
[31m-*.un~[m
[31m-*.http[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/.travis.yml b/node_modules/express/node_modules/connect/node_modules/formidable/.travis.yml[m
[1mdeleted file mode 100644[m
[1mindex f1d0f13..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/.travis.yml[m
[1m+++ /dev/null[m
[36m@@ -1,4 +0,0 @@[m
[31m-language: node_js[m
[31m-node_js:[m
[31m-  - 0.4[m
[31m-  - 0.6[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/Makefile b/node_modules/express/node_modules/connect/node_modules/formidable/Makefile[m
[1mdeleted file mode 100644[m
[1mindex 8945872..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/Makefile[m
[1m+++ /dev/null[m
[36m@@ -1,14 +0,0 @@[m
[31m-SHELL := /bin/bash[m
[31m-[m
[31m-test:[m
[31m-	@./test/run.js[m
[31m-[m
[31m-build: npm test[m
[31m-[m
[31m-npm:[m
[31m-	npm install .[m
[31m-[m
[31m-clean:[m
[31m-	rm test/tmp/*[m
[31m-[m
[31m-.PHONY: test clean build[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/Readme.md b/node_modules/express/node_modules/connect/node_modules/formidable/Readme.md[m
[1mdeleted file mode 100644[m
[1mindex a5ca104..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/Readme.md[m
[1m+++ /dev/null[m
[36m@@ -1,311 +0,0 @@[m
[31m-# Formidable[m
[31m-[m
[31m-[![Build Status](https://secure.travis-ci.org/felixge/node-formidable.png?branch=master)](http://travis-ci.org/felixge/node-formidable)[m
[31m-[m
[31m-## Purpose[m
[31m-[m
[31m-A node.js module for parsing form data, especially file uploads.[m
[31m-[m
[31m-## Current status[m
[31m-[m
[31m-This module was developed for [Transloadit](http://transloadit.com/), a service focused on uploading[m
[31m-and encoding images and videos. It has been battle-tested against hundreds of GB of file uploads from[m
[31m-a large variety of clients and is considered production-ready.[m
[31m-[m
[31m-## Features[m
[31m-[m
[31m-* Fast (~500mb/sec), non-buffering multipart parser[m
[31m-* Automatically writing file uploads to disk[m
[31m-* Low memory footprint[m
[31m-* Graceful error handling[m
[31m-* Very high test coverage[m
[31m-[m
[31m-## Changelog[m
[31m-[m
[31m-### v1.0.9[m
[31m-[m
[31m-* Emit progress when content length header parsed (Tim Koschützki)[m
[31m-* Fix Readme syntax due to GitHub changes (goob)[m
[31m-* Replace references to old 'sys' module in Readme with 'util' (Peter Sugihara)[m
[31m-[m
[31m-### v1.0.8[m
[31m-[m
[31m-* Strip potentially unsafe characters when using `keepExtensions: true`.[m
[31m-* Switch to utest / urun for testing[m
[31m-* Add travis build[m
[31m-[m
[31m-### v1.0.7[m
[31m-[m
[31m-* Remove file from package that was causing problems when installing on windows. (#102)[m
[31m-* Fix typos in Readme (Jason Davies).[m
[31m-[m
[31m-### v1.0.6[m
[31m-[m
[31m-* Do not default to the default to the field name for file uploads where[m
[31m-  filename="".[m
[31m-[m
[31m-### v1.0.5[m
[31m-[m
[31m-* Support filename="" in multipart parts[m
[31m-* Explain unexpected end() errors in parser better[m
[31m-[m
[31m-**Note:** Starting with this version, formidable emits 'file' events for empty[m
[31m-file input fields. Previously those were incorrectly emitted as regular file[m
[31m-input fields with value = "".[m
[31m-[m
[31m-### v1.0.4[m
[31m-[m
[31m-* Detect a good default tmp directory regardless of platform. (#88)[m
[31m-[m
[31m-### v1.0.3[m
[31m-[m
[31m-* Fix problems with utf8 characters (#84) / semicolons in filenames (#58)[m
[31m-* Small performance improvements[m
[31m-* New test suite and fixture system[m
[31m-[m
[31m-### v1.0.2[m
[31m-[m
[31m-* Exclude node\_modules folder from git[m
[31m-* Implement new `'aborted'` event[m
[31m-* Fix files in example folder to work with recent node versions[m
[31m-* Make gently a devDependency[m
[31m-[m
[31m-[See Commits](https://github.com/felixge/node-formidable/compare/v1.0.1...v1.0.2)[m
[31m-[m
[31m-### v1.0.1[m
[31m-[m
[31m-* Fix package.json to refer to proper main directory. (#68, Dean Landolt)[m
[31m-[m
[31m-[See Commits](https://github.com/felixge/node-formidable/compare/v1.0.0...v1.0.1)[m
[31m-[m
[31m-### v1.0.0[m
[31m-[m
[31m-* Add support for multipart boundaries that are quoted strings. (Jeff Craig)[m
[31m-[m
[31m-This marks the beginning of development on version 2.0 which will include[m
[31m-several architectural improvements.[m
[31m-[m
[31m-[See Commits](https://github.com/felixge/node-formidable/compare/v0.9.11...v1.0.0)[m
[31m-[m
[31m-### v0.9.11[m
[31m-[m
[31m-* Emit `'progress'` event when receiving data, regardless of parsing it. (Tim Koschützki)[m
[31m-* Use [W3C FileAPI Draft](http://dev.w3.org/2006/webapi/FileAPI/) properties for File class[m
[31m-[m
[31m-**Important:** The old property names of the File class will be removed in a[m
[31m-future release.[m
[31m-[m
[31m-[See Commits](https://github.com/felixge/node-formidable/compare/v0.9.10...v0.9.11)[m
[31m-[m
[31m-### Older releases[m
[31m-[m
[31m-These releases were done before starting to maintain the above Changelog:[m
[31m-[m
[31m-* [v0.9.10](https://github.com/felixge/node-formidable/compare/v0.9.9...v0.9.10)[m
[31m-* [v0.9.9](https://github.com/felixge/node-formidable/compare/v0.9.8...v0.9.9)[m
[31m-* [v0.9.8](https://github.com/felixge/node-formidable/compare/v0.9.7...v0.9.8)[m
[31m-* [v0.9.7](https://github.com/felixge/node-formidable/compare/v0.9.6...v0.9.7)[m
[31m-* [v0.9.6](https://github.com/felixge/node-formidable/compare/v0.9.5...v0.9.6)[m
[31m-* [v0.9.5](https://github.com/felixge/node-formidable/compare/v0.9.4...v0.9.5)[m
[31m-* [v0.9.4](https://github.com/felixge/node-formidable/compare/v0.9.3...v0.9.4)[m
[31m-* [v0.9.3](https://github.com/felixge/node-formidable/compare/v0.9.2...v0.9.3)[m
[31m-* [v0.9.2](https://github.com/felixge/node-formidable/compare/v0.9.1...v0.9.2)[m
[31m-* [v0.9.1](https://github.com/felixge/node-formidable/compare/v0.9.0...v0.9.1)[m
[31m-* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[31m-* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[31m-* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[31m-* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[31m-* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[31m-* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[31m-* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[31m-* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[31m-* [v0.1.0](https://github.com/felixge/node-formidable/commits/v0.1.0)[m
[31m-[m
[31m-## Installation[m
[31m-[m
[31m-Via [npm](http://github.com/isaacs/npm):[m
[31m-[m
[31m-    npm install formidable@latest[m
[31m-[m
[31m-Manually:[m
[31m-[m
[31m-    git clone git://github.com/felixge/node-formidable.git formidable[m
[31m-    vim my.js[m
[31m-    # var formidable = require('./formidable');[m
[31m-[m
[31m-Note: Formidable requires [gently](http://github.com/felixge/node-gently) to run the unit tests, but you won't need it for just using the library.[m
[31m-[m
[31m-## Example[m
[31m-[m
[31m-Parse an incoming file upload.[m
[31m-[m
[31m-    var formidable = require('formidable'),[m
[31m-        http = require('http'),[m
[31m-[m
[31m-        util = require('util');[m
[31m-[m
[31m-    http.createServer(function(req, res) {[m
[31m-      if (req.url == '/upload' && req.method.toLowerCase() == 'post') {[m
[31m-        // parse a file upload[m
[31m-        var form = new formidable.IncomingForm();[m
[31m-        form.parse(req, function(err, fields, files) {[m
[31m-          res.writeHead(200, {'content-type': 'text/plain'});[m
[31m-          res.write('received upload:\n\n');[m
[31m-          res.end(util.inspect({fields: fields, files: files}));[m
[31m-        });[m
[31m-        return;[m
[31m-      }[m
[31m-[m
[31m-      // show a file upload form[m
[31m-      res.writeHead(200, {'content-type': 'text/html'});[m
[31m-      res.end([m
[31m-        '<form action="/upload" enctype="multipart/form-data" method="post">'+[m
[31m-        '<input type="text" name="title"><br>'+[m
[31m-        '<input type="file" name="upload" multiple="multiple"><br>'+[m
[31m-        '<input type="submit" value="Upload">'+[m
[31m-        '</form>'[m
[31m-      );[m
[31m-    }).listen(80);[m
[31m-[m
[31m-## API[m
[31m-[m
[31m-### formidable.IncomingForm[m
[31m-[m
[31m-__new formidable.IncomingForm()__[m
[31m-[m
[31m-Creates a new incoming form.[m
[31m-[m
[31m-__incomingForm.encoding = 'utf-8'__[m
[31m-[m
[31m-The encoding to use for incoming form fields.[m
[31m-[m
[31m-__incomingForm.uploadDir = process.env.TMP || '/tmp' || process.cwd()__[m
[31m-[m
[31m-The directory for placing file uploads in. You can move them later on using[m
[31m-`fs.rename()`. The default directory is picked at module load time depending on[m
[31m-the first existing directory from those listed above.[m
[31m-[m
[31m-__incomingForm.keepExtensions = false__[m
[31m-[m
[31m-If you want the files written to `incomingForm.uploadDir` to include the extensions of the original files, set this property to `true`.[m
[31m-[m
[31m-__incomingForm.type__[m
[31m-[m
[31m-Either 'multipart' or 'urlencoded' depending on the incoming request.[m
[31m-[m
[31m-__incomingForm.maxFieldsSize = 2 * 1024 * 1024__[m
[31m-[m
[31m-Limits the amount of memory a field (not file) can allocate in bytes.[m
[31m-If this value is exceeded, an `'error'` event is emitted. The default[m
[31m-size is 2MB.[m
[31m-[m
[31m-__incomingForm.hash = false__[m
[31m-[m
[31m-If you want checksums calculated for incoming files, set this to either `'sha1'` or `'md5'`.[m
[31m-[m
[31m-__incomingForm.bytesReceived__[m
[31m-[m
[31m-The amount of bytes received for this form so far.[m
[31m-[m
[31m-__incomingForm.bytesExpected__[m
[31m-[m
[31m-The expected number of bytes in this form.[m
[31m-[m
[31m-__incomingForm.parse(request, [cb])__[m
[31m-[m
[31m-Parses an incoming node.js `request` containing form data. If `cb` is provided, all fields an files are collected and passed to the callback:[m
[31m-[m
[31m-    incomingForm.parse(req, function(err, fields, files) {[m
[31m-      // ...[m
[31m-    });[m
[31m-[m
[31m-__incomingForm.onPart(part)__[m
[31m-[m
[31m-You may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events  processing which would occur otherwise, making you fully responsible for handling the processing.[m
[31m-[m
[31m-    incomingForm.onPart = function(part) {[m
[31m-      part.addListener('data', function() {[m
[31m-        // ...[m
[31m-      });[m
[31m-    }[m
[31m-[m
[31m-If you want to use formidable to only handle certain parts for you, you can do so:[m
[31m-[m
[31m-    incomingForm.onPart = function(part) {[m
[31m-      if (!part.filename) {[m
[31m-        // let formidable handle all non-file parts[m
[31m-        incomingForm.handlePart(part);[m
[31m-      }[m
[31m-    }[m
[31m-[m
[31m-Check the code in this method for further inspiration.[m
[31m-[m
[31m-__Event: 'progress' (bytesReceived, bytesExpected)__[m
[31m-[m
[31m-Emitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.[m
[31m-[m
[31m-__Event: 'field' (name, value)__[m
[31m-[m
[31m-Emitted whenever a field / value pair has been received.[m
[31m-[m
[31m-__Event: 'fileBegin' (name, file)__[m
[31m-[m
[31m-Emitted whenever a new file is detected in the upload stream. Use this even if[m
[31m-you want to stream the file to somewhere else while buffering the upload on[m
[31m-the file system.[m
[31m-[m
[31m-__Event: 'file' (name, file)__[m
[31m-[m
[31m-Emitted whenever a field / file pair has been received. `file` is an instance of `File`.[m
[31m-[m
[31m-__Event: 'error' (err)__[m
[31m-[m
[31m-Emitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.[m
[31m-[m
[31m-__Event: 'aborted'__[m
[31m-[m
[31m-Emitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. In the future there will be a separate 'timeout' event (needs a change in the node core).[m
[31m-[m
[31m-__Event: 'end' ()__[m
[31m-[m
[31m-Emitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.[m
[31m-[m
[31m-### formidable.File[m
[31m-[m
[31m-__file.size = 0__[m
[31m-[m
[31m-The size of the uploaded file in bytes. If the file is still being uploaded (see `'fileBegin'` event), this property says how many bytes of the file have been written to disk yet.[m
[31m-[m
[31m-__file.path = null__[m
[31m-[m
[31m-The path this file is being written to. You can modify this in the `'fileBegin'` event in[m
[31m-case you are unhappy with the way formidable generates a temporary path for your files.[m
[31m-[m
[31m-__file.name = null__[m
[31m-[m
[31m-The name this file had according to the uploading client.[m
[31m-[m
[31m-__file.type = null__[m
[31m-[m
[31m-The mime type of this file, according to the uploading client.[m
[31m-[m
[31m-__file.lastModifiedDate = null__[m
[31m-[m
[31m-A date object (or `null`) containing the time this file was last written to. Mostly[m
[31m-here for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).[m
[31m-[m
[31m-__file.hash = null__[m
[31m-[m
[31m-If hash calculation was set, you can read the hex digest out of this var.[m
[31m-[m
[31m-## License[m
[31m-[m
[31m-Formidable is licensed under the MIT license.[m
[31m-[m
[31m-## Ports[m
[31m-[m
[31m-* [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable[m
[31m-[m
[31m-## Credits[m
[31m-[m
[31m-* [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired multipart_parser.js[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/TODO b/node_modules/express/node_modules/connect/node_modules/formidable/TODO[m
[1mdeleted file mode 100644[m
[1mindex e1107f2..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/TODO[m
[1m+++ /dev/null[m
[36m@@ -1,3 +0,0 @@[m
[31m-- Better bufferMaxSize handling approach[m
[31m-- Add tests for JSON parser pull request and merge it[m
[31m-- Implement QuerystringParser the same way as MultipartParser[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/benchmark/bench-multipart-parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/benchmark/bench-multipart-parser.js[m
[1mdeleted file mode 100644[m
[1mindex bff41f1..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/benchmark/bench-multipart-parser.js[m
[1m+++ /dev/null[m
[36m@@ -1,70 +0,0 @@[m
[31m-require('../test/common');[m
[31m-var multipartParser = require('../lib/multipart_parser'),[m
[31m-    MultipartParser = multipartParser.MultipartParser,[m
[31m-    parser = new MultipartParser(),[m
[31m-    Buffer = require('buffer').Buffer,[m
[31m-    boundary = '-----------------------------168072824752491622650073',[m
[31m-    mb = 100,[m
[31m-    buffer = createMultipartBuffer(boundary, mb * 1024 * 1024),[m
[31m-    callbacks =[m
[31m-      { partBegin: -1,[m
[31m-        partEnd: -1,[m
[31m-        headerField: -1,[m
[31m-        headerValue: -1,[m
[31m-        partData: -1,[m
[31m-        end: -1,[m
[31m-      };[m
[31m-[m
[31m-[m
[31m-parser.initWithBoundary(boundary);[m
[31m-parser.onHeaderField = function() {[m
[31m-  callbacks.headerField++;[m
[31m-};[m
[31m-[m
[31m-parser.onHeaderValue = function() {[m
[31m-  callbacks.headerValue++;[m
[31m-};[m
[31m-[m
[31m-parser.onPartBegin = function() {[m
[31m-  callbacks.partBegin++;[m
[31m-};[m
[31m-[m
[31m-parser.onPartData = function() {[m
[31m-  callbacks.partData++;[m
[31m-};[m
[31m-[m
[31m-parser.onPartEnd = function() {[m
[31m-  callbacks.partEnd++;[m
[31m-};[m
[31m-[m
[31m-parser.onEnd = function() {[m
[31m-  callbacks.end++;[m
[31m-};[m
[31m-[m
[31m-var start = +new Date(),[m
[31m-    nparsed = parser.write(buffer),[m
[31m-    duration = +new Date - start,[m
[31m-    mbPerSec = (mb / (duration / 1000)).toFixed(2);[m
[31m-[m
[31m-console.log(mbPerSec+' mb/sec');[m
[31m-[m
[31m-assert.equal(nparsed, buffer.length);[m
[31m-[m
[31m-function createMultipartBuffer(boundary, size) {[m
[31m-  var head =[m
[31m-        '--'+boundary+'\r\n'[m
[31m-      + 'content-disposition: form-data; name="field1"\r\n'[m
[31m-      + '\r\n'[m
[31m-    , tail = '\r\n--'+boundary+'--\r\n'[m
[31m-    , buffer = new Buffer(size);[m
[31m-[m
[31m-  buffer.write(head, 'ascii', 0);[m
[31m-  buffer.write(tail, 'ascii', buffer.length - tail.length);[m
[31m-  return buffer;[m
[31m-}[m
[31m-[m
[31m-process.on('exit', function() {[m
[31m-  for (var k in callbacks) {[m
[31m-    assert.equal(0, callbacks[k], k+' count off by '+callbacks[k]);[m
[31m-  }[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/example/post.js b/node_modules/express/node_modules/connect/node_modules/formidable/example/post.js[m
[1mdeleted file mode 100644[m
[1mindex f6c15a6..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/example/post.js[m
[1m+++ /dev/null[m
[36m@@ -1,43 +0,0 @@[m
[31m-require('../test/common');[m
[31m-var http = require('http'),[m
[31m-    util = require('util'),[m
[31m-    formidable = require('formidable'),[m
[31m-    server;[m
[31m-[m
[31m-server = http.createServer(function(req, res) {[m
[31m-  if (req.url == '/') {[m
[31m-    res.writeHead(200, {'content-type': 'text/html'});[m
[31m-    res.end([m
[31m-      '<form action="/post" method="post">'+[m
[31m-      '<input type="text" name="title"><br>'+[m
[31m-      '<input type="text" name="data[foo][]"><br>'+[m
[31m-      '<input type="submit" value="Submit">'+[m
[31m-      '</form>'[m
[31m-    );[m
[31m-  } else if (req.url == '/post') {[m
[31m-    var form = new formidable.IncomingForm(),[m
[31m-        fields = [];[m
[31m-[m
[31m-    form[m
[31m-      .on('error', function(err) {[m
[31m-        res.writeHead(200, {'content-type': 'text/plain'});[m
[31m-        res.end('error:\n\n'+util.inspect(err));[m
[31m-      })[m
[31m-      .on('field', function(field, value) {[m
[31m-        console.log(field, value);[m
[31m-        fields.push([field, value]);[m
[31m-      })[m
[31m-      .on('end', function() {[m
[31m-        console.log('-> post done');[m
[31m-        res.writeHead(200, {'content-type': 'text/plain'});[m
[31m-        res.end('received fields:\n\n '+util.inspect(fields));[m
[31m-      });[m
[31m-    form.parse(req);[m
[31m-  } else {[m
[31m-    res.writeHead(404, {'content-type': 'text/plain'});[m
[31m-    res.end('404');[m
[31m-  }[m
[31m-});[m
[31m-server.listen(TEST_PORT);[m
[31m-[m
[31m-console.log('listening on http://localhost:'+TEST_PORT+'/');[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/example/upload.js b/node_modules/express/node_modules/connect/node_modules/formidable/example/upload.js[m
[1mdeleted file mode 100644[m
[1mindex 050cdd9..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/example/upload.js[m
[1m+++ /dev/null[m
[36m@@ -1,48 +0,0 @@[m
[31m-require('../test/common');[m
[31m-var http = require('http'),[m
[31m-    util = require('util'),[m
[31m-    formidable = require('formidable'),[m
[31m-    server;[m
[31m-[m
[31m-server = http.createServer(function(req, res) {[m
[31m-  if (req.url == '/') {[m
[31m-    res.writeHead(200, {'content-type': 'text/html'});[m
[31m-    res.end([m
[31m-      '<form action="/upload" enctype="multipart/form-data" method="post">'+[m
[31m-      '<input type="text" name="title"><br>'+[m
[31m-      '<input type="file" name="upload" multiple="multiple"><br>'+[m
[31m-      '<input type="submit" value="Upload">'+[m
[31m-      '</form>'[m
[31m-    );[m
[31m-  } else if (req.url == '/upload') {[m
[31m-    var form = new formidable.IncomingForm(),[m
[31m-        files = [],[m
[31m-        fields = [];[m
[31m-[m
[31m-    form.uploadDir = TEST_TMP;[m
[31m-[m
[31m-    form[m
[31m-      .on('field', function(field, value) {[m
[31m-        console.log(field, value);[m
[31m-        fields.push([field, value]);[m
[31m-      })[m
[31m-      .on('file', function(field, file) {[m
[31m-        console.log(field, file);[m
[31m-        files.push([field, file]);[m
[31m-      })[m
[31m-      .on('end', function() {[m
[31m-        console.log('-> upload done');[m
[31m-        res.writeHead(200, {'content-type': 'text/plain'});[m
[31m-        res.write('received fields:\n\n '+util.inspect(fields));[m
[31m-        res.write('\n\n');[m
[31m-        res.end('received files:\n\n '+util.inspect(files));[m
[31m-      });[m
[31m-    form.parse(req);[m
[31m-  } else {[m
[31m-    res.writeHead(404, {'content-type': 'text/plain'});[m
[31m-    res.end('404');[m
[31m-  }[m
[31m-});[m
[31m-server.listen(TEST_PORT);[m
[31m-[m
[31m-console.log('listening on http://localhost:'+TEST_PORT+'/');[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/index.js b/node_modules/express/node_modules/connect/node_modules/formidable/index.js[m
[1mdeleted file mode 100644[m
[1mindex be41032..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/index.js[m
[1m+++ /dev/null[m
[36m@@ -1 +0,0 @@[m
[31m-module.exports = require('./lib/formidable');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/file.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/file.js[m
[1mdeleted file mode 100644[m
[1mindex dad8d5f..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/lib/file.js[m
[1m+++ /dev/null[m
[36m@@ -1,73 +0,0 @@[m
[31m-if (global.GENTLY) require = GENTLY.hijack(require);[m
[31m-[m
[31m-var util = require('./util'),[m
[31m-    WriteStream = require('fs').WriteStream,[m
[31m-    EventEmitter = require('events').EventEmitter,[m
[31m-    crypto = require('crypto');[m
[31m-[m
[31m-function File(properties) {[m
[31m-  EventEmitter.call(this);[m
[31m-[m
[31m-  this.size = 0;[m
[31m-  this.path = null;[m
[31m-  this.name = null;[m
[31m-  this.type = null;[m
[31m-  this.hash = null;[m
[31m-  this.lastModifiedDate = null;[m
[31m-[m
[31m-  this._writeStream = null;[m
[31m-  [m
[31m-  for (var key in properties) {[m
[31m-    this[key] = properties[key];[m
[31m-  }[m
[31m-[m
[31m-  if(typeof this.hash === 'string') {[m
[31m-    this.hash = crypto.createHash(properties.hash);[m
[31m-  }[m
[31m-[m
[31m-  this._backwardsCompatibility();[m
[31m-}[m
[31m-module.exports = File;[m
[31m-util.inherits(File, EventEmitter);[m
[31m-[m
[31m-// @todo Next release: Show error messages when accessing these[m
[31m-File.prototype._backwardsCompatibility = function() {[m
[31m-  var self = this;[m
[31m-  this.__defineGetter__('length', function() {[m
[31m-    return self.size;[m
[31m-  });[m
[31m-  this.__defineGetter__('filename', function() {[m
[31m-    return self.name;[m
[31m-  });[m
[31m-  this.__defineGetter__('mime', function() {[m
[31m-    return self.type;[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-File.prototype.open = function() {[m
[31m-  this._writeStream = new WriteStream(this.path);[m
[31m-};[m
[31m-[m
[31m-File.prototype.write = function(buffer, cb) {[m
[31m-  var self = this;[m
[31m-  this._writeStream.write(buffer, function() {[m
[31m-    if(self.hash) {[m
[31m-      self.hash.update(buffer);[m
[31m-    }[m
[31m-    self.lastModifiedDate = new Date();[m
[31m-    self.size += buffer.length;[m
[31m-    self.emit('progress', self.size);[m
[31m-    cb();[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-File.prototype.end = function(cb) {[m
[31m-  var self = this;[m
[31m-  this._writeStream.end(function() {[m
[31m-    if(self.hash) {[m
[31m-      self.hash = self.hash.digest('hex');[m
[31m-    }[m
[31m-    self.emit('end');[m
[31m-    cb();[m
[31m-  });[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js[m
[1mdeleted file mode 100644[m
[1mindex 060eac2..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js[m
[1m+++ /dev/null[m
[36m@@ -1,384 +0,0 @@[m
[31m-if (global.GENTLY) require = GENTLY.hijack(require);[m
[31m-[m
[31m-var fs = require('fs');[m
[31m-var util = require('./util'),[m
[31m-    path = require('path'),[m
[31m-    File = require('./file'),[m
[31m-    MultipartParser = require('./multipart_parser').MultipartParser,[m
[31m-    QuerystringParser = require('./querystring_parser').QuerystringParser,[m
[31m-    StringDecoder = require('string_decoder').StringDecoder,[m
[31m-    EventEmitter = require('events').EventEmitter,[m
[31m-    Stream = require('stream').Stream;[m
[31m-[m
[31m-function IncomingForm(opts) {  [m
[31m-  if (!(this instanceof IncomingForm)) return new IncomingForm;[m
[31m-  EventEmitter.call(this);[m
[31m-[m
[31m-  opts=opts||{};[m
[31m-  [m
[31m-  this.error = null;[m
[31m-  this.ended = false;[m
[31m-[m
[31m-  this.maxFieldsSize = opts.maxFieldsSize || 2 * 1024 * 1024;[m
[31m-  this.keepExtensions = opts.keepExtensions || false;[m
[31m-  this.uploadDir = opts.uploadDir || IncomingForm.UPLOAD_DIR;[m
[31m-  this.encoding = opts.encoding || 'utf-8';[m
[31m-  this.headers = null;[m
[31m-  this.type = null;[m
[31m-  this.hash = false;[m
[31m-[m
[31m-  this.bytesReceived = null;[m
[31m-  this.bytesExpected = null;[m
[31m-[m
[31m-  this._parser = null;[m
[31m-  this._flushing = 0;[m
[31m-  this._fieldsSize = 0;[m
[31m-};[m
[31m-util.inherits(IncomingForm, EventEmitter);[m
[31m-exports.IncomingForm = IncomingForm;[m
[31m-[m
[31m-IncomingForm.UPLOAD_DIR = (function() {[m
[31m-  var dirs = [process.env.TMP, '/tmp', process.cwd()];[m
[31m-  for (var i = 0; i < dirs.length; i++) {[m
[31m-    var dir = dirs[i];[m
[31m-    var isDirectory = false;[m
[31m-[m
[31m-    try {[m
[31m-      isDirectory = fs.statSync(dir).isDirectory();[m
[31m-    } catch (e) {}[m
[31m-[m
[31m-    if (isDirectory) return dir;[m
[31m-  }[m
[31m-})();[m
[31m-[m
[31m-IncomingForm.prototype.parse = function(req, cb) {[m
[31m-  this.pause = function() {[m
[31m-    try {[m
[31m-      req.pause();[m
[31m-    } catch (err) {[m
[31m-      // the stream was destroyed[m
[31m-      if (!this.ended) {[m
[31m-        // before it was completed, crash & burn[m
[31m-        this._error(err);[m
[31m-      }[m
[31m-      return false;[m
[31m-    }[m
[31m-    return true;[m
[31m-  };[m
[31m-[m
[31m-  this.resume = function() {[m
[31m-    try {[m
[31m-      req.resume();[m
[31m-    } catch (err) {[m
[31m-      // the stream was destroyed[m
[31m-      if (!this.ended) {[m
[31m-        // before it was completed, crash & burn[m
[31m-        this._error(err);[m
[31m-      }[m
[31m-      return false;[m
[31m-    }[m
[31m-[m
[31m-    return true;[m
[31m-  };[m
[31m-[m
[31m-  this.writeHeaders(req.headers);[m
[31m-[m
[31m-  var self = this;[m
[31m-  req[m
[31m-    .on('error', function(err) {[m
[31m-      self._error(err);[m
[31m-    })[m
[31m-    .on('aborted', function() {[m
[31m-      self.emit('aborted');[m
[31m-    })[m
[31m-    .on('data', function(buffer) {[m
[31m-      self.write(buffer);[m
[31m-    })[m
[31m-    .on('end', function() {[m
[31m-      if (self.error) {[m
[31m-        return;[m
[31m-      }[m
[31m-[m
[31m-      var err = self._parser.end();[m
[31m-      if (err) {[m
[31m-        self._error(err);[m
[31m-      }[m
[31m-    });[m
[31m-[m
[31m-  if (cb) {[m
[31m-    var fields = {}, files = {};[m
[31m-    this[m
[31m-      .on('field', function(name, value) {[m
[31m-        fields[name] = value;[m
[31m-      })[m
[31m-      .on('file', function(name, file) {[m
[31m-        files[name] = file;[m
[31m-      })[m
[31m-      .on('error', function(err) {[m
[31m-        cb(err, fields, files);[m
[31m-      })[m
[31m-      .on('end', function() {[m
[31m-        cb(null, fields, files);[m
[31m-      });[m
[31m-  }[m
[31m-[m
[31m-  return this;[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype.writeHeaders = function(headers) {[m
[31m-  this.headers = headers;[m
[31m-  this._parseContentLength();[m
[31m-  this._parseContentType();[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype.write = function(buffer) {[m
[31m-  if (!this._parser) {[m
[31m-    this._error(new Error('unintialized parser'));[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  this.bytesReceived += buffer.length;[m
[31m-  this.emit('progress', this.bytesReceived, this.bytesExpected);[m
[31m-[m
[31m-  var bytesParsed = this._parser.write(buffer);[m
[31m-  if (bytesParsed !== buffer.length) {[m
[31m-    this._error(new Error('parser error, '+bytesParsed+' of '+buffer.length+' bytes parsed'));[m
[31m-  }[m
[31m-[m
[31m-  return bytesParsed;[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype.pause = function() {[m
[31m-  // this does nothing, unless overwritten in IncomingForm.parse[m
[31m-  return false;[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype.resume = function() {[m
[31m-  // this does nothing, unless overwritten in IncomingForm.parse[m
[31m-  return false;[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype.onPart = function(part) {[m
[31m-  // this method can be overwritten by the user[m
[31m-  this.handlePart(part);[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype.handlePart = function(part) {[m
[31m-  var self = this;[m
[31m-[m
[31m-  if (part.filename === undefined) {[m
[31m-    var value = ''[m
[31m-      , decoder = new StringDecoder(this.encoding);[m
[31m-[m
[31m-    part.on('data', function(buffer) {[m
[31m-      self._fieldsSize += buffer.length;[m
[31m-      if (self._fieldsSize > self.maxFieldsSize) {[m
[31m-        self._error(new Error('maxFieldsSize exceeded, received '+self._fieldsSize+' bytes of field data'));[m
[31m-        return;[m
[31m-      }[m
[31m-      value += decoder.write(buffer);[m
[31m-    });[m
[31m-[m
[31m-    part.on('end', function() {[m
[31m-      self.emit('field', part.name, value);[m
[31m-    });[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  this._flushing++;[m
[31m-[m
[31m-  var file = new File({[m
[31m-    path: this._uploadPath(part.filename),[m
[31m-    name: part.filename,[m
[31m-    type: part.mime,[m
[31m-    hash: self.hash[m
[31m-  });[m
[31m-[m
[31m-  this.emit('fileBegin', part.name, file);[m
[31m-[m
[31m-  file.open();[m
[31m-[m
[31m-  part.on('data', function(buffer) {[m
[31m-    self.pause();[m
[31m-    file.write(buffer, function() {[m
[31m-      self.resume();[m
[31m-    });[m
[31m-  });[m
[31m-[m
[31m-  part.on('end', function() {[m
[31m-    file.end(function() {[m
[31m-      self._flushing--;[m
[31m-      self.emit('file', part.name, file);[m
[31m-      self._maybeEnd();[m
[31m-    });[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype._parseContentType = function() {[m
[31m-  if (!this.headers['content-type']) {[m
[31m-    this._error(new Error('bad content-type header, no content-type'));[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  if (this.headers['content-type'].match(/urlencoded/i)) {[m
[31m-    this._initUrlencoded();[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  if (this.headers['content-type'].match(/multipart/i)) {[m
[31m-    var m;[m
[31m-    if (m = this.headers['content-type'].match(/boundary=(?:"([^"]+)"|([^;]+))/i)) {[m
[31m-      this._initMultipart(m[1] || m[2]);[m
[31m-    } else {[m
[31m-      this._error(new Error('bad content-type header, no multipart boundary'));[m
[31m-    }[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  this._error(new Error('bad content-type header, unknown content-type: '+this.headers['content-type']));[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype._error = function(err) {[m
[31m-  if (this.error) {[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  this.error = err;[m
[31m-  this.pause();[m
[31m-  this.emit('error', err);[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype._parseContentLength = function() {[m
[31m-  if (this.headers['content-length']) {[m
[31m-    this.bytesReceived = 0;[m
[31m-    this.bytesExpected = parseInt(this.headers['content-length'], 10);[m
[31m-    this.emit('progress', this.bytesReceived, this.bytesExpected);[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype._newParser = function() {[m
[31m-  return new MultipartParser();[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype._initMultipart = function(boundary) {[m
[31m-  this.type = 'multipart';[m
[31m-[m
[31m-  var parser = new MultipartParser(),[m
[31m-      self = this,[m
[31m-      headerField,[m
[31m-      headerValue,[m
[31m-      part;[m
[31m-[m
[31m-  parser.initWithBoundary(boundary);[m
[31m-[m
[31m-  parser.onPartBegin = function() {[m
[31m-    part = new Stream();[m
[31m-    part.readable = true;[m
[31m-    part.headers = {};[m
[31m-    part.name = null;[m
[31m-    part.filename = null;[m
[31m-    part.mime = null;[m
[31m-    headerField = '';[m
[31m-    headerValue = '';[m
[31m-  };[m
[31m-[m
[31m-  parser.onHeaderField = function(b, start, end) {[m
[31m-    headerField += b.toString(self.encoding, start, end);[m
[31m-  };[m
[31m-[m
[31m-  parser.onHeaderValue = function(b, start, end) {[m
[31m-    headerValue += b.toString(self.encoding, start, end);[m
[31m-  };[m
[31m-[m
[31m-  parser.onHeaderEnd = function() {[m
[31m-    headerField = headerField.toLowerCase();[m
[31m-    part.headers[headerField] = headerValue;[m
[31m-[m
[31m-    var m;[m
[31m-    if (headerField == 'content-disposition') {[m
[31m-      if (m = headerValue.match(/name="([^"]+)"/i)) {[m
[31m-        part.name = m[1];[m
[31m-      }[m
[31m-[m
[31m-      part.filename = self._fileName(headerValue);[m
[31m-    } else if (headerField == 'content-type') {[m
[31m-      part.mime = headerValue;[m
[31m-    }[m
[31m-[m
[31m-    headerField = '';[m
[31m-    headerValue = '';[m
[31m-  };[m
[31m-[m
[31m-  parser.onHeadersEnd = function() {[m
[31m-    self.onPart(part);[m
[31m-  };[m
[31m-[m
[31m-  parser.onPartData = function(b, start, end) {[m
[31m-    part.emit('data', b.slice(start, end));[m
[31m-  };[m
[31m-[m
[31m-  parser.onPartEnd = function() {[m
[31m-    part.emit('end');[m
[31m-  };[m
[31m-[m
[31m-  parser.onEnd = function() {[m
[31m-    self.ended = true;[m
[31m-    self._maybeEnd();[m
[31m-  };[m
[31m-[m
[31m-  this._parser = parser;[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype._fileName = function(headerValue) {[m
[31m-  var m = headerValue.match(/filename="(.*?)"($|; )/i)[m
[31m-  if (!m) return;[m
[31m-[m
[31m-  var filename = m[1].substr(m[1].lastIndexOf('\\') + 1);[m
[31m-  filename = filename.replace(/%22/g, '"');[m
[31m-  filename = filename.replace(/&#([\d]{4});/g, function(m, code) {[m
[31m-    return String.fromCharCode(code);[m
[31m-  });[m
[31m-  return filename;[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype._initUrlencoded = function() {[m
[31m-  this.type = 'urlencoded';[m
[31m-[m
[31m-  var parser = new QuerystringParser()[m
[31m-    , self = this;[m
[31m-[m
[31m-  parser.onField = function(key, val) {[m
[31m-    self.emit('field', key, val);[m
[31m-  };[m
[31m-[m
[31m-  parser.onEnd = function() {[m
[31m-    self.ended = true;[m
[31m-    self._maybeEnd();[m
[31m-  };[m
[31m-[m
[31m-  this._parser = parser;[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype._uploadPath = function(filename) {[m
[31m-  var name = '';[m
[31m-  for (var i = 0; i < 32; i++) {[m
[31m-    name += Math.floor(Math.random() * 16).toString(16);[m
[31m-  }[m
[31m-[m
[31m-  if (this.keepExtensions) {[m
[31m-    var ext = path.extname(filename);[m
[31m-    ext     = ext.replace(/(\.[a-z0-9]+).*/, '$1')[m
[31m-[m
[31m-    name += ext;[m
[31m-  }[m
[31m-[m
[31m-  return path.join(this.uploadDir, name);[m
[31m-};[m
[31m-[m
[31m-IncomingForm.prototype._maybeEnd = function() {[m
[31m-  if (!this.ended || this._flushing) {[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  this.emit('end');[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/index.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/index.js[m
[1mdeleted file mode 100644[m
[1mindex 7a6e3e1..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/lib/index.js[m
[1m+++ /dev/null[m
[36m@@ -1,3 +0,0 @@[m
[31m-var IncomingForm = require('./incoming_form').IncomingForm;[m
[31m-IncomingForm.IncomingForm = IncomingForm;[m
[31m-module.exports = IncomingForm;[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/multipart_parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/multipart_parser.js[m
[1mdeleted file mode 100644[m
[1mindex 9ca567c..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/lib/multipart_parser.js[m
[1m+++ /dev/null[m
[36m@@ -1,312 +0,0 @@[m
[31m-var Buffer = require('buffer').Buffer,[m
[31m-    s = 0,[m
[31m-    S =[m
[31m-    { PARSER_UNINITIALIZED: s++,[m
[31m-      START: s++,[m
[31m-      START_BOUNDARY: s++,[m
[31m-      HEADER_FIELD_START: s++,[m
[31m-      HEADER_FIELD: s++,[m
[31m-      HEADER_VALUE_START: s++,[m
[31m-      HEADER_VALUE: s++,[m
[31m-      HEADER_VALUE_ALMOST_DONE: s++,[m
[31m-      HEADERS_ALMOST_DONE: s++,[m
[31m-      PART_DATA_START: s++,[m
[31m-      PART_DATA: s++,[m
[31m-      PART_END: s++,[m
[31m-      END: s++,[m
[31m-    },[m
[31m-[m
[31m-    f = 1,[m
[31m-    F =[m
[31m-    { PART_BOUNDARY: f,[m
[31m-      LAST_BOUNDARY: f *= 2,[m
[31m-    },[m
[31m-[m
[31m-    LF = 10,[m
[31m-    CR = 13,[m
[31m-    SPACE = 32,[m
[31m-    HYPHEN = 45,[m
[31m-    COLON = 58,[m
[31m-    A = 97,[m
[31m-    Z = 122,[m
[31m-[m
[31m-    lower = function(c) {[m
[31m-      return c | 0x20;[m
[31m-    };[m
[31m-[m
[31m-for (var s in S) {[m
[31m-  exports[s] = S[s];[m
[31m-}[m
[31m-[m
[31m-function MultipartParser() {[m
[31m-  this.boundary = null;[m
[31m-  this.boundaryChars = null;[m
[31m-  this.lookbehind = null;[m
[31m-  this.state = S.PARSER_UNINITIALIZED;[m
[31m-[m
[31m-  this.index = null;[m
[31m-  this.flags = 0;[m
[31m-};[m
[31m-exports.MultipartParser = MultipartParser;[m
[31m-[m
[31m-MultipartParser.stateToString = function(stateNumber) {[m
[31m-  for (var state in S) {[m
[31m-    var number = S[state];[m
[31m-    if (number === stateNumber) return state;[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-MultipartParser.prototype.initWithBoundary = function(str) {[m
[31m-  this.boundary = new Buffer(str.length+4);[m
[31m-  this.boundary.write('\r\n--', 'ascii', 0);[m
[31m-  this.boundary.write(str, 'ascii', 4);[m
[31m-  this.lookbehind = new Buffer(this.boundary.length+8);[m
[31m-  this.state = S.START;[m
[31m-[m
[31m-  this.boundaryChars = {};[m
[31m-  for (var i = 0; i < this.boundary.length; i++) {[m
[31m-    this.boundaryChars[this.boundary[i]] = true;[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-MultipartParser.prototype.write = function(buffer) {[m
[31m-  var self = this,[m
[31m-      i = 0,[m
[31m-      len = buffer.length,[m
[31m-      prevIndex = this.index,[m
[31m-      index = this.index,[m
[31m-      state = this.state,[m
[31m-      flags = this.flags,[m
[31m-      lookbehind = this.lookbehind,[m
[31m-      boundary = this.boundary,[m
[31m-      boundaryChars = this.boundaryChars,[m
[31m-      boundaryLength = this.boundary.length,[m
[31m-      boundaryEnd = boundaryLength - 1,[m
[31m-      bufferLength = buffer.length,[m
[31m-      c,[m
[31m-      cl,[m
[31m-[m
[31m-      mark = function(name) {[m
[31m-        self[name+'Mark'] = i;[m
[31m-      },[m
[31m-      clear = function(name) {[m
[31m-        delete self[name+'Mark'];[m
[31m-      },[m
[31m-      callback = function(name, buffer, start, end) {[m
[31m-        if (start !== undefined && start === end) {[m
[31m-          return;[m
[31m-        }[m
[31m-[m
[31m-        var callbackSymbol = 'on'+name.substr(0, 1).toUpperCase()+name.substr(1);[m
[31m-        if (callbackSymbol in self) {[m
[31m-          self[callbackSymbol](buffer, start, end);[m
[31m-        }[m
[31m-      },[m
[31m-      dataCallback = function(name, clear) {[m
[31m-        var markSymbol = name+'Mark';[m
[31m-        if (!(markSymbol in self)) {[m
[31m-          return;[m
[31m-        }[m
[31m-[m
[31m-        if (!clear) {[m
[31m-          callback(name, buffer, self[markSymbol], buffer.length);[m
[31m-          self[markSymbol] = 0;[m
[31m-        } else {[m
[31m-          callback(name, buffer, self[markSymbol], i);[m
[31m-          delete self[markSymbol];[m
[31m-        }[m
[31m-      };[m
[31m-[m
[31m-  for (i = 0; i < len; i++) {[m
[31m-    c = buffer[i];[m
[31m-    switch (state) {[m
[31m-      case S.PARSER_UNINITIALIZED:[m
[31m-        return i;[m
[31m-      case S.START:[m
[31m-        index = 0;[m
[31m-        state = S.START_BOUNDARY;[m
[31m-      case S.START_BOUNDARY:[m
[31m-        if (index == boundary.length - 2) {[m
[31m-          if (c != CR) {[m
[31m-            return i;[m
[31m-          }[m
[31m-          index++;[m
[31m-          break;[m
[31m-        } else if (index - 1 == boundary.length - 2) {[m
[31m-          if (c != LF) {[m
[31m-            return i;[m
[31m-          }[m
[31m-          index = 0;[m
[31m-          callback('partBegin');[m
[31m-          state = S.HEADER_FIELD_START;[m
[31m-          break;[m
[31m-        }[m
[31m-[m
[31m-        if (c != boundary[index+2]) {[m
[31m-          return i;[m
[31m-        }[m
[31m-        index++;[m
[31m-        break;[m
[31m-      case S.HEADER_FIELD_START:[m
[31m-        state = S.HEADER_FIELD;[m
[31m-        mark('headerField');[m
[31m-        index = 0;[m
[31m-      case S.HEADER_FIELD:[m
[31m-        if (c == CR) {[m
[31m-          clear('headerField');[m
[31m-          state = S.HEADERS_ALMOST_DONE;[m
[31m-          break;[m
[31m-        }[m
[31m-[m
[31m-        index++;[m
[31m-        if (c == HYPHEN) {[m
[31m-          break;[m
[31m-        }[m
[31m-[m
[31m-        if (c == COLON) {[m
[31m-          if (index == 1) {[m
[31m-            // empty header field[m
[31m-            return i;[m
[31m-          }[m
[31m-          dataCallback('headerField', true);[m
[31m-          state = S.HEADER_VALUE_START;[m
[31m-          break;[m
[31m-        }[m
[31m-[m
[31m-        cl = lower(c);[m
[31m-        if (cl < A || cl > Z) {[m
[31m-          return i;[m
[31m-        }[m
[31m-        break;[m
[31m-      case S.HEADER_VALUE_START:[m
[31m-        if (c == SPACE) {[m
[31m-          break;[m
[31m-        }[m
[31m-[m
[31m-        mark('headerValue');[m
[31m-        state = S.HEADER_VALUE;[m
[31m-      case S.HEADER_VALUE:[m
[31m-        if (c == CR) {[m
[31m-          dataCallback('headerValue', true);[m
[31m-          callback('headerEnd');[m
[31m-          state = S.HEADER_VALUE_ALMOST_DONE;[m
[31m-        }[m
[31m-        break;[m
[31m-      case S.HEADER_VALUE_ALMOST_DONE:[m
[31m-        if (c != LF) {[m
[31m-          return i;[m
[31m-        }[m
[31m-        state = S.HEADER_FIELD_START;[m
[31m-        break;[m
[31m-      case S.HEADERS_ALMOST_DONE:[m
[31m-        if (c != LF) {[m
[31m-          return i;[m
[31m-        }[m
[31m-[m
[31m-        callback('headersEnd');[m
[31m-        state = S.PART_DATA_START;[m
[31m-        break;[m
[31m-      case S.PART_DATA_START:[m
[31m-        state = S.PART_DATA[m
[31m-        mark('partData');[m
[31m-      case S.PART_DATA:[m
[31m-        prevIndex = index;[m
[31m-[m
[31m-        if (index == 0) {[m
[31m-          // boyer-moore derrived algorithm to safely skip non-boundary data[m
[31m-          i += boundaryEnd;[m
[31m-          while (i < bufferLength && !(buffer[i] in boundaryChars)) {[m
[31m-            i += boundaryLength;[m
[31m-          }[m
[31m-          i -= boundaryEnd;[m
[31m-          c = buffer[i];[m
[31m-        }[m
[31m-[m
[31m-        if (index < boundary.length) {[m
[31m-          if (boundary[index] == c) {[m
[31m-            if (index == 0) {[m
[31m-              dataCallback('partData', true);[m
[31m-            }[m
[31m-            index++;[m
[31m-          } else {[m
[31m-            index = 0;[m
[31m-          }[m
[31m-        } else if (index == boundary.length) {[m
[31m-          index++;[m
[31m-          if (c == CR) {[m
[31m-            // CR = part boundary[m
[31m-            flags |= F.PART_BOUNDARY;[m
[31m-          } else if (c == HYPHEN) {[m
[31m-            // HYPHEN = end boundary[m
[31m-            flags |= F.LAST_BOUNDARY;[m
[31m-          } else {[m
[31m-            index = 0;[m
[31m-          }[m
[31m-        } else if (index - 1 == boundary.length)  {[m
[31m-          if (flags & F.PART_BOUNDARY) {[m
[31m-            index = 0;[m
[31m-            if (c == LF) {[m
[31m-              // unset the PART_BOUNDARY flag[m
[31m-              flags &= ~F.PART_BOUNDARY;[m
[31m-              callback('partEnd');[m
[31m-              callback('partBegin');[m
[31m-              state = S.HEADER_FIELD_START;[m
[31m-              break;[m
[31m-            }[m
[31m-          } else if (flags & F.LAST_BOUNDARY) {[m
[31m-            if (c == HYPHEN) {[m
[31m-              callback('partEnd');[m
[31m-              callback('end');[m
[31m-              state = S.END;[m
[31m-            } else {[m
[31m-              index = 0;[m
[31m-            }[m
[31m-          } else {[m
[31m-            index = 0;[m
[31m-          }[m
[31m-        }[m
[31m-[m
[31m-        if (index > 0) {[m
[31m-          // when matching a possible boundary, keep a lookbehind reference[m
[31m-          // in case it turns out to be a false lead[m
[31m-          lookbehind[index-1] = c;[m
[31m-        } else if (prevIndex > 0) {[m
[31m-          // if our boundary turned out to be rubbish, the captured lookbehind[m
[31m-          // belongs to partData[m
[31m-          callback('partData', lookbehind, 0, prevIndex);[m
[31m-          prevIndex = 0;[m
[31m-          mark('partData');[m
[31m-[m
[31m-          // reconsider the current character even so it interrupted the sequence[m
[31m-          // it could be the beginning of a new sequence[m
[31m-          i--;[m
[31m-        }[m
[31m-[m
[31m-        break;[m
[31m-      case S.END:[m
[31m-        break;[m
[31m-      default:[m
[31m-        return i;[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  dataCallback('headerField');[m
[31m-  dataCallback('headerValue');[m
[31m-  dataCallback('partData');[m
[31m-[m
[31m-  this.index = index;[m
[31m-  this.state = state;[m
[31m-  this.flags = flags;[m
[31m-[m
[31m-  return len;[m
[31m-};[m
[31m-[m
[31m-MultipartParser.prototype.end = function() {[m
[31m-  if (this.state != S.END) {[m
[31m-    return new Error('MultipartParser.end(): stream ended unexpectedly: ' + this.explain());[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-MultipartParser.prototype.explain = function() {[m
[31m-  return 'state = ' + MultipartParser.stateToString(this.state);[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/querystring_parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/querystring_parser.js[m
[1mdeleted file mode 100644[m
[1mindex 63f109e..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/lib/querystring_parser.js[m
[1m+++ /dev/null[m
[36m@@ -1,25 +0,0 @@[m
[31m-if (global.GENTLY) require = GENTLY.hijack(require);[m
[31m-[m
[31m-// This is a buffering parser, not quite as nice as the multipart one.[m
[31m-// If I find time I'll rewrite this to be fully streaming as well[m
[31m-var querystring = require('querystring');[m
[31m-[m
[31m-function QuerystringParser() {[m
[31m-  this.buffer = '';[m
[31m-};[m
[31m-exports.QuerystringParser = QuerystringParser;[m
[31m-[m
[31m-QuerystringParser.prototype.write = function(buffer) {[m
[31m-  this.buffer += buffer.toString('ascii');[m
[31m-  return buffer.length;[m
[31m-};[m
[31m-[m
[31m-QuerystringParser.prototype.end = function() {[m
[31m-  var fields = querystring.parse(this.buffer);[m
[31m-  for (var field in fields) {[m
[31m-    this.onField(field, fields[field]);[m
[31m-  }[m
[31m-  this.buffer = '';[m
[31m-[m
[31m-  this.onEnd();[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/util.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/util.js[m
[1mdeleted file mode 100644[m
[1mindex e9493e9..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/lib/util.js[m
[1m+++ /dev/null[m
[36m@@ -1,6 +0,0 @@[m
[31m-// Backwards compatibility ...[m
[31m-try {[m
[31m-  module.exports = require('util');[m
[31m-} catch (e) {[m
[31m-  module.exports = require('sys');[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Makefile b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Makefile[m
[1mdeleted file mode 100644[m
[1mindex 01f7140..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Makefile[m
[1m+++ /dev/null[m
[36m@@ -1,4 +0,0 @@[m
[31m-test:[m
[31m-	@find test/simple/test-*.js | xargs -n 1 -t node[m
[31m-[m
[31m-.PHONY: test[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Readme.md b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Readme.md[m
[1mdeleted file mode 100644[m
[1mindex f8f0c66..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Readme.md[m
[1m+++ /dev/null[m
[36m@@ -1,167 +0,0 @@[m
[31m-# Gently[m
[31m-[m
[31m-## Purpose[m
[31m-[m
[31m-A node.js module that helps with stubbing and behavior verification. It allows you to test the most remote and nested corners of your code while keeping being fully unobtrusive.[m
[31m-[m
[31m-## Features[m
[31m-[m
[31m-* Overwrite and stub individual object functions[m
[31m-* Verify that all expected calls have been made in the expected order[m
[31m-* Restore stubbed functions to their original behavior[m
[31m-* Detect object / class names from obj.constructor.name and obj.toString()[m
[31m-* Hijack any required module function or class constructor[m
[31m-[m
[31m-## Installation[m
[31m-[m
[31m-Via [npm](http://github.com/isaacs/npm):[m
[31m-[m
[31m-    npm install gently@latest[m
[31m-[m
[31m-## Example[m
[31m-[m
[31m-Make sure your dog is working properly:[m
[31m-[m
[31m-    function Dog() {}[m
[31m-[m
[31m-    Dog.prototype.seeCat = function() {[m
[31m-      this.bark('whuf, whuf');[m
[31m-      this.run();[m
[31m-    }[m
[31m-[m
[31m-    Dog.prototype.bark = function(bark) {[m
[31m-      require('sys').puts(bark);[m
[31m-    }[m
[31m-[m
[31m-    var gently = new (require('gently'))[m
[31m-      , assert = require('assert')[m
[31m-      , dog = new Dog();[m
[31m-[m
[31m-    gently.expect(dog, 'bark', function(bark) {[m
[31m-      assert.equal(bark, 'whuf, whuf');[m
[31m-    });[m
[31m-    gently.expect(dog, 'run');[m
[31m-[m
[31m-    dog.seeCat();[m
[31m-[m
[31m-You can also easily test event emitters with this, for example a simple sequence of 2 events emitted by `fs.WriteStream`:[m
[31m-[m
[31m-    var gently = new (require('gently'))[m
[31m-      , stream = new (require('fs').WriteStream)('my_file.txt');[m
[31m-[m
[31m-    gently.expect(stream, 'emit', function(event) {[m
[31m-      assert.equal(event, 'open');[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(stream, 'emit', function(event) {[m
[31m-      assert.equal(event, 'drain');[m
[31m-    });[m
[31m-[m
[31m-For a full read world example, check out this test case: [test-incoming-form.js](http://github.com/felixge/node-formidable/blob/master/test/simple/test-incoming-form.js) (in [node-formdiable](http://github.com/felixge/node-formidable)).[m
[31m-[m
[31m-## API[m
[31m-[m
[31m-### Gently[m
[31m-[m
[31m-#### new Gently()[m
[31m-[m
[31m-Creates a new gently instance. It listens to the process `'exit'` event to make sure all expectations have been verified.[m
[31m-[m
[31m-#### gently.expect(obj, method, [[count], stubFn])[m
[31m-[m
[31m-Creates an expectation for an objects method to be called. You can optionally specify the call `count` you are expecting, as well as `stubFn` function that will run instead of the original function.[m
[31m-[m
[31m-Returns a reference to the function that is getting overwritten.[m
[31m-[m
[31m-#### gently.expect([count], stubFn)[m
[31m-[m
[31m-Returns a function that is supposed to be executed `count` times, delegating any calls to the provided `stubFn` function. Naming your stubFn closure will help to properly diagnose errors that are being thrown:[m
[31m-[m
[31m-    childProcess.exec('ls', gently.expect(function lsCallback(code) {[m
[31m-      assert.equal(0, code);[m
[31m-    }));[m
[31m-[m
[31m-#### gently.restore(obj, method)[m
[31m-[m
[31m-Restores an object method that has been previously overwritten using `gently.expect()`.[m
[31m-[m
[31m-#### gently.hijack(realRequire)[m
[31m-[m
[31m-Returns a new require functions that catches a reference to all required modules into `gently.hijacked`.[m
[31m-[m
[31m-To use this function, include a line like this in your `'my-module.js'`.[m
[31m-[m
[31m-    if (global.GENTLY) require = GENTLY.hijack(require);[m
[31m-[m
[31m-    var sys = require('sys');[m
[31m-    exports.hello = function() {[m
[31m-      sys.log('world');[m
[31m-    };[m
[31m-[m
[31m-Now you can write a test for the module above:[m
[31m-[m
[31m-    var gently = global.GENTLY = new (require('gently'))[m
[31m-      , myModule = require('./my-module');[m
[31m-[m
[31m-    gently.expect(gently.hijacked.sys, 'log', function(str) {[m
[31m-      assert.equal(str, 'world');[m
[31m-    });[m
[31m-[m
[31m-    myModule.hello();[m
[31m-[m
[31m-#### gently.stub(location, [exportsName])[m
[31m-[m
[31m-Returns a stub class that will be used instead of the real class from the module at `location` with the given `exportsName`.[m
[31m-[m
[31m-This allows to test an OOP version of the previous example, where `'my-module.js'`.[m
[31m-[m
[31m-    if (global.GENTLY) require = GENTLY.hijack(require);[m
[31m-[m
[31m-    var World = require('./world');[m
[31m-[m
[31m-    exports.hello = function() {[m
[31m-      var world = new World();[m
[31m-      world.hello();[m
[31m-    }[m
[31m-[m
[31m-And `world.js` looks like this:[m
[31m-[m
[31m-    var sys = require('sys');[m
[31m-[m
[31m-    function World() {[m
[31m-[m
[31m-    }[m
[31m-    module.exports = World;[m
[31m-[m
[31m-    World.prototype.hello = function() {[m
[31m-      sys.log('world');[m
[31m-    };[m
[31m-[m
[31m-Testing `'my-module.js'` can now easily be accomplished:[m
[31m-[m
[31m-    var gently = global.GENTLY = new (require('gently'))[m
[31m-      , WorldStub = gently.stub('./world')[m
[31m-      , myModule = require('./my-module')[m
[31m-      , WORLD;[m
[31m-[m
[31m-    gently.expect(WorldStub, 'new', function() {[m
[31m-      WORLD = this;[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(WORLD, 'hello');[m
[31m-[m
[31m-    myModule.hello();[m
[31m-[m
[31m-#### gently.hijacked[m
[31m-[m
[31m-An object that holds the references to all hijacked modules.[m
[31m-[m
[31m-#### gently.verify([msg])[m
[31m-[m
[31m-Verifies that all expectations of this gently instance have been satisfied. If not called manually, this method is called when the process `'exit'` event is fired.[m
[31m-[m
[31m-If `msg` is given, it will appear in any error that might be thrown.[m
[31m-[m
[31m-## License[m
[31m-[m
[31m-Gently is licensed under the MIT license.[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/dog.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/dog.js[m
[1mdeleted file mode 100644[m
[1mindex 022fae0..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/dog.js[m
[1m+++ /dev/null[m
[36m@@ -1,22 +0,0 @@[m
[31m-require('../test/common');[m
[31m-function Dog() {}[m
[31m-[m
[31m-Dog.prototype.seeCat = function() {[m
[31m-  this.bark('whuf, whuf');[m
[31m-  this.run();[m
[31m-}[m
[31m-[m
[31m-Dog.prototype.bark = function(bark) {[m
[31m-  require('sys').puts(bark);[m
[31m-}[m
[31m-[m
[31m-var gently = new (require('gently'))[m
[31m-  , assert = require('assert')[m
[31m-  , dog = new Dog();[m
[31m-[m
[31m-gently.expect(dog, 'bark', function(bark) {[m
[31m-  assert.equal(bark, 'whuf, whuf');[m
[31m-});[m
[31m-gently.expect(dog, 'run');[m
[31m-[m
[31m-dog.seeCat();[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/event_emitter.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/event_emitter.js[m
[1mdeleted file mode 100644[m
[1mindex 7def134..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/event_emitter.js[m
[1m+++ /dev/null[m
[36m@@ -1,11 +0,0 @@[m
[31m-require('../test/common');[m
[31m-var gently = new (require('gently'))[m
[31m-  , stream = new (require('fs').WriteStream)('my_file.txt');[m
[31m-[m
[31m-gently.expect(stream, 'emit', function(event) {[m
[31m-  assert.equal(event, 'open');[m
[31m-});[m
[31m-[m
[31m-gently.expect(stream, 'emit', function(event) {[m
[31m-  assert.equal(event, 'drain');[m
[31m-});[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/index.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/index.js[m
[1mdeleted file mode 100644[m
[1mindex 69122bd..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/index.js[m
[1m+++ /dev/null[m
[36m@@ -1 +0,0 @@[m
[31m-module.exports = require('./lib/gently');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/gently.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/gently.js[m
[1mdeleted file mode 100644[m
[1mindex 8af0e1e..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/gently.js[m
[1m+++ /dev/null[m
[36m@@ -1,184 +0,0 @@[m
[31m-var path = require('path');[m
[31m-[m
[31m-function Gently() {[m
[31m-  this.expectations = [];[m
[31m-  this.hijacked = {};[m
[31m-[m
[31m-  var self = this;[m
[31m-  process.addListener('exit', function() {[m
[31m-    self.verify('process exit');[m
[31m-  });[m
[31m-};[m
[31m-module.exports = Gently;[m
[31m-[m
[31m-Gently.prototype.stub = function(location, exportsName) {[m
[31m-  function Stub() {[m
[31m-    return Stub['new'].apply(this, arguments);[m
[31m-  };[m
[31m-[m
[31m-  Stub['new'] = function () {};[m
[31m-[m
[31m-  var stubName = 'require('+JSON.stringify(location)+')';[m
[31m-  if (exportsName) {[m
[31m-    stubName += '.'+exportsName;[m
[31m-  }[m
[31m-[m
[31m-  Stub.prototype.toString = Stub.toString = function() {[m
[31m-    return stubName;[m
[31m-  };[m
[31m-[m
[31m-  var exports = this.hijacked[location] || {};[m
[31m-  if (exportsName) {[m
[31m-    exports[exportsName] = Stub;[m
[31m-  } else {[m
[31m-    exports = Stub;[m
[31m-  }[m
[31m-[m
[31m-  this.hijacked[location] = exports;[m
[31m-  return Stub;[m
[31m-};[m
[31m-[m
[31m-Gently.prototype.hijack = function(realRequire) {[m
[31m-  var self = this;[m
[31m-  return function(location) {[m
[31m-    return self.hijacked[location] = (self.hijacked[location])[m
[31m-      ? self.hijacked[location][m
[31m-      : realRequire(location);[m
[31m-  };[m
[31m-};[m
[31m-[m
[31m-Gently.prototype.expect = function(obj, method, count, stubFn) {[m
[31m-  if (typeof obj != 'function' && typeof obj != 'object' && typeof obj != 'number') {[m
[31m-    throw new Error[m
[31m-      ( 'Bad 1st argument for gently.expect(), '[m
[31m-      + 'object, function, or number expected, got: '+(typeof obj)[m
[31m-      );[m
[31m-  } else if (typeof obj == 'function' && (typeof method != 'string')) {[m
[31m-    // expect(stubFn) interface[m
[31m-    stubFn = obj;[m
[31m-    obj = null;[m
[31m-    method = null;[m
[31m-    count = 1;[m
[31m-  } else if (typeof method == 'function') {[m
[31m-    // expect(count, stubFn) interface[m
[31m-    count = obj;[m
[31m-    stubFn = method;[m
[31m-    obj = null;[m
[31m-    method = null;[m
[31m-  } else if (typeof count == 'function') {[m
[31m-    // expect(obj, method, stubFn) interface[m
[31m-    stubFn = count;[m
[31m-    count = 1;[m
[31m-  } else if (count === undefined) {[m
[31m-    // expect(obj, method) interface[m
[31m-    count = 1;[m
[31m-  }[m
[31m-[m
[31m-  var name = this._name(obj, method, stubFn);[m
[31m-  this.expectations.push({obj: obj, method: method, stubFn: stubFn, name: name, count: count});[m
[31m-[m
[31m-  var self = this;[m
[31m-  function delegate() {[m
[31m-    return self._stubFn(this, obj, method, name, Array.prototype.slice.call(arguments));[m
[31m-  }[m
[31m-[m
[31m-  if (!obj) {[m
[31m-    return delegate;[m
[31m-  }[m
[31m-[m
[31m-  var original = (obj[method])[m
[31m-    ? obj[method]._original || obj[method][m
[31m-    : undefined;[m
[31m-[m
[31m-  obj[method] = delegate;[m
[31m-  return obj[method]._original = original;[m
[31m-};[m
[31m-[m
[31m-Gently.prototype.restore = function(obj, method) {[m
[31m-  if (!obj[method] || !obj[method]._original) {[m
[31m-    throw new Error(this._name(obj, method)+' is not gently stubbed');[m
[31m-  }[m
[31m-  obj[method] = obj[method]._original;[m
[31m-};[m
[31m-[m
[31m-Gently.prototype.verify = function(msg) {[m
[31m-  if (!this.expectations.length) {[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  var validExpectations = [];[m
[31m-  for (var i = 0, l = this.expectations.length; i < l; i++) {[m
[31m-    var expectation = this.expectations[i];[m
[31m-[m
[31m-    if (expectation.count > 0) {[m
[31m-      validExpectations.push(expectation);[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  this.expectations = []; // reset so that no duplicate verification attempts are made[m
[31m-[m
[31m-  if (!validExpectations.length) {[m
[31m-    return;[m
[31m-  }[m
[31m-[m
[31m-  var expectation = validExpectations[0];[m
[31m-[m
[31m-  throw new Error[m
[31m-    ( 'Expected call to '+expectation.name+' did not happen'[m
[31m-    + ( (msg)[m
[31m-        ? ' ('+msg+')'[m
[31m-        : ''[m
[31m-      )[m
[31m-    );[m
[31m-};[m
[31m-[m
[31m-Gently.prototype._stubFn = function(self, obj, method, name, args) {[m
[31m-  var expectation = this.expectations[0], obj, method;[m
[31m-[m
[31m-  if (!expectation) {[m
[31m-    throw new Error('Unexpected call to '+name+', no call was expected');[m
[31m-  }[m
[31m-[m
[31m-  if (expectation.obj !== obj || expectation.method !== method) {[m
[31m-    throw new Error('Unexpected call to '+name+', expected call to '+ expectation.name);[m
[31m-  }[m
[31m-[m
[31m-  expectation.count -= 1;[m
[31m-  if (expectation.count === 0) {[m
[31m-    this.expectations.shift();[m
[31m-[m
[31m-    // autorestore original if its not a closure[m
[31m-    // and no more expectations on that object[m
[31m-    var has_more_expectations = this.expectations.reduce(function (memo, expectation) {[m
[31m-      return memo || (expectation.obj === obj && expectation.method === method);[m
[31m-    }, false);[m
[31m-    if (obj !== null && method !== null && !has_more_expectations) {[m
[31m-      if (typeof obj[method]._original !== 'undefined') {[m
[31m-        obj[method] = obj[method]._original;[m
[31m-        delete obj[method]._original;[m
[31m-      } else {[m
[31m-        delete obj[method];[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  if (expectation.stubFn) {[m
[31m-    return expectation.stubFn.apply(self, args);[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-Gently.prototype._name = function(obj, method, stubFn) {[m
[31m-  if (obj) {[m
[31m-    var objectName = obj.toString();[m
[31m-    if (objectName == '[object Object]' && obj.constructor.name) {[m
[31m-      objectName = '['+obj.constructor.name+']';[m
[31m-    }[m
[31m-    return (objectName)+'.'+method+'()';[m
[31m-  }[m
[31m-[m
[31m-  if (stubFn.name) {[m
[31m-    return stubFn.name+'()';[m
[31m-  }[m
[31m-[m
[31m-  return '>> '+stubFn.toString()+' <<';[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/index.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/index.js[m
[1mdeleted file mode 100644[m
[1mindex 64c1977..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/index.js[m
[1m+++ /dev/null[m
[36m@@ -1 +0,0 @@[m
[31m-module.exports = require('./gently');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/package.json b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/package.json[m
[1mdeleted file mode 100644[m
[1mindex 9c1b7a0..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/package.json[m
[1m+++ /dev/null[m
[36m@@ -1,14 +0,0 @@[m
[31m-{[m
[31m-  "name": "gently",[m
[31m-  "version": "0.9.2",[m
[31m-  "directories": {[m
[31m-    "lib": "./lib/gently"[m
[31m-  },[m
[31m-  "main": "./lib/gently/index",[m
[31m-  "dependencies": {},[m
[31m-  "devDependencies": {},[m
[31m-  "engines": {[m
[31m-    "node": "*"[m
[31m-  },[m
[31m-  "optionalDependencies": {}[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/common.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/common.js[m
[1mdeleted file mode 100644[m
[1mindex 978b5c5..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/common.js[m
[1m+++ /dev/null[m
[36m@@ -1,8 +0,0 @@[m
[31m-var path = require('path')[m
[31m-  , sys = require('sys');[m
[31m-[m
[31m-require.paths.unshift(path.dirname(__dirname)+'/lib');[m
[31m-[m
[31m-global.puts = sys.puts;[m
[31m-global.p = function() {sys.error(sys.inspect.apply(null, arguments))};;[m
[31m-global.assert = require('assert');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/simple/test-gently.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/simple/test-gently.js[m
[1mdeleted file mode 100644[m
[1mindex 4f8fe2d..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/simple/test-gently.js[m
[1m+++ /dev/null[m
[36m@@ -1,348 +0,0 @@[m
[31m-require('../common');[m
[31m-var Gently = require('gently')[m
[31m-  , gently;[m
[31m-[m
[31m-function test(test) {[m
[31m-  process.removeAllListeners('exit');[m
[31m-  gently = new Gently();[m
[31m-  test();[m
[31m-}[m
[31m-[m
[31m-test(function constructor() {[m
[31m-  assert.deepEqual(gently.expectations, []);[m
[31m-  assert.deepEqual(gently.hijacked, {});[m
[31m-  assert.equal(gently.constructor.name, 'Gently');[m
[31m-});[m
[31m-[m
[31m-test(function expectBadArgs() {[m
[31m-  var BAD_ARG = 'oh no';[m
[31m-  try {[m
[31m-    gently.expect(BAD_ARG);[m
[31m-    assert.ok(false, 'throw needs to happen');[m
[31m-  } catch (e) {[m
[31m-    assert.equal(e.message, 'Bad 1st argument for gently.expect(), object, function, or number expected, got: '+(typeof BAD_ARG));[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-test(function expectObjMethod() {[m
[31m-  var OBJ = {}, NAME = 'foobar';[m
[31m-  OBJ.foo = function(x) {[m
[31m-    return x;[m
[31m-  };[m
[31m-[m
[31m-  gently._name = function() {[m
[31m-    return NAME;[m
[31m-  };[m
[31m-[m
[31m-  var original = OBJ.foo[m
[31m-    , stubFn = function() {};[m
[31m-[m
[31m-  (function testAddOne() {[m
[31m-    assert.strictEqual(gently.expect(OBJ, 'foo', stubFn), original);[m
[31m-[m
[31m-    assert.equal(gently.expectations.length, 1);[m
[31m-    var expectation = gently.expectations[0];[m
[31m-    assert.strictEqual(expectation.obj, OBJ);[m
[31m-    assert.strictEqual(expectation.method, 'foo');[m
[31m-    assert.strictEqual(expectation.stubFn, stubFn);[m
[31m-    assert.strictEqual(expectation.name, NAME);[m
[31m-    assert.strictEqual(OBJ.foo._original, original);[m
[31m-  })();[m
[31m-[m
[31m-  (function testAddTwo() {[m
[31m-    gently.expect(OBJ, 'foo', 2, stubFn);[m
[31m-    assert.equal(gently.expectations.length, 2);[m
[31m-    assert.strictEqual(OBJ.foo._original, original);[m
[31m-  })();[m
[31m-[m
[31m-  (function testAddOneWithoutMock() {[m
[31m-    gently.expect(OBJ, 'foo');[m
[31m-    assert.equal(gently.expectations.length, 3);[m
[31m-  })();[m
[31m-[m
[31m-  var stubFnCalled = 0, SELF = {};[m
[31m-  gently._stubFn = function(self, obj, method, name, args) {[m
[31m-    stubFnCalled++;[m
[31m-    assert.strictEqual(self, SELF);[m
[31m-    assert.strictEqual(obj, OBJ);[m
[31m-    assert.strictEqual(method, 'foo');[m
[31m-    assert.strictEqual(name, NAME);[m
[31m-    assert.deepEqual(args, [1, 2]);[m
[31m-    return 23;[m
[31m-  };[m
[31m-  assert.equal(OBJ.foo.apply(SELF, [1, 2]), 23);[m
[31m-  assert.equal(stubFnCalled, 1);[m
[31m-});[m
[31m-[m
[31m-test(function expectClosure() {[m
[31m-  var NAME = 'MY CLOSURE';[m
[31m-  function closureFn() {};[m
[31m-[m
[31m-  gently._name = function() {[m
[31m-    return NAME;[m
[31m-  };[m
[31m-[m
[31m-  var fn = gently.expect(closureFn);[m
[31m-  assert.equal(gently.expectations.length, 1);[m
[31m-  var expectation = gently.expectations[0];[m
[31m-  assert.strictEqual(expectation.obj, null);[m
[31m-  assert.strictEqual(expectation.method, null);[m
[31m-  assert.strictEqual(expectation.stubFn, closureFn);[m
[31m-  assert.strictEqual(expectation.name, NAME);[m
[31m-[m
[31m-  var stubFnCalled = 0, SELF = {};[m
[31m-  gently._stubFn = function(self, obj, method, name, args) {[m
[31m-    stubFnCalled++;[m
[31m-    assert.strictEqual(self, SELF);[m
[31m-    assert.strictEqual(obj, null);[m
[31m-    assert.strictEqual(method, null);[m
[31m-    assert.strictEqual(name, NAME);[m
[31m-    assert.deepEqual(args, [1, 2]);[m
[31m-    return 23;[m
[31m-  };[m
[31m-  assert.equal(fn.apply(SELF, [1, 2]), 23);[m
[31m-  assert.equal(stubFnCalled, 1);[m
[31m-});[m
[31m-[m
[31m-test(function expectClosureCount() {[m
[31m-  var stubFnCalled = 0;[m
[31m-  function closureFn() {stubFnCalled++};[m
[31m-[m
[31m-  var fn = gently.expect(2, closureFn);[m
[31m-  assert.equal(gently.expectations.length, 1);[m
[31m-  fn();[m
[31m-  assert.equal(gently.expectations.length, 1);[m
[31m-  fn();[m
[31m-  assert.equal(stubFnCalled, 2);[m
[31m-});[m
[31m-[m
[31m-test(function restore() {[m
[31m-  var OBJ = {}, NAME = '[my object].myFn()';[m
[31m-  OBJ.foo = function(x) {[m
[31m-    return x;[m
[31m-  };[m
[31m-[m
[31m-  gently._name = function() {[m
[31m-    return NAME;[m
[31m-  };[m
[31m-[m
[31m-  var original = OBJ.foo;[m
[31m-  gently.expect(OBJ, 'foo');[m
[31m-  gently.restore(OBJ, 'foo');[m
[31m-  assert.strictEqual(OBJ.foo, original);[m
[31m-[m
[31m-  (function testError() {[m
[31m-    try {[m
[31m-      gently.restore(OBJ, 'foo');[m
[31m-      assert.ok(false, 'throw needs to happen');[m
[31m-    } catch (e) {[m
[31m-      assert.equal(e.message, NAME+' is not gently stubbed');[m
[31m-    }[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function _stubFn() {[m
[31m-  var OBJ1 = {toString: function() {return '[OBJ 1]'}}[m
[31m-    , OBJ2 = {toString: function() {return '[OBJ 2]'}, foo: function () {return 'bar';}}[m
[31m-    , SELF = {};[m
[31m-[m
[31m-  gently.expect(OBJ1, 'foo', function(x) {[m
[31m-    assert.strictEqual(this, SELF);[m
[31m-    return x * 2;[m
[31m-  });[m
[31m-[m
[31m-  assert.equal(gently._stubFn(SELF, OBJ1, 'foo', 'dummy_name', [5]), 10);[m
[31m-[m
[31m-  (function testAutorestore() {[m
[31m-    assert.equal(OBJ2.foo(), 'bar');[m
[31m-[m
[31m-    gently.expect(OBJ2, 'foo', function() {[m
[31m-      return 'stubbed foo';[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(OBJ2, 'foo', function() {[m
[31m-      return "didn't restore yet";[m
[31m-    });[m
[31m-[m
[31m-    assert.equal(gently._stubFn(SELF, OBJ2, 'foo', 'dummy_name', []), 'stubbed foo');[m
[31m-    assert.equal(gently._stubFn(SELF, OBJ2, 'foo', 'dummy_name', []), "didn't restore yet");[m
[31m-    assert.equal(OBJ2.foo(), 'bar');[m
[31m-    assert.deepEqual(gently.expectations, []);[m
[31m-  })();[m
[31m-[m
[31m-  (function testNoMoreCallExpected() {[m
[31m-    try {[m
[31m-      gently._stubFn(SELF, OBJ1, 'foo', 'dummy_name', [5]);[m
[31m-      assert.ok(false, 'throw needs to happen');[m
[31m-    } catch (e) {[m
[31m-      assert.equal(e.message, 'Unexpected call to dummy_name, no call was expected');[m
[31m-    }[m
[31m-  })();[m
[31m-[m
[31m-  (function testDifferentCallExpected() {[m
[31m-    gently.expect(OBJ2, 'bar');[m
[31m-    try {[m
[31m-      gently._stubFn(SELF, OBJ1, 'foo', 'dummy_name', [5]);[m
[31m-      assert.ok(false, 'throw needs to happen');[m
[31m-    } catch (e) {[m
[31m-      assert.equal(e.message, 'Unexpected call to dummy_name, expected call to '+gently._name(OBJ2, 'bar'));[m
[31m-    }[m
[31m-[m
[31m-    assert.equal(gently.expectations.length, 1);[m
[31m-  })();[m
[31m-[m
[31m-  (function testNoMockCallback() {[m
[31m-    OBJ2.bar();[m
[31m-    assert.equal(gently.expectations.length, 0);[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function stub() {[m
[31m-  var LOCATION = './my_class';[m
[31m-[m
[31m-  (function testRegular() {[m
[31m-    var Stub = gently.stub(LOCATION);[m
[31m-    assert.ok(Stub instanceof Function);[m
[31m-    assert.strictEqual(gently.hijacked[LOCATION], Stub);[m
[31m-    assert.ok(Stub['new'] instanceof Function);[m
[31m-    assert.equal(Stub.toString(), 'require('+JSON.stringify(LOCATION)+')');[m
[31m-[m
[31m-    (function testConstructor() {[m
[31m-      var newCalled = 0[m
[31m-        , STUB[m
[31m-        , ARGS = ['foo', 'bar'];[m
[31m-[m
[31m-      Stub['new'] = function(a, b) {[m
[31m-        assert.equal(a, ARGS[0]);[m
[31m-        assert.equal(b, ARGS[1]);[m
[31m-        newCalled++;[m
[31m-        STUB = this;[m
[31m-      };[m
[31m-[m
[31m-      var stub = new Stub(ARGS[0], ARGS[1]);[m
[31m-      assert.strictEqual(stub, STUB);[m
[31m-      assert.equal(newCalled, 1);[m
[31m-      assert.equal(stub.toString(), 'require('+JSON.stringify(LOCATION)+')');[m
[31m-    })();[m
[31m-[m
[31m-    (function testUseReturnValueAsInstance() {[m
[31m-      var R = {};[m
[31m-[m
[31m-      Stub['new'] = function() {[m
[31m-        return R;[m
[31m-      };[m
[31m-[m
[31m-      var stub = new Stub();[m
[31m-      assert.strictEqual(stub, R);[m
[31m-[m
[31m-    })();[m
[31m-  })();[m
[31m-[m
[31m-  var EXPORTS_NAME = 'MyClass';[m
[31m-  test(function testExportsName() {[m
[31m-    var Stub = gently.stub(LOCATION, EXPORTS_NAME);[m
[31m-    assert.strictEqual(gently.hijacked[LOCATION][EXPORTS_NAME], Stub);[m
[31m-    assert.equal(Stub.toString(), 'require('+JSON.stringify(LOCATION)+').'+EXPORTS_NAME);[m
[31m-[m
[31m-    (function testConstructor() {[m
[31m-      var stub = new Stub();[m
[31m-      assert.equal(Stub.toString(), 'require('+JSON.stringify(LOCATION)+').'+EXPORTS_NAME);[m
[31m-    })();[m
[31m-  });[m
[31m-});[m
[31m-[m
[31m-test(function hijack() {[m
[31m-  var LOCATION = './foo'[m
[31m-    , REQUIRE_CALLS = 0[m
[31m-    , EXPORTS = {}[m
[31m-    , REQUIRE = function() {[m
[31m-        REQUIRE_CALLS++;[m
[31m-        return EXPORTS;[m
[31m-      };[m
[31m-[m
[31m-  var hijackedRequire = gently.hijack(REQUIRE);[m
[31m-  hijackedRequire(LOCATION);[m
[31m-  assert.strictEqual(gently.hijacked[LOCATION], EXPORTS);[m
[31m-[m
[31m-  assert.equal(REQUIRE_CALLS, 1);[m
[31m-[m
[31m-  // make sure we are caching the hijacked module[m
[31m-  hijackedRequire(LOCATION);[m
[31m-  assert.equal(REQUIRE_CALLS, 1);[m
[31m-});[m
[31m-[m
[31m-test(function verify() {[m
[31m-  var OBJ = {toString: function() {return '[OBJ]'}};[m
[31m-  gently.verify();[m
[31m-[m
[31m-  gently.expect(OBJ, 'foo');[m
[31m-  try {[m
[31m-    gently.verify();[m
[31m-    assert.ok(false, 'throw needs to happen');[m
[31m-  } catch (e) {[m
[31m-    assert.equal(e.message, 'Expected call to [OBJ].foo() did not happen');[m
[31m-  }[m
[31m-[m
[31m-  try {[m
[31m-    gently.verify('foo');[m
[31m-    assert.ok(false, 'throw needs to happen');[m
[31m-  } catch (e) {[m
[31m-    assert.equal(e.message, 'Expected call to [OBJ].foo() did not happen (foo)');[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-test(function processExit() {[m
[31m-  var verifyCalled = 0;[m
[31m-  gently.verify = function(msg) {[m
[31m-    verifyCalled++;[m
[31m-    assert.equal(msg, 'process exit');[m
[31m-  };[m
[31m-[m
[31m-  process.emit('exit');[m
[31m-  assert.equal(verifyCalled, 1);[m
[31m-});[m
[31m-[m
[31m-test(function _name() {[m
[31m-  (function testNamedClass() {[m
[31m-    function Foo() {};[m
[31m-    var foo = new Foo();[m
[31m-    assert.equal(gently._name(foo, 'bar'), '[Foo].bar()');[m
[31m-  })();[m
[31m-[m
[31m-  (function testToStringPreference() {[m
[31m-    function Foo() {};[m
[31m-    Foo.prototype.toString = function() {[m
[31m-      return '[Superman 123]';[m
[31m-    };[m
[31m-    var foo = new Foo();[m
[31m-    assert.equal(gently._name(foo, 'bar'), '[Superman 123].bar()');[m
[31m-  })();[m
[31m-[m
[31m-  (function testUnamedClass() {[m
[31m-    var Foo = function() {};[m
[31m-    var foo = new Foo();[m
[31m-    assert.equal(gently._name(foo, 'bar'), foo.toString()+'.bar()');[m
[31m-  })();[m
[31m-[m
[31m-  (function testNamedClosure() {[m
[31m-    function myClosure() {};[m
[31m-    assert.equal(gently._name(null, null, myClosure), myClosure.name+'()');[m
[31m-  })();[m
[31m-[m
[31m-  (function testUnamedClosure() {[m
[31m-    var myClosure = function() {2+2 == 5};[m
[31m-    assert.equal(gently._name(null, null, myClosure), '>> '+myClosure.toString()+' <<');[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function verifyExpectNone() {[m
[31m-  var OBJ = {toString: function() {return '[OBJ]'}};[m
[31m-  gently.verify();[m
[31m-[m
[31m-  gently.expect(OBJ, 'foo', 0);[m
[31m-  try {[m
[31m-    gently.verify();[m
[31m-  } catch (e) {[m
[31m-    assert.fail('Exception should not have been thrown');[m
[31m-  }[m
[31m-});[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/package.json b/node_modules/express/node_modules/connect/node_modules/formidable/package.json[m
[1mdeleted file mode 100644[m
[1mindex 4d94297..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/package.json[m
[1m+++ /dev/null[m
[36m@@ -1,23 +0,0 @@[m
[31m-{[m
[31m-  "name": "formidable",[m
[31m-  "version": "1.0.11",[m
[31m-  "dependencies": {},[m
[31m-  "devDependencies": {[m
[31m-    "gently": "0.8.0",[m
[31m-    "findit": "0.1.1",[m
[31m-    "hashish": "0.0.4",[m
[31m-    "urun": "0.0.4",[m
[31m-    "utest": "0.0.3"[m
[31m-  },[m
[31m-  "directories": {[m
[31m-    "lib": "./lib"[m
[31m-  },[m
[31m-  "main": "./lib/index",[m
[31m-  "scripts": {[m
[31m-    "test": "make test"[m
[31m-  },[m
[31m-  "engines": {[m
[31m-    "node": "*"[m
[31m-  },[m
[31m-  "optionalDependencies": {}[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/common.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/common.js[m
[1mdeleted file mode 100644[m
[1mindex eb432ad..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/common.js[m
[1m+++ /dev/null[m
[36m@@ -1,19 +0,0 @@[m
[31m-var mysql = require('..');[m
[31m-var path = require('path');[m
[31m-[m
[31m-var root = path.join(__dirname, '../');[m
[31m-exports.dir = {[m
[31m-  root    : root,[m
[31m-  lib     : root + '/lib',[m
[31m-  fixture : root + '/test/fixture',[m
[31m-  tmp     : root + '/test/tmp',[m
[31m-};[m
[31m-[m
[31m-exports.port = 13532;[m
[31m-[m
[31m-exports.formidable = require('..');[m
[31m-exports.assert     = require('assert');[m
[31m-[m
[31m-exports.require = function(lib) {[m
[31m-  return require(exports.dir.lib + '/' + lib);[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/funkyfilename.txt b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/funkyfilename.txt[m
[1mdeleted file mode 100644[m
[1mindex e7a4785..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/funkyfilename.txt[m
[1m+++ /dev/null[m
[36m@@ -1 +0,0 @@[m
[31m-I am a text file with a funky name![m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/plain.txt b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/plain.txt[m
[1mdeleted file mode 100644[m
[1mindex 9b6903e..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/plain.txt[m
[1m+++ /dev/null[m
[36m@@ -1 +0,0 @@[m
[31m-I am a plain text file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/http/special-chars-in-filename/info.md b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/http/special-chars-in-filename/info.md[m
[1mdeleted file mode 100644[m
[1mindex 3c9dbe3..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/http/special-chars-in-filename/info.md[m
[1m+++ /dev/null[m
[36m@@ -1,3 +0,0 @@[m
[31m-* Opera does not allow submitting this file, it shows a warning to the[m
[31m-  user that the file could not be found instead. Tested in 9.8, 11.51 on OSX.[m
[31m-  Reported to Opera on 08.09.2011 (tracking email DSK-346009@bugs.opera.com).[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/no-filename.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/no-filename.js[m
[1mdeleted file mode 100644[m
[1mindex 0bae449..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/no-filename.js[m
[1m+++ /dev/null[m
[36m@@ -1,3 +0,0 @@[m
[31m-module.exports['generic.http'] = [[m
[31m-  {type: 'file', name: 'upload', filename: '', fixture: 'plain.txt'},[m
[31m-];[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/special-chars-in-filename.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/special-chars-in-filename.js[m
[1mdeleted file mode 100644[m
[1mindex eb76fdc..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/special-chars-in-filename.js[m
[1m+++ /dev/null[m
[36m@@ -1,21 +0,0 @@[m
[31m-var properFilename = 'funkyfilename.txt';[m
[31m-[m
[31m-function expect(filename) {[m
[31m-  return [[m
[31m-    {type: 'field', name: 'title', value: 'Weird filename'},[m
[31m-    {type: 'file', name: 'upload', filename: filename, fixture: properFilename},[m
[31m-  ];[m
[31m-};[m
[31m-[m
[31m-var webkit = " ? % * | \" < > . ? ; ' @ # $ ^ & ( ) - _ = + { } [ ] ` ~.txt";[m
[31m-var ffOrIe = " ? % * | \" < > . ☃ ; ' @ # $ ^ & ( ) - _ = + { } [ ] ` ~.txt";[m
[31m-[m
[31m-module.exports = {[m
[31m-  'osx-chrome-13.http'   : expect(webkit),[m
[31m-  'osx-firefox-3.6.http' : expect(ffOrIe),[m
[31m-  'osx-safari-5.http'    : expect(webkit),[m
[31m-  'xp-chrome-12.http'    : expect(webkit),[m
[31m-  'xp-ie-7.http'         : expect(ffOrIe),[m
[31m-  'xp-ie-8.http'         : expect(ffOrIe),[m
[31m-  'xp-safari-5.http'     : expect(webkit),[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/multipart.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/multipart.js[m
[1mdeleted file mode 100644[m
[1mindex a476169..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/multipart.js[m
[1m+++ /dev/null[m
[36m@@ -1,72 +0,0 @@[m
[31m-exports['rfc1867'] =[m
[31m-  { boundary: 'AaB03x',[m
[31m-    raw:[m
[31m-      '--AaB03x\r\n'+[m
[31m-      'content-disposition: form-data; name="field1"\r\n'+[m
[31m-      '\r\n'+[m
[31m-      'Joe Blow\r\nalmost tricked you!\r\n'+[m
[31m-      '--AaB03x\r\n'+[m
[31m-      'content-disposition: form-data; name="pics"; filename="file1.txt"\r\n'+[m
[31m-      'Content-Type: text/plain\r\n'+[m
[31m-      '\r\n'+[m
[31m-      '... contents of file1.txt ...\r\r\n'+[m
[31m-      '--AaB03x--\r\n',[m
[31m-    parts:[m
[31m-    [ { headers: {[m
[31m-          'content-disposition': 'form-data; name="field1"',[m
[31m-        },[m
[31m-        data: 'Joe Blow\r\nalmost tricked you!',[m
[31m-      },[m
[31m-      { headers: {[m
[31m-          'content-disposition': 'form-data; name="pics"; filename="file1.txt"',[m
[31m-          'Content-Type': 'text/plain',[m
[31m-        },[m
[31m-        data: '... contents of file1.txt ...\r',[m
[31m-      }[m
[31m-    ][m
[31m-  };[m
[31m-[m
[31m-exports['noTrailing\r\n'] =[m
[31m-  { boundary: 'AaB03x',[m
[31m-    raw:[m
[31m-      '--AaB03x\r\n'+[m
[31m-      'content-disposition: form-data; name="field1"\r\n'+[m
[31m-      '\r\n'+[m
[31m-      'Joe Blow\r\nalmost tricked you!\r\n'+[m
[31m-      '--AaB03x\r\n'+[m
[31m-      'content-disposition: form-data; name="pics"; filename="file1.txt"\r\n'+[m
[31m-      'Content-Type: text/plain\r\n'+[m
[31m-      '\r\n'+[m
[31m-      '... contents of file1.txt ...\r\r\n'+[m
[31m-      '--AaB03x--',[m
[31m-    parts:[m
[31m-    [ { headers: {[m
[31m-          'content-disposition': 'form-data; name="field1"',[m
[31m-        },[m
[31m-        data: 'Joe Blow\r\nalmost tricked you!',[m
[31m-      },[m
[31m-      { headers: {[m
[31m-          'content-disposition': 'form-data; name="pics"; filename="file1.txt"',[m
[31m-          'Content-Type': 'text/plain',[m
[31m-        },[m
[31m-        data: '... contents of file1.txt ...\r',[m
[31m-      }[m
[31m-    ][m
[31m-  };[m
[31m-[m
[31m-exports['emptyHeader'] =[m
[31m-  { boundary: 'AaB03x',[m
[31m-    raw:[m
[31m-      '--AaB03x\r\n'+[m
[31m-      'content-disposition: form-data; name="field1"\r\n'+[m
[31m-      ': foo\r\n'+[m
[31m-      '\r\n'+[m
[31m-      'Joe Blow\r\nalmost tricked you!\r\n'+[m
[31m-      '--AaB03x\r\n'+[m
[31m-      'content-disposition: form-data; name="pics"; filename="file1.txt"\r\n'+[m
[31m-      'Content-Type: text/plain\r\n'+[m
[31m-      '\r\n'+[m
[31m-      '... contents of file1.txt ...\r\r\n'+[m
[31m-      '--AaB03x--\r\n',[m
[31m-    expectError: true,[m
[31m-  };[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/integration/test-fixtures.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/integration/test-fixtures.js[m
[1mdeleted file mode 100644[m
[1mindex 66ad259..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/integration/test-fixtures.js[m
[1m+++ /dev/null[m
[36m@@ -1,89 +0,0 @@[m
[31m-var hashish = require('hashish');[m
[31m-var fs = require('fs');[m
[31m-var findit = require('findit');[m
[31m-var path = require('path');[m
[31m-var http = require('http');[m
[31m-var net = require('net');[m
[31m-var assert = require('assert');[m
[31m-[m
[31m-var common = require('../common');[m
[31m-var formidable = common.formidable;[m
[31m-[m
[31m-var server = http.createServer();[m
[31m-server.listen(common.port, findFixtures);[m
[31m-[m
[31m-function findFixtures() {[m
[31m-  var fixtures = [];[m
[31m-  findit[m
[31m-    .sync(common.dir.fixture + '/js')[m
[31m-    .forEach(function(jsPath) {[m
[31m-      if (!/\.js$/.test(jsPath)) return;[m
[31m-[m
[31m-      var group = path.basename(jsPath, '.js');[m
[31m-      hashish.forEach(require(jsPath), function(fixture, name) {[m
[31m-        fixtures.push({[m
[31m-          name    : group + '/' + name,[m
[31m-          fixture : fixture,[m
[31m-        });[m
[31m-      });[m
[31m-    });[m
[31m-[m
[31m-  testNext(fixtures);[m
[31m-}[m
[31m-[m
[31m-function testNext(fixtures) {[m
[31m-  var fixture = fixtures.shift();[m
[31m-  if (!fixture) return server.close();[m
[31m-[m
[31m-  var name    = fixture.name;[m
[31m-  var fixture = fixture.fixture;[m
[31m-[m
[31m-  uploadFixture(name, function(err, parts) {[m
[31m-    if (err) throw err;[m
[31m-[m
[31m-    fixture.forEach(function(expectedPart, i) {[m
[31m-      var parsedPart = parts[i];[m
[31m-      assert.equal(parsedPart.type, expectedPart.type);[m
[31m-      assert.equal(parsedPart.name, expectedPart.name);[m
[31m-[m
[31m-      if (parsedPart.type === 'file') {[m
[31m-        var filename = parsedPart.value.name;[m
[31m-        assert.equal(filename, expectedPart.filename);[m
[31m-      }[m
[31m-    });[m
[31m-[m
[31m-    testNext(fixtures);[m
[31m-  });[m
[31m-};[m
[31m-[m
[31m-function uploadFixture(name, cb) {[m
[31m-  server.once('request', function(req, res) {[m
[31m-    var form = new formidable.IncomingForm();[m
[31m-    form.uploadDir = common.dir.tmp;[m
[31m-    form.parse(req);[m
[31m-[m
[31m-    function callback() {[m
[31m-      var realCallback = cb;[m
[31m-      cb = function() {};[m
[31m-      realCallback.apply(null, arguments);[m
[31m-    }[m
[31m-[m
[31m-    var parts = [];[m
[31m-    form[m
[31m-      .on('error', callback)[m
[31m-      .on('fileBegin', function(name, value) {[m
[31m-        parts.push({type: 'file', name: name, value: value});[m
[31m-      })[m
[31m-      .on('field', function(name, value) {[m
[31m-        parts.push({type: 'field', name: name, value: value});[m
[31m-      })[m
[31m-      .on('end', function() {[m
[31m-        callback(null, parts);[m
[31m-      });[m
[31m-  });[m
[31m-[m
[31m-  var socket = net.createConnection(common.port);[m
[31m-  var file = fs.createReadStream(common.dir.fixture + '/http/' + name);[m
[31m-[m
[31m-  file.pipe(socket);[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/common.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/common.js[m
[1mdeleted file mode 100644[m
[1mindex 2b98598..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/common.js[m
[1m+++ /dev/null[m
[36m@@ -1,24 +0,0 @@[m
[31m-var path = require('path'),[m
[31m-    fs = require('fs');[m
[31m-[m
[31m-try {[m
[31m-  global.Gently = require('gently');[m
[31m-} catch (e) {[m
[31m-  throw new Error('this test suite requires node-gently');[m
[31m-}[m
[31m-[m
[31m-exports.lib = path.join(__dirname, '../../lib');[m
[31m-[m
[31m-global.GENTLY = new Gently();[m
[31m-[m
[31m-global.assert = require('assert');[m
[31m-global.TEST_PORT = 13532;[m
[31m-global.TEST_FIXTURES = path.join(__dirname, '../fixture');[m
[31m-global.TEST_TMP = path.join(__dirname, '../tmp');[m
[31m-[m
[31m-// Stupid new feature in node that complains about gently attaching too many[m
[31m-// listeners to process 'exit'. This is a workaround until I can think of a[m
[31m-// better way to deal with this.[m
[31m-if (process.setMaxListeners) {[m
[31m-  process.setMaxListeners(10000);[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/integration/test-multipart-parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/integration/test-multipart-parser.js[m
[1mdeleted file mode 100644[m
[1mindex 75232aa..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/integration/test-multipart-parser.js[m
[1m+++ /dev/null[m
[36m@@ -1,80 +0,0 @@[m
[31m-var common = require('../common');[m
[31m-var CHUNK_LENGTH = 10,[m
[31m-    multipartParser = require(common.lib + '/multipart_parser'),[m
[31m-    MultipartParser = multipartParser.MultipartParser,[m
[31m-    parser = new MultipartParser(),[m
[31m-    fixtures = require(TEST_FIXTURES + '/multipart'),[m
[31m-    Buffer = require('buffer').Buffer;[m
[31m-[m
[31m-Object.keys(fixtures).forEach(function(name) {[m
[31m-  var fixture = fixtures[name],[m
[31m-      buffer = new Buffer(Buffer.byteLength(fixture.raw, 'binary')),[m
[31m-      offset = 0,[m
[31m-      chunk,[m
[31m-      nparsed,[m
[31m-[m
[31m-      parts = [],[m
[31m-      part = null,[m
[31m-      headerField,[m
[31m-      headerValue,[m
[31m-      endCalled = '';[m
[31m-[m
[31m-  parser.initWithBoundary(fixture.boundary);[m
[31m-  parser.onPartBegin = function() {[m
[31m-    part = {headers: {}, data: ''};[m
[31m-    parts.push(part);[m
[31m-    headerField = '';[m
[31m-    headerValue = '';[m
[31m-  };[m
[31m-[m
[31m-  parser.onHeaderField = function(b, start, end) {[m
[31m-    headerField += b.toString('ascii', start, end);[m
[31m-  };[m
[31m-[m
[31m-  parser.onHeaderValue = function(b, start, end) {[m
[31m-    headerValue += b.toString('ascii', start, end);[m
[31m-  }[m
[31m-[m
[31m-  parser.onHeaderEnd = function() {[m
[31m-    part.headers[headerField] = headerValue;[m
[31m-    headerField = '';[m
[31m-    headerValue = '';[m
[31m-  };[m
[31m-[m
[31m-  parser.onPartData = function(b, start, end) {[m
[31m-    var str = b.toString('ascii', start, end);[m
[31m-    part.data += b.slice(start, end);[m
[31m-  }[m
[31m-[m
[31m-  parser.onEnd = function() {[m
[31m-    endCalled = true;[m
[31m-  }[m
[31m-[m
[31m-  buffer.write(fixture.raw, 'binary', 0);[m
[31m-[m
[31m-  while (offset < buffer.length) {[m
[31m-    if (offset + CHUNK_LENGTH < buffer.length) {[m
[31m-      chunk = buffer.slice(offset, offset+CHUNK_LENGTH);[m
[31m-    } else {[m
[31m-      chunk = buffer.slice(offset, buffer.length);[m
[31m-    }[m
[31m-    offset = offset + CHUNK_LENGTH;[m
[31m-[m
[31m-    nparsed = parser.write(chunk);[m
[31m-    if (nparsed != chunk.length) {[m
[31m-      if (fixture.expectError) {[m
[31m-        return;[m
[31m-      }[m
[31m-      puts('-- ERROR --');[m
[31m-      p(chunk.toString('ascii'));[m
[31m-      throw new Error(chunk.length+' bytes written, but only '+nparsed+' bytes parsed!');[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  if (fixture.expectError) {[m
[31m-    throw new Error('expected parse error did not happen');[m
[31m-  }[m
[31m-[m
[31m-  assert.ok(endCalled);[m
[31m-  assert.deepEqual(parts, fixture.parts);[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-file.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-file.js[m
[1mdeleted file mode 100644[m
[1mindex 52ceedb..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-file.js[m
[1m+++ /dev/null[m
[36m@@ -1,104 +0,0 @@[m
[31m-var common = require('../common');[m
[31m-var WriteStreamStub = GENTLY.stub('fs', 'WriteStream');[m
[31m-[m
[31m-var File = require(common.lib + '/file'),[m
[31m-    EventEmitter = require('events').EventEmitter,[m
[31m-    file,[m
[31m-    gently;[m
[31m-[m
[31m-function test(test) {[m
[31m-  gently = new Gently();[m
[31m-  file = new File();[m
[31m-  test();[m
[31m-  gently.verify(test.name);[m
[31m-}[m
[31m-[m
[31m-test(function constructor() {[m
[31m-  assert.ok(file instanceof EventEmitter);[m
[31m-  assert.strictEqual(file.size, 0);[m
[31m-  assert.strictEqual(file.path, null);[m
[31m-  assert.strictEqual(file.name, null);[m
[31m-  assert.strictEqual(file.type, null);[m
[31m-  assert.strictEqual(file.lastModifiedDate, null);[m
[31m-[m
[31m-  assert.strictEqual(file._writeStream, null);[m
[31m-[m
[31m-  (function testSetProperties() {[m
[31m-    var file2 = new File({foo: 'bar'});[m
[31m-    assert.equal(file2.foo, 'bar');[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function open() {[m
[31m-  var WRITE_STREAM;[m
[31m-  file.path = '/foo';[m
[31m-[m
[31m-  gently.expect(WriteStreamStub, 'new', function (path) {[m
[31m-    WRITE_STREAM = this;[m
[31m-    assert.strictEqual(path, file.path);[m
[31m-  });[m
[31m-[m
[31m-  file.open();[m
[31m-  assert.strictEqual(file._writeStream, WRITE_STREAM);[m
[31m-});[m
[31m-[m
[31m-test(function write() {[m
[31m-  var BUFFER = {length: 10},[m
[31m-      CB_STUB,[m
[31m-      CB = function() {[m
[31m-        CB_STUB.apply(this, arguments);[m
[31m-      };[m
[31m-[m
[31m-  file._writeStream = {};[m
[31m-[m
[31m-  gently.expect(file._writeStream, 'write', function (buffer, cb) {[m
[31m-    assert.strictEqual(buffer, BUFFER);[m
[31m-[m
[31m-    gently.expect(file, 'emit', function (event, bytesWritten) {[m
[31m-      assert.ok(file.lastModifiedDate instanceof Date);[m
[31m-      assert.equal(event, 'progress');[m
[31m-      assert.equal(bytesWritten, file.size);[m
[31m-    });[m
[31m-[m
[31m-    CB_STUB = gently.expect(function writeCb() {[m
[31m-      assert.equal(file.size, 10);[m
[31m-    });[m
[31m-[m
[31m-    cb();[m
[31m-[m
[31m-    gently.expect(file, 'emit', function (event, bytesWritten) {[m
[31m-      assert.equal(event, 'progress');[m
[31m-      assert.equal(bytesWritten, file.size);[m
[31m-    });[m
[31m-[m
[31m-    CB_STUB = gently.expect(function writeCb() {[m
[31m-      assert.equal(file.size, 20);[m
[31m-    });[m
[31m-[m
[31m-    cb();[m
[31m-  });[m
[31m-[m
[31m-  file.write(BUFFER, CB);[m
[31m-});[m
[31m-[m
[31m-test(function end() {[m
[31m-  var CB_STUB,[m
[31m-      CB = function() {[m
[31m-        CB_STUB.apply(this, arguments);[m
[31m-      };[m
[31m-[m
[31m-  file._writeStream = {};[m
[31m-[m
[31m-  gently.expect(file._writeStream, 'end', function (cb) {[m
[31m-    gently.expect(file, 'emit', function (event) {[m
[31m-      assert.equal(event, 'end');[m
[31m-    });[m
[31m-[m
[31m-    CB_STUB = gently.expect(function endCb() {[m
[31m-    });[m
[31m-[m
[31m-    cb();[m
[31m-  });[m
[31m-[m
[31m-  file.end(CB);[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-incoming-form.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-incoming-form.js[m
[1mdeleted file mode 100644[m
[1mindex 84de439..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-incoming-form.js[m
[1m+++ /dev/null[m
[36m@@ -1,727 +0,0 @@[m
[31m-var common = require('../common');[m
[31m-var MultipartParserStub = GENTLY.stub('./multipart_parser', 'MultipartParser'),[m
[31m-    QuerystringParserStub = GENTLY.stub('./querystring_parser', 'QuerystringParser'),[m
[31m-    EventEmitterStub = GENTLY.stub('events', 'EventEmitter'),[m
[31m-    StreamStub = GENTLY.stub('stream', 'Stream'),[m
[31m-    FileStub = GENTLY.stub('./file');[m
[31m-[m
[31m-var formidable = require(common.lib + '/index'),[m
[31m-    IncomingForm = formidable.IncomingForm,[m
[31m-    events = require('events'),[m
[31m-    fs = require('fs'),[m
[31m-    path = require('path'),[m
[31m-    Buffer = require('buffer').Buffer,[m
[31m-    fixtures = require(TEST_FIXTURES + '/multipart'),[m
[31m-    form,[m
[31m-    gently;[m
[31m-[m
[31m-function test(test) {[m
[31m-  gently = new Gently();[m
[31m-  gently.expect(EventEmitterStub, 'call');[m
[31m-  form = new IncomingForm();[m
[31m-  test();[m
[31m-  gently.verify(test.name);[m
[31m-}[m
[31m-[m
[31m-test(function constructor() {[m
[31m-  assert.strictEqual(form.error, null);[m
[31m-  assert.strictEqual(form.ended, false);[m
[31m-  assert.strictEqual(form.type, null);[m
[31m-  assert.strictEqual(form.headers, null);[m
[31m-  assert.strictEqual(form.keepExtensions, false);[m
[31m-  assert.strictEqual(form.uploadDir, '/tmp');[m
[31m-  assert.strictEqual(form.encoding, 'utf-8');[m
[31m-  assert.strictEqual(form.bytesReceived, null);[m
[31m-  assert.strictEqual(form.bytesExpected, null);[m
[31m-  assert.strictEqual(form.maxFieldsSize, 2 * 1024 * 1024);[m
[31m-  assert.strictEqual(form._parser, null);[m
[31m-  assert.strictEqual(form._flushing, 0);[m
[31m-  assert.strictEqual(form._fieldsSize, 0);[m
[31m-  assert.ok(form instanceof EventEmitterStub);[m
[31m-  assert.equal(form.constructor.name, 'IncomingForm');[m
[31m-[m
[31m-  (function testSimpleConstructor() {[m
[31m-    gently.expect(EventEmitterStub, 'call');[m
[31m-    var form = IncomingForm();[m
[31m-    assert.ok(form instanceof IncomingForm);[m
[31m-  })();[m
[31m-[m
[31m-  (function testSimpleConstructorShortcut() {[m
[31m-    gently.expect(EventEmitterStub, 'call');[m
[31m-    var form = formidable();[m
[31m-    assert.ok(form instanceof IncomingForm);[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function parse() {[m
[31m-  var REQ = {headers: {}}[m
[31m-    , emit = {};[m
[31m-[m
[31m-  gently.expect(form, 'writeHeaders', function(headers) {[m
[31m-    assert.strictEqual(headers, REQ.headers);[m
[31m-  });[m
[31m-[m
[31m-  var events = ['error', 'aborted', 'data', 'end'];[m
[31m-  gently.expect(REQ, 'on', events.length, function(event, fn) {[m
[31m-    assert.equal(event, events.shift());[m
[31m-    emit[event] = fn;[m
[31m-    return this;[m
[31m-  });[m
[31m-[m
[31m-  form.parse(REQ);[m
[31m-[m
[31m-  (function testPause() {[m
[31m-    gently.expect(REQ, 'pause');[m
[31m-    assert.strictEqual(form.pause(), true);[m
[31m-  })();[m
[31m-[m
[31m-  (function testPauseCriticalException() {[m
[31m-    form.ended = false;[m
[31m-[m
[31m-    var ERR = new Error('dasdsa');[m
[31m-    gently.expect(REQ, 'pause', function() {[m
[31m-      throw ERR;[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(form, '_error', function(err) {[m
[31m-      assert.strictEqual(err, ERR);[m
[31m-    });[m
[31m-[m
[31m-    assert.strictEqual(form.pause(), false);[m
[31m-  })();[m
[31m-[m
[31m-  (function testPauseHarmlessException() {[m
[31m-    form.ended = true;[m
[31m-[m
[31m-    var ERR = new Error('dasdsa');[m
[31m-    gently.expect(REQ, 'pause', function() {[m
[31m-      throw ERR;[m
[31m-    });[m
[31m-[m
[31m-    assert.strictEqual(form.pause(), false);[m
[31m-  })();[m
[31m-[m
[31m-  (function testResume() {[m
[31m-    gently.expect(REQ, 'resume');[m
[31m-    assert.strictEqual(form.resume(), true);[m
[31m-  })();[m
[31m-[m
[31m-  (function testResumeCriticalException() {[m
[31m-    form.ended = false;[m
[31m-[m
[31m-    var ERR = new Error('dasdsa');[m
[31m-    gently.expect(REQ, 'resume', function() {[m
[31m-      throw ERR;[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(form, '_error', function(err) {[m
[31m-      assert.strictEqual(err, ERR);[m
[31m-    });[m
[31m-[m
[31m-    assert.strictEqual(form.resume(), false);[m
[31m-  })();[m
[31m-[m
[31m-  (function testResumeHarmlessException() {[m
[31m-    form.ended = true;[m
[31m-[m
[31m-    var ERR = new Error('dasdsa');[m
[31m-    gently.expect(REQ, 'resume', function() {[m
[31m-      throw ERR;[m
[31m-    });[m
[31m-[m
[31m-    assert.strictEqual(form.resume(), false);[m
[31m-  })();[m
[31m-[m
[31m-  (function testEmitError() {[m
[31m-    var ERR = new Error('something bad happened');[m
[31m-    gently.expect(form, '_error',function(err) {[m
[31m-      assert.strictEqual(err, ERR);[m
[31m-    });[m
[31m-    emit.error(ERR);[m
[31m-  })();[m
[31m-[m
[31m-  (function testEmitAborted() {[m
[31m-    gently.expect(form, 'emit',function(event) {[m
[31m-      assert.equal(event, 'aborted');[m
[31m-    });[m
[31m-[m
[31m-    emit.aborted();[m
[31m-  })();[m
[31m-[m
[31m-[m
[31m-  (function testEmitData() {[m
[31m-    var BUFFER = [1, 2, 3];[m
[31m-    gently.expect(form, 'write', function(buffer) {[m
[31m-      assert.strictEqual(buffer, BUFFER);[m
[31m-    });[m
[31m-    emit.data(BUFFER);[m
[31m-  })();[m
[31m-[m
[31m-  (function testEmitEnd() {[m
[31m-    form._parser = {};[m
[31m-[m
[31m-    (function testWithError() {[m
[31m-      var ERR = new Error('haha');[m
[31m-      gently.expect(form._parser, 'end', function() {[m
[31m-        return ERR;[m
[31m-      });[m
[31m-[m
[31m-      gently.expect(form, '_error', function(err) {[m
[31m-        assert.strictEqual(err, ERR);[m
[31m-      });[m
[31m-[m
[31m-      emit.end();[m
[31m-    })();[m
[31m-[m
[31m-    (function testWithoutError() {[m
[31m-      gently.expect(form._parser, 'end');[m
[31m-      emit.end();[m
[31m-    })();[m
[31m-[m
[31m-    (function testAfterError() {[m
[31m-      form.error = true;[m
[31m-      emit.end();[m
[31m-    })();[m
[31m-  })();[m
[31m-[m
[31m-  (function testWithCallback() {[m
[31m-    gently.expect(EventEmitterStub, 'call');[m
[31m-    var form = new IncomingForm(),[m
[31m-        REQ = {headers: {}},[m
[31m-        parseCalled = 0;[m
[31m-[m
[31m-    gently.expect(form, 'writeHeaders');[m
[31m-    gently.expect(REQ, 'on', 4, function() {[m
[31m-      return this;[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(form, 'on', 4, function(event, fn) {[m
[31m-      if (event == 'field') {[m
[31m-        fn('field1', 'foo');[m
[31m-        fn('field1', 'bar');[m
[31m-        fn('field2', 'nice');[m
[31m-      }[m
[31m-[m
[31m-      if (event == 'file') {[m
[31m-        fn('file1', '1');[m
[31m-        fn('file1', '2');[m
[31m-        fn('file2', '3');[m
[31m-      }[m
[31m-[m
[31m-      if (event == 'end') {[m
[31m-        fn();[m
[31m-      }[m
[31m-      return this;[m
[31m-    });[m
[31m-[m
[31m-    form.parse(REQ, gently.expect(function parseCbOk(err, fields, files) {[m
[31m-      assert.deepEqual(fields, {field1: 'bar', field2: 'nice'});[m
[31m-      assert.deepEqual(files, {file1: '2', file2: '3'});[m
[31m-    }));[m
[31m-[m
[31m-    gently.expect(form, 'writeHeaders');[m
[31m-    gently.expect(REQ, 'on', 4, function() {[m
[31m-      return this;[m
[31m-    });[m
[31m-[m
[31m-    var ERR = new Error('test');[m
[31m-    gently.expect(form, 'on', 3, function(event, fn) {[m
[31m-      if (event == 'field') {[m
[31m-        fn('foo', 'bar');[m
[31m-      }[m
[31m-[m
[31m-      if (event == 'error') {[m
[31m-        fn(ERR);[m
[31m-        gently.expect(form, 'on');[m
[31m-      }[m
[31m-      return this;[m
[31m-    });[m
[31m-[m
[31m-    form.parse(REQ, gently.expect(function parseCbErr(err, fields, files) {[m
[31m-      assert.strictEqual(err, ERR);[m
[31m-      assert.deepEqual(fields, {foo: 'bar'});[m
[31m-    }));[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function pause() {[m
[31m-  assert.strictEqual(form.pause(), false);[m
[31m-});[m
[31m-[m
[31m-test(function resume() {[m
[31m-  assert.strictEqual(form.resume(), false);[m
[31m-});[m
[31m-[m
[31m-[m
[31m-test(function writeHeaders() {[m
[31m-  var HEADERS = {};[m
[31m-  gently.expect(form, '_parseContentLength');[m
[31m-  gently.expect(form, '_parseContentType');[m
[31m-[m
[31m-  form.writeHeaders(HEADERS);[m
[31m-  assert.strictEqual(form.headers, HEADERS);[m
[31m-});[m
[31m-[m
[31m-test(function write() {[m
[31m-  var parser = {},[m
[31m-      BUFFER = [1, 2, 3];[m
[31m-[m
[31m-  form._parser = parser;[m
[31m-  form.bytesExpected = 523423;[m
[31m-[m
[31m-  (function testBasic() {[m
[31m-    gently.expect(form, 'emit', function(event, bytesReceived, bytesExpected) {[m
[31m-      assert.equal(event, 'progress');[m
[31m-      assert.equal(bytesReceived, BUFFER.length);[m
[31m-      assert.equal(bytesExpected, form.bytesExpected);[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(parser, 'write', function(buffer) {[m
[31m-      assert.strictEqual(buffer, BUFFER);[m
[31m-      return buffer.length;[m
[31m-    });[m
[31m-[m
[31m-    assert.equal(form.write(BUFFER), BUFFER.length);[m
[31m-    assert.equal(form.bytesReceived, BUFFER.length);[m
[31m-  })();[m
[31m-[m
[31m-  (function testParserError() {[m
[31m-    gently.expect(form, 'emit');[m
[31m-[m
[31m-    gently.expect(parser, 'write', function(buffer) {[m
[31m-      assert.strictEqual(buffer, BUFFER);[m
[31m-      return buffer.length - 1;[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(form, '_error', function(err) {[m
[31m-      assert.ok(err.message.match(/parser error/i));[m
[31m-    });[m
[31m-[m
[31m-    assert.equal(form.write(BUFFER), BUFFER.length - 1);[m
[31m-    assert.equal(form.bytesReceived, BUFFER.length + BUFFER.length);[m
[31m-  })();[m
[31m-[m
[31m-  (function testUninitialized() {[m
[31m-    delete form._parser;[m
[31m-[m
[31m-    gently.expect(form, '_error', function(err) {[m
[31m-      assert.ok(err.message.match(/unintialized parser/i));[m
[31m-    });[m
[31m-    form.write(BUFFER);[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function parseContentType() {[m
[31m-  var HEADERS = {};[m
[31m-[m
[31m-  form.headers = {'content-type': 'application/x-www-form-urlencoded'};[m
[31m-  gently.expect(form, '_initUrlencoded');[m
[31m-  form._parseContentType();[m
[31m-[m
[31m-  // accept anything that has 'urlencoded' in it[m
[31m-  form.headers = {'content-type': 'broken-client/urlencoded-stupid'};[m
[31m-  gently.expect(form, '_initUrlencoded');[m
[31m-  form._parseContentType();[m
[31m-[m
[31m-  var BOUNDARY = '---------------------------57814261102167618332366269';[m
[31m-  form.headers = {'content-type': 'multipart/form-data; boundary='+BOUNDARY};[m
[31m-[m
[31m-  gently.expect(form, '_initMultipart', function(boundary) {[m
[31m-    assert.equal(boundary, BOUNDARY);[m
[31m-  });[m
[31m-  form._parseContentType();[m
[31m-[m
[31m-  (function testQuotedBoundary() {[m
[31m-    form.headers = {'content-type': 'multipart/form-data; boundary="' + BOUNDARY + '"'};[m
[31m-[m
[31m-    gently.expect(form, '_initMultipart', function(boundary) {[m
[31m-      assert.equal(boundary, BOUNDARY);[m
[31m-    });[m
[31m-    form._parseContentType();[m
[31m-  })();[m
[31m-[m
[31m-  (function testNoBoundary() {[m
[31m-    form.headers = {'content-type': 'multipart/form-data'};[m
[31m-[m
[31m-    gently.expect(form, '_error', function(err) {[m
[31m-      assert.ok(err.message.match(/no multipart boundary/i));[m
[31m-    });[m
[31m-    form._parseContentType();[m
[31m-  })();[m
[31m-[m
[31m-  (function testNoContentType() {[m
[31m-    form.headers = {};[m
[31m-[m
[31m-    gently.expect(form, '_error', function(err) {[m
[31m-      assert.ok(err.message.match(/no content-type/i));[m
[31m-    });[m
[31m-    form._parseContentType();[m
[31m-  })();[m
[31m-[m
[31m-  (function testUnknownContentType() {[m
[31m-    form.headers = {'content-type': 'invalid'};[m
[31m-[m
[31m-    gently.expect(form, '_error', function(err) {[m
[31m-      assert.ok(err.message.match(/unknown content-type/i));[m
[31m-    });[m
[31m-    form._parseContentType();[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function parseContentLength() {[m
[31m-  var HEADERS = {};[m
[31m-[m
[31m-  form.headers = {};[m
[31m-  form._parseContentLength();[m
[31m-  assert.strictEqual(form.bytesReceived, null);[m
[31m-  assert.strictEqual(form.bytesExpected, null);[m
[31m-[m
[31m-  form.headers['content-length'] = '8';[m
[31m-  gently.expect(form, 'emit', function(event, bytesReceived, bytesExpected) {[m
[31m-    assert.equal(event, 'progress');[m
[31m-    assert.equal(bytesReceived, 0);[m
[31m-    assert.equal(bytesExpected, 8);[m
[31m-  });[m
[31m-  form._parseContentLength();[m
[31m-  assert.strictEqual(form.bytesReceived, 0);[m
[31m-  assert.strictEqual(form.bytesExpected, 8);[m
[31m-[m
[31m-  // JS can be evil, lets make sure we are not[m
[31m-  form.headers['content-length'] = '08';[m
[31m-  gently.expect(form, 'emit', function(event, bytesReceived, bytesExpected) {[m
[31m-    assert.equal(event, 'progress');[m
[31m-    assert.equal(bytesReceived, 0);[m
[31m-    assert.equal(bytesExpected, 8);[m
[31m-  });[m
[31m-  form._parseContentLength();[m
[31m-  assert.strictEqual(form.bytesExpected, 8);[m
[31m-});[m
[31m-[m
[31m-test(function _initMultipart() {[m
[31m-  var BOUNDARY = '123',[m
[31m-      PARSER;[m
[31m-[m
[31m-  gently.expect(MultipartParserStub, 'new', function() {[m
[31m-    PARSER = this;[m
[31m-  });[m
[31m-[m
[31m-  gently.expect(MultipartParserStub.prototype, 'initWithBoundary', function(boundary) {[m
[31m-    assert.equal(boundary, BOUNDARY);[m
[31m-  });[m
[31m-[m
[31m-  form._initMultipart(BOUNDARY);[m
[31m-  assert.equal(form.type, 'multipart');[m
[31m-  assert.strictEqual(form._parser, PARSER);[m
[31m-[m
[31m-  (function testRegularField() {[m
[31m-    var PART;[m
[31m-    gently.expect(StreamStub, 'new', function() {[m
[31m-      PART = this;[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(form, 'onPart', function(part) {[m
[31m-      assert.strictEqual(part, PART);[m
[31m-      assert.deepEqual[m
[31m-        ( part.headers[m
[31m-        , { 'content-disposition': 'form-data; name="field1"'[m
[31m-          , 'foo': 'bar'[m
[31m-          }[m
[31m-        );[m
[31m-      assert.equal(part.name, 'field1');[m
[31m-[m
[31m-      var strings = ['hello', ' world'];[m
[31m-      gently.expect(part, 'emit', 2, function(event, b) {[m
[31m-          assert.equal(event, 'data');[m
[31m-          assert.equal(b.toString(), strings.shift());[m
[31m-      });[m
[31m-[m
[31m-      gently.expect(part, 'emit', function(event, b) {[m
[31m-          assert.equal(event, 'end');[m
[31m-      });[m
[31m-    });[m
[31m-[m
[31m-    PARSER.onPartBegin();[m
[31m-    PARSER.onHeaderField(new Buffer('content-disposition'), 0, 10);[m
[31m-    PARSER.onHeaderField(new Buffer('content-disposition'), 10, 19);[m
[31m-    PARSER.onHeaderValue(new Buffer('form-data; name="field1"'), 0, 14);[m
[31m-    PARSER.onHeaderValue(new Buffer('form-data; name="field1"'), 14, 24);[m
[31m-    PARSER.onHeaderEnd();[m
[31m-    PARSER.onHeaderField(new Buffer('foo'), 0, 3);[m
[31m-    PARSER.onHeaderValue(new Buffer('bar'), 0, 3);[m
[31m-    PARSER.onHeaderEnd();[m
[31m-    PARSER.onHeadersEnd();[m
[31m-    PARSER.onPartData(new Buffer('hello world'), 0, 5);[m
[31m-    PARSER.onPartData(new Buffer('hello world'), 5, 11);[m
[31m-    PARSER.onPartEnd();[m
[31m-  })();[m
[31m-[m
[31m-  (function testFileField() {[m
[31m-    var PART;[m
[31m-    gently.expect(StreamStub, 'new', function() {[m
[31m-      PART = this;[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(form, 'onPart', function(part) {[m
[31m-      assert.deepEqual[m
[31m-        ( part.headers[m
[31m-        , { 'content-disposition': 'form-data; name="field2"; filename="C:\\Documents and Settings\\IE\\Must\\Die\\Sun"et.jpg"'[m
[31m-          , 'content-type': 'text/plain'[m
[31m-          }[m
[31m-        );[m
[31m-      assert.equal(part.name, 'field2');[m
[31m-      assert.equal(part.filename, 'Sun"et.jpg');[m
[31m-      assert.equal(part.mime, 'text/plain');[m
[31m-[m
[31m-      gently.expect(part, 'emit', function(event, b) {[m
[31m-        assert.equal(event, 'data');[m
[31m-        assert.equal(b.toString(), '... contents of file1.txt ...');[m
[31m-      });[m
[31m-[m
[31m-      gently.expect(part, 'emit', function(event, b) {[m
[31m-          assert.equal(event, 'end');[m
[31m-      });[m
[31m-    });[m
[31m-[m
[31m-    PARSER.onPartBegin();[m
[31m-    PARSER.onHeaderField(new Buffer('content-disposition'), 0, 19);[m
[31m-    PARSER.onHeaderValue(new Buffer('form-data; name="field2"; filename="C:\\Documents and Settings\\IE\\Must\\Die\\Sun"et.jpg"'), 0, 85);[m
[31m-    PARSER.onHeaderEnd();[m
[31m-    PARSER.onHeaderField(new Buffer('Content-Type'), 0, 12);[m
[31m-    PARSER.onHeaderValue(new Buffer('text/plain'), 0, 10);[m
[31m-    PARSER.onHeaderEnd();[m
[31m-    PARSER.onHeadersEnd();[m
[31m-    PARSER.onPartData(new Buffer('... contents of file1.txt ...'), 0, 29);[m
[31m-    PARSER.onPartEnd();[m
[31m-  })();[m
[31m-[m
[31m-  (function testEnd() {[m
[31m-    gently.expect(form, '_maybeEnd');[m
[31m-    PARSER.onEnd();[m
[31m-    assert.ok(form.ended);[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function _fileName() {[m
[31m-  // TODO[m
[31m-  return;[m
[31m-});[m
[31m-[m
[31m-test(function _initUrlencoded() {[m
[31m-  var PARSER;[m
[31m-[m
[31m-  gently.expect(QuerystringParserStub, 'new', function() {[m
[31m-    PARSER = this;[m
[31m-  });[m
[31m-[m
[31m-  form._initUrlencoded();[m
[31m-  assert.equal(form.type, 'urlencoded');[m
[31m-  assert.strictEqual(form._parser, PARSER);[m
[31m-[m
[31m-  (function testOnField() {[m
[31m-    var KEY = 'KEY', VAL = 'VAL';[m
[31m-    gently.expect(form, 'emit', function(field, key, val) {[m
[31m-      assert.equal(field, 'field');[m
[31m-      assert.equal(key, KEY);[m
[31m-      assert.equal(val, VAL);[m
[31m-    });[m
[31m-[m
[31m-    PARSER.onField(KEY, VAL);[m
[31m-  })();[m
[31m-[m
[31m-  (function testOnEnd() {[m
[31m-    gently.expect(form, '_maybeEnd');[m
[31m-[m
[31m-    PARSER.onEnd();[m
[31m-    assert.equal(form.ended, true);[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function _error() {[m
[31m-  var ERR = new Error('bla');[m
[31m-[m
[31m-  gently.expect(form, 'pause');[m
[31m-  gently.expect(form, 'emit', function(event, err) {[m
[31m-    assert.equal(event, 'error');[m
[31m-    assert.strictEqual(err, ERR);[m
[31m-  });[m
[31m-[m
[31m-  form._error(ERR);[m
[31m-  assert.strictEqual(form.error, ERR);[m
[31m-[m
[31m-  // make sure _error only does its thing once[m
[31m-  form._error(ERR);[m
[31m-});[m
[31m-[m
[31m-test(function onPart() {[m
[31m-  var PART = {};[m
[31m-  gently.expect(form, 'handlePart', function(part) {[m
[31m-    assert.strictEqual(part, PART);[m
[31m-  });[m
[31m-[m
[31m-  form.onPart(PART);[m
[31m-});[m
[31m-[m
[31m-test(function handlePart() {[m
[31m-  (function testUtf8Field() {[m
[31m-    var PART = new events.EventEmitter();[m
[31m-    PART.name = 'my_field';[m
[31m-[m
[31m-    gently.expect(form, 'emit', function(event, field, value) {[m
[31m-      assert.equal(event, 'field');[m
[31m-      assert.equal(field, 'my_field');[m
[31m-      assert.equal(value, 'hello world: €');[m
[31m-    });[m
[31m-[m
[31m-    form.handlePart(PART);[m
[31m-    PART.emit('data', new Buffer('hello'));[m
[31m-    PART.emit('data', new Buffer(' world: '));[m
[31m-    PART.emit('data', new Buffer([0xE2]));[m
[31m-    PART.emit('data', new Buffer([0x82, 0xAC]));[m
[31m-    PART.emit('end');[m
[31m-  })();[m
[31m-[m
[31m-  (function testBinaryField() {[m
[31m-    var PART = new events.EventEmitter();[m
[31m-    PART.name = 'my_field2';[m
[31m-[m
[31m-    gently.expect(form, 'emit', function(event, field, value) {[m
[31m-      assert.equal(event, 'field');[m
[31m-      assert.equal(field, 'my_field2');[m
[31m-      assert.equal(value, 'hello world: '+new Buffer([0xE2, 0x82, 0xAC]).toString('binary'));[m
[31m-    });[m
[31m-[m
[31m-    form.encoding = 'binary';[m
[31m-    form.handlePart(PART);[m
[31m-    PART.emit('data', new Buffer('hello'));[m
[31m-    PART.emit('data', new Buffer(' world: '));[m
[31m-    PART.emit('data', new Buffer([0xE2]));[m
[31m-    PART.emit('data', new Buffer([0x82, 0xAC]));[m
[31m-    PART.emit('end');[m
[31m-  })();[m
[31m-[m
[31m-  (function testFieldSize() {[m
[31m-    form.maxFieldsSize = 8;[m
[31m-    var PART = new events.EventEmitter();[m
[31m-    PART.name = 'my_field';[m
[31m-[m
[31m-    gently.expect(form, '_error', function(err) {[m
[31m-      assert.equal(err.message, 'maxFieldsSize exceeded, received 9 bytes of field data');[m
[31m-    });[m
[31m-[m
[31m-    form.handlePart(PART);[m
[31m-    form._fieldsSize = 1;[m
[31m-    PART.emit('data', new Buffer(7));[m
[31m-    PART.emit('data', new Buffer(1));[m
[31m-  })();[m
[31m-[m
[31m-  (function testFilePart() {[m
[31m-    var PART = new events.EventEmitter(),[m
[31m-        FILE = new events.EventEmitter(),[m
[31m-        PATH = '/foo/bar';[m
[31m-[m
[31m-    PART.name = 'my_file';[m
[31m-    PART.filename = 'sweet.txt';[m
[31m-    PART.mime = 'sweet.txt';[m
[31m-[m
[31m-    gently.expect(form, '_uploadPath', function(filename) {[m
[31m-      assert.equal(filename, PART.filename);[m
[31m-      return PATH;[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(FileStub, 'new', function(properties) {[m
[31m-      assert.equal(properties.path, PATH);[m
[31m-      assert.equal(properties.name, PART.filename);[m
[31m-      assert.equal(properties.type, PART.mime);[m
[31m-      FILE = this;[m
[31m-[m
[31m-      gently.expect(form, 'emit', function (event, field, file) {[m
[31m-        assert.equal(event, 'fileBegin');[m
[31m-        assert.strictEqual(field, PART.name);[m
[31m-        assert.strictEqual(file, FILE);[m
[31m-      });[m
[31m-[m
[31m-      gently.expect(FILE, 'open');[m
[31m-    });[m
[31m-[m
[31m-    form.handlePart(PART);[m
[31m-    assert.equal(form._flushing, 1);[m
[31m-[m
[31m-    var BUFFER;[m
[31m-    gently.expect(form, 'pause');[m
[31m-    gently.expect(FILE, 'write', function(buffer, cb) {[m
[31m-      assert.strictEqual(buffer, BUFFER);[m
[31m-      gently.expect(form, 'resume');[m
[31m-      // @todo handle cb(new Err)[m
[31m-      cb();[m
[31m-    });[m
[31m-[m
[31m-    PART.emit('data', BUFFER = new Buffer('test'));[m
[31m-[m
[31m-    gently.expect(FILE, 'end', function(cb) {[m
[31m-      gently.expect(form, 'emit', function(event, field, file) {[m
[31m-        assert.equal(event, 'file');[m
[31m-        assert.strictEqual(file, FILE);[m
[31m-      });[m
[31m-[m
[31m-      gently.expect(form, '_maybeEnd');[m
[31m-[m
[31m-      cb();[m
[31m-      assert.equal(form._flushing, 0);[m
[31m-    });[m
[31m-[m
[31m-    PART.emit('end');[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function _uploadPath() {[m
[31m-  (function testUniqueId() {[m
[31m-    var UUID_A, UUID_B;[m
[31m-    gently.expect(GENTLY.hijacked.path, 'join', function(uploadDir, uuid) {[m
[31m-      assert.equal(uploadDir, form.uploadDir);[m
[31m-      UUID_A = uuid;[m
[31m-    });[m
[31m-    form._uploadPath();[m
[31m-[m
[31m-    gently.expect(GENTLY.hijacked.path, 'join', function(uploadDir, uuid) {[m
[31m-      UUID_B = uuid;[m
[31m-    });[m
[31m-    form._uploadPath();[m
[31m-[m
[31m-    assert.notEqual(UUID_A, UUID_B);[m
[31m-  })();[m
[31m-[m
[31m-  (function testFileExtension() {[m
[31m-    form.keepExtensions = true;[m
[31m-    var FILENAME = 'foo.jpg',[m
[31m-        EXT = '.bar';[m
[31m-[m
[31m-    gently.expect(GENTLY.hijacked.path, 'extname', function(filename) {[m
[31m-      assert.equal(filename, FILENAME);[m
[31m-      gently.restore(path, 'extname');[m
[31m-[m
[31m-      return EXT;[m
[31m-    });[m
[31m-[m
[31m-    gently.expect(GENTLY.hijacked.path, 'join', function(uploadDir, name) {[m
[31m-      assert.equal(path.extname(name), EXT);[m
[31m-    });[m
[31m-    form._uploadPath(FILENAME);[m
[31m-  })();[m
[31m-});[m
[31m-[m
[31m-test(function _maybeEnd() {[m
[31m-  gently.expect(form, 'emit', 0);[m
[31m-  form._maybeEnd();[m
[31m-[m
[31m-  form.ended = true;[m
[31m-  form._flushing = 1;[m
[31m-  form._maybeEnd();[m
[31m-[m
[31m-  gently.expect(form, 'emit', function(event) {[m
[31m-    assert.equal(event, 'end');[m
[31m-  });[m
[31m-[m
[31m-  form.ended = true;[m
[31m-  form._flushing = 0;[m
[31m-  form._maybeEnd();[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-multipart-parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-multipart-parser.js[m
[1mdeleted file mode 100644[m
[1mindex d8dc968..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-multipart-parser.js[m
[1m+++ /dev/null[m
[36m@@ -1,50 +0,0 @@[m
[31m-var common = require('../common');[m
[31m-var multipartParser = require(common.lib + '/multipart_parser'),[m
[31m-    MultipartParser = multipartParser.MultipartParser,[m
[31m-    events = require('events'),[m
[31m-    Buffer = require('buffer').Buffer,[m
[31m-    parser;[m
[31m-[m
[31m-function test(test) {[m
[31m-  parser = new MultipartParser();[m
[31m-  test();[m
[31m-}[m
[31m-[m
[31m-test(function constructor() {[m
[31m-  assert.equal(parser.boundary, null);[m
[31m-  assert.equal(parser.state, 0);[m
[31m-  assert.equal(parser.flags, 0);[m
[31m-  assert.equal(parser.boundaryChars, null);[m
[31m-  assert.equal(parser.index, null);[m
[31m-  assert.equal(parser.lookbehind, null);[m
[31m-  assert.equal(parser.constructor.name, 'MultipartParser');[m
[31m-});[m
[31m-[m
[31m-test(function initWithBoundary() {[m
[31m-  var boundary = 'abc';[m
[31m-  parser.initWithBoundary(boundary);[m
[31m-  assert.deepEqual(Array.prototype.slice.call(parser.boundary), [13, 10, 45, 45, 97, 98, 99]);[m
[31m-  assert.equal(parser.state, multipartParser.START);[m
[31m-[m
[31m-  assert.deepEqual(parser.boundaryChars, {10: true, 13: true, 45: true, 97: true, 98: true, 99: true});[m
[31m-});[m
[31m-[m
[31m-test(function parserError() {[m
[31m-  var boundary = 'abc',[m
[31m-      buffer = new Buffer(5);[m
[31m-[m
[31m-  parser.initWithBoundary(boundary);[m
[31m-  buffer.write('--ad', 'ascii', 0);[m
[31m-  assert.equal(parser.write(buffer), 3);[m
[31m-});[m
[31m-[m
[31m-test(function end() {[m
[31m-  (function testError() {[m
[31m-    assert.equal(parser.end().message, 'MultipartParser.end(): stream ended unexpectedly: ' + parser.explain());[m
[31m-  })();[m
[31m-[m
[31m-  (function testRegular() {[m
[31m-    parser.state = multipartParser.END;[m
[31m-    assert.strictEqual(parser.end(), undefined);[m
[31m-  })();[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-querystring-parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-querystring-parser.js[m
[1mdeleted file mode 100644[m
[1mindex 54d3e2d..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-querystring-parser.js[m
[1m+++ /dev/null[m
[36m@@ -1,45 +0,0 @@[m
[31m-var common = require('../common');[m
[31m-var QuerystringParser = require(common.lib + '/querystring_parser').QuerystringParser,[m
[31m-    Buffer = require('buffer').Buffer,[m
[31m-    gently,[m
[31m-    parser;[m
[31m-[m
[31m-function test(test) {[m
[31m-  gently = new Gently();[m
[31m-  parser = new QuerystringParser();[m
[31m-  test();[m
[31m-  gently.verify(test.name);[m
[31m-}[m
[31m-[m
[31m-test(function constructor() {[m
[31m-  assert.equal(parser.buffer, '');[m
[31m-  assert.equal(parser.constructor.name, 'QuerystringParser');[m
[31m-});[m
[31m-[m
[31m-test(function write() {[m
[31m-  var a = new Buffer('a=1');[m
[31m-  assert.equal(parser.write(a), a.length);[m
[31m-[m
[31m-  var b = new Buffer('&b=2');[m
[31m-  parser.write(b);[m
[31m-  assert.equal(parser.buffer, a + b);[m
[31m-});[m
[31m-[m
[31m-test(function end() {[m
[31m-  var FIELDS = {a: ['b', {c: 'd'}], e: 'f'};[m
[31m-[m
[31m-  gently.expect(GENTLY.hijacked.querystring, 'parse', function(str) {[m
[31m-    assert.equal(str, parser.buffer);[m
[31m-    return FIELDS;[m
[31m-  });[m
[31m-[m
[31m-  gently.expect(parser, 'onField', Object.keys(FIELDS).length, function(key, val) {[m
[31m-    assert.deepEqual(FIELDS[key], val);[m
[31m-  });[m
[31m-[m
[31m-  gently.expect(parser, 'onEnd');[m
[31m-[m
[31m-  parser.buffer = 'my buffer';[m
[31m-  parser.end();[m
[31m-  assert.equal(parser.buffer, '');[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/system/test-multi-video-upload.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/system/test-multi-video-upload.js[m
[1mdeleted file mode 100644[m
[1mindex 479e46d..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/system/test-multi-video-upload.js[m
[1m+++ /dev/null[m
[36m@@ -1,75 +0,0 @@[m
[31m-var common = require('../common');[m
[31m-var BOUNDARY = '---------------------------10102754414578508781458777923',[m
[31m-    FIXTURE = TEST_FIXTURES+'/multi_video.upload',[m
[31m-    fs = require('fs'),[m
[31m-    util = require(common.lib + '/util'),[m
[31m-    http = require('http'),[m
[31m-    formidable = require(common.lib + '/index'),[m
[31m-    server = http.createServer();[m
[31m-[m
[31m-server.on('request', function(req, res) {[m
[31m-  var form = new formidable.IncomingForm(),[m
[31m-      uploads = {};[m
[31m-[m
[31m-  form.uploadDir = TEST_TMP;[m
[31m-  form.hash = 'sha1';[m
[31m-  form.parse(req);[m
[31m-[m
[31m-  form[m
[31m-    .on('fileBegin', function(field, file) {[m
[31m-      assert.equal(field, 'upload');[m
[31m-[m
[31m-      var tracker = {file: file, progress: [], ended: false};[m
[31m-      uploads[file.filename] = tracker;[m
[31m-      file[m
[31m-        .on('progress', function(bytesReceived) {[m
[31m-          tracker.progress.push(bytesReceived);[m
[31m-          assert.equal(bytesReceived, file.length);[m
[31m-        })[m
[31m-        .on('end', function() {[m
[31m-          tracker.ended = true;[m
[31m-        });[m
[31m-    })[m
[31m-    .on('field', function(field, value) {[m
[31m-      assert.equal(field, 'title');[m
[31m-      assert.equal(value, '');[m
[31m-    })[m
[31m-    .on('file', function(field, file) {[m
[31m-      assert.equal(field, 'upload');[m
[31m-      assert.strictEqual(uploads[file.filename].file, file);[m
[31m-    })[m
[31m-    .on('end', function() {[m
[31m-      assert.ok(uploads['shortest_video.flv']);[m
[31m-      assert.ok(uploads['shortest_video.flv'].ended);[m
[31m-      assert.ok(uploads['shortest_video.flv'].progress.length > 3);[m
[31m-      assert.equal(uploads['shortest_video.flv'].file.hash, 'd6a17616c7143d1b1438ceeef6836d1a09186b3a');[m
[31m-      assert.equal(uploads['shortest_video.flv'].progress.slice(-1), uploads['shortest_video.flv'].file.length);[m
[31m-      assert.ok(uploads['shortest_video.mp4']);[m
[31m-      assert.ok(uploads['shortest_video.mp4'].ended);[m
[31m-      assert.ok(uploads['shortest_video.mp4'].progress.length > 3);[m
[31m-      assert.equal(uploads['shortest_video.mp4'].file.hash, '937dfd4db263f4887ceae19341dcc8d63bcd557f');[m
[31m-[m
[31m-      server.close();[m
[31m-      res.writeHead(200);[m
[31m-      res.end('good');[m
[31m-    });[m
[31m-});[m
[31m-[m
[31m-server.listen(TEST_PORT, function() {[m
[31m-  var client = http.createClient(TEST_PORT),[m
[31m-      stat = fs.statSync(FIXTURE),[m
[31m-      headers = {[m
[31m-        'content-type': 'multipart/form-data; boundary='+BOUNDARY,[m
[31m-        'content-length': stat.size,[m
[31m-      }[m
[31m-      request = client.request('POST', '/', headers),[m
[31m-      fixture = new fs.ReadStream(FIXTURE);[m
[31m-[m
[31m-  fixture[m
[31m-    .on('data', function(b) {[m
[31m-      request.write(b);[m
[31m-    })[m
[31m-    .on('end', function() {[m
[31m-      request.end();[m
[31m-    });[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/run.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/run.js[m
[1mdeleted file mode 100755[m
[1mindex 50b2361..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/run.js[m
[1m+++ /dev/null[m
[36m@@ -1,2 +0,0 @@[m
[31m-#!/usr/bin/env node[m
[31m-require('urun')(__dirname)[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/unit/test-incoming-form.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/unit/test-incoming-form.js[m
[1mdeleted file mode 100644[m
[1mindex fe2ac1c..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/test/unit/test-incoming-form.js[m
[1m+++ /dev/null[m
[36m@@ -1,63 +0,0 @@[m
[31m-var common       = require('../common');[m
[31m-var test         = require('utest');[m
[31m-var assert       = common.assert;[m
[31m-var IncomingForm = common.require('incoming_form').IncomingForm;[m
[31m-var path         = require('path');[m
[31m-[m
[31m-var form;[m
[31m-test('IncomingForm', {[m
[31m-  before: function() {[m
[31m-    form = new IncomingForm();[m
[31m-  },[m
[31m-[m
[31m-  '#_fileName with regular characters': function() {[m
[31m-    var filename = 'foo.txt';[m
[31m-    assert.equal(form._fileName(makeHeader(filename)), 'foo.txt');[m
[31m-  },[m
[31m-[m
[31m-  '#_fileName with unescaped quote': function() {[m
[31m-    var filename = 'my".txt';[m
[31m-    assert.equal(form._fileName(makeHeader(filename)), 'my".txt');[m
[31m-  },[m
[31m-[m
[31m-  '#_fileName with escaped quote': function() {[m
[31m-    var filename = 'my%22.txt';[m
[31m-    assert.equal(form._fileName(makeHeader(filename)), 'my".txt');[m
[31m-  },[m
[31m-[m
[31m-  '#_fileName with bad quote and additional sub-header': function() {[m
[31m-    var filename = 'my".txt';[m
[31m-    var header = makeHeader(filename) + '; foo="bar"';[m
[31m-    assert.equal(form._fileName(header), filename);[m
[31m-  },[m
[31m-[m
[31m-  '#_fileName with semicolon': function() {[m
[31m-    var filename = 'my;.txt';[m
[31m-    assert.equal(form._fileName(makeHeader(filename)), 'my;.txt');[m
[31m-  },[m
[31m-[m
[31m-  '#_fileName with utf8 character': function() {[m
[31m-    var filename = 'my&#9731;.txt';[m
[31m-    assert.equal(form._fileName(makeHeader(filename)), 'my☃.txt');[m
[31m-  },[m
[31m-[m
[31m-  '#_uploadPath strips harmful characters from extension when keepExtensions': function() {[m
[31m-    form.keepExtensions = true;[m
[31m-[m
[31m-    var ext = path.extname(form._uploadPath('fine.jpg?foo=bar'));[m
[31m-    assert.equal(ext, '.jpg');[m
[31m-[m
[31m-    var ext = path.extname(form._uploadPath('fine?foo=bar'));[m
[31m-    assert.equal(ext, '');[m
[31m-[m
[31m-    var ext = path.extname(form._uploadPath('super.cr2+dsad'));[m
[31m-    assert.equal(ext, '.cr2');[m
[31m-[m
[31m-    var ext = path.extname(form._uploadPath('super.bar'));[m
[31m-    assert.equal(ext, '.bar');[m
[31m-  },[m
[31m-});[m
[31m-[m
[31m-function makeHeader(filename) {[m
[31m-  return 'Content-Disposition: form-data; name="upload"; filename="' + filename + '"';[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/tool/record.js b/node_modules/express/node_modules/connect/node_modules/formidable/tool/record.js[m
[1mdeleted file mode 100644[m
[1mindex 9f1cef8..0000000[m
[1m--- a/node_modules/express/node_modules/connect/node_modules/formidable/tool/record.js[m
[1m+++ /dev/null[m
[36m@@ -1,47 +0,0 @@[m
[31m-var http = require('http');[m
[31m-var fs = require('fs');[m
[31m-var connections = 0;[m
[31m-[m
[31m-var server = http.createServer(function(req, res) {[m
[31m-  var socket = req.socket;[m
[31m-  console.log('Request: %s %s -> %s', req.method, req.url, socket.filename);[m
[31m-[m
[31m-  req.on('end', function() {[m
[31m-    if (req.url !== '/') {[m
[31m-      res.end(JSON.stringify({[m
[31m-        method: req.method,[m
[31m-        url: req.url,[m
[31m-        filename: socket.filename,[m
[31m-      }));[m
[31m-      return;[m
[31m-    }[m
[31m-[m
[31m-    res.writeHead(200, {'content-type': 'text/html'});[m
[31m-    res.end([m
[31m-      '<form action="/upload" enctype="multipart/form-data" method="post">'+[m
[31m-      '<input type="text" name="title"><br>'+[m
[31m-      '<input type="file" name="upload" multiple="multiple"><br>'+[m
[31m-      '<input type="submit" value="Upload">'+[m
[31m-      '</form>'[m
[31m-    );[m
[31m-  });[m
[31m-});[m
[31m-[m
[31m-server.on('connection', function(socket) {[m
[31m-  connections++;[m
[31m-[m
[31m-  socket.id = connections;[m
[31m-  socket.filename = 'connection-' + socket.id + '.http';[m
[31m-  socket.file = fs.createWriteStream(socket.filename);[m
[31m-  socket.pipe(socket.file);[m
[31m-[m
[31m-  console.log('--> %s', socket.filename);[m
[31m-  socket.on('close', function() {[m
[31m-    console.log('<-- %s', socket.filename);[m
[31m-  });[m
[31m-});[m
[31m-[m
[31m-var port = process.env.PORT || 8080;[m
[31m-server.listen(port, function() {[m
[31m-  console.log('Recording connections on port %s', port);[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/connect/package.json b/node_modules/express/node_modules/connect/package.json[m
[1mdeleted file mode 100644[m
[1mindex 4ae29ea..0000000[m
[1m--- a/node_modules/express/node_modules/connect/package.json[m
[1m+++ /dev/null[m
[36m@@ -1,25 +0,0 @@[m
[31m-{[m
[31m-  "name": "connect",[m
[31m-  "version": "1.9.2",[m
[31m-  "description": "High performance middleware framework",[m
[31m-  "keywords": ["framework", "web", "middleware", "connect", "rack"],[m
[31m-  "repository": "git://github.com/senchalabs/connect.git",[m
[31m-  "author": "TJ Holowaychuk <tj@vision-media.ca> (http://tjholowaychuk.com)",[m
[31m-  "repository": "git://github.com/senchalabs/connect",[m
[31m-  "dependencies": {[m
[31m-    "qs": ">= 0.4.0",[m
[31m-    "mime": ">= 0.0.1",[m
[31m-    "formidable": "1.0.x"[m
[31m-  },[m
[31m-  "devDependencies": {[m
[31m-    "expresso": "0.9.2",[m
[31m-    "koala": "0.1.2",[m
[31m-    "less": "1.1.1",[m
[31m-    "sass": "0.5.0",[m
[31m-    "markdown": "0.2.1",[m
[31m-    "ejs": "0.4.3",[m
[31m-    "should": "0.3.2"[m
[31m-  },[m
[31m-  "publishConfig": { "tag": "1.8" },[m
[31m-  "main": "index"[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/test.js b/node_modules/express/node_modules/connect/test.js[m
[1mdeleted file mode 100644[m
[1mindex 106ddd1..0000000[m
[1m--- a/node_modules/express/node_modules/connect/test.js[m
[1m+++ /dev/null[m
[36m@@ -1,15 +0,0 @@[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var connect = require('./');[m
[31m-[m
[31m-var app = connect()[m
[31m-  .use(connect.logger('dev'))[m
[31m-  .use(function(req, res){[m
[31m-    var body = Array(3222).join('hey');[m
[31m-    res.setHeader('Content-Length', body.length);[m
[31m-    res.end(body);[m
[31m-  })[m
[31m-  .listen(3000);[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mime/LICENSE b/node_modules/express/node_modules/mime/LICENSE[m
[1mdeleted file mode 100644[m
[1mindex 451fc45..0000000[m
[1m--- a/node_modules/express/node_modules/mime/LICENSE[m
[1m+++ /dev/null[m
[36m@@ -1,19 +0,0 @@[m
[31m-Copyright (c) 2010 Benjamin Thomas, Robert Kieffer[m
[31m-[m
[31m-Permission is hereby granted, free of charge, to any person obtaining a copy[m
[31m-of this software and associated documentation files (the "Software"), to deal[m
[31m-in the Software without restriction, including without limitation the rights[m
[31m-to use, copy, modify, merge, publish, distribute, sublicense, and/or sell[m
[31m-copies of the Software, and to permit persons to whom the Software is[m
[31m-furnished to do so, subject to the following conditions:[m
[31m-[m
[31m-The above copyright notice and this permission notice shall be included in[m
[31m-all copies or substantial portions of the Software.[m
[31m-[m
[31m-THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR[m
[31m-IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,[m
[31m-FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE[m
[31m-AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER[m
[31m-LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,[m
[31m-OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN[m
[31m-THE SOFTWARE.[m
[1mdiff --git a/node_modules/express/node_modules/mime/README.md b/node_modules/express/node_modules/mime/README.md[m
[1mdeleted file mode 100644[m
[1mindex a157de1..0000000[m
[1m--- a/node_modules/express/node_modules/mime/README.md[m
[1m+++ /dev/null[m
[36m@@ -1,50 +0,0 @@[m
[31m-# mime[m
[31m-[m
[31m-Support for mapping between file extensions and MIME types.  This module uses the latest version of the Apache "mime.types" file (maps over 620 types to 800+ extensions).  It is also trivially easy to add your own types and extensions, should you need to do that.[m
[31m-[m
[31m-## Install[m
[31m-[m
[31m-Install with [npm](http://github.com/isaacs/npm):[m
[31m-[m
[31m-    npm install mime[m
[31m-[m
[31m-## API - Queries[m
[31m-[m
[31m-### mime.lookup(path)[m
[31m-Get the mime type associated with a file. This is method is case-insensitive. Everything in path up to and including the last '/' or '.' is ignored, so you can pass it paths, filenames, or extensions, like so:[m
[31m-[m
[31m-    var mime = require('mime');[m
[31m-[m
[31m-    mime.lookup('/path/to/file.txt');         // => 'text/plain'[m
[31m-    mime.lookup('file.txt');                  // => 'text/plain'[m
[31m-    mime.lookup('.txt');                      // => 'text/plain'[m
[31m-    mime.lookup('htm');                       // => 'text/html'[m
[31m-[m
[31m-### mime.extension(type) - lookup the default extension for type[m
[31m-[m
[31m-    mime.extension('text/html');                 // => 'html'[m
[31m-    mime.extension('application/octet-stream');  // => 'bin'[m
[31m-[m
[31m-### mime.charsets.lookup() - map mime-type to charset[m
[31m-[m
[31m-    mime.charsets.lookup('text/plain');        // => 'UTF-8'[m
[31m-[m
[31m-(The logic for charset lookups is pretty rudimentary.  Feel free to suggest improvements.)[m
[31m-[m
[31m-## API - Customizing[m
[31m-[m
[31m-The following APIs allow you to add your own type mappings within your project.  If you feel a type should be included as part of node-mime, see [requesting new types](https://github.com/bentomas/node-mime/wiki/Requesting-New-Types).[m
[31m-### mime.define() - Add custom mime/extension mappings[m
[31m-[m
[31m-    mime.define({[m
[31m-        'text/x-some-format': ['x-sf', 'x-sft', 'x-sfml'],[m
[31m-        'application/x-my-type': ['x-mt', 'x-mtt'],[m
[31m-        // etc ...[m
[31m-    });[m
[31m-[m
[31m-    mime.lookup('x-sft');                 // => 'text/x-some-format'[m
[31m-    mime.extension('text/x-some-format'); // => 'x-sf'[m
[31m-[m
[31m-### mime.load(filepath) - Load mappings from an Apache ".types" format file[m
[31m-[m
[31m-    mime.load('./my_project.types');[m
[1mdiff --git a/node_modules/express/node_modules/mime/mime.js b/node_modules/express/node_modules/mime/mime.js[m
[1mdeleted file mode 100644[m
[1mindex 5fac753..0000000[m
[1m--- a/node_modules/express/node_modules/mime/mime.js[m
[1m+++ /dev/null[m
[36m@@ -1,92 +0,0 @@[m
[31m-var path = require('path'),[m
[31m-    fs = require('fs');[m
[31m-[m
[31m-var mime = module.exports = {[m
[31m-  /** Map of extension to mime type */[m
[31m-  types: {},[m
[31m-[m
[31m-  /** Map of mime type to extension */[m
[31m-  extensions :{},[m
[31m-[m
[31m-  /**[m
[31m-   * Define mimetype -> extension mappings.  Each key is a mime-type that maps[m
[31m-   * to an array of extensions associated with the type.  The first extension is[m
[31m-   * used as the default extension for the type.[m
[31m-   *[m
[31m-   * e.g. mime.define({'audio/ogg', ['oga', 'ogg', 'spx']});[m
[31m-   *[m
[31m-   * @param map (Object) type definitions[m
[31m-   */[m
[31m-  define: function(map) {[m
[31m-    for (var type in map) {[m
[31m-      var exts = map[type];[m
[31m-[m
[31m-      for (var i = 0; i < exts.length; i++) {[m
[31m-        mime.types[exts[i]] = type;[m
[31m-      }[m
[31m-[m
[31m-      // Default extension is the first one we encounter[m
[31m-      if (!mime.extensions[type]) {[m
[31m-        mime.extensions[type] = exts[0];[m
[31m-      }[m
[31m-    }[m
[31m-  },[m
[31m-[m
[31m-  /**[m
[31m-   * Load an Apache2-style ".types" file[m
[31m-   *[m
[31m-   * This may be called multiple times (it's expected).  Where files declare[m
[31m-   * overlapping types/extensions, the last file wins.[m
[31m-   *[m
[31m-   * @param file (String) path of file to load.[m
[31m-   */[m
[31m-  load: function(file) {[m
[31m-    // Read file and split into lines[m
[31m-    var map = {},[m
[31m-        content = fs.readFileSync(file, 'ascii'),[m
[31m-        lines = content.split(/[\r\n]+/);[m
[31m-[m
[31m-    lines.forEach(function(line, lineno) {[m
[31m-      // Clean up whitespace/comments, and split into fields[m
[31m-      var fields = line.replace(/\s*#.*|^\s*|\s*$/g, '').split(/\s+/);[m
[31m-      map[fields.shift()] = fields;[m
[31m-    });[m
[31m-[m
[31m-    mime.define(map);[m
[31m-  },[m
[31m-[m
[31m-  /**[m
[31m-   * Lookup a mime type based on extension[m
[31m-   */[m
[31m-  lookup: function(path, fallback) {[m
[31m-    var ext = path.replace(/.*[\.\/]/, '').toLowerCase();[m
[31m-    return mime.types[ext] || fallback || mime.default_type;[m
[31m-  },[m
[31m-[m
[31m-  /**[m
[31m-   * Return file extension associated with a mime type[m
[31m-   */[m
[31m-  extension: function(mimeType) {[m
[31m-    return mime.extensions[mimeType];[m
[31m-  },[m
[31m-[m
[31m-  /**[m
[31m-   * Lookup a charset based on mime type.[m
[31m-   */[m
[31m-  charsets: {[m
[31m-    lookup: function (mimeType, fallback) {[m
[31m-      // Assume text types are utf8.  Modify mime logic as needed.[m
[31m-      return (/^text\//).test(mimeType) ? 'UTF-8' : fallback;[m
[31m-    }[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-// Load our local copy of[m
[31m-// http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types[m
[31m-mime.load(path.join(__dirname, 'types/mime.types'));[m
[31m-[m
[31m-// Overlay enhancements submitted by the node.js community[m
[31m-mime.load(path.join(__dirname, 'types/node.types'));[m
[31m-[m
[31m-// Set the default type[m
[31m-mime.default_type = mime.types.bin;[m
[1mdiff --git a/node_modules/express/node_modules/mime/package.json b/node_modules/express/node_modules/mime/package.json[m
[1mdeleted file mode 100644[m
[1mindex 85277b0..0000000[m
[1m--- a/node_modules/express/node_modules/mime/package.json[m
[1m+++ /dev/null[m
[36m@@ -1,22 +0,0 @@[m
[31m-{[m
[31m-  "author": {[m
[31m-    "name": "Robert Kieffer",[m
[31m-    "url": "http://github.com/broofa",[m
[31m-    "email": "robert@broofa.com"[m
[31m-  },[m
[31m-  "contributors": [[m
[31m-    {[m
[31m-      "name": "Benjamin Thomas",[m
[31m-      "url": "http://github.com/bentomas",[m
[31m-      "email": "benjamin@benjaminthomas.org"[m
[31m-    }[m
[31m-  ],[m
[31m-  "dependencies": {},[m
[31m-  "description": "A comprehensive library for mime-type mapping",[m
[31m-  "devDependencies": {"async_testing": ""},[m
[31m-  "keywords": ["util", "mime"],[m
[31m-  "main": "mime.js",[m
[31m-  "name": "mime",[m
[31m-  "repository": {"url": "http://github.com/bentomas/node-mime", "type": "git"},[m
[31m-  "version": "1.2.4"[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/mime/test.js b/node_modules/express/node_modules/mime/test.js[m
[1mdeleted file mode 100644[m
[1mindex b904895..0000000[m
[1m--- a/node_modules/express/node_modules/mime/test.js[m
[1m+++ /dev/null[m
[36m@@ -1,79 +0,0 @@[m
[31m-/**[m
[31m- * Requires the async_testing module[m
[31m- *[m
[31m- * Usage: node test.js[m
[31m- */[m
[31m-var mime = require('./mime');[m
[31m-exports["test mime lookup"] = function(test) {[m
[31m-  // easy[m
[31m-  test.equal('text/plain', mime.lookup('text.txt'));[m
[31m-[m
[31m-  // hidden file or multiple periods[m
[31m-  test.equal('text/plain', mime.lookup('.text.txt'));[m
[31m-[m
[31m-  // just an extension[m
[31m-  test.equal('text/plain', mime.lookup('.txt'));[m
[31m-[m
[31m-  // just an extension without a dot[m
[31m-  test.equal('text/plain', mime.lookup('txt'));[m
[31m-[m
[31m-  // default[m
[31m-  test.equal('application/octet-stream', mime.lookup('text.nope'));[m
[31m-[m
[31m-  // fallback[m
[31m-  test.equal('fallback', mime.lookup('text.fallback', 'fallback'));[m
[31m-[m
[31m-  test.finish();[m
[31m-};[m
[31m-[m
[31m-exports["test extension lookup"] = function(test) {[m
[31m-  // easy[m
[31m-  test.equal('txt', mime.extension(mime.types.text));[m
[31m-  test.equal('html', mime.extension(mime.types.htm));[m
[31m-  test.equal('bin', mime.extension('application/octet-stream'));[m
[31m-[m
[31m-  test.finish();[m
[31m-};[m
[31m-[m
[31m-exports["test mime lookup uppercase"] = function(test) {[m
[31m-  // easy[m
[31m-  test.equal('text/plain', mime.lookup('TEXT.TXT'));[m
[31m-[m
[31m-  // just an extension[m
[31m-  test.equal('text/plain', mime.lookup('.TXT'));[m
[31m-[m
[31m-  // just an extension without a dot[m
[31m-  test.equal('text/plain', mime.lookup('TXT'));[m
[31m-[m
[31m-  // default[m
[31m-  test.equal('application/octet-stream', mime.lookup('TEXT.NOPE'));[m
[31m-[m
[31m-  // fallback[m
[31m-  test.equal('fallback', mime.lookup('TEXT.FALLBACK', 'fallback'));[m
[31m-[m
[31m-  test.finish();[m
[31m-};[m
[31m-[m
[31m-exports["test custom types"] = function(test) {[m
[31m-  test.equal('application/octet-stream', mime.lookup('file.buffer'));[m
[31m-  test.equal('audio/mp4', mime.lookup('file.m4a'));[m
[31m-[m
[31m-  test.finish();[m
[31m-};[m
[31m-[m
[31m-exports["test charset lookup"] = function(test) {[m
[31m-  // easy[m
[31m-  test.equal('UTF-8', mime.charsets.lookup('text/plain'));[m
[31m-[m
[31m-  // none[m
[31m-  test.ok(typeof mime.charsets.lookup(mime.types.js) == 'undefined');[m
[31m-[m
[31m-  // fallback[m
[31m-  test.equal('fallback', mime.charsets.lookup('application/octet-stream', 'fallback'));[m
[31m-[m
[31m-  test.finish();[m
[31m-};[m
[31m-[m
[31m-if (module == require.main) {[m
[31m-  require('async_testing').run(__filename, process.ARGV);[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/mime/types/mime.types b/node_modules/express/node_modules/mime/types/mime.types[m
[1mdeleted file mode 100644[m
[1mindex 6a90929..0000000[m
[1m--- a/node_modules/express/node_modules/mime/types/mime.types[m
[1m+++ /dev/null[m
[36m@@ -1,1479 +0,0 @@[m
[31m-# This file maps Internet media types to unique file extension(s).[m
[31m-# Although created for httpd, this file is used by many software systems[m
[31m-# and has been placed in the public domain for unlimited redisribution.[m
[31m-#[m
[31m-# The table below contains both registered and (common) unregistered types.[m
[31m-# A type that has no unique extension can be ignored -- they are listed[m
[31m-# here to guide configurations toward known types and to make it easier to[m
[31m-# identify "new" types.  File extensions are also commonly used to indicate[m
[31m-# content languages and encodings, so choose them carefully.[m
[31m-#[m
[31m-# Internet media types should be registered as described in RFC 4288.[m
[31m-# The registry is at <http://www.iana.org/assignments/media-types/>.[m
[31m-#[m
[31m-# MIME type (lowercased)			Extensions[m
[31m-# ============================================	==========[m
[31m-# application/1d-interleaved-parityfec[m
[31m-# application/3gpp-ims+xml[m
[31m-# application/activemessage[m
[31m-application/andrew-inset			ez[m
[31m-# application/applefile[m
[31m-application/applixware				aw[m
[31m-application/atom+xml				atom[m
[31m-application/atomcat+xml				atomcat[m
[31m-# application/atomicmail[m
[31m-application/atomsvc+xml				atomsvc[m
[31m-# application/auth-policy+xml[m
[31m-# application/batch-smtp[m
[31m-# application/beep+xml[m
[31m-# application/cals-1840[m
[31m-application/ccxml+xml				ccxml[m
[31m-application/cdmi-capability			cdmia[m
[31m-application/cdmi-container			cdmic[m
[31m-application/cdmi-domain				cdmid[m
[31m-application/cdmi-object				cdmio[m
[31m-application/cdmi-queue				cdmiq[m
[31m-# application/cea-2018+xml[m
[31m-# application/cellml+xml[m
[31m-# application/cfw[m
[31m-# application/cnrp+xml[m
[31m-# application/commonground[m
[31m-# application/conference-info+xml[m
[31m-# application/cpl+xml[m
[31m-# application/csta+xml[m
[31m-# application/cstadata+xml[m
[31m-application/cu-seeme				cu[m
[31m-# application/cybercash[m
[31m-application/davmount+xml			davmount[m
[31m-# application/dca-rft[m
[31m-# application/dec-dx[m
[31m-# application/dialog-info+xml[m
[31m-# application/dicom[m
[31m-# application/dns[m
[31m-# application/dskpp+xml[m
[31m-application/dssc+der				dssc[m
[31m-application/dssc+xml				xdssc[m
[31m-# application/dvcs[m
[31m-application/ecmascript				ecma[m
[31m-# application/edi-consent[m
[31m-# application/edi-x12[m
[31m-# application/edifact[m
[31m-application/emma+xml				emma[m
[31m-# application/epp+xml[m
[31m-application/epub+zip				epub[m
[31m-# application/eshop[m
[31m-# application/example[m
[31m-application/exi					exi[m
[31m-# application/fastinfoset[m
[31m-# application/fastsoap[m
[31m-# application/fits[m
[31m-application/font-tdpfr				pfr[m
[31m-# application/framework-attributes+xml[m
[31m-# application/h224[m
[31m-# application/held+xml[m
[31m-# application/http[m
[31m-application/hyperstudio				stk[m
[31m-# application/ibe-key-request+xml[m
[31m-# application/ibe-pkg-reply+xml[m
[31m-# application/ibe-pp-data[m
[31m-# application/iges[m
[31m-# application/im-iscomposing+xml[m
[31m-# application/index[m
[31m-# application/index.cmd[m
[31m-# application/index.obj[m
[31m-# application/index.response[m
[31m-# application/index.vnd[m
[31m-# application/iotp[m
[31m-application/ipfix				ipfix[m
[31m-# application/ipp[m
[31m-# application/isup[m
[31m-application/java-archive			jar[m
[31m-application/java-serialized-object		ser[m
[31m-application/java-vm				class[m
[31m-application/javascript				js[m
[31m-application/json				json[m
[31m-# application/kpml-request+xml[m
[31m-# application/kpml-response+xml[m
[31m-application/lost+xml				lostxml[m
[31m-application/mac-binhex40			hqx[m
[31m-application/mac-compactpro			cpt[m
[31m-# application/macwriteii[m
[31m-application/mads+xml				mads[m
[31m-application/marc				mrc[m
[31m-application/marcxml+xml				mrcx[m
[31m-application/mathematica				ma nb mb[m
[31m-# application/mathml-content+xml[m
[31m-# application/mathml-presentation+xml[m
[31m-application/mathml+xml				mathml[m
[31m-# application/mbms-associated-procedure-description+xml[m
[31m-# application/mbms-deregister+xml[m
[31m-# application/mbms-envelope+xml[m
[31m-# application/mbms-msk+xml[m
[31m-# application/mbms-msk-response+xml[m
[31m-# application/mbms-protection-description+xml[m
[31m-# application/mbms-reception-report+xml[m
[31m-# application/mbms-register+xml[m
[31m-# application/mbms-register-response+xml[m
[31m-# application/mbms-user-service-description+xml[m
[31m-application/mbox				mbox[m
[31m-# application/media_control+xml[m
[31m-application/mediaservercontrol+xml		mscml[m
[31m-application/metalink4+xml			meta4[m
[31m-application/mets+xml				mets[m
[31m-# application/mikey[m
[31m-application/mods+xml				mods[m
[31m-# application/moss-keys[m
[31m-# application/moss-signature[m
[31m-# application/mosskey-data[m
[31m-# application/mosskey-request[m
[31m-application/mp21				m21 mp21[m
[31m-application/mp4					mp4s[m
[31m-# application/mpeg4-generic[m
[31m-# application/mpeg4-iod[m
[31m-# application/mpeg4-iod-xmt[m
[31m-# application/msc-ivr+xml[m
[31m-# application/msc-mixer+xml[m
[31m-application/msword				doc dot[m
[31m-application/mxf					mxf[m
[31m-# application/nasdata[m
[31m-# application/news-checkgroups[m
[31m-# application/news-groupinfo[m
[31m-# application/news-transmission[m
[31m-# application/nss[m
[31m-# application/ocsp-request[m
[31m-# application/ocsp-response[m
[31m-application/octet-stream	bin dms lha lrf lzh so iso dmg dist distz pkg bpk dump elc deploy[m
[31m-application/oda					oda[m
[31m-application/oebps-package+xml			opf[m
[31m-application/ogg					ogx[m
[31m-application/onenote				onetoc onetoc2 onetmp onepkg[m
[31m-# application/parityfec[m
[31m-application/patch-ops-error+xml			xer[m
[31m-application/pdf					pdf[m
[31m-application/pgp-encrypted			pgp[m
[31m-# application/pgp-keys[m
[31m-application/pgp-signature			asc sig[m
[31m-application/pics-rules				prf[m
[31m-# application/pidf+xml[m
[31m-# application/pidf-diff+xml[m
[31m-application/pkcs10				p10[m
[31m-application/pkcs7-mime				p7m p7c[m
[31m-application/pkcs7-signature			p7s[m
[31m-application/pkcs8				p8[m
[31m-application/pkix-attr-cert			ac[m
[31m-application/pkix-cert				cer[m
[31m-application/pkix-crl				crl[m
[31m-application/pkix-pkipath			pkipath[m
[31m-application/pkixcmp				pki[m
[31m-application/pls+xml				pls[m
[31m-# application/poc-settings+xml[m
[31m-application/postscript				ai eps ps[m
[31m-# application/prs.alvestrand.titrax-sheet[m
[31m-application/prs.cww				cww[m
[31m-# application/prs.nprend[m
[31m-# application/prs.plucker[m
[31m-# application/prs.rdf-xml-crypt[m
[31m-# application/prs.xsf+xml[m
[31m-application/pskc+xml				pskcxml[m
[31m-# application/qsig[m
[31m-application/rdf+xml				rdf[m
[31m-application/reginfo+xml				rif[m
[31m-application/relax-ng-compact-syntax		rnc[m
[31m-# application/remote-printing[m
[31m-application/resource-lists+xml			rl[m
[31m-application/resource-lists-diff+xml		rld[m
[31m-# application/riscos[m
[31m-# application/rlmi+xml[m
[31m-application/rls-services+xml			rs[m
[31m-application/rsd+xml				rsd[m
[31m-application/rss+xml				rss[m
[31m-application/rtf					rtf[m
[31m-# application/rtx[m
[31m-# application/samlassertion+xml[m
[31m-# application/samlmetadata+xml[m
[31m-application/sbml+xml				sbml[m
[31m-application/scvp-cv-request			scq[m
[31m-application/scvp-cv-response			scs[m
[31m-application/scvp-vp-request			spq[m
[31m-application/scvp-vp-response			spp[m
[31m-application/sdp					sdp[m
[31m-# application/set-payment[m
[31m-application/set-payment-initiation		setpay[m
[31m-# application/set-registration[m
[31m-application/set-registration-initiation		setreg[m
[31m-# application/sgml[m
[31m-# application/sgml-open-catalog[m
[31m-application/shf+xml				shf[m
[31m-# application/sieve[m
[31m-# application/simple-filter+xml[m
[31m-# application/simple-message-summary[m
[31m-# application/simplesymbolcontainer[m
[31m-# application/slate[m
[31m-# application/smil[m
[31m-application/smil+xml				smi smil[m
[31m-# application/soap+fastinfoset[m
[31m-# application/soap+xml[m
[31m-application/sparql-query			rq[m
[31m-application/sparql-results+xml			srx[m
[31m-# application/spirits-event+xml[m
[31m-application/srgs				gram[m
[31m-application/srgs+xml				grxml[m
[31m-application/sru+xml				sru[m
[31m-application/ssml+xml				ssml[m
[31m-# application/tamp-apex-update[m
[31m-# application/tamp-apex-update-confirm[m
[31m-# application/tamp-community-update[m
[31m-# application/tamp-community-update-confirm[m
[31m-# application/tamp-error[m
[31m-# application/tamp-sequence-adjust[m
[31m-# application/tamp-sequence-adjust-confirm[m
[31m-# application/tamp-status-query[m
[31m-# application/tamp-status-response[m
[31m-# application/tamp-update[m
[31m-# application/tamp-update-confirm[m
[31m-application/tei+xml				tei teicorpus[m
[31m-application/thraud+xml				tfi[m
[31m-# application/timestamp-query[m
[31m-# application/timestamp-reply[m
[31m-application/timestamped-data			tsd[m
[31m-# application/tve-trigger[m
[31m-# application/ulpfec[m
[31m-# application/vemmi[m
[31m-# application/vividence.scriptfile[m
[31m-# application/vnd.3gpp.bsf+xml[m
[31m-application/vnd.3gpp.pic-bw-large		plb[m
[31m-application/vnd.3gpp.pic-bw-small		psb[m
[31m-application/vnd.3gpp.pic-bw-var			pvb[m
[31m-# application/vnd.3gpp.sms[m
[31m-# application/vnd.3gpp2.bcmcsinfo+xml[m
[31m-# application/vnd.3gpp2.sms[m
[31m-application/vnd.3gpp2.tcap			tcap[m
[31m-application/vnd.3m.post-it-notes		pwn[m
[31m-application/vnd.accpac.simply.aso		aso[m
[31m-application/vnd.accpac.simply.imp		imp[m
[31m-application/vnd.acucobol			acu[m
[31m-application/vnd.acucorp				atc acutc[m
[31m-application/vnd.adobe.air-application-installer-package+zip	air[m
[31m-application/vnd.adobe.fxp			fxp fxpl[m
[31m-# application/vnd.adobe.partial-upload[m
[31m-application/vnd.adobe.xdp+xml			xdp[m
[31m-application/vnd.adobe.xfdf			xfdf[m
[31m-# application/vnd.aether.imp[m
[31m-# application/vnd.ah-barcode[m
[31m-application/vnd.ahead.space			ahead[m
[31m-application/vnd.airzip.filesecure.azf		azf[m
[31m-application/vnd.airzip.filesecure.azs		azs[m
[31m-application/vnd.amazon.ebook			azw[m
[31m-application/vnd.americandynamics.acc		acc[m
[31m-application/vnd.amiga.ami			ami[m
[31m-# application/vnd.amundsen.maze+xml[m
[31m-application/vnd.android.package-archive		apk[m
[31m-application/vnd.anser-web-certificate-issue-initiation	cii[m
[31m-application/vnd.anser-web-funds-transfer-initiation	fti[m
[31m-application/vnd.antix.game-component		atx[m
[31m-application/vnd.apple.installer+xml		mpkg[m
[31m-application/vnd.apple.mpegurl			m3u8[m
[31m-# application/vnd.arastra.swi[m
[31m-application/vnd.aristanetworks.swi		swi[m
[31m-application/vnd.audiograph			aep[m
[31m-# application/vnd.autopackage[m
[31m-# application/vnd.avistar+xml[m
[31m-application/vnd.blueice.multipass		mpm[m
[31m-# application/vnd.bluetooth.ep.oob[m
[31m-application/vnd.bmi				bmi[m
[31m-application/vnd.businessobjects			rep[m
[31m-# application/vnd.cab-jscript[m
[31m-# application/vnd.canon-cpdl[m
[31m-# application/vnd.canon-lips[m
[31m-# application/vnd.cendio.thinlinc.clientconf[m
[31m-application/vnd.chemdraw+xml			cdxml[m
[31m-application/vnd.chipnuts.karaoke-mmd		mmd[m
[31m-application/vnd.cinderella			cdy[m
[31m-# application/vnd.cirpack.isdn-ext[m
[31m-application/vnd.claymore			cla[m
[31m-application/vnd.cloanto.rp9			rp9[m
[31m-application/vnd.clonk.c4group			c4g c4d c4f c4p c4u[m
[31m-application/vnd.cluetrust.cartomobile-config		c11amc[m
[31m-application/vnd.cluetrust.cartomobile-config-pkg	c11amz[m
[31m-# application/vnd.commerce-battelle[m
[31m-application/vnd.commonspace			csp[m
[31m-application/vnd.contact.cmsg			cdbcmsg[m
[31m-application/vnd.cosmocaller			cmc[m
[31m-application/vnd.crick.clicker			clkx[m
[31m-application/vnd.crick.clicker.keyboard		clkk[m
[31m-application/vnd.crick.clicker.palette		clkp[m
[31m-application/vnd.crick.clicker.template		clkt[m
[31m-application/vnd.crick.clicker.wordbank		clkw[m
[31m-application/vnd.criticaltools.wbs+xml		wbs[m
[31m-application/vnd.ctc-posml			pml[m
[31m-# application/vnd.ctct.ws+xml[m
[31m-# application/vnd.cups-pdf[m
[31m-# application/vnd.cups-postscript[m
[31m-application/vnd.cups-ppd			ppd[m
[31m-# application/vnd.cups-raster[m
[31m-# application/vnd.cups-raw[m
[31m-application/vnd.curl.car			car[m
[31m-application/vnd.curl.pcurl			pcurl[m
[31m-# application/vnd.cybank[m
[31m-application/vnd.data-vision.rdz			rdz[m
[31m-application/vnd.dece.data			uvf uvvf uvd uvvd[m
[31m-application/vnd.dece.ttml+xml			uvt uvvt[m
[31m-application/vnd.dece.unspecified		uvx uvvx[m
[31m-application/vnd.denovo.fcselayout-link		fe_launch[m
[31m-# application/vnd.dir-bi.plate-dl-nosuffix[m
[31m-application/vnd.dna				dna[m
[31m-application/vnd.dolby.mlp			mlp[m
[31m-# application/vnd.dolby.mobile.1[m
[31m-# application/vnd.dolby.mobile.2[m
[31m-application/vnd.dpgraph				dpg[m
[31m-application/vnd.dreamfactory			dfac[m
[31m-application/vnd.dvb.ait				ait[m
[31m-# application/vnd.dvb.dvbj[m
[31m-# application/vnd.dvb.esgcontainer[m
[31m-# application/vnd.dvb.ipdcdftnotifaccess[m
[31m-# application/vnd.dvb.ipdcesgaccess[m
[31m-# application/vnd.dvb.ipdcesgaccess2[m
[31m-# application/vnd.dvb.ipdcesgpdd[m
[31m-# application/vnd.dvb.ipdcroaming[m
[31m-# application/vnd.dvb.iptv.alfec-base[m
[31m-# application/vnd.dvb.iptv.alfec-enhancement[m
[31m-# application/vnd.dvb.notif-aggregate-root+xml[m
[31m-# application/vnd.dvb.notif-container+xml[m
[31m-# application/vnd.dvb.notif-generic+xml[m
[31m-# application/vnd.dvb.notif-ia-msglist+xml[m
[31m-# application/vnd.dvb.notif-ia-registration-request+xml[m
[31m-# application/vnd.dvb.notif-ia-registration-response+xml[m
[31m-# application/vnd.dvb.notif-init+xml[m
[31m-# application/vnd.dvb.pfr[m
[31m-application/vnd.dvb.service			svc[m
[31m-# application/vnd.dxr[m
[31m-application/vnd.dynageo				geo[m
[31m-# application/vnd.easykaraoke.cdgdownload[m
[31m-# application/vnd.ecdis-update[m
[31m-application/vnd.ecowin.chart			mag[m
[31m-# application/vnd.ecowin.filerequest[m
[31m-# application/vnd.ecowin.fileupdate[m
[31m-# application/vnd.ecowin.series[m
[31m-# application/vnd.ecowin.seriesrequest[m
[31m-# application/vnd.ecowin.seriesupdate[m
[31m-# application/vnd.emclient.accessrequest+xml[m
[31m-application/vnd.enliven				nml[m
[31m-application/vnd.epson.esf			esf[m
[31m-application/vnd.epson.msf			msf[m
[31m-application/vnd.epson.quickanime		qam[m
[31m-application/vnd.epson.salt			slt[m
[31m-application/vnd.epson.ssf			ssf[m
[31m-# application/vnd.ericsson.quickcall[m
[31m-application/vnd.eszigno3+xml			es3 et3[m
[31m-# application/vnd.etsi.aoc+xml[m
[31m-# application/vnd.etsi.cug+xml[m
[31m-# application/vnd.etsi.iptvcommand+xml[m
[31m-# application/vnd.etsi.iptvdiscovery+xml[m
[31m-# application/vnd.etsi.iptvprofile+xml[m
[31m-# application/vnd.etsi.iptvsad-bc+xml[m
[31m-# application/vnd.etsi.iptvsad-cod+xml[m
[31m-# application/vnd.etsi.iptvsad-npvr+xml[m
[31m-# application/vnd.etsi.iptvservice+xml[m
[31m-# application/vnd.etsi.iptvsync+xml[m
[31m-# application/vnd.etsi.iptvueprofile+xml[m
[31m-# application/vnd.etsi.mcid+xml[m
[31m-# application/vnd.etsi.overload-control-policy-dataset+xml[m
[31m-# application/vnd.etsi.sci+xml[m
[31m-# application/vnd.etsi.simservs+xml[m
[31m-# application/vnd.etsi.tsl+xml[m
[31m-# application/vnd.etsi.tsl.der[m
[31m-# application/vnd.eudora.data[m
[31m-application/vnd.ezpix-album			ez2[m
[31m-application/vnd.ezpix-package			ez3[m
[31m-# application/vnd.f-secure.mobile[m
[31m-application/vnd.fdf				fdf[m
[31m-application/vnd.fdsn.mseed			mseed[m
[31m-application/vnd.fdsn.seed			seed dataless[m
[31m-# application/vnd.ffsns[m
[31m-# application/vnd.fints[m
[31m-application/vnd.flographit			gph[m
[31m-application/vnd.fluxtime.clip			ftc[m
[31m-# application/vnd.font-fontforge-sfd[m
[31m-application/vnd.framemaker			fm frame maker book[m
[31m-application/vnd.frogans.fnc			fnc[m
[31m-application/vnd.frogans.ltf			ltf[m
[31m-application/vnd.fsc.weblaunch			fsc[m
[31m-application/vnd.fujitsu.oasys			oas[m
[31m-application/vnd.fujitsu.oasys2			oa2[m
[31m-application/vnd.fujitsu.oasys3			oa3[m
[31m-application/vnd.fujitsu.oasysgp			fg5[m
[31m-application/vnd.fujitsu.oasysprs		bh2[m
[31m-# application/vnd.fujixerox.art-ex[m
[31m-# application/vnd.fujixerox.art4[m
[31m-# application/vnd.fujixerox.hbpl[m
[31m-application/vnd.fujixerox.ddd			ddd[m
[31m-application/vnd.fujixerox.docuworks		xdw[m
[31m-application/vnd.fujixerox.docuworks.binder	xbd[m
[31m-# application/vnd.fut-misnet[m
[31m-application/vnd.fuzzysheet			fzs[m
[31m-application/vnd.genomatix.tuxedo		txd[m
[31m-# application/vnd.geocube+xml[m
[31m-application/vnd.geogebra.file			ggb[m
[31m-application/vnd.geogebra.tool			ggt[m
[31m-application/vnd.geometry-explorer		gex gre[m
[31m-application/vnd.geonext				gxt[m
[31m-application/vnd.geoplan				g2w[m
[31m-application/vnd.geospace			g3w[m
[31m-# application/vnd.globalplatform.card-content-mgt[m
[31m-# application/vnd.globalplatform.card-content-mgt-response[m
[31m-application/vnd.gmx				gmx[m
[31m-application/vnd.google-earth.kml+xml		kml[m
[31m-application/vnd.google-earth.kmz		kmz[m
[31m-application/vnd.grafeq				gqf gqs[m
[31m-# application/vnd.gridmp[m
[31m-application/vnd.groove-account			gac[m
[31m-application/vnd.groove-help			ghf[m
[31m-application/vnd.groove-identity-message		gim[m
[31m-application/vnd.groove-injector			grv[m
[31m-application/vnd.groove-tool-message		gtm[m
[31m-application/vnd.groove-tool-template		tpl[m
[31m-application/vnd.groove-vcard			vcg[m
[31m-application/vnd.hal+xml				hal[m
[31m-application/vnd.handheld-entertainment+xml	zmm[m
[31m-application/vnd.hbci				hbci[m
[31m-# application/vnd.hcl-bireports[m
[31m-application/vnd.hhe.lesson-player		les[m
[31m-application/vnd.hp-hpgl				hpgl[m
[31m-application/vnd.hp-hpid				hpid[m
[31m-application/vnd.hp-hps				hps[m
[31m-application/vnd.hp-jlyt				jlt[m
[31m-application/vnd.hp-pcl				pcl[m
[31m-application/vnd.hp-pclxl			pclxl[m
[31m-# application/vnd.httphone[m
[31m-application/vnd.hydrostatix.sof-data		sfd-hdstx[m
[31m-application/vnd.hzn-3d-crossword		x3d[m
[31m-# application/vnd.ibm.afplinedata[m
[31m-# application/vnd.ibm.electronic-media[m
[31m-application/vnd.ibm.minipay			mpy[m
[31m-application/vnd.ibm.modcap			afp listafp list3820[m
[31m-application/vnd.ibm.rights-management		irm[m
[31m-application/vnd.ibm.secure-container		sc[m
[31m-application/vnd.iccprofile			icc icm[m
[31m-application/vnd.igloader			igl[m
[31m-application/vnd.immervision-ivp			ivp[m
[31m-application/vnd.immervision-ivu			ivu[m
[31m-# application/vnd.informedcontrol.rms+xml[m
[31m-# application/vnd.informix-visionary[m
[31m-# application/vnd.infotech.project[m
[31m-# application/vnd.infotech.project+xml[m
[31m-application/vnd.insors.igm			igm[m
[31m-application/vnd.intercon.formnet		xpw xpx[m
[31m-application/vnd.intergeo			i2g[m
[31m-# application/vnd.intertrust.digibox[m
[31m-# application/vnd.intertrust.nncp[m
[31m-application/vnd.intu.qbo			qbo[m
[31m-application/vnd.intu.qfx			qfx[m
[31m-# application/vnd.iptc.g2.conceptitem+xml[m
[31m-# application/vnd.iptc.g2.knowledgeitem+xml[m
[31m-# application/vnd.iptc.g2.newsitem+xml[m
[31m-# application/vnd.iptc.g2.packageitem+xml[m
[31m-application/vnd.ipunplugged.rcprofile		rcprofile[m
[31m-application/vnd.irepository.package+xml		irp[m
[31m-application/vnd.is-xpr				xpr[m
[31m-application/vnd.isac.fcs			fcs[m
[31m-application/vnd.jam				jam[m
[31m-# application/vnd.japannet-directory-service[m
[31m-# application/vnd.japannet-jpnstore-wakeup[m
[31m-# application/vnd.japannet-payment-wakeup[m
[31m-# application/vnd.japannet-registration[m
[31m-# application/vnd.japannet-registration-wakeup[m
[31m-# application/vnd.japannet-setstore-wakeup[m
[31m-# application/vnd.japannet-verification[m
[31m-# application/vnd.japannet-verification-wakeup[m
[31m-application/vnd.jcp.javame.midlet-rms		rms[m
[31m-application/vnd.jisp				jisp[m
[31m-application/vnd.joost.joda-archive		joda[m
[31m-application/vnd.kahootz				ktz ktr[m
[31m-application/vnd.kde.karbon			karbon[m
[31m-application/vnd.kde.kchart			chrt[m
[31m-application/vnd.kde.kformula			kfo[m
[31m-application/vnd.kde.kivio			flw[m
[31m-application/vnd.kde.kontour			kon[m
[31m-application/vnd.kde.kpresenter			kpr kpt[m
[31m-application/vnd.kde.kspread			ksp[m
[31m-application/vnd.kde.kword			kwd kwt[m
[31m-application/vnd.kenameaapp			htke[m
[31m-application/vnd.kidspiration			kia[m
[31m-application/vnd.kinar				kne knp[m
[31m-application/vnd.koan				skp skd skt skm[m
[31m-application/vnd.kodak-descriptor		sse[m
[31m-application/vnd.las.las+xml			lasxml[m
[31m-# application/vnd.liberty-request+xml[m
[31m-application/vnd.llamagraphics.life-balance.desktop	lbd[m
[31m-application/vnd.llamagraphics.life-balance.exchange+xml	lbe[m
[31m-application/vnd.lotus-1-2-3			123[m
[31m-application/vnd.lotus-approach			apr[m
[31m-application/vnd.lotus-freelance			pre[m
[31m-application/vnd.lotus-notes			nsf[m
[31m-application/vnd.lotus-organizer			org[m
[31m-application/vnd.lotus-screencam			scm[m
[31m-application/vnd.lotus-wordpro			lwp[m
[31m-application/vnd.macports.portpkg		portpkg[m
[31m-# application/vnd.marlin.drm.actiontoken+xml[m
[31m-# application/vnd.marlin.drm.conftoken+xml[m
[31m-# application/vnd.marlin.drm.license+xml[m
[31m-# application/vnd.marlin.drm.mdcf[m
[31m-application/vnd.mcd				mcd[m
[31m-application/vnd.medcalcdata			mc1[m
[31m-application/vnd.mediastation.cdkey		cdkey[m
[31m-# application/vnd.meridian-slingshot[m
[31m-application/vnd.mfer				mwf[m
[31m-application/vnd.mfmp				mfm[m
[31m-application/vnd.micrografx.flo			flo[m
[31m-application/vnd.micrografx.igx			igx[m
[31m-application/vnd.mif				mif[m
[31m-# application/vnd.minisoft-hp3000-save[m
[31m-# application/vnd.mitsubishi.misty-guard.trustweb[m
[31m-application/vnd.mobius.daf			daf[m
[31m-application/vnd.mobius.dis			dis[m
[31m-application/vnd.mobius.mbk			mbk[m
[31m-application/vnd.mobius.mqy			mqy[m
[31m-application/vnd.mobius.msl			msl[m
[31m-application/vnd.mobius.plc			plc[m
[31m-application/vnd.mobius.txf			txf[m
[31m-application/vnd.mophun.application		mpn[m
[31m-application/vnd.mophun.certificate		mpc[m
[31m-# application/vnd.motorola.flexsuite[m
[31m-# application/vnd.motorola.flexsuite.adsi[m
[31m-# application/vnd.motorola.flexsuite.fis[m
[31m-# application/vnd.motorola.flexsuite.gotap[m
[31m-# application/vnd.motorola.flexsuite.kmr[m
[31m-# application/vnd.motorola.flexsuite.ttc[m
[31m-# application/vnd.motorola.flexsuite.wem[m
[31m-# application/vnd.motorola.iprm[m
[31m-application/vnd.mozilla.xul+xml			xul[m
[31m-application/vnd.ms-artgalry			cil[m
[31m-# application/vnd.ms-asf[m
[31m-application/vnd.ms-cab-compressed		cab[m
[31m-application/vnd.ms-excel			xls xlm xla xlc xlt xlw[m
[31m-application/vnd.ms-excel.addin.macroenabled.12		xlam[m
[31m-application/vnd.ms-excel.sheet.binary.macroenabled.12	xlsb[m
[31m-application/vnd.ms-excel.sheet.macroenabled.12		xlsm[m
[31m-application/vnd.ms-excel.template.macroenabled.12	xltm[m
[31m-application/vnd.ms-fontobject			eot[m
[31m-application/vnd.ms-htmlhelp			chm[m
[31m-application/vnd.ms-ims				ims[m
[31m-application/vnd.ms-lrm				lrm[m
[31m-# application/vnd.ms-office.activex+xml[m
[31m-application/vnd.ms-officetheme			thmx[m
[31m-application/vnd.ms-pki.seccat			cat[m
[31m-application/vnd.ms-pki.stl			stl[m
[31m-# application/vnd.ms-playready.initiator+xml[m
[31m-application/vnd.ms-powerpoint			ppt pps pot[m
[31m-application/vnd.ms-powerpoint.addin.macroenabled.12		ppam[m
[31m-application/vnd.ms-powerpoint.presentation.macroenabled.12	pptm[m
[31m-application/vnd.ms-powerpoint.slide.macroenabled.12		sldm[m
[31m-application/vnd.ms-powerpoint.slideshow.macroenabled.12		ppsm[m
[31m-application/vnd.ms-powerpoint.template.macroenabled.12		potm[m
[31m-application/vnd.ms-project			mpp mpt[m
[31m-# application/vnd.ms-tnef[m
[31m-# application/vnd.ms-wmdrm.lic-chlg-req[m
[31m-# application/vnd.ms-wmdrm.lic-resp[m
[31m-# application/vnd.ms-wmdrm.meter-chlg-req[m
[31m-# application/vnd.ms-wmdrm.meter-resp[m
[31m-application/vnd.ms-word.document.macroenabled.12	docm[m
[31m-application/vnd.ms-word.template.macroenabled.12	dotm[m
[31m-application/vnd.ms-works			wps wks wcm wdb[m
[31m-application/vnd.ms-wpl				wpl[m
[31m-application/vnd.ms-xpsdocument			xps[m
[31m-application/vnd.mseq				mseq[m
[31m-# application/vnd.msign[m
[31m-# application/vnd.multiad.creator[m
[31m-# application/vnd.multiad.creator.cif[m
[31m-# application/vnd.music-niff[m
[31m-application/vnd.musician			mus[m
[31m-application/vnd.muvee.style			msty[m
[31m-# application/vnd.ncd.control[m
[31m-# application/vnd.ncd.reference[m
[31m-# application/vnd.nervana[m
[31m-# application/vnd.netfpx[m
[31m-application/vnd.neurolanguage.nlu		nlu[m
[31m-application/vnd.noblenet-directory		nnd[m
[31m-application/vnd.noblenet-sealer			nns[m
[31m-application/vnd.noblenet-web			nnw[m
[31m-# application/vnd.nokia.catalogs[m
[31m-# application/vnd.nokia.conml+wbxml[m
[31m-# application/vnd.nokia.conml+xml[m
[31m-# application/vnd.nokia.isds-radio-presets[m
[31m-# application/vnd.nokia.iptv.config+xml[m
[31m-# application/vnd.nokia.landmark+wbxml[m
[31m-# application/vnd.nokia.landmark+xml[m
[31m-# application/vnd.nokia.landmarkcollection+xml[m
[31m-# application/vnd.nokia.n-gage.ac+xml[m
[31m-application/vnd.nokia.n-gage.data		ngdat[m
[31m-application/vnd.nokia.n-gage.symbian.install	n-gage[m
[31m-# application/vnd.nokia.ncd[m
[31m-# application/vnd.nokia.pcd+wbxml[m
[31m-# application/vnd.nokia.pcd+xml[m
[31m-application/vnd.nokia.radio-preset		rpst[m
[31m-application/vnd.nokia.radio-presets		rpss[m
[31m-application/vnd.novadigm.edm			edm[m
[31m-application/vnd.novadigm.edx			edx[m
[31m-application/vnd.novadigm.ext			ext[m
[31m-# application/vnd.ntt-local.file-transfer[m
[31m-# application/vnd.ntt-local.sip-ta_remote[m
[31m-# application/vnd.ntt-local.sip-ta_tcp_stream[m
[31m-application/vnd.oasis.opendocument.chart		odc[m
[31m-application/vnd.oasis.opendocument.chart-template	otc[m
[31m-application/vnd.oasis.opendocument.database		odb[m
[31m-application/vnd.oasis.opendocument.formula		odf[m
[31m-application/vnd.oasis.opendocument.formula-template	odft[m
[31m-application/vnd.oasis.opendocument.graphics		odg[m
[31m-application/vnd.oasis.opendocument.graphics-template	otg[m
[31m-application/vnd.oasis.opendocument.image		odi[m
[31m-application/vnd.oasis.opendocument.image-template	oti[m
[31m-application/vnd.oasis.opendocument.presentation		odp[m
[31m-application/vnd.oasis.opendocument.presentation-template	otp[m
[31m-application/vnd.oasis.opendocument.spreadsheet		ods[m
[31m-application/vnd.oasis.opendocument.spreadsheet-template	ots[m
[31m-application/vnd.oasis.opendocument.text			odt[m
[31m-application/vnd.oasis.opendocument.text-master		odm[m
[31m-application/vnd.oasis.opendocument.text-template	ott[m
[31m-application/vnd.oasis.opendocument.text-web		oth[m
[31m-# application/vnd.obn[m
[31m-# application/vnd.oipf.contentaccessdownload+xml[m
[31m-# application/vnd.oipf.contentaccessstreaming+xml[m
[31m-# application/vnd.oipf.cspg-hexbinary[m
[31m-# application/vnd.oipf.dae.svg+xml[m
[31m-# application/vnd.oipf.dae.xhtml+xml[m
[31m-# application/vnd.oipf.mippvcontrolmessage+xml[m
[31m-# application/vnd.oipf.pae.gem[m
[31m-# application/vnd.oipf.spdiscovery+xml[m
[31m-# application/vnd.oipf.spdlist+xml[m
[31m-# application/vnd.oipf.ueprofile+xml[m
[31m-# application/vnd.oipf.userprofile+xml[m
[31m-application/vnd.olpc-sugar			xo[m
[31m-# application/vnd.oma-scws-config[m
[31m-# application/vnd.oma-scws-http-request[m
[31m-# application/vnd.oma-scws-http-response[m
[31m-# application/vnd.oma.bcast.associated-procedure-parameter+xml[m
[31m-# application/vnd.oma.bcast.drm-trigger+xml[m
[31m-# application/vnd.oma.bcast.imd+xml[m
[31m-# application/vnd.oma.bcast.ltkm[m
[31m-# application/vnd.oma.bcast.notification+xml[m
[31m-# application/vnd.oma.bcast.provisioningtrigger[m
[31m-# application/vnd.oma.bcast.sgboot[m
[31m-# application/vnd.oma.bcast.sgdd+xml[m
[31m-# application/vnd.oma.bcast.sgdu[m
[31m-# application/vnd.oma.bcast.simple-symbol-container[m
[31m-# application/vnd.oma.bcast.smartcard-trigger+xml[m
[31m-# application/vnd.oma.bcast.sprov+xml[m
[31m-# application/vnd.oma.bcast.stkm[m
[31m-# application/vnd.oma.cab-address-book+xml[m
[31m-# application/vnd.oma.cab-pcc+xml[m
[31m-# application/vnd.oma.dcd[m
[31m-# application/vnd.oma.dcdc[m
[31m-application/vnd.oma.dd2+xml			dd2[m
[31m-# application/vnd.oma.drm.risd+xml[m
[31m-# application/vnd.oma.group-usage-list+xml[m
[31m-# application/vnd.oma.poc.detailed-progress-report+xml[m
[31m-# application/vnd.oma.poc.final-report+xml[m
[31m-# application/vnd.oma.poc.groups+xml[m
[31m-# application/vnd.oma.poc.invocation-descriptor+xml[m
[31m-# application/vnd.oma.poc.optimized-progress-report+xml[m
[31m-# application/vnd.oma.push[m
[31m-# application/vnd.oma.scidm.messages+xml[m
[31m-# application/vnd.oma.xcap-directory+xml[m
[31m-# application/vnd.omads-email+xml[m
[31m-# application/vnd.omads-file+xml[m
[31m-# application/vnd.omads-folder+xml[m
[31m-# application/vnd.omaloc-supl-init[m
[31m-application/vnd.openofficeorg.extension		oxt[m
[31m-# application/vnd.openxmlformats-officedocument.custom-properties+xml[m
[31m-# application/vnd.openxmlformats-officedocument.customxmlproperties+xml[m
[31m-# application/vnd.openxmlformats-officedocument.drawing+xml[m
[31m-# application/vnd.openxmlformats-officedocument.drawingml.chart+xml[m
[31m-# application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml[m
[31m-# application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml[m
[31m-# application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml[m
[31m-# application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml[m
[31m-# application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml[m
[31m-# application/vnd.openxmlformats-officedocument.extended-properties+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.comments+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml[m
[31m-application/vnd.openxmlformats-officedocument.presentationml.presentation	pptx[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.presprops+xml[m
[31m-application/vnd.openxmlformats-officedocument.presentationml.slide	sldx[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.slide+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml[m
[31m-application/vnd.openxmlformats-officedocument.presentationml.slideshow	ppsx[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.tags+xml[m
[31m-application/vnd.openxmlformats-officedocument.presentationml.template	potx[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.template.main+xml[m
[31m-# application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml[m
[31m-application/vnd.openxmlformats-officedocument.spreadsheetml.sheet	xlsx[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml[m
[31m-application/vnd.openxmlformats-officedocument.spreadsheetml.template	xltx[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml[m
[31m-# application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml[m
[31m-# application/vnd.openxmlformats-officedocument.theme+xml[m
[31m-# application/vnd.openxmlformats-officedocument.themeoverride+xml[m
[31m-# application/vnd.openxmlformats-officedocument.vmldrawing[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml[m
[31m-application/vnd.openxmlformats-officedocument.wordprocessingml.document	docx[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml[m
[31m-application/vnd.openxmlformats-officedocument.wordprocessingml.template	dotx[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml[m
[31m-# application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml[m
[31m-# application/vnd.openxmlformats-package.core-properties+xml[m
[31m-# application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml[m
[31m-# application/vnd.openxmlformats-package.relationships+xml[m
[31m-# application/vnd.quobject-quoxdocument[m
[31m-# application/vnd.osa.netdeploy[m
[31m-application/vnd.osgeo.mapguide.package		mgp[m
[31m-# application/vnd.osgi.bundle[m
[31m-application/vnd.osgi.dp				dp[m
[31m-# application/vnd.otps.ct-kip+xml[m
[31m-application/vnd.palm				pdb pqa oprc[m
[31m-# application/vnd.paos.xml[m
[31m-application/vnd.pawaafile			paw[m
[31m-application/vnd.pg.format			str[m
[31m-application/vnd.pg.osasli			ei6[m
[31m-# application/vnd.piaccess.application-licence[m
[31m-application/vnd.picsel				efif[m
[31m-application/vnd.pmi.widget			wg[m
[31m-# application/vnd.poc.group-advertisement+xml[m
[31m-application/vnd.pocketlearn			plf[m
[31m-application/vnd.powerbuilder6			pbd[m
[31m-# application/vnd.powerbuilder6-s[m
[31m-# application/vnd.powerbuilder7[m
[31m-# application/vnd.powerbuilder7-s[m
[31m-# application/vnd.powerbuilder75[m
[31m-# application/vnd.powerbuilder75-s[m
[31m-# application/vnd.preminet[m
[31m-application/vnd.previewsystems.box		box[m
[31m-application/vnd.proteus.magazine		mgz[m
[31m-application/vnd.publishare-delta-tree		qps[m
[31m-application/vnd.pvi.ptid1			ptid[m
[31m-# application/vnd.pwg-multiplexed[m
[31m-# application/vnd.pwg-xhtml-print+xml[m
[31m-# application/vnd.qualcomm.brew-app-res[m
[31m-application/vnd.quark.quarkxpress		qxd qxt qwd qwt qxl qxb[m
[31m-# application/vnd.radisys.moml+xml[m
[31m-# application/vnd.radisys.msml+xml[m
[31m-# application/vnd.radisys.msml-audit+xml[m
[31m-# application/vnd.radisys.msml-audit-conf+xml[m
[31m-# application/vnd.radisys.msml-audit-conn+xml[m
[31m-# application/vnd.radisys.msml-audit-dialog+xml[m
[31m-# application/vnd.radisys.msml-audit-stream+xml[m
[31m-# application/vnd.radisys.msml-conf+xml[m
[31m-# application/vnd.radisys.msml-dialog+xml[m
[31m-# application/vnd.radisys.msml-dialog-base+xml[m
[31m-# application/vnd.radisys.msml-dialog-fax-detect+xml[m
[31m-# application/vnd.radisys.msml-dialog-fax-sendrecv+xml[m
[31m-# application/vnd.radisys.msml-dialog-group+xml[m
[31m-# application/vnd.radisys.msml-dialog-speech+xml[m
[31m-# application/vnd.radisys.msml-dialog-transform+xml[m
[31m-# application/vnd.rainstor.data[m
[31m-# application/vnd.rapid[m
[31m-application/vnd.realvnc.bed			bed[m
[31m-application/vnd.recordare.musicxml		mxl[m
[31m-application/vnd.recordare.musicxml+xml		musicxml[m
[31m-# application/vnd.renlearn.rlprint[m
[31m-application/vnd.rig.cryptonote			cryptonote[m
[31m-application/vnd.rim.cod				cod[m
[31m-application/vnd.rn-realmedia			rm[m
[31m-application/vnd.route66.link66+xml		link66[m
[31m-# application/vnd.ruckus.download[m
[31m-# application/vnd.s3sms[m
[31m-application/vnd.sailingtracker.track		st[m
[31m-# application/vnd.sbm.cid[m
[31m-# application/vnd.sbm.mid2[m
[31m-# application/vnd.scribus[m
[31m-# application/vnd.sealed.3df[m
[31m-# application/vnd.sealed.csf[m
[31m-# application/vnd.sealed.doc[m
[31m-# application/vnd.sealed.eml[m
[31m-# application/vnd.sealed.mht[m
[31m-# application/vnd.sealed.net[m
[31m-# application/vnd.sealed.ppt[m
[31m-# application/vnd.sealed.tiff[m
[31m-# application/vnd.sealed.xls[m
[31m-# application/vnd.sealedmedia.softseal.html[m
[31m-# application/vnd.sealedmedia.softseal.pdf[m
[31m-application/vnd.seemail				see[m
[31m-application/vnd.sema				sema[m
[31m-application/vnd.semd				semd[m
[31m-application/vnd.semf				semf[m
[31m-application/vnd.shana.informed.formdata		ifm[m
[31m-application/vnd.shana.informed.formtemplate	itp[m
[31m-application/vnd.shana.informed.interchange	iif[m
[31m-application/vnd.shana.informed.package		ipk[m
[31m-application/vnd.simtech-mindmapper		twd twds[m
[31m-application/vnd.smaf				mmf[m
[31m-# application/vnd.smart.notebook[m
[31m-application/vnd.smart.teacher			teacher[m
[31m-# application/vnd.software602.filler.form+xml[m
[31m-# application/vnd.software602.filler.form-xml-zip[m
[31m-application/vnd.solent.sdkm+xml			sdkm sdkd[m
[31m-application/vnd.spotfire.dxp			dxp[m
[31m-application/vnd.spotfire.sfs			sfs[m
[31m-# application/vnd.sss-cod[m
[31m-# application/vnd.sss-dtf[m
[31m-# application/vnd.sss-ntf[m
[31m-application/vnd.stardivision.calc		sdc[m
[31m-application/vnd.stardivision.draw		sda[m
[31m-application/vnd.stardivision.impress		sdd[m
[31m-application/vnd.stardivision.math		smf[m
[31m-application/vnd.stardivision.writer		sdw vor[m
[31m-application/vnd.stardivision.writer-global	sgl[m
[31m-application/vnd.stepmania.stepchart		sm[m
[31m-# application/vnd.street-stream[m
[31m-application/vnd.sun.xml.calc			sxc[m
[31m-application/vnd.sun.xml.calc.template		stc[m
[31m-application/vnd.sun.xml.draw			sxd[m
[31m-application/vnd.sun.xml.draw.template		std[m
[31m-application/vnd.sun.xml.impress			sxi[m
[31m-application/vnd.sun.xml.impress.template	sti[m
[31m-application/vnd.sun.xml.math			sxm[m
[31m-application/vnd.sun.xml.writer			sxw[m
[31m-application/vnd.sun.xml.writer.global		sxg[m
[31m-application/vnd.sun.xml.writer.template		stw[m
[31m-# application/vnd.sun.wadl+xml[m
[31m-application/vnd.sus-calendar			sus susp[m
[31m-application/vnd.svd				svd[m
[31m-# application/vnd.swiftview-ics[m
[31m-application/vnd.symbian.install			sis sisx[m
[31m-application/vnd.syncml+xml			xsm[m
[31m-application/vnd.syncml.dm+wbxml			bdm[m
[31m-application/vnd.syncml.dm+xml			xdm[m
[31m-# application/vnd.syncml.dm.notification[m
[31m-# application/vnd.syncml.ds.notification[m
[31m-application/vnd.tao.intent-module-archive	tao[m
[31m-application/vnd.tmobile-livetv			tmo[m
[31m-application/vnd.trid.tpt			tpt[m
[31m-application/vnd.triscape.mxs			mxs[m
[31m-application/vnd.trueapp				tra[m
[31m-# application/vnd.truedoc[m
[31m-# application/vnd.ubisoft.webplayer[m
[31m-application/vnd.ufdl				ufd ufdl[m
[31m-application/vnd.uiq.theme			utz[m
[31m-application/vnd.umajin				umj[m
[31m-application/vnd.unity				unityweb[m
[31m-application/vnd.uoml+xml			uoml[m
[31m-# application/vnd.uplanet.alert[m
[31m-# application/vnd.uplanet.alert-wbxml[m
[31m-# application/vnd.uplanet.bearer-choice[m
[31m-# application/vnd.uplanet.bearer-choice-wbxml[m
[31m-# application/vnd.uplanet.cacheop[m
[31m-# application/vnd.uplanet.cacheop-wbxml[m
[31m-# application/vnd.uplanet.channel[m
[31m-# application/vnd.uplanet.channel-wbxml[m
[31m-# application/vnd.uplanet.list[m
[31m-# application/vnd.uplanet.list-wbxml[m
[31m-# application/vnd.uplanet.listcmd[m
[31m-# application/vnd.uplanet.listcmd-wbxml[m
[31m-# application/vnd.uplanet.signal[m
[31m-application/vnd.vcx				vcx[m
[31m-# application/vnd.vd-study[m
[31m-# application/vnd.vectorworks[m
[31m-# application/vnd.verimatrix.vcas[m
[31m-# application/vnd.vidsoft.vidconference[m
[31m-application/vnd.visio				vsd vst vss vsw[m
[31m-application/vnd.visionary			vis[m
[31m-# application/vnd.vividence.scriptfile[m
[31m-application/vnd.vsf				vsf[m
[31m-# application/vnd.wap.sic[m
[31m-# application/vnd.wap.slc[m
[31m-application/vnd.wap.wbxml			wbxml[m
[31m-application/vnd.wap.wmlc			wmlc[m
[31m-application/vnd.wap.wmlscriptc			wmlsc[m
[31m-application/vnd.webturbo			wtb[m
[31m-# application/vnd.wfa.wsc[m
[31m-# application/vnd.wmc[m
[31m-# application/vnd.wmf.bootstrap[m
[31m-# application/vnd.wolfram.mathematica[m
[31m-# application/vnd.wolfram.mathematica.package[m
[31m-application/vnd.wolfram.player			nbp[m
[31m-application/vnd.wordperfect			wpd[m
[31m-application/vnd.wqd				wqd[m
[31m-# application/vnd.wrq-hp3000-labelled[m
[31m-application/vnd.wt.stf				stf[m
[31m-# application/vnd.wv.csp+wbxml[m
[31m-# application/vnd.wv.csp+xml[m
[31m-# application/vnd.wv.ssp+xml[m
[31m-application/vnd.xara				xar[m
[31m-application/vnd.xfdl				xfdl[m
[31m-# application/vnd.xfdl.webform[m
[31m-# application/vnd.xmi+xml[m
[31m-# application/vnd.xmpie.cpkg[m
[31m-# application/vnd.xmpie.dpkg[m
[31m-# application/vnd.xmpie.plan[m
[31m-# application/vnd.xmpie.ppkg[m
[31m-# application/vnd.xmpie.xlim[m
[31m-application/vnd.yamaha.hv-dic			hvd[m
[31m-application/vnd.yamaha.hv-script		hvs[m
[31m-application/vnd.yamaha.hv-voice			hvp[m
[31m-application/vnd.yamaha.openscoreformat			osf[m
[31m-application/vnd.yamaha.openscoreformat.osfpvg+xml	osfpvg[m
[31m-# application/vnd.yamaha.remote-setup[m
[31m-application/vnd.yamaha.smaf-audio		saf[m
[31m-application/vnd.yamaha.smaf-phrase		spf[m
[31m-# application/vnd.yamaha.tunnel-udpencap[m
[31m-application/vnd.yellowriver-custom-menu		cmp[m
[31m-application/vnd.zul				zir zirz[m
[31m-application/vnd.zzazz.deck+xml			zaz[m
[31m-application/voicexml+xml			vxml[m
[31m-# application/vq-rtcpxr[m
[31m-# application/watcherinfo+xml[m
[31m-# application/whoispp-query[m
[31m-# application/whoispp-response[m
[31m-application/widget				wgt[m
[31m-application/winhlp				hlp[m
[31m-# application/wita[m
[31m-# application/wordperfect5.1[m
[31m-application/wsdl+xml				wsdl[m
[31m-application/wspolicy+xml			wspolicy[m
[31m-application/x-7z-compressed			7z[m
[31m-application/x-abiword				abw[m
[31m-application/x-ace-compressed			ace[m
[31m-application/x-authorware-bin			aab x32 u32 vox[m
[31m-application/x-authorware-map			aam[m
[31m-application/x-authorware-seg			aas[m
[31m-application/x-bcpio				bcpio[m
[31m-application/x-bittorrent			torrent[m
[31m-application/x-bzip				bz[m
[31m-application/x-bzip2				bz2 boz[m
[31m-application/x-cdlink				vcd[m
[31m-application/x-chat				chat[m
[31m-application/x-chess-pgn				pgn[m
[31m-# application/x-compress[m
[31m-application/x-cpio				cpio[m
[31m-application/x-csh				csh[m
[31m-application/x-debian-package			deb udeb[m
[31m-application/x-director			dir dcr dxr cst cct cxt w3d fgd swa[m
[31m-application/x-doom				wad[m
[31m-application/x-dtbncx+xml			ncx[m
[31m-application/x-dtbook+xml			dtb[m
[31m-application/x-dtbresource+xml			res[m
[31m-application/x-dvi				dvi[m
[31m-application/x-font-bdf				bdf[m
[31m-# application/x-font-dos[m
[31m-# application/x-font-framemaker[m
[31m-application/x-font-ghostscript			gsf[m
[31m-# application/x-font-libgrx[m
[31m-application/x-font-linux-psf			psf[m
[31m-application/x-font-otf				otf[m
[31m-application/x-font-pcf				pcf[m
[31m-application/x-font-snf				snf[m
[31m-# application/x-font-speedo[m
[31m-# application/x-font-sunos-news[m
[31m-application/x-font-ttf				ttf ttc[m
[31m-application/x-font-type1			pfa pfb pfm afm[m
[31m-application/x-font-woff				woff[m
[31m-# application/x-font-vfont[m
[31m-application/x-futuresplash			spl[m
[31m-application/x-gnumeric				gnumeric[m
[31m-application/x-gtar				gtar[m
[31m-# application/x-gzip[m
[31m-application/x-hdf				hdf[m
[31m-application/x-java-jnlp-file			jnlp[m
[31m-application/x-latex				latex[m
[31m-application/x-mobipocket-ebook			prc mobi[m
[31m-application/x-ms-application			application[m
[31m-application/x-ms-wmd				wmd[m
[31m-application/x-ms-wmz				wmz[m
[31m-application/x-ms-xbap				xbap[m
[31m-application/x-msaccess				mdb[m
[31m-application/x-msbinder				obd[m
[31m-application/x-mscardfile			crd[m
[31m-application/x-msclip				clp[m
[31m-application/x-msdownload			exe dll com bat msi[m
[31m-application/x-msmediaview			mvb m13 m14[m
[31m-application/x-msmetafile			wmf[m
[31m-application/x-msmoney				mny[m
[31m-application/x-mspublisher			pub[m
[31m-application/x-msschedule			scd[m
[31m-application/x-msterminal			trm[m
[31m-application/x-mswrite				wri[m
[31m-application/x-netcdf				nc cdf[m
[31m-application/x-pkcs12				p12 pfx[m
[31m-application/x-pkcs7-certificates		p7b spc[m
[31m-application/x-pkcs7-certreqresp			p7r[m
[31m-application/x-rar-compressed			rar[m
[31m-application/x-sh				sh[m
[31m-application/x-shar				shar[m
[31m-application/x-shockwave-flash			swf[m
[31m-application/x-silverlight-app			xap[m
[31m-application/x-stuffit				sit[m
[31m-application/x-stuffitx				sitx[m
[31m-application/x-sv4cpio				sv4cpio[m
[31m-application/x-sv4crc				sv4crc[m
[31m-application/x-tar				tar[m
[31m-application/x-tcl				tcl[m
[31m-application/x-tex				tex[m
[31m-application/x-tex-tfm				tfm[m
[31m-application/x-texinfo				texinfo texi[m
[31m-application/x-ustar				ustar[m
[31m-application/x-wais-source			src[m
[31m-application/x-x509-ca-cert			der crt[m
[31m-application/x-xfig				fig[m
[31m-application/x-xpinstall				xpi[m
[31m-# application/x400-bp[m
[31m-# application/xcap-att+xml[m
[31m-# application/xcap-caps+xml[m
[31m-application/xcap-diff+xml			xdf[m
[31m-# application/xcap-el+xml[m
[31m-# application/xcap-error+xml[m
[31m-# application/xcap-ns+xml[m
[31m-# application/xcon-conference-info-diff+xml[m
[31m-# application/xcon-conference-info+xml[m
[31m-application/xenc+xml				xenc[m
[31m-application/xhtml+xml				xhtml xht[m
[31m-# application/xhtml-voice+xml[m
[31m-application/xml					xml xsl[m
[31m-application/xml-dtd				dtd[m
[31m-# application/xml-external-parsed-entity[m
[31m-# application/xmpp+xml[m
[31m-application/xop+xml				xop[m
[31m-application/xslt+xml				xslt[m
[31m-application/xspf+xml				xspf[m
[31m-application/xv+xml				mxml xhvml xvml xvm[m
[31m-application/yang				yang[m
[31m-application/yin+xml				yin[m
[31m-application/zip					zip[m
[31m-# audio/1d-interleaved-parityfec[m
[31m-# audio/32kadpcm[m
[31m-# audio/3gpp[m
[31m-# audio/3gpp2[m
[31m-# audio/ac3[m
[31m-audio/adpcm					adp[m
[31m-# audio/amr[m
[31m-# audio/amr-wb[m
[31m-# audio/amr-wb+[m
[31m-# audio/asc[m
[31m-# audio/atrac-advanced-lossless[m
[31m-# audio/atrac-x[m
[31m-# audio/atrac3[m
[31m-audio/basic					au snd[m
[31m-# audio/bv16[m
[31m-# audio/bv32[m
[31m-# audio/clearmode[m
[31m-# audio/cn[m
[31m-# audio/dat12[m
[31m-# audio/dls[m
[31m-# audio/dsr-es201108[m
[31m-# audio/dsr-es202050[m
[31m-# audio/dsr-es202211[m
[31m-# audio/dsr-es202212[m
[31m-# audio/dvi4[m
[31m-# audio/eac3[m
[31m-# audio/evrc[m
[31m-# audio/evrc-qcp[m
[31m-# audio/evrc0[m
[31m-# audio/evrc1[m
[31m-# audio/evrcb[m
[31m-# audio/evrcb0[m
[31m-# audio/evrcb1[m
[31m-# audio/evrcwb[m
[31m-# audio/evrcwb0[m
[31m-# audio/evrcwb1[m
[31m-# audio/example[m
[31m-# audio/g719[m
[31m-# audio/g722[m
[31m-# audio/g7221[m
[31m-# audio/g723[m
[31m-# audio/g726-16[m
[31m-# audio/g726-24[m
[31m-# audio/g726-32[m
[31m-# audio/g726-40[m
[31m-# audio/g728[m
[31m-# audio/g729[m
[31m-# audio/g7291[m
[31m-# audio/g729d[m
[31m-# audio/g729e[m
[31m-# audio/gsm[m
[31m-# audio/gsm-efr[m
[31m-# audio/gsm-hr-08[m
[31m-# audio/ilbc[m
[31m-# audio/l16[m
[31m-# audio/l20[m
[31m-# audio/l24[m
[31m-# audio/l8[m
[31m-# audio/lpc[m
[31m-audio/midi					mid midi kar rmi[m
[31m-# audio/mobile-xmf[m
[31m-audio/mp4					mp4a[m
[31m-# audio/mp4a-latm[m
[31m-# audio/mpa[m
[31m-# audio/mpa-robust[m
[31m-audio/mpeg					mpga mp2 mp2a mp3 m2a m3a[m
[31m-# audio/mpeg4-generic[m
[31m-audio/ogg					oga ogg spx[m
[31m-# audio/parityfec[m
[31m-# audio/pcma[m
[31m-# audio/pcma-wb[m
[31m-# audio/pcmu-wb[m
[31m-# audio/pcmu[m
[31m-# audio/prs.sid[m
[31m-# audio/qcelp[m
[31m-# audio/red[m
[31m-# audio/rtp-enc-aescm128[m
[31m-# audio/rtp-midi[m
[31m-# audio/rtx[m
[31m-# audio/smv[m
[31m-# audio/smv0[m
[31m-# audio/smv-qcp[m
[31m-# audio/sp-midi[m
[31m-# audio/speex[m
[31m-# audio/t140c[m
[31m-# audio/t38[m
[31m-# audio/telephone-event[m
[31m-# audio/tone[m
[31m-# audio/uemclip[m
[31m-# audio/ulpfec[m
[31m-# audio/vdvi[m
[31m-# audio/vmr-wb[m
[31m-# audio/vnd.3gpp.iufp[m
[31m-# audio/vnd.4sb[m
[31m-# audio/vnd.audiokoz[m
[31m-# audio/vnd.celp[m
[31m-# audio/vnd.cisco.nse[m
[31m-# audio/vnd.cmles.radio-events[m
[31m-# audio/vnd.cns.anp1[m
[31m-# audio/vnd.cns.inf1[m
[31m-audio/vnd.dece.audio				uva uvva[m
[31m-audio/vnd.digital-winds				eol[m
[31m-# audio/vnd.dlna.adts[m
[31m-# audio/vnd.dolby.heaac.1[m
[31m-# audio/vnd.dolby.heaac.2[m
[31m-# audio/vnd.dolby.mlp[m
[31m-# audio/vnd.dolby.mps[m
[31m-# audio/vnd.dolby.pl2[m
[31m-# audio/vnd.dolby.pl2x[m
[31m-# audio/vnd.dolby.pl2z[m
[31m-# audio/vnd.dolby.pulse.1[m
[31m-audio/vnd.dra					dra[m
[31m-audio/vnd.dts					dts[m
[31m-audio/vnd.dts.hd				dtshd[m
[31m-# audio/vnd.everad.plj[m
[31m-# audio/vnd.hns.audio[m
[31m-audio/vnd.lucent.voice				lvp[m
[31m-audio/vnd.ms-playready.media.pya		pya[m
[31m-# audio/vnd.nokia.mobile-xmf[m
[31m-# audio/vnd.nortel.vbk[m
[31m-audio/vnd.nuera.ecelp4800			ecelp4800[m
[31m-audio/vnd.nuera.ecelp7470			ecelp7470[m
[31m-audio/vnd.nuera.ecelp9600			ecelp9600[m
[31m-# audio/vnd.octel.sbc[m
[31m-# audio/vnd.qcelp[m
[31m-# audio/vnd.rhetorex.32kadpcm[m
[31m-audio/vnd.rip					rip[m
[31m-# audio/vnd.sealedmedia.softseal.mpeg[m
[31m-# audio/vnd.vmx.cvsd[m
[31m-# audio/vorbis[m
[31m-# audio/vorbis-config[m
[31m-audio/webm					weba[m
[31m-audio/x-aac					aac[m
[31m-audio/x-aiff					aif aiff aifc[m
[31m-audio/x-mpegurl					m3u[m
[31m-audio/x-ms-wax					wax[m
[31m-audio/x-ms-wma					wma[m
[31m-audio/x-pn-realaudio				ram ra[m
[31m-audio/x-pn-realaudio-plugin			rmp[m
[31m-audio/x-wav					wav[m
[31m-chemical/x-cdx					cdx[m
[31m-chemical/x-cif					cif[m
[31m-chemical/x-cmdf					cmdf[m
[31m-chemical/x-cml					cml[m
[31m-chemical/x-csml					csml[m
[31m-# chemical/x-pdb[m
[31m-chemical/x-xyz					xyz[m
[31m-image/bmp					bmp[m
[31m-image/cgm					cgm[m
[31m-# image/example[m
[31m-# image/fits[m
[31m-image/g3fax					g3[m
[31m-image/gif					gif[m
[31m-image/ief					ief[m
[31m-# image/jp2[m
[31m-image/jpeg					jpeg jpg jpe[m
[31m-# image/jpm[m
[31m-# image/jpx[m
[31m-image/ktx					ktx[m
[31m-# image/naplps[m
[31m-image/png					png[m
[31m-image/prs.btif					btif[m
[31m-# image/prs.pti[m
[31m-image/svg+xml					svg svgz[m
[31m-# image/t38[m
[31m-image/tiff					tiff tif[m
[31m-# image/tiff-fx[m
[31m-image/vnd.adobe.photoshop			psd[m
[31m-# image/vnd.cns.inf2[m
[31m-image/vnd.dece.graphic				uvi uvvi uvg uvvg[m
[31m-image/vnd.dvb.subtitle				sub[m
[31m-image/vnd.djvu					djvu djv[m
[31m-image/vnd.dwg					dwg[m
[31m-image/vnd.dxf					dxf[m
[31m-image/vnd.fastbidsheet				fbs[m
[31m-image/vnd.fpx					fpx[m
[31m-image/vnd.fst					fst[m
[31m-image/vnd.fujixerox.edmics-mmr			mmr[m
[31m-image/vnd.fujixerox.edmics-rlc			rlc[m
[31m-# image/vnd.globalgraphics.pgb[m
[31m-# image/vnd.microsoft.icon[m
[31m-# image/vnd.mix[m
[31m-image/vnd.ms-modi				mdi[m
[31m-image/vnd.net-fpx				npx[m
[31m-# image/vnd.radiance[m
[31m-# image/vnd.sealed.png[m
[31m-# image/vnd.sealedmedia.softseal.gif[m
[31m-# image/vnd.sealedmedia.softseal.jpg[m
[31m-# image/vnd.svf[m
[31m-image/vnd.wap.wbmp				wbmp[m
[31m-image/vnd.xiff					xif[m
[31m-image/webp					webp[m
[31m-image/x-cmu-raster				ras[m
[31m-image/x-cmx					cmx[m
[31m-image/x-freehand				fh fhc fh4 fh5 fh7[m
[31m-image/x-icon					ico[m
[31m-image/x-pcx					pcx[m
[31m-image/x-pict					pic pct[m
[31m-image/x-portable-anymap				pnm[m
[31m-image/x-portable-bitmap				pbm[m
[31m-image/x-portable-graymap			pgm[m
[31m-image/x-portable-pixmap				ppm[m
[31m-image/x-rgb					rgb[m
[31m-image/x-xbitmap					xbm[m
[31m-image/x-xpixmap					xpm[m
[31m-image/x-xwindowdump				xwd[m
[31m-# message/cpim[m
[31m-# message/delivery-status[m
[31m-# message/disposition-notification[m
[31m-# message/example[m
[31m-# message/external-body[m
[31m-# message/feedback-report[m
[31m-# message/global[m
[31m-# message/global-delivery-status[m
[31m-# message/global-disposition-notification[m
[31m-# message/global-headers[m
[31m-# message/http[m
[31m-# message/imdn+xml[m
[31m-# message/news[m
[31m-# message/partial[m
[31m-message/rfc822					eml mime[m
[31m-# message/s-http[m
[31m-# message/sip[m
[31m-# message/sipfrag[m
[31m-# message/tracking-status[m
[31m-# message/vnd.si.simp[m
[31m-# model/example[m
[31m-model/iges					igs iges[m
[31m-model/mesh					msh mesh silo[m
[31m-model/vnd.collada+xml				dae[m
[31m-model/vnd.dwf					dwf[m
[31m-# model/vnd.flatland.3dml[m
[31m-model/vnd.gdl					gdl[m
[31m-# model/vnd.gs-gdl[m
[31m-# model/vnd.gs.gdl[m
[31m-model/vnd.gtw					gtw[m
[31m-# model/vnd.moml+xml[m
[31m-model/vnd.mts					mts[m
[31m-# model/vnd.parasolid.transmit.binary[m
[31m-# model/vnd.parasolid.transmit.text[m
[31m-model/vnd.vtu					vtu[m
[31m-model/vrml					wrl vrml[m
[31m-# multipart/alternative[m
[31m-# multipart/appledouble[m
[31m-# multipart/byteranges[m
[31m-# multipart/digest[m
[31m-# multipart/encrypted[m
[31m-# multipart/example[m
[31m-# multipart/form-data[m
[31m-# multipart/header-set[m
[31m-# multipart/mixed[m
[31m-# multipart/parallel[m
[31m-# multipart/related[m
[31m-# multipart/report[m
[31m-# multipart/signed[m
[31m-# multipart/voice-message[m
[31m-# text/1d-interleaved-parityfec[m
[31m-text/calendar					ics ifb[m
[31m-text/css					css[m
[31m-text/csv					csv[m
[31m-# text/directory[m
[31m-# text/dns[m
[31m-# text/ecmascript[m
[31m-# text/enriched[m
[31m-# text/example[m
[31m-text/html					html htm[m
[31m-# text/javascript[m
[31m-text/n3						n3[m
[31m-# text/parityfec[m
[31m-text/plain					txt text conf def list log in[m
[31m-# text/prs.fallenstein.rst[m
[31m-text/prs.lines.tag				dsc[m
[31m-# text/vnd.radisys.msml-basic-layout[m
[31m-# text/red[m
[31m-# text/rfc822-headers[m
[31m-text/richtext					rtx[m
[31m-# text/rtf[m
[31m-# text/rtp-enc-aescm128[m
[31m-# text/rtx[m
[31m-text/sgml					sgml sgm[m
[31m-# text/t140[m
[31m-text/tab-separated-values			tsv[m
[31m-text/troff					t tr roff man me ms[m
[31m-text/turtle					ttl[m
[31m-# text/ulpfec[m
[31m-text/uri-list					uri uris urls[m
[31m-# text/vnd.abc[m
[31m-text/vnd.curl					curl[m
[31m-text/vnd.curl.dcurl				dcurl[m
[31m-text/vnd.curl.scurl				scurl[m
[31m-text/vnd.curl.mcurl				mcurl[m
[31m-# text/vnd.dmclientscript[m
[31m-# text/vnd.esmertec.theme-descriptor[m
[31m-text/vnd.fly					fly[m
[31m-text/vnd.fmi.flexstor				flx[m
[31m-text/vnd.graphviz				gv[m
[31m-text/vnd.in3d.3dml				3dml[m
[31m-text/vnd.in3d.spot				spot[m
[31m-# text/vnd.iptc.newsml[m
[31m-# text/vnd.iptc.nitf[m
[31m-# text/vnd.latex-z[m
[31m-# text/vnd.motorola.reflex[m
[31m-# text/vnd.ms-mediapackage[m
[31m-# text/vnd.net2phone.commcenter.command[m
[31m-# text/vnd.si.uricatalogue[m
[31m-text/vnd.sun.j2me.app-descriptor		jad[m
[31m-# text/vnd.trolltech.linguist[m
[31m-# text/vnd.wap.si[m
[31m-# text/vnd.wap.sl[m
[31m-text/vnd.wap.wml				wml[m
[31m-text/vnd.wap.wmlscript				wmls[m
[31m-text/x-asm					s asm[m
[31m-text/x-c					c cc cxx cpp h hh dic[m
[31m-text/x-fortran					f for f77 f90[m
[31m-text/x-pascal					p pas[m
[31m-text/x-java-source				java[m
[31m-text/x-setext					etx[m
[31m-text/x-uuencode					uu[m
[31m-text/x-vcalendar				vcs[m
[31m-text/x-vcard					vcf[m
[31m-# text/xml[m
[31m-# text/xml-external-parsed-entity[m
[31m-# video/1d-interleaved-parityfec[m
[31m-video/3gpp					3gp[m
[31m-# video/3gpp-tt[m
[31m-video/3gpp2					3g2[m
[31m-# video/bmpeg[m
[31m-# video/bt656[m
[31m-# video/celb[m
[31m-# video/dv[m
[31m-# video/example[m
[31m-video/h261					h261[m
[31m-video/h263					h263[m
[31m-# video/h263-1998[m
[31m-# video/h263-2000[m
[31m-video/h264					h264[m
[31m-# video/h264-rcdo[m
[31m-# video/h264-svc[m
[31m-video/jpeg					jpgv[m
[31m-# video/jpeg2000[m
[31m-video/jpm					jpm jpgm[m
[31m-video/mj2					mj2 mjp2[m
[31m-# video/mp1s[m
[31m-# video/mp2p[m
[31m-# video/mp2t[m
[31m-video/mp4					mp4 mp4v mpg4[m
[31m-# video/mp4v-es[m
[31m-video/mpeg					mpeg mpg mpe m1v m2v[m
[31m-# video/mpeg4-generic[m
[31m-# video/mpv[m
[31m-# video/nv[m
[31m-video/ogg					ogv[m
[31m-# video/parityfec[m
[31m-# video/pointer[m
[31m-video/quicktime					qt mov[m
[31m-# video/raw[m
[31m-# video/rtp-enc-aescm128[m
[31m-# video/rtx[m
[31m-# video/smpte292m[m
[31m-# video/ulpfec[m
[31m-# video/vc1[m
[31m-# video/vnd.cctv[m
[31m-video/vnd.dece.hd				uvh uvvh[m
[31m-video/vnd.dece.mobile				uvm uvvm[m
[31m-# video/vnd.dece.mp4[m
[31m-video/vnd.dece.pd				uvp uvvp[m
[31m-video/vnd.dece.sd				uvs uvvs[m
[31m-video/vnd.dece.video				uvv uvvv[m
[31m-# video/vnd.directv.mpeg[m
[31m-# video/vnd.directv.mpeg-tts[m
[31m-# video/vnd.dlna.mpeg-tts[m
[31m-video/vnd.fvt					fvt[m
[31m-# video/vnd.hns.video[m
[31m-# video/vnd.iptvforum.1dparityfec-1010[m
[31m-# video/vnd.iptvforum.1dparityfec-2005[m
[31m-# video/vnd.iptvforum.2dparityfec-1010[m
[31m-# video/vnd.iptvforum.2dparityfec-2005[m
[31m-# video/vnd.iptvforum.ttsavc[m
[31m-# video/vnd.iptvforum.ttsmpeg2[m
[31m-# video/vnd.motorola.video[m
[31m-# video/vnd.motorola.videop[m
[31m-video/vnd.mpegurl				mxu m4u[m
[31m-video/vnd.ms-playready.media.pyv		pyv[m
[31m-# video/vnd.nokia.interleaved-multimedia[m
[31m-# video/vnd.nokia.videovoip[m
[31m-# video/vnd.objectvideo[m
[31m-# video/vnd.sealed.mpeg1[m
[31m-# video/vnd.sealed.mpeg4[m
[31m-# video/vnd.sealed.swf[m
[31m-# video/vnd.sealedmedia.softseal.mov[m
[31m-video/vnd.uvvu.mp4				uvu uvvu[m
[31m-video/vnd.vivo					viv[m
[31m-video/webm					webm[m
[31m-video/x-f4v					f4v[m
[31m-video/x-fli					fli[m
[31m-video/x-flv					flv[m
[31m-video/x-m4v					m4v[m
[31m-video/x-ms-asf					asf asx[m
[31m-video/x-ms-wm					wm[m
[31m-video/x-ms-wmv					wmv[m
[31m-video/x-ms-wmx					wmx[m
[31m-video/x-ms-wvx					wvx[m
[31m-video/x-msvideo					avi[m
[31m-video/x-sgi-movie				movie[m
[31m-x-conference/x-cooltalk				ice[m
[1mdiff --git a/node_modules/express/node_modules/mime/types/node.types b/node_modules/express/node_modules/mime/types/node.types[m
[1mdeleted file mode 100644[m
[1mindex fdabaa4..0000000[m
[1m--- a/node_modules/express/node_modules/mime/types/node.types[m
[1m+++ /dev/null[m
[36m@@ -1,43 +0,0 @@[m
[31m-# What: Google Chrome Extension[m
[31m-# Why: To allow apps to (work) be served with the right content type header.[m
[31m-# http://codereview.chromium.org/2830017[m
[31m-# Added by: niftylettuce[m
[31m-application/x-chrome-extension  crx[m
[31m-[m
[31m-# What: OTF Message Silencer[m
[31m-# Why: To silence the "Resource interpreted as font but transferred with MIME[m
[31m-# type font/otf" message that occurs in Google Chrome[m
[31m-# Added by: niftylettuce[m
[31m-font/opentype  otf[m
[31m-[m
[31m-# What: HTC support[m
[31m-# Why: To properly render .htc files such as CSS3PIE[m
[31m-# Added by: niftylettuce[m
[31m-text/x-component  htc[m
[31m-[m
[31m-# What: HTML5 application cache manifest[m
[31m-# Why: De-facto standard. Required by Mozilla browser when serving HTML5 apps[m
[31m-# per https://developer.mozilla.org/en/offline_resources_in_firefox[m
[31m-# Added by: louisremi[m
[31m-text/cache-manifest  appcache manifest[m
[31m-[m
[31m-# What: node binary buffer format[m
[31m-# Why: semi-standard extension w/in the node community[m
[31m-# Added by: tootallnate[m
[31m-application/octet-stream  buffer[m
[31m-[m
[31m-# What: The "protected" MP-4 formats used by iTunes.[m
[31m-# Why: Required for streaming music to browsers (?)[m
[31m-# Added by: broofa[m
[31m-application/mp4  m4p[m
[31m-audio/mp4  m4a[m
[31m-[m
[31m-# What: Music playlist format (http://en.wikipedia.org/wiki/M3U)[m
[31m-# Why: See https://github.com/bentomas/node-mime/pull/6[m
[31m-# Added by: mjrusso[m
[31m-application/x-mpegURL  m3u8[m
[31m-[m
[31m-# What: Video format, Part of RFC1890[m
[31m-# Why: See https://github.com/bentomas/node-mime/pull/6[m
[31m-# Added by: mjrusso[m
[31m-video/MP2T  ts[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/.gitignore.orig b/node_modules/express/node_modules/mkdirp/.gitignore.orig[m
[1mdeleted file mode 100644[m
[1mindex 9303c34..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/.gitignore.orig[m
[1m+++ /dev/null[m
[36m@@ -1,2 +0,0 @@[m
[31m-node_modules/[m
[31m-npm-debug.log[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/.gitignore.rej b/node_modules/express/node_modules/mkdirp/.gitignore.rej[m
[1mdeleted file mode 100644[m
[1mindex 69244ff..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/.gitignore.rej[m
[1m+++ /dev/null[m
[36m@@ -1,5 +0,0 @@[m
[31m---- /dev/null[m
[31m-+++ .gitignore[m
[31m-@@ -0,0 +1,2 @@[m
[31m-+node_modules/[m
[31m-+npm-debug.log[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/.npmignore b/node_modules/express/node_modules/mkdirp/.npmignore[m
[1mdeleted file mode 100644[m
[1mindex 9303c34..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/.npmignore[m
[1m+++ /dev/null[m
[36m@@ -1,2 +0,0 @@[m
[31m-node_modules/[m
[31m-npm-debug.log[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/LICENSE b/node_modules/express/node_modules/mkdirp/LICENSE[m
[1mdeleted file mode 100644[m
[1mindex 432d1ae..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/LICENSE[m
[1m+++ /dev/null[m
[36m@@ -1,21 +0,0 @@[m
[31m-Copyright 2010 James Halliday (mail@substack.net)[m
[31m-[m
[31m-This project is free software released under the MIT/X11 license:[m
[31m-[m
[31m-Permission is hereby granted, free of charge, to any person obtaining a copy[m
[31m-of this software and associated documentation files (the "Software"), to deal[m
[31m-in the Software without restriction, including without limitation the rights[m
[31m-to use, copy, modify, merge, publish, distribute, sublicense, and/or sell[m
[31m-copies of the Software, and to permit persons to whom the Software is[m
[31m-furnished to do so, subject to the following conditions:[m
[31m-[m
[31m-The above copyright notice and this permission notice shall be included in[m
[31m-all copies or substantial portions of the Software.[m
[31m-[m
[31m-THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR[m
[31m-IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,[m
[31m-FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE[m
[31m-AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER[m
[31m-LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,[m
[31m-OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN[m
[31m-THE SOFTWARE.[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/README.markdown b/node_modules/express/node_modules/mkdirp/README.markdown[m
[1mdeleted file mode 100644[m
[1mindex b4dd75f..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/README.markdown[m
[1m+++ /dev/null[m
[36m@@ -1,54 +0,0 @@[m
[31m-mkdirp[m
[31m-======[m
[31m-[m
[31m-Like `mkdir -p`, but in node.js![m
[31m-[m
[31m-example[m
[31m-=======[m
[31m-[m
[31m-pow.js[m
[31m-------[m
[31m-    var mkdirp = require('mkdirp');[m
[31m-    [m
[31m-    mkdirp('/tmp/foo/bar/baz', function (err) {[m
[31m-        if (err) console.error(err)[m
[31m-        else console.log('pow!')[m
[31m-    });[m
[31m-[m
[31m-Output[m
[31m-    pow![m
[31m-[m
[31m-And now /tmp/foo/bar/baz exists, huzzah![m
[31m-[m
[31m-methods[m
[31m-=======[m
[31m-[m
[31m-var mkdirp = require('mkdirp');[m
[31m-[m
[31m-mkdirp(dir, mode, cb)[m
[31m----------------------[m
[31m-[m
[31m-Create a new directory and any necessary subdirectories at `dir` with octal[m
[31m-permission string `mode`.[m
[31m-[m
[31m-If `mode` isn't specified, it defaults to `0777 & (~process.umask())`.[m
[31m-[m
[31m-mkdirp.sync(dir, mode)[m
[31m-----------------------[m
[31m-[m
[31m-Synchronously create a new directory and any necessary subdirectories at `dir`[m
[31m-with octal permission string `mode`.[m
[31m-[m
[31m-If `mode` isn't specified, it defaults to `0777 & (~process.umask())`.[m
[31m-[m
[31m-install[m
[31m-=======[m
[31m-[m
[31m-With [npm](http://npmjs.org) do:[m
[31m-[m
[31m-    npm install mkdirp[m
[31m-[m
[31m-license[m
[31m-=======[m
[31m-[m
[31m-MIT/X11[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/examples/pow.js b/node_modules/express/node_modules/mkdirp/examples/pow.js[m
[1mdeleted file mode 100644[m
[1mindex e692421..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/examples/pow.js[m
[1m+++ /dev/null[m
[36m@@ -1,6 +0,0 @@[m
[31m-var mkdirp = require('mkdirp');[m
[31m-[m
[31m-mkdirp('/tmp/foo/bar/baz', function (err) {[m
[31m-    if (err) console.error(err)[m
[31m-    else console.log('pow!')[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/examples/pow.js.orig b/node_modules/express/node_modules/mkdirp/examples/pow.js.orig[m
[1mdeleted file mode 100644[m
[1mindex 7741462..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/examples/pow.js.orig[m
[1m+++ /dev/null[m
[36m@@ -1,6 +0,0 @@[m
[31m-var mkdirp = require('mkdirp');[m
[31m-[m
[31m-mkdirp('/tmp/foo/bar/baz', 0755, function (err) {[m
[31m-    if (err) console.error(err)[m
[31m-    else console.log('pow!')[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/examples/pow.js.rej b/node_modules/express/node_modules/mkdirp/examples/pow.js.rej[m
[1mdeleted file mode 100644[m
[1mindex 81e7f43..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/examples/pow.js.rej[m
[1m+++ /dev/null[m
[36m@@ -1,19 +0,0 @@[m
[31m---- examples/pow.js[m
[31m-+++ examples/pow.js[m
[31m-@@ -1,6 +1,15 @@[m
[31m--var mkdirp = require('mkdirp').mkdirp;[m
[31m-+var mkdirp = require('../').mkdirp,[m
[31m-+    mkdirpSync = require('../').mkdirpSync;[m
[31m- [m
[31m- mkdirp('/tmp/foo/bar/baz', 0755, function (err) {[m
[31m-     if (err) console.error(err)[m
[31m-     else console.log('pow!')[m
[31m- });[m
[31m-+[m
[31m-+try {[m
[31m-+  mkdirpSync('/tmp/bar/foo/baz', 0755);[m
[31m-+  console.log('double pow!');[m
[31m-+}[m
[31m-+catch (ex) {[m
[31m-+  console.log(ex);[m
[31m-+}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/index.js b/node_modules/express/node_modules/mkdirp/index.js[m
[1mdeleted file mode 100644[m
[1mindex 25f43ad..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/index.js[m
[1m+++ /dev/null[m
[36m@@ -1,79 +0,0 @@[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-[m
[31m-module.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;[m
[31m-[m
[31m-function mkdirP (p, mode, f) {[m
[31m-    if (typeof mode === 'function' || mode === undefined) {[m
[31m-        f = mode;[m
[31m-        mode = 0777 & (~process.umask());[m
[31m-    }[m
[31m-    [m
[31m-    var cb = f || function () {};[m
[31m-    if (typeof mode === 'string') mode = parseInt(mode, 8);[m
[31m-    p = path.resolve(p);[m
[31m-[m
[31m-    fs.mkdir(p, mode, function (er) {[m
[31m-        if (!er) return cb();[m
[31m-        switch (er.code) {[m
[31m-            case 'ENOENT':[m
[31m-                mkdirP(path.dirname(p), mode, function (er) {[m
[31m-                    if (er) cb(er);[m
[31m-                    else mkdirP(p, mode, cb);[m
[31m-                });[m
[31m-                break;[m
[31m-[m
[31m-            case 'EEXIST':[m
[31m-                fs.stat(p, function (er2, stat) {[m
[31m-                    // if the stat fails, then that's super weird.[m
[31m-                    // let the original EEXIST be the failure reason.[m
[31m-                    if (er2 || !stat.isDirectory()) cb(er)[m
[31m-                    else cb();[m
[31m-                });[m
[31m-                break;[m
[31m-[m
[31m-            default:[m
[31m-                cb(er);[m
[31m-                break;[m
[31m-        }[m
[31m-    });[m
[31m-}[m
[31m-[m
[31m-mkdirP.sync = function sync (p, mode) {[m
[31m-    if (mode === undefined) {[m
[31m-        mode = 0777 & (~process.umask());[m
[31m-    }[m
[31m-    [m
[31m-    if (typeof mode === 'string') mode = parseInt(mode, 8);[m
[31m-    p = path.resolve(p);[m
[31m-    [m
[31m-    try {[m
[31m-        fs.mkdirSync(p, mode)[m
[31m-    }[m
[31m-    catch (err0) {[m
[31m-        switch (err0.code) {[m
[31m-            case 'ENOENT' :[m
[31m-                var err1 = sync(path.dirname(p), mode)[m
[31m-                if (err1) throw err1;[m
[31m-                else return sync(p, mode);[m
[31m-                break;[m
[31m-            [m
[31m-            case 'EEXIST' :[m
[31m-                var stat;[m
[31m-                try {[m
[31m-                    stat = fs.statSync(p);[m
[31m-                }[m
[31m-                catch (err1) {[m
[31m-                    throw err0[m
[31m-                }[m
[31m-                if (!stat.isDirectory()) throw err0;[m
[31m-                else return null;[m
[31m-                break;[m
[31m-            default :[m
[31m-                throw err0[m
[31m-                break;[m
[31m-        }[m
[31m-    }[m
[31m-    [m
[31m-    return null;[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/package.json b/node_modules/express/node_modules/mkdirp/package.json[m
[1mdeleted file mode 100644[m
[1mindex 1bf9ac7..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/package.json[m
[1m+++ /dev/null[m
[36m@@ -1,23 +0,0 @@[m
[31m-{[m
[31m-    "name" : "mkdirp",[m
[31m-    "description" : "Recursively mkdir, like `mkdir -p`",[m
[31m-    "version" : "0.3.0",[m
[31m-    "author" : "James Halliday <mail@substack.net> (http://substack.net)",[m
[31m-    "main" : "./index",[m
[31m-    "keywords" : [[m
[31m-        "mkdir",[m
[31m-        "directory"[m
[31m-    ],[m
[31m-    "repository" : {[m
[31m-        "type" : "git",[m
[31m-        "url" : "http://github.com/substack/node-mkdirp.git"[m
[31m-    },[m
[31m-    "scripts" : {[m
[31m-        "test" : "tap test/*.js"[m
[31m-    },[m
[31m-    "devDependencies" : {[m
[31m-        "tap" : "0.0.x"[m
[31m-    },[m
[31m-    "license" : "MIT/X11",[m
[31m-    "engines": { "node": "*" }[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/chmod.js b/node_modules/express/node_modules/mkdirp/test/chmod.js[m
[1mdeleted file mode 100644[m
[1mindex 520dcb8..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/chmod.js[m
[1m+++ /dev/null[m
[36m@@ -1,38 +0,0 @@[m
[31m-var mkdirp = require('../').mkdirp;[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-var ps = [ '', 'tmp' ];[m
[31m-[m
[31m-for (var i = 0; i < 25; i++) {[m
[31m-    var dir = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    ps.push(dir);[m
[31m-}[m
[31m-[m
[31m-var file = ps.join('/');[m
[31m-[m
[31m-test('chmod-pre', function (t) {[m
[31m-    var mode = 0744[m
[31m-    mkdirp(file, mode, function (er) {[m
[31m-        t.ifError(er, 'should not error');[m
[31m-        fs.stat(file, function (er, stat) {[m
[31m-            t.ifError(er, 'should exist');[m
[31m-            t.ok(stat && stat.isDirectory(), 'should be directory');[m
[31m-            t.equal(stat && stat.mode & 0777, mode, 'should be 0744');[m
[31m-            t.end();[m
[31m-        });[m
[31m-    });[m
[31m-});[m
[31m-[m
[31m-test('chmod', function (t) {[m
[31m-    var mode = 0755[m
[31m-    mkdirp(file, mode, function (er) {[m
[31m-        t.ifError(er, 'should not error');[m
[31m-        fs.stat(file, function (er, stat) {[m
[31m-            t.ifError(er, 'should exist');[m
[31m-            t.ok(stat && stat.isDirectory(), 'should be directory');[m
[31m-            t.end();[m
[31m-        });[m
[31m-    });[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/clobber.js b/node_modules/express/node_modules/mkdirp/test/clobber.js[m
[1mdeleted file mode 100644[m
[1mindex 0eb7099..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/clobber.js[m
[1m+++ /dev/null[m
[36m@@ -1,37 +0,0 @@[m
[31m-var mkdirp = require('../').mkdirp;[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-var ps = [ '', 'tmp' ];[m
[31m-[m
[31m-for (var i = 0; i < 25; i++) {[m
[31m-    var dir = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    ps.push(dir);[m
[31m-}[m
[31m-[m
[31m-var file = ps.join('/');[m
[31m-[m
[31m-// a file in the way[m
[31m-var itw = ps.slice(0, 3).join('/');[m
[31m-[m
[31m-[m
[31m-test('clobber-pre', function (t) {[m
[31m-    console.error("about to write to "+itw)[m
[31m-    fs.writeFileSync(itw, 'I AM IN THE WAY, THE TRUTH, AND THE LIGHT.');[m
[31m-[m
[31m-    fs.stat(itw, function (er, stat) {[m
[31m-        t.ifError(er)[m
[31m-        t.ok(stat && stat.isFile(), 'should be file')[m
[31m-        t.end()[m
[31m-    })[m
[31m-})[m
[31m-[m
[31m-test('clobber', function (t) {[m
[31m-    t.plan(2);[m
[31m-    mkdirp(file, 0755, function (err) {[m
[31m-        t.ok(err);[m
[31m-        t.equal(err.code, 'ENOTDIR');[m
[31m-        t.end();[m
[31m-    });[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/mkdirp.js b/node_modules/express/node_modules/mkdirp/test/mkdirp.js[m
[1mdeleted file mode 100644[m
[1mindex b07cd70..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/mkdirp.js[m
[1m+++ /dev/null[m
[36m@@ -1,28 +0,0 @@[m
[31m-var mkdirp = require('../');[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-test('woo', function (t) {[m
[31m-    t.plan(2);[m
[31m-    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    [m
[31m-    var file = '/tmp/' + [x,y,z].join('/');[m
[31m-    [m
[31m-    mkdirp(file, 0755, function (err) {[m
[31m-        if (err) t.fail(err);[m
[31m-        else path.exists(file, function (ex) {[m
[31m-            if (!ex) t.fail('file not created')[m
[31m-            else fs.stat(file, function (err, stat) {[m
[31m-                if (err) t.fail(err)[m
[31m-                else {[m
[31m-                    t.equal(stat.mode & 0777, 0755);[m
[31m-                    t.ok(stat.isDirectory(), 'target not a directory');[m
[31m-                    t.end();[m
[31m-                }[m
[31m-            })[m
[31m-        })[m
[31m-    });[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/perm.js b/node_modules/express/node_modules/mkdirp/test/perm.js[m
[1mdeleted file mode 100644[m
[1mindex 23a7abb..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/perm.js[m
[1m+++ /dev/null[m
[36m@@ -1,32 +0,0 @@[m
[31m-var mkdirp = require('../');[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-test('async perm', function (t) {[m
[31m-    t.plan(2);[m
[31m-    var file = '/tmp/' + (Math.random() * (1<<30)).toString(16);[m
[31m-    [m
[31m-    mkdirp(file, 0755, function (err) {[m
[31m-        if (err) t.fail(err);[m
[31m-        else path.exists(file, function (ex) {[m
[31m-            if (!ex) t.fail('file not created')[m
[31m-            else fs.stat(file, function (err, stat) {[m
[31m-                if (err) t.fail(err)[m
[31m-                else {[m
[31m-                    t.equal(stat.mode & 0777, 0755);[m
[31m-                    t.ok(stat.isDirectory(), 'target not a directory');[m
[31m-                    t.end();[m
[31m-                }[m
[31m-            })[m
[31m-        })[m
[31m-    });[m
[31m-});[m
[31m-[m
[31m-test('async root perm', function (t) {[m
[31m-    mkdirp('/tmp', 0755, function (err) {[m
[31m-        if (err) t.fail(err);[m
[31m-        t.end();[m
[31m-    });[m
[31m-    t.end();[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/perm_sync.js b/node_modules/express/node_modules/mkdirp/test/perm_sync.js[m
[1mdeleted file mode 100644[m
[1mindex f685f60..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/perm_sync.js[m
[1m+++ /dev/null[m
[36m@@ -1,39 +0,0 @@[m
[31m-var mkdirp = require('../');[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-test('sync perm', function (t) {[m
[31m-    t.plan(2);[m
[31m-    var file = '/tmp/' + (Math.random() * (1<<30)).toString(16) + '.json';[m
[31m-    [m
[31m-    mkdirp.sync(file, 0755);[m
[31m-    path.exists(file, function (ex) {[m
[31m-        if (!ex) t.fail('file not created')[m
[31m-        else fs.stat(file, function (err, stat) {[m
[31m-            if (err) t.fail(err)[m
[31m-            else {[m
[31m-                t.equal(stat.mode & 0777, 0755);[m
[31m-                t.ok(stat.isDirectory(), 'target not a directory');[m
[31m-                t.end();[m
[31m-            }[m
[31m-        })[m
[31m-    });[m
[31m-});[m
[31m-[m
[31m-test('sync root perm', function (t) {[m
[31m-    t.plan(1);[m
[31m-    [m
[31m-    var file = '/tmp';[m
[31m-    mkdirp.sync(file, 0755);[m
[31m-    path.exists(file, function (ex) {[m
[31m-        if (!ex) t.fail('file not created')[m
[31m-        else fs.stat(file, function (err, stat) {[m
[31m-            if (err) t.fail(err)[m
[31m-            else {[m
[31m-                t.ok(stat.isDirectory(), 'target not a directory');[m
[31m-                t.end();[m
[31m-            }[m
[31m-        })[m
[31m-    });[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/race.js b/node_modules/express/node_modules/mkdirp/test/race.js[m
[1mdeleted file mode 100644[m
[1mindex 96a0447..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/race.js[m
[1m+++ /dev/null[m
[36m@@ -1,41 +0,0 @@[m
[31m-var mkdirp = require('../').mkdirp;[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-test('race', function (t) {[m
[31m-    t.plan(4);[m
[31m-    var ps = [ '', 'tmp' ];[m
[31m-    [m
[31m-    for (var i = 0; i < 25; i++) {[m
[31m-        var dir = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-        ps.push(dir);[m
[31m-    }[m
[31m-    var file = ps.join('/');[m
[31m-    [m
[31m-    var res = 2;[m
[31m-    mk(file, function () {[m
[31m-        if (--res === 0) t.end();[m
[31m-    });[m
[31m-    [m
[31m-    mk(file, function () {[m
[31m-        if (--res === 0) t.end();[m
[31m-    });[m
[31m-    [m
[31m-    function mk (file, cb) {[m
[31m-        mkdirp(file, 0755, function (err) {[m
[31m-            if (err) t.fail(err);[m
[31m-            else path.exists(file, function (ex) {[m
[31m-                if (!ex) t.fail('file not created')[m
[31m-                else fs.stat(file, function (err, stat) {[m
[31m-                    if (err) t.fail(err)[m
[31m-                    else {[m
[31m-                        t.equal(stat.mode & 0777, 0755);[m
[31m-                        t.ok(stat.isDirectory(), 'target not a directory');[m
[31m-                        if (cb) cb();[m
[31m-                    }[m
[31m-                })[m
[31m-            })[m
[31m-        });[m
[31m-    }[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/rel.js b/node_modules/express/node_modules/mkdirp/test/rel.js[m
[1mdeleted file mode 100644[m
[1mindex 7985824..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/rel.js[m
[1m+++ /dev/null[m
[36m@@ -1,32 +0,0 @@[m
[31m-var mkdirp = require('../');[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-test('rel', function (t) {[m
[31m-    t.plan(2);[m
[31m-    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    [m
[31m-    var cwd = process.cwd();[m
[31m-    process.chdir('/tmp');[m
[31m-    [m
[31m-    var file = [x,y,z].join('/');[m
[31m-    [m
[31m-    mkdirp(file, 0755, function (err) {[m
[31m-        if (err) t.fail(err);[m
[31m-        else path.exists(file, function (ex) {[m
[31m-            if (!ex) t.fail('file not created')[m
[31m-            else fs.stat(file, function (err, stat) {[m
[31m-                if (err) t.fail(err)[m
[31m-                else {[m
[31m-                    process.chdir(cwd);[m
[31m-                    t.equal(stat.mode & 0777, 0755);[m
[31m-                    t.ok(stat.isDirectory(), 'target not a directory');[m
[31m-                    t.end();[m
[31m-                }[m
[31m-            })[m
[31m-        })[m
[31m-    });[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/sync.js b/node_modules/express/node_modules/mkdirp/test/sync.js[m
[1mdeleted file mode 100644[m
[1mindex e0e389d..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/sync.js[m
[1m+++ /dev/null[m
[36m@@ -1,27 +0,0 @@[m
[31m-var mkdirp = require('../');[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-test('sync', function (t) {[m
[31m-    t.plan(2);[m
[31m-    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    [m
[31m-    var file = '/tmp/' + [x,y,z].join('/');[m
[31m-    [m
[31m-    var err = mkdirp.sync(file, 0755);[m
[31m-    if (err) t.fail(err);[m
[31m-    else path.exists(file, function (ex) {[m
[31m-        if (!ex) t.fail('file not created')[m
[31m-        else fs.stat(file, function (err, stat) {[m
[31m-            if (err) t.fail(err)[m
[31m-            else {[m
[31m-                t.equal(stat.mode & 0777, 0755);[m
[31m-                t.ok(stat.isDirectory(), 'target not a directory');[m
[31m-                t.end();[m
[31m-            }[m
[31m-        })[m
[31m-    })[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/umask.js b/node_modules/express/node_modules/mkdirp/test/umask.js[m
[1mdeleted file mode 100644[m
[1mindex 64ccafe..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/umask.js[m
[1m+++ /dev/null[m
[36m@@ -1,28 +0,0 @@[m
[31m-var mkdirp = require('../');[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-test('implicit mode from umask', function (t) {[m
[31m-    t.plan(2);[m
[31m-    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    [m
[31m-    var file = '/tmp/' + [x,y,z].join('/');[m
[31m-    [m
[31m-    mkdirp(file, function (err) {[m
[31m-        if (err) t.fail(err);[m
[31m-        else path.exists(file, function (ex) {[m
[31m-            if (!ex) t.fail('file not created')[m
[31m-            else fs.stat(file, function (err, stat) {[m
[31m-                if (err) t.fail(err)[m
[31m-                else {[m
[31m-                    t.equal(stat.mode & 0777, 0777 & (~process.umask()));[m
[31m-                    t.ok(stat.isDirectory(), 'target not a directory');[m
[31m-                    t.end();[m
[31m-                }[m
[31m-            })[m
[31m-        })[m
[31m-    });[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/umask_sync.js b/node_modules/express/node_modules/mkdirp/test/umask_sync.js[m
[1mdeleted file mode 100644[m
[1mindex 83cba56..0000000[m
[1m--- a/node_modules/express/node_modules/mkdirp/test/umask_sync.js[m
[1m+++ /dev/null[m
[36m@@ -1,27 +0,0 @@[m
[31m-var mkdirp = require('../');[m
[31m-var path = require('path');[m
[31m-var fs = require('fs');[m
[31m-var test = require('tap').test;[m
[31m-[m
[31m-test('umask sync modes', function (t) {[m
[31m-    t.plan(2);[m
[31m-    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[31m-    [m
[31m-    var file = '/tmp/' + [x,y,z].join('/');[m
[31m-    [m
[31m-    var err = mkdirp.sync(file);[m
[31m-    if (err) t.fail(err);[m
[31m-    else path.exists(file, function (ex) {[m
[31m-        if (!ex) t.fail('file not created')[m
[31m-        else fs.stat(file, function (err, stat) {[m
[31m-            if (err) t.fail(err)[m
[31m-            else {[m
[31m-                t.equal(stat.mode & 0777, (0777 & (~process.umask())));[m
[31m-                t.ok(stat.isDirectory(), 'target not a directory');[m
[31m-                t.end();[m
[31m-            }[m
[31m-        })[m
[31m-    })[m
[31m-});[m
[1mdiff --git a/node_modules/express/node_modules/qs/.gitmodules b/node_modules/express/node_modules/qs/.gitmodules[m
[1mdeleted file mode 100644[m
[1mindex 49e31da..0000000[m
[1m--- a/node_modules/express/node_modules/qs/.gitmodules[m
[1m+++ /dev/null[m
[36m@@ -1,6 +0,0 @@[m
[31m-[submodule "support/expresso"][m
[31m-	path = support/expresso[m
[31m-	url = git://github.com/visionmedia/expresso.git[m
[31m-[submodule "support/should"][m
[31m-	path = support/should[m
[31m-	url = git://github.com/visionmedia/should.js.git[m
[1mdiff --git a/node_modules/express/node_modules/qs/.npmignore b/node_modules/express/node_modules/qs/.npmignore[m
[1mdeleted file mode 100644[m
[1mindex 3c3629e..0000000[m
[1m--- a/node_modules/express/node_modules/qs/.npmignore[m
[1m+++ /dev/null[m
[36m@@ -1 +0,0 @@[m
[31m-node_modules[m
[1mdiff --git a/node_modules/express/node_modules/qs/.travis.yml b/node_modules/express/node_modules/qs/.travis.yml[m
[1mdeleted file mode 100644[m
[1mindex 2c0a8f6..0000000[m
[1m--- a/node_modules/express/node_modules/qs/.travis.yml[m
[1m+++ /dev/null[m
[36m@@ -1,4 +0,0 @@[m
[31m-language: node_js[m
[31m-node_js:[m
[31m-  - 0.6[m
[31m-  - 0.4[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/History.md b/node_modules/express/node_modules/qs/History.md[m
[1mdeleted file mode 100644[m
[1mindex 3eaf7df..0000000[m
[1m--- a/node_modules/express/node_modules/qs/History.md[m
[1m+++ /dev/null[m
[36m@@ -1,73 +0,0 @@[m
[31m-[m
[31m-0.4.2 / 2012-02-08 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed: ensure objects are created when appropriate not arrays [aheckmann][m
[31m-[m
[31m-0.4.1 / 2012-01-26 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed stringify()ing numbers. Closes #23[m
[31m-[m
[31m-0.4.0 / 2011-11-21 [m
[31m-==================[m
[31m-[m
[31m-  * Allow parsing of an existing object (for `bodyParser()`) [jackyz][m
[31m-  * Replaced expresso with mocha[m
[31m-[m
[31m-0.3.2 / 2011-11-08 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed global variable leak[m
[31m-[m
[31m-0.3.1 / 2011-08-17 [m
[31m-==================[m
[31m-[m
[31m-  * Added `try/catch` around malformed uri components[m
[31m-  * Add test coverage for Array native method bleed-though[m
[31m-[m
[31m-0.3.0 / 2011-07-19 [m
[31m-==================[m
[31m-[m
[31m-  * Allow `array[index]` and `object[property]` syntaxes [Aria Stewart][m
[31m-[m
[31m-0.2.0 / 2011-06-29 [m
[31m-==================[m
[31m-[m
[31m-  * Added `qs.stringify()` [Cory Forsyth][m
[31m-[m
[31m-0.1.0 / 2011-04-13 [m
[31m-==================[m
[31m-[m
[31m-  * Added jQuery-ish array support[m
[31m-[m
[31m-0.0.7 / 2011-03-13 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed; handle empty string and `== null` in `qs.parse()` [dmit][m
[31m-    allows for convenient `qs.parse(url.parse(str).query)`[m
[31m-[m
[31m-0.0.6 / 2011-02-14 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed; support for implicit arrays[m
[31m-[m
[31m-0.0.4 / 2011-02-09 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed `+` as a space[m
[31m-[m
[31m-0.0.3 / 2011-02-08 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed case when right-hand value contains "]"[m
[31m-[m
[31m-0.0.2 / 2011-02-07 [m
[31m-==================[m
[31m-[m
[31m-  * Fixed "=" presence in key[m
[31m-[m
[31m-0.0.1 / 2011-02-07 [m
[31m-==================[m
[31m-[m
[31m-  * Initial release[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/Makefile b/node_modules/express/node_modules/qs/Makefile[m
[1mdeleted file mode 100644[m
[1mindex e4df837..0000000[m
[1m--- a/node_modules/express/node_modules/qs/Makefile[m
[1m+++ /dev/null[m
[36m@@ -1,5 +0,0 @@[m
[31m-[m
[31m-test:[m
[31m-	@./node_modules/.bin/mocha[m
[31m-[m
[31m-.PHONY: test[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/Readme.md b/node_modules/express/node_modules/qs/Readme.md[m
[1mdeleted file mode 100644[m
[1mindex db0d145..0000000[m
[1m--- a/node_modules/express/node_modules/qs/Readme.md[m
[1m+++ /dev/null[m
[36m@@ -1,54 +0,0 @@[m
[31m-# node-querystring[m
[31m-[m
[31m-  query string parser for node supporting nesting, as it was removed from `0.3.x`, so this library provides the previous and commonly desired behaviour (and twice as fast). Used by [express](http://expressjs.com), [connect](http://senchalabs.github.com/connect) and others.[m
[31m-[m
[31m-## Installation[m
[31m-[m
[31m-    $ npm install qs[m
[31m-[m
[31m-## Examples[m
[31m-[m
[31m-```js[m
[31m-var qs = require('qs');[m
[31m-[m
[31m-qs.parse('user[name][first]=Tobi&user[email]=tobi@learnboost.com');[m
[31m-// => { user: { name: { first: 'Tobi' }, email: 'tobi@learnboost.com' } }[m
[31m-[m
[31m-qs.stringify({ user: { name: 'Tobi', email: 'tobi@learnboost.com' }})[m
[31m-// => user[name]=Tobi&user[email]=tobi%40learnboost.com[m
[31m-```[m
[31m-[m
[31m-## Testing[m
[31m-[m
[31m-Install dev dependencies:[m
[31m-[m
[31m-    $ npm install -d[m
[31m-[m
[31m-and execute:[m
[31m-[m
[31m-    $ make test[m
[31m-[m
[31m-## License [m
[31m-[m
[31m-(The MIT License)[m
[31m-[m
[31m-Copyright (c) 2010 TJ Holowaychuk &lt;tj@vision-media.ca&gt;[m
[31m-[m
[31m-Permission is hereby granted, free of charge, to any person obtaining[m
[31m-a copy of this software and associated documentation files (the[m
[31m-'Software'), to deal in the Software without restriction, including[m
[31m-without limitation the rights to use, copy, modify, merge, publish,[m
[31m-distribute, sublicense, and/or sell copies of the Software, and to[m
[31m-permit persons to whom the Software is furnished to do so, subject to[m
[31m-the following conditions:[m
[31m-[m
[31m-The above copyright notice and this permission notice shall be[m
[31m-included in all copies or substantial portions of the Software.[m
[31m-[m
[31m-THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,[m
[31m-EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF[m
[31m-MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.[m
[31m-IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY[m
[31m-CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,[m
[31m-TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE[m
[31m-SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/benchmark.js b/node_modules/express/node_modules/qs/benchmark.js[m
[1mdeleted file mode 100644[m
[1mindex 97e2c93..0000000[m
[1m--- a/node_modules/express/node_modules/qs/benchmark.js[m
[1m+++ /dev/null[m
[36m@@ -1,17 +0,0 @@[m
[31m-[m
[31m-var qs = require('./');[m
[31m-[m
[31m-var times = 100000[m
[31m-  , start = new Date[m
[31m-  , n = times;[m
[31m-[m
[31m-console.log('times: %d', times);[m
[31m-[m
[31m-while (n--) qs.parse('foo=bar');[m
[31m-console.log('simple: %dms', new Date - start);[m
[31m-[m
[31m-var start = new Date[m
[31m-  , n = times;[m
[31m-[m
[31m-while (n--) qs.parse('user[name][first]=tj&user[name][last]=holowaychuk');[m
[31m-console.log('nested: %dms', new Date - start);[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/examples.js b/node_modules/express/node_modules/qs/examples.js[m
[1mdeleted file mode 100644[m
[1mindex 27617b7..0000000[m
[1m--- a/node_modules/express/node_modules/qs/examples.js[m
[1m+++ /dev/null[m
[36m@@ -1,51 +0,0 @@[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var qs = require('./');[m
[31m-[m
[31m-var obj = qs.parse('foo');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('foo=bar=baz');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('users[]');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('name=tj&email=tj@vision-media.ca');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('users[]=tj&users[]=tobi&users[]=jane');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('user[name][first]=tj&user[name][last]=holowaychuk');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('users[][name][first]=tj&users[][name][last]=holowaychuk');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('a=a&a=b&a=c');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('user[tj]=tj&user[tj]=TJ');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('user[names]=tj&user[names]=TJ&user[names]=Tyler');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('user[name][first]=tj&user[name][first]=TJ');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('user[0]=tj&user[1]=TJ');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('user[0]=tj&user[]=TJ');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var obj = qs.parse('user[0]=tj&user[foo]=TJ');[m
[31m-console.log(obj)[m
[31m-[m
[31m-var str = qs.stringify({ user: { name: 'Tobi', email: 'tobi@learnboost.com' }});[m
[31m-console.log(str);[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/index.js b/node_modules/express/node_modules/qs/index.js[m
[1mdeleted file mode 100644[m
[1mindex d177d20..0000000[m
[1m--- a/node_modules/express/node_modules/qs/index.js[m
[1m+++ /dev/null[m
[36m@@ -1,2 +0,0 @@[m
[31m-[m
[31m-module.exports = require('./lib/querystring');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/lib/querystring.js b/node_modules/express/node_modules/qs/lib/querystring.js[m
[1mdeleted file mode 100644[m
[1mindex 6c72712..0000000[m
[1m--- a/node_modules/express/node_modules/qs/lib/querystring.js[m
[1m+++ /dev/null[m
[36m@@ -1,264 +0,0 @@[m
[31m-[m
[31m-/*![m
[31m- * querystring[m
[31m- * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[31m- * MIT Licensed[m
[31m- */[m
[31m-[m
[31m-/**[m
[31m- * Library version.[m
[31m- */[m
[31m-[m
[31m-exports.version = '0.4.2';[m
[31m-[m
[31m-/**[m
[31m- * Object#toString() ref for stringify().[m
[31m- */[m
[31m-[m
[31m-var toString = Object.prototype.toString;[m
[31m-[m
[31m-/**[m
[31m- * Cache non-integer test regexp.[m
[31m- */[m
[31m-[m
[31m-var isint = /^[0-9]+$/;[m
[31m-[m
[31m-function promote(parent, key) {[m
[31m-  if (parent[key].length == 0) return parent[key] = {};[m
[31m-  var t = {};[m
[31m-  for (var i in parent[key]) t[i] = parent[key][i];[m
[31m-  parent[key] = t;[m
[31m-  return t;[m
[31m-}[m
[31m-[m
[31m-function parse(parts, parent, key, val) {[m
[31m-  var part = parts.shift();[m
[31m-  // end[m
[31m-  if (!part) {[m
[31m-    if (Array.isArray(parent[key])) {[m
[31m-      parent[key].push(val);[m
[31m-    } else if ('object' == typeof parent[key]) {[m
[31m-      parent[key] = val;[m
[31m-    } else if ('undefined' == typeof parent[key]) {[m
[31m-      parent[key] = val;[m
[31m-    } else {[m
[31m-      parent[key] = [parent[key], val];[m
[31m-    }[m
[31m-    // array[m
[31m-  } else {[m
[31m-    var obj = parent[key] = parent[key] || [];[m
[31m-    if (']' == part) {[m
[31m-      if (Array.isArray(obj)) {[m
[31m-        if ('' != val) obj.push(val);[m
[31m-      } else if ('object' == typeof obj) {[m
[31m-        obj[Object.keys(obj).length] = val;[m
[31m-      } else {[m
[31m-        obj = parent[key] = [parent[key], val];[m
[31m-      }[m
[31m-      // prop[m
[31m-    } else if (~part.indexOf(']')) {[m
[31m-      part = part.substr(0, part.length - 1);[m
[31m-      if (!isint.test(part) && Array.isArray(obj)) obj = promote(parent, key);[m
[31m-      parse(parts, obj, part, val);[m
[31m-      // key[m
[31m-    } else {[m
[31m-      if (!isint.test(part) && Array.isArray(obj)) obj = promote(parent, key);[m
[31m-      parse(parts, obj, part, val);[m
[31m-    }[m
[31m-  }[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Merge parent key/val pair.[m
[31m- */[m
[31m-[m
[31m-function merge(parent, key, val){[m
[31m-  if (~key.indexOf(']')) {[m
[31m-    var parts = key.split('[')[m
[31m-      , len = parts.length[m
[31m-      , last = len - 1;[m
[31m-    parse(parts, parent, 'base', val);[m
[31m-    // optimize[m
[31m-  } else {[m
[31m-    if (!isint.test(key) && Array.isArray(parent.base)) {[m
[31m-      var t = {};[m
[31m-      for (var k in parent.base) t[k] = parent.base[k];[m
[31m-      parent.base = t;[m
[31m-    }[m
[31m-    set(parent.base, key, val);[m
[31m-  }[m
[31m-[m
[31m-  return parent;[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Parse the given obj.[m
[31m- */[m
[31m-[m
[31m-function parseObject(obj){[m
[31m-  var ret = { base: {} };[m
[31m-  Object.keys(obj).forEach(function(name){[m
[31m-    merge(ret, name, obj[name]);[m
[31m-  });[m
[31m-  return ret.base;[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Parse the given str.[m
[31m- */[m
[31m-[m
[31m-function parseString(str){[m
[31m-  return String(str)[m
[31m-    .split('&')[m
[31m-    .reduce(function(ret, pair){[m
[31m-      try{[m
[31m-        pair = decodeURIComponent(pair.replace(/\+/g, ' '));[m
[31m-      } catch(e) {[m
[31m-        // ignore[m
[31m-      }[m
[31m-[m
[31m-      var eql = pair.indexOf('=')[m
[31m-        , brace = lastBraceInKey(pair)[m
[31m-        , key = pair.substr(0, brace || eql)[m
[31m-        , val = pair.substr(brace || eql, pair.length)[m
[31m-        , val = val.substr(val.indexOf('=') + 1, val.length);[m
[31m-[m
[31m-      // ?foo[m
[31m-      if ('' == key) key = pair, val = '';[m
[31m-[m
[31m-      return merge(ret, key, val);[m
[31m-    }, { base: {} }).base;[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Parse the given query `str` or `obj`, returning an object.[m
[31m- *[m
[31m- * @param {String} str | {Object} obj[m
[31m- * @return {Object}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-exports.parse = function(str){[m
[31m-  if (null == str || '' == str) return {};[m
[31m-  return 'object' == typeof str[m
[31m-    ? parseObject(str)[m
[31m-    : parseString(str);[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Turn the given `obj` into a query string[m
[31m- *[m
[31m- * @param {Object} obj[m
[31m- * @return {String}[m
[31m- * @api public[m
[31m- */[m
[31m-[m
[31m-var stringify = exports.stringify = function(obj, prefix) {[m
[31m-  if (Array.isArray(obj)) {[m
[31m-    return stringifyArray(obj, prefix);[m
[31m-  } else if ('[object Object]' == toString.call(obj)) {[m
[31m-    return stringifyObject(obj, prefix);[m
[31m-  } else if ('string' == typeof obj) {[m
[31m-    return stringifyString(obj, prefix);[m
[31m-  } else {[m
[31m-    return prefix + '=' + obj;[m
[31m-  }[m
[31m-};[m
[31m-[m
[31m-/**[m
[31m- * Stringify the given `str`.[m
[31m- *[m
[31m- * @param {String} str[m
[31m- * @param {String} prefix[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function stringifyString(str, prefix) {[m
[31m-  if (!prefix) throw new TypeError('stringify expects an object');[m
[31m-  return prefix + '=' + encodeURIComponent(str);[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Stringify the given `arr`.[m
[31m- *[m
[31m- * @param {Array} arr[m
[31m- * @param {String} prefix[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function stringifyArray(arr, prefix) {[m
[31m-  var ret = [];[m
[31m-  if (!prefix) throw new TypeError('stringify expects an object');[m
[31m-  for (var i = 0; i < arr.length; i++) {[m
[31m-    ret.push(stringify(arr[i], prefix + '[]'));[m
[31m-  }[m
[31m-  return ret.join('&');[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Stringify the given `obj`.[m
[31m- *[m
[31m- * @param {Object} obj[m
[31m- * @param {String} prefix[m
[31m- * @return {String}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function stringifyObject(obj, prefix) {[m
[31m-  var ret = [][m
[31m-    , keys = Object.keys(obj)[m
[31m-    , key;[m
[31m-[m
[31m-  for (var i = 0, len = keys.length; i < len; ++i) {[m
[31m-    key = keys[i];[m
[31m-    ret.push(stringify(obj[key], prefix[m
[31m-      ? prefix + '[' + encodeURIComponent(key) + ']'[m
[31m-      : encodeURIComponent(key)));[m
[31m-  }[m
[31m-[m
[31m-  return ret.join('&');[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Set `obj`'s `key` to `val` respecting[m
[31m- * the weird and wonderful syntax of a qs,[m
[31m- * where "foo=bar&foo=baz" becomes an array.[m
[31m- *[m
[31m- * @param {Object} obj[m
[31m- * @param {String} key[m
[31m- * @param {String} val[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function set(obj, key, val) {[m
[31m-  var v = obj[key];[m
[31m-  if (undefined === v) {[m
[31m-    obj[key] = val;[m
[31m-  } else if (Array.isArray(v)) {[m
[31m-    v.push(val);[m
[31m-  } else {[m
[31m-    obj[key] = [v, val];[m
[31m-  }[m
[31m-}[m
[31m-[m
[31m-/**[m
[31m- * Locate last brace in `str` within the key.[m
[31m- *[m
[31m- * @param {String} str[m
[31m- * @return {Number}[m
[31m- * @api private[m
[31m- */[m
[31m-[m
[31m-function lastBraceInKey(str) {[m
[31m-  var len = str.length[m
[31m-    , brace[m
[31m-    , c;[m
[31m-  for (var i = 0; i < len; ++i) {[m
[31m-    c = str[i];[m
[31m-    if (']' == c) brace = false;[m
[31m-    if ('[' == c) brace = true;[m
[31m-    if ('=' == c && !brace) return i;[m
[31m-  }[m
[31m-}[m
[1mdiff --git a/node_modules/express/node_modules/qs/package.json b/node_modules/express/node_modules/qs/package.json[m
[1mdeleted file mode 100644[m
[1mindex 68dd5a6..0000000[m
[1m--- a/node_modules/express/node_modules/qs/package.json[m
[1m+++ /dev/null[m
[36m@@ -1,16 +0,0 @@[m
[31m-{[m
[31m-  "name": "qs",[m
[31m-  "description": "querystring parser",[m
[31m-  "version": "0.4.2",[m
[31m-  "repository": {[m
[31m-    "type" : "git",[m
[31m-    "url" : "git://github.com/visionmedia/node-querystring.git"[m
[31m-  },[m
[31m-  "devDependencies": {[m
[31m-      "mocha": "*"[m
[31m-    , "should": "*"[m
[31m-  },[m
[31m-  "author": "TJ Holowaychuk <tj@vision-media.ca> (http://tjholowaychuk.com)",[m
[31m-  "main": "index",[m
[31m-  "engines": { "node": "*" }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/test/mocha.opts b/node_modules/express/node_modules/qs/test/mocha.opts[m
[1mdeleted file mode 100644[m
[1mindex 521cbb2..0000000[m
[1m--- a/node_modules/express/node_modules/qs/test/mocha.opts[m
[1m+++ /dev/null[m
[36m@@ -1,2 +0,0 @@[m
[31m---require should[m
[31m---ui exports[m
[1mdiff --git a/node_modules/express/node_modules/qs/test/parse.js b/node_modules/express/node_modules/qs/test/parse.js[m
[1mdeleted file mode 100644[m
[1mindex f219e27..0000000[m
[1m--- a/node_modules/express/node_modules/qs/test/parse.js[m
[1m+++ /dev/null[m
[36m@@ -1,167 +0,0 @@[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var qs = require('../');[m
[31m-[m
[31m-module.exports = {[m
[31m-  'test basics': function(){[m
[31m-    qs.parse('0=foo').should.eql({ '0': 'foo' });[m
[31m-[m
[31m-    qs.parse('foo=c++')[m
[31m-      .should.eql({ foo: 'c  ' });[m
[31m-[m
[31m-    qs.parse('a[>=]=23')[m
[31m-      .should.eql({ a: { '>=': '23' }});[m
[31m-[m
[31m-    qs.parse('a[<=>]==23')[m
[31m-      .should.eql({ a: { '<=>': '=23' }});[m
[31m-[m
[31m-    qs.parse('a[==]=23')[m
[31m-      .should.eql({ a: { '==': '23' }});[m
[31m-[m
[31m-    qs.parse('foo')[m
[31m-      .should.eql({ foo: '' });[m
[31m-[m
[31m-    qs.parse('foo=bar')[m
[31m-      .should.eql({ foo: 'bar' });[m
[31m-[m
[31m-    qs.parse('foo%3Dbar=baz')[m
[31m-      .should.eql({ foo: 'bar=baz' });[m
[31m-[m
[31m-    qs.parse(' foo = bar = baz ')[m
[31m-      .should.eql({ ' foo ': ' bar = baz ' });[m
[31m-[m
[31m-    qs.parse('foo=bar=baz')[m
[31m-      .should.eql({ foo: 'bar=baz' });[m
[31m-[m
[31m-    qs.parse('foo=bar&bar=baz')[m
[31m-      .should.eql({ foo: 'bar', bar: 'baz' });[m
[31m-[m
[31m-    qs.parse('foo=bar&baz')[m
[31m-      .should.eql({ foo: 'bar', baz: '' });[m
[31m-[m
[31m-    qs.parse('cht=p3&chd=t:60,40&chs=250x100&chl=Hello|World')[m
[31m-      .should.eql({[m
[31m-          cht: 'p3'[m
[31m-        , chd: 't:60,40'[m
[31m-        , chs: '250x100'[m
[31m-        , chl: 'Hello|World'[m
[31m-      });[m
[31m-  },[m
[31m-  [m
[31m-  'test nesting': function(){[m
[31m-    qs.parse('ops[>=]=25')[m
[31m-      .should.eql({ ops: { '>=': '25' }});[m
[31m-[m
[31m-    qs.parse('user[name]=tj')[m
[31m-      .should.eql({ user: { name: 'tj' }});[m
[31m-[m
[31m-    qs.parse('user[name][first]=tj&user[name][last]=holowaychuk')[m
[31m-      .should.eql({ user: { name: { first: 'tj', last: 'holowaychuk' }}});[m
[31m-  },[m
[31m-  [m
[31m-  'test escaping': function(){[m
[31m-    qs.parse('foo=foo%20bar')[m
[31m-      .should.eql({ foo: 'foo bar' });[m
[31m-  },[m
[31m-  [m
[31m-  'test arrays': function(){[m
[31m-    qs.parse('images[]')[m
[31m-      .should.eql({ images: [] });[m
[31m-[m
[31m-    qs.parse('user[]=tj')[m
[31m-      .should.eql({ user: ['tj'] });[m
[31m-[m
[31m-    qs.parse('user[]=tj&user[]=tobi&user[]=jane')[m
[31m-      .should.eql({ user: ['tj', 'tobi', 'jane'] });[m
[31m-[m
[31m-    qs.parse('user[names][]=tj&user[names][]=tyler')[m
[31m-      .should.eql({ user: { names: ['tj', 'tyler'] }});[m
[31m-[m
[31m-    qs.parse('user[names][]=tj&user[names][]=tyler&user[email]=tj@vision-media.ca')[m
[31m-      .should.eql({ user: { names: ['tj', 'tyler'], email: 'tj@vision-media.ca' }});[m
[31m-[m
[31m-    qs.parse('items=a&items=b')[m
[31m-      .should.eql({ items: ['a', 'b'] });[m
[31m-[m
[31m-    qs.parse('user[names]=tj&user[names]=holowaychuk&user[names]=TJ')[m
[31m-      .should.eql({ user: { names: ['tj', 'holowaychuk', 'TJ'] }});[m
[31m-[m
[31m-    qs.parse('user[name][first]=tj&user[name][first]=TJ')[m
[31m-      .should.eql({ user: { name: { first: ['tj', 'TJ'] }}});[m
[31m-[m
[31m-    var o = qs.parse('existing[fcbaebfecc][name][last]=tj')[m
[31m-    o.should.eql({ existing: { 'fcbaebfecc': { name: { last: 'tj' }}}})[m
[31m-    Array.isArray(o.existing).should.be.false;[m
[31m-  },[m
[31m-[m
[31m-  'test right-hand brackets': function(){[m
[31m-    qs.parse('pets=["tobi"]')[m
[31m-      .should.eql({ pets: '["tobi"]' });[m
[31m-[m
[31m-    qs.parse('operators=[">=", "<="]')[m
[31m-      .should.eql({ operators: '[">=", "<="]' });[m
[31m-[m
[31m-    qs.parse('op[>=]=[1,2,3]')[m
[31m-      .should.eql({ op: { '>=': '[1,2,3]' }});[m
[31m-[m
[31m-    qs.parse('op[>=]=[1,2,3]&op[=]=[[[[1]]]]')[m
[31m-          .should.eql({ op: { '>=': '[1,2,3]', '=': '[[[[1]]]]' }});[m
[31m-  },[m
[31m-  [m
[31m-  'test duplicates': function(){[m
[31m-    qs.parse('items=bar&items=baz&items=raz')[m
[31m-      .should.eql({ items: ['bar', 'baz', 'raz'] });[m
[31m-  },[m
[31m-[m
[31m-  'test empty': function(){[m
[31m-    qs.parse('').should.eql({});[m
[31m-    qs.parse(undefined).should.eql({});[m
[31m-    qs.parse(null).should.eql({});[m
[31m-  },[m
[31m-[m
[31m-  'test arrays with indexes': function(){[m
[31m-    qs.parse('foo[0]=bar&foo[1]=baz').should.eql({ foo: ['bar', 'baz'] });[m
[31m-    qs.parse('foo[1]=bar&foo[0]=baz').should.eql({ foo: ['baz', 'bar'] });[m
[31m-    qs.parse('foo[base64]=RAWR').should.eql({ foo: { base64: 'RAWR' }});[m
[31m-    qs.parse('foo[64base]=RAWR').should.eql({ foo: { '64base': 'RAWR' }});[m
[31m-  },[m
[31m-[m
[31m-  'test arrays becoming objects': function(){[m
[31m-    qs.parse('foo[0]=bar&foo[bad]=baz').should.eql({ foo: { 0: "bar", bad: "baz" }});[m
[31m-    qs.parse('foo[bad]=baz&foo[0]=bar').should.eql({ foo: { 0: "bar", bad: "baz" }});[m
[31m-  },[m
[31m-[m
[31m-  'test bleed-through of Array native properties/methods': function(){[m
[31m-    Array.prototype.protoProperty = true;[m
[31m-    Array.prototype.protoFunction = function () {};[m
[31m-    qs.parse('foo=bar').should.eql({ foo: 'bar' });[m
[31m-  },[m
[31m-[m
[31m-  'test malformed uri': function(){[m
[31m-    qs.parse('{%:%}').should.eql({ '{%:%}': '' });[m
[31m-    qs.parse('foo=%:%}').should.eql({ 'foo': '%:%}' });[m
[31m-  },[m
[31m-[m
[31m-  'test semi-parsed': function(){[m
[31m-    qs.parse({ 'user[name]': 'tobi' })[m
[31m-      .should.eql({ user: { name: 'tobi' }});[m
[31m-[m
[31m-    qs.parse({ 'user[name]': 'tobi', 'user[email][main]': 'tobi@lb.com' })[m
[31m-      .should.eql({ user: { name: 'tobi', email: { main: 'tobi@lb.com' } }});[m
[31m-  }[m
[31m-  [m
[31m-  // 'test complex': function(){[m
[31m-  //   qs.parse('users[][name][first]=tj&users[foo]=bar')[m
[31m-  //     .should.eql({[m
[31m-  //       users: [ { name: 'tj' }, { name: 'tobi' }, { foo: 'bar' }][m
[31m-  //     });[m
[31m-  // [m
[31m-  //   qs.parse('users[][name][first]=tj&users[][name][first]=tobi')[m
[31m-  //     .should.eql({[m
[31m-  //       users: [ { name: 'tj' }, { name: 'tobi' }][m
[31m-  //     });[m
[31m-  // }[m
[31m-};[m
[1mdiff --git a/node_modules/express/node_modules/qs/test/stringify.js b/node_modules/express/node_modules/qs/test/stringify.js[m
[1mdeleted file mode 100644[m
[1mindex c2195cb..0000000[m
[1m--- a/node_modules/express/node_modules/qs/test/stringify.js[m
[1m+++ /dev/null[m
[36m@@ -1,103 +0,0 @@[m
[31m-[m
[31m-/**[m
[31m- * Module dependencies.[m
[31m- */[m
[31m-[m
[31m-var qs = require('../')[m
[31m-  , should = require('should')[m
[31m-  , str_identities = {[m
[31m-    'basics': [[m
[31m-      { str: 'foo=bar', obj: {'foo' : 'bar'}},[m
[31m-      { str: 'foo=%22bar%22', obj: {'foo' : '\"bar\"'}},[m
[31m-      { str: 'foo=', obj: {'foo': ''}},[m
[31m-      { str: 'foo=1&bar=2', obj: {'foo' : '1', 'bar' : '2'}},[m
[31m-      { str: 'my%20weird%20field=q1!2%22\'w%245%267%2Fz8)%3F', obj: {'my weird field': "q1!2\"'w$5&7/z8)?"}},[m
[31m-      { str: 'foo%3Dbaz=bar', obj: {'foo=baz': 'bar'}},[m
[31m-      { str: 'foo=bar&bar=baz', obj: {foo: 'bar', bar: 'baz'}}[m
[31m-    ],[m
[31m-    'escaping': [[m
[31m-      { str: 'foo=foo%20bar', obj: {foo: 'foo bar'}},[m
[31m-      { str: 'cht=p3&chd=t%3A60%2C40&chs=250x100&chl=Hello%7CWorld', obj: {[m
[31m-          cht: 'p3'[m
[31m-        , chd: 't:60,40'[m
[31m-        , chs: '250x100'[m
[31m-        , chl: 'Hello|World'[m
[31m-      }}[m
[31m-    ],[m
[31m-    'nested': [[m
[31m-      { str: 'foo[]=bar&foo[]=quux', obj: {'foo' : ['bar', 'quux']}},[m
[31m-      { str: 'foo[]=bar', obj: {foo: ['bar']}},[m
[31m-      { str: 'foo[]=1&foo[]=2', obj: {'foo' : ['1', '2']}},[m
[31m-      { str: 'foo=bar&baz[]=1&baz[]=2&baz[]=3', obj: {'foo' : 'bar', 'baz' : ['1', '2', '3']}},[m
[31m-      { str: 'foo[]=bar&baz[]=1&baz[]=2&baz[]=3', obj: {'foo' : ['bar'], 'baz' : ['1', '2', '3']}},[m
[31m-      { str: 'x[y][z]=1', obj: {'x' : {'y' : {'z' : '1'}}}},[m
[31m-      { str: 'x[y][z][]=1', obj: {'x' : {'y' : {'z' : ['1']}}}},[m
[31m-      { str: 'x[y][z]=2', obj: {'x' : {'y' : {'z' : '2'}}}},[m
[31m-      { str: 'x[y][z][]=1&x[y][z][]=2', obj: {'x' : {'y' : {'z' : ['1', '2']}}}},[m
[31m-      { str: 'x[y][][z]=1', obj: {'x' : {'y' : [{'z' : '1'}]}}},[m
[31m-      { str: 'x[y][][z][]=1', obj: {'x' : {'y' : [{'z' : ['1']}]}}},[m
[31m-      { str: 'x[y][][z]=1&x[y][][w]=2', obj: {'x' : {'y' : [{'z' : '1', 'w' : '2'}]}}},[m
[31m-      { str: 'x[y][][v][w]=1', obj: {'x' : {'y' : [{'v' : {'w' : '1'}}]}}},[m
[31m-      { str: 'x[y][][z]=1&x[y][][v][w]=2', obj: {'x' : {'y' : [{'z' : '1', 'v' : {'w' : '2'}}]}}},[m
[31m-      { str: 'x[y][][z]=1&x[y][][z]=2', obj: {'x' : {'y' : [{'z' : '1'}, {'z' : '2'}]}}},[m
[31m-      { str: 'x[y][][z]=1&x[y][][w]=a&x[y][][z]=2&x[y][][w]=3', obj: {'x' : {'y' : [{'z' : '1', 'w' : 'a'}, {'z' : '2', 'w' : '3'}]}}},[m
[31m-      { str: 'user[name][first]=tj&user[name][last]=holowaychuk', obj: { user: { name: { first: 'tj', last: 'holowaychuk' }}}}[m
[31m-    ],[m
[31m-    'errors': [[m
[31m-      { obj: 'foo=bar',     message: 'stringify expects an object' },[m
[31m-      { obj: ['foo', 'bar'], message: 'stringify expects an object' }[m
[31m-    ],[m
[31m-    'numbers': [[m
[31m-      { str: 'limit[]=1&limit[]=2&limit[]=3', obj: { limit: [1, 2, '3'] }},[m
[31m-      { str: 'limit=1', obj: { limit: 1 }}[m
[31m-    ][m
[31m-  };[m
[31m-  [m
[31m-[m
[31m-// Assert error[m
[31m-function err(fn, msg){[m
[31m-  var err;[m
[31m-  try {[m
[31m-    fn();[m
[31m-  } catch (e) {[m
[31m-    should.equal(e.message, msg);[m
[31m-    return;[m
[31m-  }[m
[31m-  throw new Error('no exception thrown, expected "' + msg + '"');[m
[31m-}[m
[31m-[m
[31m-function test(type) {[m
[31m-  var str, obj;[m
[31m-  for (var i = 0; i < str_identities[type].length; i++) {[m
[31m-    str = str_identities[type][i].str;[m
[31m-    obj = str_identities[type][i].obj;[m
[31m-    qs.stringify(obj).should.eql(str);[m
[31m-  }[m
[31m-}[m
[31m-[m
[31m-module.exports = {[m
[31m-  'test basics': function() {[m
[31m-    test('basics');[m
[31m-  },[m
[31m-[m
[31m-  'test escaping': function() {[m
[31m-    test('escaping');[m
[31m-  },[m
[31m-[m
[31m-  'test nested': function() {[m
[31m-    test('nested');[m
[31m-  },[m
[31m-  [m
[31m-  'test numbers': function(){[m
[31m-    test('numbers');[m
[31m-  },[m
[31m-[m
[31m-  'test errors': function() {[m
[31m-    var obj, message;[m
[31m-    for (var i = 0; i < str_identities['errors'].length; i++) {[m
[31m-      message = str_identities['errors'][i].message;[m
[31m-      obj = str_identities['errors'][i].obj;[m
[31m-      err(function(){ qs.stringify(obj) }, message);[m
[31m-    }[m
[31m-  }[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/package.json b/node_modules/express/package.json[m
[1mdeleted file mode 100644[m
[1mindex 8558809..0000000[m
[1m--- a/node_modules/express/package.json[m
[1m+++ /dev/null[m
[36m@@ -1,38 +0,0 @@[m
[31m-{[m
[31m-  "name": "express",[m
[31m-  "description": "Sinatra inspired web development framework",[m
[31m-  "version": "2.5.11",[m
[31m-  "author": "TJ Holowaychuk <tj@vision-media.ca>",[m
[31m-  "contributors": [ [m
[31m-    { "name": "TJ Holowaychuk", "email": "tj@vision-media.ca" }, [m
[31m-    { "name": "Aaron Heckmann", "email": "aaron.heckmann+github@gmail.com" },[m
[31m-    { "name": "Ciaran Jessup", "email": "ciaranj@gmail.com" },[m
[31m-    { "name": "Guillermo Rauch", "email": "rauchg@gmail.com" }[m
[31m-  ],[m
[31m-  "dependencies": {[m
[31m-    "connect": "1.x",[m
[31m-    "mime": "1.2.4",[m
[31m-    "qs": "0.4.x",[m
[31m-    "mkdirp": "0.3.0"[m
[31m-  },[m
[31m-  "devDependencies": {[m
[31m-    "connect-form": "0.2.1",[m
[31m-    "ejs": "0.4.2",[m
[31m-    "expresso": "0.9.2",[m
[31m-    "hamljs": "0.6.x",[m
[31m-    "jade": "0.16.2",[m
[31m-    "stylus": "0.13.0",[m
[31m-    "should": "0.3.2",[m
[31m-    "express-messages": "0.0.2",[m
[31m-    "node-markdown": ">= 0.0.1",[m
[31m-    "connect-redis": ">= 0.0.1"[m
[31m-  },[m
[31m-  "keywords": ["framework", "sinatra", "web", "rest", "restful"],[m
[31m-  "repository": "git://github.com/visionmedia/express",[m
[31m-  "main": "index",[m
[31m-  "bin": { "express": "./bin/express" },[m
[31m-  "scripts": {[m
[31m-    "test": "make test",[m
[31m-    "prepublish" : "npm prune"[m
[31m-  }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/test.js b/node_modules/express/test.js[m
[1mdeleted file mode 100644[m
[1mindex 1f5ac01..0000000[m
[1m--- a/node_modules/express/test.js[m
[1m+++ /dev/null[m
[36m@@ -1,12 +0,0 @@[m
[31m-[m
[31m-var express = require('./');[m
[31m-var app = express.createServer();[m
[31m-[m
[31m-app.use(express.logger('dev'));[m
[31m-[m
[31m-app.get('/', function(req, res){[m
[31m-  console.log(req.protocol);[m
[31m-  res.send('hello');[m
[31m-});[m
[31m-[m
[31m-app.listen(3000);[m

[33mcommit 90fd58e343c29e54fc1d4e19036595500b2bdc21[m
Author: Mark Pundsack <mp@heroku.com>
Date:   Thu Aug 16 21:11:09 2012 -0700

    init

[1mdiff --git a/Procfile b/Procfile[m
[1mnew file mode 100644[m
[1mindex 0000000..ae7366d[m
[1m--- /dev/null[m
[1m+++ b/Procfile[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mweb: node web.js[m
[1mdiff --git a/node_modules/.bin/express b/node_modules/.bin/express[m
[1mnew file mode 120000[m
[1mindex 0000000..b741d99[m
[1m--- /dev/null[m
[1m+++ b/node_modules/.bin/express[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m../express/bin/express[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/.npmignore b/node_modules/express/.npmignore[m
[1mnew file mode 100644[m
[1mindex 0000000..74bd365[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/.npmignore[m
[36m@@ -0,0 +1,7 @@[m
[32m+[m[32m.git*[m
[32m+[m[32mdocs/[m
[32m+[m[32mexamples/[m
[32m+[m[32msupport/[m
[32m+[m[32mtest/[m
[32m+[m[32mtesting.js[m
[32m+[m[32m.DS_Store[m
[1mdiff --git a/node_modules/express/History.md b/node_modules/express/History.md[m
[1mnew file mode 100644[m
[1mindex 0000000..95ea466[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/History.md[m
[36m@@ -0,0 +1,823 @@[m
[32m+[m
[32m+[m[32m2.5.11 / 2012-06-29[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed backport of req.protocol[m
[32m+[m
[32m+[m[32m2.5.10 / 2012-06-15[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Remove annoying engines field from package.json[m
[32m+[m[32m  * Backport support for trusting X-Forwarded-Proto[m
[32m+[m[32m  * use version of `package.json` for `express` command[m
[32m+[m
[32m+[m[32m2.5.9/ 2012-04-02[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added support for PURGE request method [pbuyle][m
[32m+[m[32m  * Fixed `express(1)` generated app `app.address()` before `listening` [mmalecki][m
[32m+[m
[32m+[m[32m2.5.8 / 2012-02-08[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Update mkdirp dep. Closes #991[m
[32m+[m
[32m+[m[32m2.5.7 / 2012-02-06[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed `app.all` duplicate DELETE requests [mscdex][m
[32m+[m
[32m+[m[32m2.5.6 / 2012-01-13[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Updated hamljs dev dep. Closes #953[m
[32m+[m
[32m+[m[32m2.5.5 / 2012-01-08[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed: set `filename` on cached templates [matthewleon][m
[32m+[m
[32m+[m[32m2.5.4 / 2012-01-02[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed `express(1)` eol on 0.4.x. Closes #947[m
[32m+[m
[32m+[m[32m2.5.3 / 2011-12-30[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed `req.is()` when a charset is present[m
[32m+[m
[32m+[m[32m2.5.2 / 2011-12-10[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed: express(1) LF -> CRLF for windows[m
[32m+[m
[32m+[m[32m2.5.1 / 2011-11-17[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Changed: updated connect to 1.8.x[m
[32m+[m[32m  * Removed sass.js support from express(1)[m
[32m+[m
[32m+[m[32m2.5.0 / 2011-10-24[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added ./routes dir for generated app by default[m
[32m+[m[32m  * Added npm install reminder to express(1) app gen[m
[32m+[m[32m  * Added 0.5.x support[m
[32m+[m[32m  * Removed `make test-cov` since it wont work with node 0.5.x[m
[32m+[m[32m  * Fixed express(1) public dir for windows. Closes #866[m
[32m+[m
[32m+[m[32m2.4.7 / 2011-10-05[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added mkdirp to express(1). Closes #795[m
[32m+[m[32m  * Added simple _json-config_ example[m
[32m+[m[32m  * Added  shorthand for the parsed request's pathname via `req.path`[m
[32m+[m[32m  * Changed connect dep to 1.7.x to fix npm issue...[m
[32m+[m[32m  * Fixed `res.redirect()` __HEAD__ support. [reported by xerox][m
[32m+[m[32m  * Fixed `req.flash()`, only escape args[m
[32m+[m[32m  * Fixed absolute path checking on windows. Closes #829 [reported by andrewpmckenzie][m
[32m+[m
[32m+[m[32m2.4.6 / 2011-08-22[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed multiple param callback regression. Closes #824 [reported by TroyGoode][m
[32m+[m
[32m+[m[32m2.4.5 / 2011-08-19[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added support for routes to handle errors. Closes #809[m
[32m+[m[32m  * Added `app.routes.all()`. Closes #803[m
[32m+[m[32m  * Added "basepath" setting to work in conjunction with reverse proxies etc.[m[41m   [m
[32m+[m[32m  * Refactored `Route` to use a single array of callbacks[m
[32m+[m[32m  * Added support for multiple callbacks for `app.param()`. Closes #801[m
[32m+[m[32mCloses #805[m
[32m+[m[32m  * Changed: removed .call(self) for route callbacks[m
[32m+[m[32m  * Dependency: `qs >= 0.3.1`[m
[32m+[m[32m  * Fixed `res.redirect()` on windows due to `join()` usage. Closes #808[m
[32m+[m
[32m+[m[32m2.4.4 / 2011-08-05[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed `res.header()` intention of a set, even when `undefined`[m
[32m+[m[32m  * Fixed `*`, value no longer required[m
[32m+[m[32m  * Fixed `res.send(204)` support. Closes #771[m
[32m+[m
[32m+[m[32m2.4.3 / 2011-07-14[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added docs for `status` option special-case. Closes #739[m
[32m+[m[32m  * Fixed `options.filename`, exposing the view path to template engines[m
[32m+[m
[32m+[m[32m2.4.2. / 2011-07-06[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Revert "removed jsonp stripping" for XSS[m
[32m+[m
[32m+[m[32m2.4.1 / 2011-07-06[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `res.json()` JSONP support. Closes #737[m
[32m+[m[32m  * Added _extending-templates_ example. Closes #730[m
[32m+[m[32m  * Added "strict routing" setting for trailing slashes[m
[32m+[m[32m  * Added support for multiple envs in `app.configure()` calls. Closes #735[m
[32m+[m[32m  * Changed: `res.send()` using `res.json()`[m
[32m+[m[32m  * Changed: when cookie `path === null` don't default it[m
[32m+[m[32m  * Changed; default cookie path to "home" setting. Closes #731[m
[32m+[m[32m  * Removed _pids/logs_ creation from express(1)[m
[32m+[m
[32m+[m[32m2.4.0 / 2011-06-28[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added chainable `res.status(code)`[m
[32m+[m[32m  * Added `res.json()`, an explicit version of `res.send(obj)`[m
[32m+[m[32m  * Added simple web-service example[m
[32m+[m
[32m+[m[32m2.3.12 / 2011-06-22[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * \#express is now on freenode! come join![m
[32m+[m[32m  * Added `req.get(field, param)`[m
[32m+[m[32m  * Added links to Japanese documentation, thanks @hideyukisaito![m
[32m+[m[32m  * Added; the `express(1)` generated app outputs the env[m
[32m+[m[32m  * Added `content-negotiation` example[m
[32m+[m[32m  * Dependency: connect >= 1.5.1 < 2.0.0[m
[32m+[m[32m  * Fixed view layout bug. Closes #720[m
[32m+[m[32m  * Fixed; ignore body on 304. Closes #701[m
[32m+[m
[32m+[m[32m2.3.11 / 2011-06-04[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `npm test`[m
[32m+[m[32m  * Removed generation of dummy test file from `express(1)`[m
[32m+[m[32m  * Fixed; `express(1)` adds express as a dep[m
[32m+[m[32m  * Fixed; prune on `prepublish`[m
[32m+[m
[32m+[m[32m2.3.10 / 2011-05-27[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `req.route`, exposing the current route[m
[32m+[m[32m  * Added _package.json_ generation support to `express(1)`[m
[32m+[m[32m  * Fixed call to `app.param()` function for optional params. Closes #682[m
[32m+[m
[32m+[m[32m2.3.9 / 2011-05-25[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed bug-ish with `../' in `res.partial()` calls[m
[32m+[m
[32m+[m[32m2.3.8 / 2011-05-24[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed `app.options()`[m
[32m+[m
[32m+[m[32m2.3.7 / 2011-05-23[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added route `Collection`, ex: `app.get('/user/:id').remove();`[m
[32m+[m[32m  * Added support for `app.param(fn)` to define param logic[m
[32m+[m[32m  * Removed `app.param()` support for callback with return value[m
[32m+[m[32m  * Removed module.parent check from express(1) generated app. Closes #670[m
[32m+[m[32m  * Refactored router. Closes #639[m
[32m+[m
[32m+[m[32m2.3.6 / 2011-05-20[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Changed; using devDependencies instead of git submodules[m
[32m+[m[32m  * Fixed redis session example[m
[32m+[m[32m  * Fixed markdown example[m
[32m+[m[32m  * Fixed view caching, should not be enabled in development[m
[32m+[m
[32m+[m[32m2.3.5 / 2011-05-20[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added export `.view` as alias for `.View`[m
[32m+[m
[32m+[m[32m2.3.4 / 2011-05-08[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `./examples/say`[m
[32m+[m[32m  * Fixed `res.sendfile()` bug preventing the transfer of files with spaces[m
[32m+[m
[32m+[m[32m2.3.3 / 2011-05-03[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added "case sensitive routes" option.[m
[32m+[m[32m  * Changed; split methods supported per rfc [slaskis][m
[32m+[m[32m  * Fixed route-specific middleware when using the same callback function several times[m
[32m+[m
[32m+[m[32m2.3.2 / 2011-04-27[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed view hints[m
[32m+[m
[32m+[m[32m2.3.1 / 2011-04-26[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `app.match()` as `app.match.all()`[m
[32m+[m[32m  * Added `app.lookup()` as `app.lookup.all()`[m
[32m+[m[32m  * Added `app.remove()` for `app.remove.all()`[m
[32m+[m[32m  * Added `app.remove.VERB()`[m
[32m+[m[32m  * Fixed template caching collision issue. Closes #644[m
[32m+[m[32m  * Moved router over from connect and started refactor[m
[32m+[m
[32m+[m[32m2.3.0 / 2011-04-25[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added options support to `res.clearCookie()`[m
[32m+[m[32m  * Added `res.helpers()` as alias of `res.locals()`[m
[32m+[m[32m  * Added; json defaults to UTF-8 with `res.send()`. Closes #632. [Daniel   * Dependency `connect >= 1.4.0`[m
[32m+[m[32m  * Changed; auto set Content-Type in res.attachement [Aaron Heckmann][m
[32m+[m[32m  * Renamed "cache views" to "view cache". Closes #628[m
[32m+[m[32m  * Fixed caching of views when using several apps. Closes #637[m
[32m+[m[32m  * Fixed gotcha invoking `app.param()` callbacks once per route middleware.[m[41m [m
[32m+[m[32mCloses #638[m
[32m+[m[32m  * Fixed partial lookup precedence. Closes #631[m
[32m+[m[32mShaw][m
[32m+[m
[32m+[m[32m2.2.2 / 2011-04-12[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added second callback support for `res.download()` connection errors[m
[32m+[m[32m  * Fixed `filename` option passing to template engine[m
[32m+[m
[32m+[m[32m2.2.1 / 2011-04-04[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `layout(path)` helper to change the layout within a view. Closes #610[m
[32m+[m[32m  * Fixed `partial()` collection object support.[m
[32m+[m[32m    Previously only anything with `.length` would work.[m
[32m+[m[32m    When `.length` is present one must still be aware of holes,[m
[32m+[m[32m    however now `{ collection: {foo: 'bar'}}` is valid, exposes[m
[32m+[m[32m    `keyInCollection` and `keysInCollection`.[m
[32m+[m
[32m+[m[32m  * Performance improved with better view caching[m
[32m+[m[32m  * Removed `request` and `response` locals[m
[32m+[m[32m  * Changed; errorHandler page title is now `Express` instead of `Connect`[m
[32m+[m
[32m+[m[32m2.2.0 / 2011-03-30[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `app.lookup.VERB()`, ex `app.lookup.put('/user/:id')`. Closes #606[m
[32m+[m[32m  * Added `app.match.VERB()`, ex `app.match.put('/user/12')`. Closes #606[m
[32m+[m[32m  * Added `app.VERB(path)` as alias of `app.lookup.VERB()`.[m
[32m+[m[32m  * Dependency `connect >= 1.2.0`[m
[32m+[m
[32m+[m[32m2.1.1 / 2011-03-29[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added; expose `err.view` object when failing to locate a view[m
[32m+[m[32m  * Fixed `res.partial()` call `next(err)` when no callback is given [reported by aheckmann][m
[32m+[m[32m  * Fixed; `res.send(undefined)` responds with 204 [aheckmann][m
[32m+[m
[32m+[m[32m2.1.0 / 2011-03-24[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `<root>/_?<name>` partial lookup support. Closes #447[m
[32m+[m[32m  * Added `request`, `response`, and `app` local variables[m
[32m+[m[32m  * Added `settings` local variable, containing the app's settings[m
[32m+[m[32m  * Added `req.flash()` exception if `req.session` is not available[m
[32m+[m[32m  * Added `res.send(bool)` support (json response)[m
[32m+[m[32m  * Fixed stylus example for latest version[m
[32m+[m[32m  * Fixed; wrap try/catch around `res.render()`[m
[32m+[m
[32m+[m[32m2.0.0 / 2011-03-17[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed up index view path alternative.[m
[32m+[m[32m  * Changed; `res.locals()` without object returns the locals[m
[32m+[m
[32m+[m[32m2.0.0rc3 / 2011-03-17[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `res.locals(obj)` to compliment `res.local(key, val)`[m
[32m+[m[32m  * Added `res.partial()` callback support[m
[32m+[m[32m  * Fixed recursive error reporting issue in `res.render()`[m
[32m+[m
[32m+[m[32m2.0.0rc2 / 2011-03-17[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Changed; `partial()` "locals" are now optional[m
[32m+[m[32m  * Fixed `SlowBuffer` support. Closes #584 [reported by tyrda01][m
[32m+[m[32m  * Fixed .filename view engine option [reported by drudge][m
[32m+[m[32m  * Fixed blog example[m
[32m+[m[32m  * Fixed `{req,res}.app` reference when mounting [Ben Weaver][m
[32m+[m
[32m+[m[32m2.0.0rc / 2011-03-14[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed; expose `HTTPSServer` constructor[m
[32m+[m[32m  * Fixed express(1) default test charset. Closes #579 [reported by secoif][m
[32m+[m[32m  * Fixed; default charset to utf-8 instead of utf8 for lame IE [reported by NickP][m
[32m+[m
[32m+[m[32m2.0.0beta3 / 2011-03-09[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added support for `res.contentType()` literal[m
[32m+[m[32m    The original `res.contentType('.json')`,[m
[32m+[m[32m    `res.contentType('application/json')`, and `res.contentType('json')`[m
[32m+[m[32m    will work now.[m
[32m+[m[32m  * Added `res.render()` status option support back[m
[32m+[m[32m  * Added charset option for `res.render()`[m
[32m+[m[32m  * Added `.charset` support (via connect 1.0.4)[m
[32m+[m[32m  * Added view resolution hints when in development and a lookup fails[m
[32m+[m[32m  * Added layout lookup support relative to the page view.[m
[32m+[m[32m    For example while rendering `./views/user/index.jade` if you create[m
[32m+[m[32m    `./views/user/layout.jade` it will be used in favour of the root layout.[m
[32m+[m[32m  * Fixed `res.redirect()`. RFC states absolute url [reported by unlink][m
[32m+[m[32m  * Fixed; default `res.send()` string charset to utf8[m
[32m+[m[32m  * Removed `Partial` constructor (not currently used)[m
[32m+[m
[32m+[m[32m2.0.0beta2 / 2011-03-07[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added res.render() `.locals` support back to aid in migration process[m
[32m+[m[32m  * Fixed flash example[m
[32m+[m
[32m+[m[32m2.0.0beta / 2011-03-03[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added HTTPS support[m
[32m+[m[32m  * Added `res.cookie()` maxAge support[m
[32m+[m[32m  * Added `req.header()` _Referrer_ / _Referer_ special-case, either works[m
[32m+[m[32m  * Added mount support for `res.redirect()`, now respects the mount-point[m
[32m+[m[32m  * Added `union()` util, taking place of `merge(clone())` combo[m
[32m+[m[32m  * Added stylus support to express(1) generated app[m
[32m+[m[32m  * Added secret to session middleware used in examples and generated app[m
[32m+[m[32m  * Added `res.local(name, val)` for progressive view locals[m
[32m+[m[32m  * Added default param support to `req.param(name, default)`[m
[32m+[m[32m  * Added `app.disabled()` and `app.enabled()`[m
[32m+[m[32m  * Added `app.register()` support for omitting leading ".", either works[m
[32m+[m[32m  * Added `res.partial()`, using the same interface as `partial()` within a view. Closes #539[m
[32m+[m[32m  * Added `app.param()` to map route params to async/sync logic[m
[32m+[m[32m  * Added; aliased `app.helpers()` as `app.locals()`. Closes #481[m
[32m+[m[32m  * Added extname with no leading "." support to `res.contentType()`[m
[32m+[m[32m  * Added `cache views` setting, defaulting to enabled in "production" env[m
[32m+[m[32m  * Added index file partial resolution, eg: partial('user') may try _views/user/index.jade_.[m
[32m+[m[32m  * Added `req.accepts()` support for extensions[m
[32m+[m[32m  * Changed; `res.download()` and `res.sendfile()` now utilize Connect's[m
[32m+[m[32m    static file server `connect.static.send()`.[m
[32m+[m[32m  * Changed; replaced `connect.utils.mime()` with npm _mime_ module[m
[32m+[m[32m  * Changed; allow `req.query` to be pre-defined (via middleware or other parent[m
[32m+[m[32m  * Changed view partial resolution, now relative to parent view[m
[32m+[m[32m  * Changed view engine signature. no longer `engine.render(str, options, callback)`, now `engine.compile(str, options) -> Function`, the returned function accepts `fn(locals)`.[m
[32m+[m[32m  * Fixed `req.param()` bug returning Array.prototype methods. Closes #552[m
[32m+[m[32m  * Fixed; using `Stream#pipe()` instead of `sys.pump()` in `res.sendfile()`[m
[32m+[m[32m  * Fixed; using _qs_ module instead of _querystring_[m
[32m+[m[32m  * Fixed; strip unsafe chars from jsonp callbacks[m
[32m+[m[32m  * Removed "stream threshold" setting[m
[32m+[m
[32m+[m[32m1.0.8 / 2011-03-01[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Allow `req.query` to be pre-defined (via middleware or other parent app)[m
[32m+[m[32m  * "connect": ">= 0.5.0 < 1.0.0". Closes #547[m
[32m+[m[32m  * Removed the long deprecated __EXPRESS_ENV__ support[m
[32m+[m
[32m+[m[32m1.0.7 / 2011-02-07[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed `render()` setting inheritance.[m
[32m+[m[32m    Mounted apps would not inherit "view engine"[m
[32m+[m
[32m+[m[32m1.0.6 / 2011-02-07[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed `view engine` setting bug when period is in dirname[m
[32m+[m
[32m+[m[32m1.0.5 / 2011-02-05[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added secret to generated app `session()` call[m
[32m+[m
[32m+[m[32m1.0.4 / 2011-02-05[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `qs` dependency to _package.json_[m
[32m+[m[32m  * Fixed namespaced `require()`s for latest connect support[m
[32m+[m
[32m+[m[32m1.0.3 / 2011-01-13[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Remove unsafe characters from JSONP callback names [Ryan Grove][m
[32m+[m
[32m+[m[32m1.0.2 / 2011-01-10[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Removed nested require, using `connect.router`[m
[32m+[m
[32m+[m[32m1.0.1 / 2010-12-29[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed for middleware stacked via `createServer()`[m
[32m+[m[32m    previously the `foo` middleware passed to `createServer(foo)`[m
[32m+[m[32m    would not have access to Express methods such as `res.send()`[m
[32m+[m[32m    or props like `req.query` etc.[m
[32m+[m
[32m+[m[32m1.0.0 / 2010-11-16[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added; deduce partial object names from the last segment.[m
[32m+[m[32m    For example by default `partial('forum/post', postObject)` will[m
[32m+[m[32m    give you the _post_ object, providing a meaningful default.[m
[32m+[m[32m  * Added http status code string representation to `res.redirect()` body[m
[32m+[m[32m  * Added; `res.redirect()` supporting _text/plain_ and _text/html_ via __Accept__.[m
[32m+[m[32m  * Added `req.is()` to aid in content negotiation[m
[32m+[m[32m  * Added partial local inheritance [suggested by masylum]. Closes #102[m
[32m+[m[32m    providing access to parent template locals.[m
[32m+[m[32m  * Added _-s, --session[s]_ flag to express(1) to add session related middleware[m
[32m+[m[32m  * Added _--template_ flag to express(1) to specify the[m
[32m+[m[32m    template engine to use.[m
[32m+[m[32m  * Added _--css_ flag to express(1) to specify the[m[41m [m
[32m+[m[32m    stylesheet engine to use (or just plain css by default).[m
[32m+[m[32m  * Added `app.all()` support [thanks aheckmann][m
[32m+[m[32m  * Added partial direct object support.[m
[32m+[m[32m    You may now `partial('user', user)` providing the "user" local,[m
[32m+[m[32m    vs previously `partial('user', { object: user })`.[m
[32m+[m[32m  * Added _route-separation_ example since many people question ways[m
[32m+[m[32m    to do this with CommonJS modules. Also view the _blog_ example for[m
[32m+[m[32m    an alternative.[m
[32m+[m[32m  * Performance; caching view path derived partial object names[m
[32m+[m[32m  * Fixed partial local inheritance precedence. [reported by Nick Poulden] Closes #454[m
[32m+[m[32m  * Fixed jsonp support; _text/javascript_ as per mailinglist discussion[m
[32m+[m
[32m+[m[32m1.0.0rc4 / 2010-10-14[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added _NODE_ENV_ support, _EXPRESS_ENV_ is deprecated and will be removed in 1.0.0[m
[32m+[m[32m  * Added route-middleware support (very helpful, see the [docs](http://expressjs.com/guide.html#Route-Middleware))[m
[32m+[m[32m  * Added _jsonp callback_ setting to enable/disable jsonp autowrapping [Dav Glass][m
[32m+[m[32m  * Added callback query check on response.send to autowrap JSON objects for simple webservice implementations [Dav Glass][m
[32m+[m[32m  * Added `partial()` support for array-like collections. Closes #434[m
[32m+[m[32m  * Added support for swappable querystring parsers[m
[32m+[m[32m  * Added session usage docs. Closes #443[m
[32m+[m[32m  * Added dynamic helper caching. Closes #439 [suggested by maritz][m
[32m+[m[32m  * Added authentication example[m
[32m+[m[32m  * Added basic Range support to `res.sendfile()` (and `res.download()` etc)[m
[32m+[m[32m  * Changed; `express(1)` generated app using 2 spaces instead of 4[m
[32m+[m[32m  * Default env to "development" again [aheckmann][m
[32m+[m[32m  * Removed _context_ option is no more, use "scope"[m
[32m+[m[32m  * Fixed; exposing _./support_ libs to examples so they can run without installs[m
[32m+[m[32m  * Fixed mvc example[m
[32m+[m
[32m+[m[32m1.0.0rc3 / 2010-09-20[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added confirmation for `express(1)` app generation. Closes #391[m
[32m+[m[32m  * Added extending of flash formatters via `app.flashFormatters`[m
[32m+[m[32m  * Added flash formatter support. Closes #411[m
[32m+[m[32m  * Added streaming support to `res.sendfile()` using `sys.pump()` when >= "stream threshold"[m
[32m+[m[32m  * Added _stream threshold_ setting for `res.sendfile()`[m
[32m+[m[32m  * Added `res.send()` __HEAD__ support[m
[32m+[m[32m  * Added `res.clearCookie()`[m
[32m+[m[32m  * Added `res.cookie()`[m
[32m+[m[32m  * Added `res.render()` headers option[m
[32m+[m[32m  * Added `res.redirect()` response bodies[m
[32m+[m[32m  * Added `res.render()` status option support. Closes #425 [thanks aheckmann][m
[32m+[m[32m  * Fixed `res.sendfile()` responding with 403 on malicious path[m
[32m+[m[32m  * Fixed `res.download()` bug; when an error occurs remove _Content-Disposition_[m
[32m+[m[32m  * Fixed; mounted apps settings now inherit from parent app [aheckmann][m
[32m+[m[32m  * Fixed; stripping Content-Length / Content-Type when 204[m
[32m+[m[32m  * Fixed `res.send()` 204. Closes #419[m
[32m+[m[32m  * Fixed multiple _Set-Cookie_ headers via `res.header()`. Closes #402[m
[32m+[m[32m  * Fixed bug messing with error handlers when `listenFD()` is called instead of `listen()`. [thanks guillermo][m
[32m+[m
[32m+[m
[32m+[m[32m1.0.0rc2 / 2010-08-17[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `app.register()` for template engine mapping. Closes #390[m
[32m+[m[32m  * Added `res.render()` callback support as second argument (no options)[m
[32m+[m[32m  * Added callback support to `res.download()`[m
[32m+[m[32m  * Added callback support for `res.sendfile()`[m
[32m+[m[32m  * Added support for middleware access via `express.middlewareName()` vs `connect.middlewareName()`[m
[32m+[m[32m  * Added "partials" setting to docs[m
[32m+[m[32m  * Added default expresso tests to `express(1)` generated app. Closes #384[m
[32m+[m[32m  * Fixed `res.sendfile()` error handling, defer via `next()`[m
[32m+[m[32m  * Fixed `res.render()` callback when a layout is used [thanks guillermo][m
[32m+[m[32m  * Fixed; `make install` creating ~/.node_libraries when not present[m
[32m+[m[32m  * Fixed issue preventing error handlers from being defined anywhere. Closes #387[m[41m [m
[32m+[m
[32m+[m[32m1.0.0rc / 2010-07-28[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added mounted hook. Closes #369[m
[32m+[m[32m  * Added connect dependency to _package.json_[m
[32m+[m
[32m+[m[32m  * Removed "reload views" setting and support code[m
[32m+[m[32m    development env never caches, production always caches.[m
[32m+[m
[32m+[m[32m  * Removed _param_ in route callbacks, signature is now[m
[32m+[m[32m    simply (req, res, next), previously (req, res, params, next).[m
[32m+[m[32m    Use _req.params_ for path captures, _req.query_ for GET params.[m
[32m+[m
[32m+[m[32m  * Fixed "home" setting[m
[32m+[m[32m  * Fixed middleware/router precedence issue. Closes #366[m
[32m+[m[32m  * Fixed; _configure()_ callbacks called immediately. Closes #368[m
[32m+[m[41m	[m
[32m+[m[32m1.0.0beta2 / 2010-07-23[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added more examples[m
[32m+[m[32m  * Added; exporting `Server` constructor[m
[32m+[m[32m  * Added `Server#helpers()` for view locals[m
[32m+[m[32m  * Added `Server#dynamicHelpers()` for dynamic view locals. Closes #349[m
[32m+[m[32m  * Added support for absolute view paths[m
[32m+[m[32m  * Added; _home_ setting defaults to `Server#route` for mounted apps. Closes #363[m
[32m+[m[32m  * Added Guillermo Rauch to the contributor list[m
[32m+[m[32m  * Added support for "as" for non-collection partials. Closes #341[m
[32m+[m[32m  * Fixed _install.sh_, ensuring _~/.node_libraries_ exists. Closes #362 [thanks jf][m
[32m+[m[32m  * Fixed `res.render()` exceptions, now passed to `next()` when no callback is given [thanks guillermo][m
[32m+[m[32m  * Fixed instanceof `Array` checks, now `Array.isArray()`[m
[32m+[m[32m  * Fixed express(1) expansion of public dirs. Closes #348[m
[32m+[m[32m  * Fixed middleware precedence. Closes #345[m
[32m+[m[32m  * Fixed view watcher, now async [thanks aheckmann][m
[32m+[m
[32m+[m[32m1.0.0beta / 2010-07-15[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Re-write[m
[32m+[m[32m    - much faster[m
[32m+[m[32m    - much lighter[m
[32m+[m[32m    - Check [ExpressJS.com](http://expressjs.com) for migration guide and updated docs[m
[32m+[m
[32m+[m[32m0.14.0 / 2010-06-15[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Utilize relative requires[m
[32m+[m[32m  * Added Static bufferSize option [aheckmann][m
[32m+[m[32m  * Fixed caching of view and partial subdirectories [aheckmann][m
[32m+[m[32m  * Fixed mime.type() comments now that ".ext" is not supported[m
[32m+[m[32m  * Updated haml submodule[m
[32m+[m[32m  * Updated class submodule[m
[32m+[m[32m  * Removed bin/express[m
[32m+[m
[32m+[m[32m0.13.0 / 2010-06-01[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added node v0.1.97 compatibility[m
[32m+[m[32m  * Added support for deleting cookies via Request#cookie('key', null)[m
[32m+[m[32m  * Updated haml submodule[m
[32m+[m[32m  * Fixed not-found page, now using using charset utf-8[m
[32m+[m[32m  * Fixed show-exceptions page, now using using charset utf-8[m
[32m+[m[32m  * Fixed view support due to fs.readFile Buffers[m
[32m+[m[32m  * Changed; mime.type() no longer accepts ".type" due to node extname() changes[m
[32m+[m
[32m+[m[32m0.12.0 / 2010-05-22[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added node v0.1.96 compatibility[m
[32m+[m[32m  * Added view `helpers` export which act as additional local variables[m
[32m+[m[32m  * Updated haml submodule[m
[32m+[m[32m  * Changed ETag; removed inode, modified time only[m
[32m+[m[32m  * Fixed LF to CRLF for setting multiple cookies[m
[32m+[m[32m  * Fixed cookie complation; values are now urlencoded[m
[32m+[m[32m  * Fixed cookies parsing; accepts quoted values and url escaped cookies[m
[32m+[m
[32m+[m[32m0.11.0 / 2010-05-06[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added support for layouts using different engines[m
[32m+[m[32m    - this.render('page.html.haml', { layout: 'super-cool-layout.html.ejs' })[m
[32m+[m[32m    - this.render('page.html.haml', { layout: 'foo' }) // assumes 'foo.html.haml'[m
[32m+[m[32m    - this.render('page.html.haml', { layout: false }) // no layout[m
[32m+[m[32m  * Updated ext submodule[m
[32m+[m[32m  * Updated haml submodule[m
[32m+[m[32m  * Fixed EJS partial support by passing along the context. Issue #307[m
[32m+[m
[32m+[m[32m0.10.1 / 2010-05-03[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed binary uploads.[m
[32m+[m
[32m+[m[32m0.10.0 / 2010-04-30[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added charset support via Request#charset (automatically assigned to 'UTF-8' when respond()'s[m
[32m+[m[32m    encoding is set to 'utf8' or 'utf-8'.[m
[32m+[m[32m  * Added "encoding" option to Request#render(). Closes #299[m
[32m+[m[32m  * Added "dump exceptions" setting, which is enabled by default.[m
[32m+[m[32m  * Added simple ejs template engine support[m
[32m+[m[32m  * Added error reponse support for text/plain, application/json. Closes #297[m
[32m+[m[32m  * Added callback function param to Request#error()[m
[32m+[m[32m  * Added Request#sendHead()[m
[32m+[m[32m  * Added Request#stream()[m
[32m+[m[32m  * Added support for Request#respond(304, null) for empty response bodies[m
[32m+[m[32m  * Added ETag support to Request#sendfile()[m
[32m+[m[32m  * Added options to Request#sendfile(), passed to fs.createReadStream()[m
[32m+[m[32m  * Added filename arg to Request#download()[m
[32m+[m[32m  * Performance enhanced due to pre-reversing plugins so that plugins.reverse() is not called on each request[m
[32m+[m[32m  * Performance enhanced by preventing several calls to toLowerCase() in Router#match()[m
[32m+[m[32m  * Changed; Request#sendfile() now streams[m
[32m+[m[32m  * Changed; Renamed Request#halt() to Request#respond(). Closes #289[m
[32m+[m[32m  * Changed; Using sys.inspect() instead of JSON.encode() for error output[m
[32m+[m[32m  * Changed; run() returns the http.Server instance. Closes #298[m
[32m+[m[32m  * Changed; Defaulting Server#host to null (INADDR_ANY)[m
[32m+[m[32m  * Changed; Logger "common" format scale of 0.4f[m
[32m+[m[32m  * Removed Logger "request" format[m
[32m+[m[32m  * Fixed; Catching ENOENT in view caching, preventing error when "views/partials" is not found[m
[32m+[m[32m  * Fixed several issues with http client[m
[32m+[m[32m  * Fixed Logger Content-Length output[m
[32m+[m[32m  * Fixed bug preventing Opera from retaining the generated session id. Closes #292[m
[32m+[m
[32m+[m[32m0.9.0 / 2010-04-14[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added DSL level error() route support[m
[32m+[m[32m  * Added DSL level notFound() route support[m
[32m+[m[32m  * Added Request#error()[m
[32m+[m[32m  * Added Request#notFound()[m
[32m+[m[32m  * Added Request#render() callback function. Closes #258[m
[32m+[m[32m  * Added "max upload size" setting[m
[32m+[m[32m  * Added "magic" variables to collection partials (\_\_index\_\_, \_\_length\_\_, \_\_isFirst\_\_, \_\_isLast\_\_). Closes #254[m
[32m+[m[32m  * Added [haml.js](http://github.com/visionmedia/haml.js) submodule; removed haml-js[m
[32m+[m[32m  * Added callback function support to Request#halt() as 3rd/4th arg[m
[32m+[m[32m  * Added preprocessing of route param wildcards using param(). Closes #251[m
[32m+[m[32m  * Added view partial support (with collections etc)[m
[32m+[m[32m  * Fixed bug preventing falsey params (such as ?page=0). Closes #286[m
[32m+[m[32m  * Fixed setting of multiple cookies. Closes #199[m
[32m+[m[32m  * Changed; view naming convention is now NAME.TYPE.ENGINE (for example page.html.haml)[m
[32m+[m[32m  * Changed; session cookie is now httpOnly[m
[32m+[m[32m  * Changed; Request is no longer global[m
[32m+[m[32m  * Changed; Event is no longer global[m
[32m+[m[32m  * Changed; "sys" module is no longer global[m
[32m+[m[32m  * Changed; moved Request#download to Static plugin where it belongs[m
[32m+[m[32m  * Changed; Request instance created before body parsing. Closes #262[m
[32m+[m[32m  * Changed; Pre-caching views in memory when "cache view contents" is enabled. Closes #253[m
[32m+[m[32m  * Changed; Pre-caching view partials in memory when "cache view partials" is enabled[m
[32m+[m[32m  * Updated support to node --version 0.1.90[m
[32m+[m[32m  * Updated dependencies[m
[32m+[m[32m  * Removed set("session cookie") in favour of use(Session, { cookie: { ... }})[m
[32m+[m[32m  * Removed utils.mixin(); use Object#mergeDeep()[m
[32m+[m[41m  [m
[32m+[m[32m0.8.0 / 2010-03-19[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added coffeescript example app. Closes #242[m
[32m+[m[32m  * Changed; cache api now async friendly. Closes #240[m
[32m+[m[32m  * Removed deprecated 'express/static' support. Use 'express/plugins/static'[m
[32m+[m
[32m+[m[32m0.7.6 / 2010-03-19[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added Request#isXHR. Closes #229[m
[32m+[m[32m  * Added `make install` (for the executable)[m
[32m+[m[32m  * Added `express` executable for setting up simple app templates[m
[32m+[m[32m  * Added "GET /public/*" to Static plugin, defaulting to <root>/public[m
[32m+[m[32m  * Added Static plugin[m
[32m+[m[32m  * Fixed; Request#render() only calls cache.get() once[m
[32m+[m[32m  * Fixed; Namespacing View caches with "view:"[m
[32m+[m[32m  * Fixed; Namespacing Static caches with "static:"[m
[32m+[m[32m  * Fixed; Both example apps now use the Static plugin[m
[32m+[m[32m  * Fixed set("views"). Closes #239[m
[32m+[m[32m  * Fixed missing space for combined log format[m
[32m+[m[32m  * Deprecated Request#sendfile() and 'express/static'[m
[32m+[m[32m  * Removed Server#running[m
[32m+[m
[32m+[m[32m0.7.5 / 2010-03-16[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added Request#flash() support without args, now returns all flashes[m
[32m+[m[32m  * Updated ext submodule[m
[32m+[m
[32m+[m[32m0.7.4 / 2010-03-16[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed session reaper[m
[32m+[m[32m  * Changed; class.js replacing js-oo Class implementation (quite a bit faster, no browser cruft)[m
[32m+[m
[32m+[m[32m0.7.3 / 2010-03-16[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added package.json[m
[32m+[m[32m  * Fixed requiring of haml / sass due to kiwi removal[m
[32m+[m
[32m+[m[32m0.7.2 / 2010-03-16[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed GIT submodules (HAH!)[m
[32m+[m
[32m+[m[32m0.7.1 / 2010-03-16[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Changed; Express now using submodules again until a PM is adopted[m
[32m+[m[32m  * Changed; chat example using millisecond conversions from ext[m
[32m+[m
[32m+[m[32m0.7.0 / 2010-03-15[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added Request#pass() support (finds the next matching route, or the given path)[m
[32m+[m[32m  * Added Logger plugin (default "common" format replaces CommonLogger)[m
[32m+[m[32m  * Removed Profiler plugin[m
[32m+[m[32m  * Removed CommonLogger plugin[m
[32m+[m
[32m+[m[32m0.6.0 / 2010-03-11[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added seed.yml for kiwi package management support[m
[32m+[m[32m  * Added HTTP client query string support when method is GET. Closes #205[m
[32m+[m[41m  [m
[32m+[m[32m  * Added support for arbitrary view engines.[m
[32m+[m[32m    For example "foo.engine.html" will now require('engine'),[m
[32m+[m[32m    the exports from this module are cached after the first require().[m
[32m+[m[41m    [m
[32m+[m[32m  * Added async plugin support[m
[32m+[m[41m  [m
[32m+[m[32m  * Removed usage of RESTful route funcs as http client[m
[32m+[m[32m    get() etc, use http.get() and friends[m
[32m+[m[41m  [m
[32m+[m[32m  * Removed custom exceptions[m
[32m+[m
[32m+[m[32m0.5.0 / 2010-03-10[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added ext dependency (library of js extensions)[m
[32m+[m[32m  * Removed extname() / basename() utils. Use path module[m
[32m+[m[32m  * Removed toArray() util. Use arguments.values[m
[32m+[m[32m  * Removed escapeRegexp() util. Use RegExp.escape()[m
[32m+[m[32m  * Removed process.mixin() dependency. Use utils.mixin()[m
[32m+[m[32m  * Removed Collection[m
[32m+[m[32m  * Removed ElementCollection[m
[32m+[m[32m  * Shameless self promotion of ebook "Advanced JavaScript" (http://dev-mag.com)  ;)[m
[32m+[m
[32m+[m[32m0.4.0 / 2010-02-11[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added flash() example to sample upload app[m
[32m+[m[32m  * Added high level restful http client module (express/http)[m
[32m+[m[32m  * Changed; RESTful route functions double as HTTP clients. Closes #69[m
[32m+[m[32m  * Changed; throwing error when routes are added at runtime[m
[32m+[m[32m  * Changed; defaulting render() context to the current Request. Closes #197[m
[32m+[m[32m  * Updated haml submodule[m
[32m+[m
[32m+[m[32m0.3.0 / 2010-02-11[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Updated haml / sass submodules. Closes #200[m
[32m+[m[32m  * Added flash message support. Closes #64[m
[32m+[m[32m  * Added accepts() now allows multiple args. fixes #117[m
[32m+[m[32m  * Added support for plugins to halt. Closes #189[m
[32m+[m[32m  * Added alternate layout support. Closes #119[m
[32m+[m[32m  * Removed Route#run(). Closes #188[m
[32m+[m[32m  * Fixed broken specs due to use(Cookie) missing[m
[32m+[m
[32m+[m[32m0.2.1 / 2010-02-05[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added "plot" format option for Profiler (for gnuplot processing)[m
[32m+[m[32m  * Added request number to Profiler plugin[m
[32m+[m[32m  * Fixed binary encoding for multi-part file uploads, was previously defaulting to UTF8[m
[32m+[m[32m  * Fixed issue with routes not firing when not files are present. Closes #184[m
[32m+[m[32m  * Fixed process.Promise -> events.Promise[m
[32m+[m
[32m+[m[32m0.2.0 / 2010-02-03[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added parseParam() support for name[] etc. (allows for file inputs with "multiple" attr) Closes #180[m
[32m+[m[32m  * Added Both Cache and Session option "reapInterval" may be "reapEvery". Closes #174[m
[32m+[m[32m  * Added expiration support to cache api with reaper. Closes #133[m
[32m+[m[32m  * Added cache Store.Memory#reap()[m
[32m+[m[32m  * Added Cache; cache api now uses first class Cache instances[m
[32m+[m[32m  * Added abstract session Store. Closes #172[m
[32m+[m[32m  * Changed; cache Memory.Store#get() utilizing Collection[m
[32m+[m[32m  * Renamed MemoryStore -> Store.Memory[m
[32m+[m[32m  * Fixed use() of the same plugin several time will always use latest options. Closes #176[m
[32m+[m
[32m+[m[32m0.1.0 / 2010-02-03[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Changed; Hooks (before / after) pass request as arg as well as evaluated in their context[m
[32m+[m[32m  * Updated node support to 0.1.27 Closes #169[m
[32m+[m[32m  * Updated dirname(__filename) -> __dirname[m
[32m+[m[32m  * Updated libxmljs support to v0.2.0[m
[32m+[m[32m  * Added session support with memory store / reaping[m
[32m+[m[32m  * Added quick uid() helper[m
[32m+[m[32m  * Added multi-part upload support[m
[32m+[m[32m  * Added Sass.js support / submodule[m
[32m+[m[32m  * Added production env caching view contents and static files[m
[32m+[m[32m  * Added static file caching. Closes #136[m
[32m+[m[32m  * Added cache plugin with memory stores[m
[32m+[m[32m  * Added support to StaticFile so that it works with non-textual files.[m
[32m+[m[32m  * Removed dirname() helper[m
[32m+[m[32m  * Removed several globals (now their modules must be required)[m
[32m+[m
[32m+[m[32m0.0.2 / 2010-01-10[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added view benchmarks; currently haml vs ejs[m
[32m+[m[32m  * Added Request#attachment() specs. Closes #116[m
[32m+[m[32m  * Added use of node's parseQuery() util. Closes #123[m
[32m+[m[32m  * Added `make init` for submodules[m
[32m+[m[32m  * Updated Haml[m
[32m+[m[32m  * Updated sample chat app to show messages on load[m
[32m+[m[32m  * Updated libxmljs parseString -> parseHtmlString[m
[32m+[m[32m  * Fixed `make init` to work with older versions of git[m
[32m+[m[32m  * Fixed specs can now run independant specs for those who cant build deps. Closes #127[m
[32m+[m[32m  * Fixed issues introduced by the node url module changes. Closes 126.[m
[32m+[m[32m  * Fixed two assertions failing due to Collection#keys() returning strings[m
[32m+[m[32m  * Fixed faulty Collection#toArray() spec due to keys() returning strings[m
[32m+[m[32m  * Fixed `make test` now builds libxmljs.node before testing[m
[32m+[m
[32m+[m[32m0.0.1 / 2010-01-03[m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Initial release[m
[1mdiff --git a/node_modules/express/LICENSE b/node_modules/express/LICENSE[m
[1mnew file mode 100644[m
[1mindex 0000000..36075a3[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/LICENSE[m
[36m@@ -0,0 +1,22 @@[m
[32m+[m[32m(The MIT License)[m
[32m+[m
[32m+[m[32mCopyright (c) 2009-2011 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m
[32m+[m[32mPermission is hereby granted, free of charge, to any person obtaining[m
[32m+[m[32ma copy of this software and associated documentation files (the[m
[32m+[m[32m'Software'), to deal in the Software without restriction, including[m
[32m+[m[32mwithout limitation the rights to use, copy, modify, merge, publish,[m
[32m+[m[32mdistribute, sublicense, and/or sell copies of the Software, and to[m
[32m+[m[32mpermit persons to whom the Software is furnished to do so, subject to[m
[32m+[m[32mthe following conditions:[m
[32m+[m
[32m+[m[32mThe above copyright notice and this permission notice shall be[m
[32m+[m[32mincluded in all copies or substantial portions of the Software.[m
[32m+[m
[32m+[m[32mTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,[m
[32m+[m[32mEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF[m
[32m+[m[32mMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.[m
[32m+[m[32mIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY[m
[32m+[m[32mCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,[m
[32m+[m[32mTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE[m
[32m+[m[32mSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/Makefile b/node_modules/express/Makefile[m
[1mnew file mode 100644[m
[1mindex 0000000..dfbfd67[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/Makefile[m
[36m@@ -0,0 +1,29 @@[m
[32m+[m
[32m+[m[32mDOCS = $(shell find docs/*.md)[m
[32m+[m[32mHTMLDOCS = $(DOCS:.md=.html)[m
[32m+[m[32mTESTS = $(shell find test/*.test.js)[m
[32m+[m
[32m+[m[32mtest:[m
[32m+[m	[32m@NODE_ENV=test ./node_modules/.bin/expresso $(TESTS)[m
[32m+[m
[32m+[m[32mdocs: $(HTMLDOCS)[m
[32m+[m	[32m@ echo "... generating TOC"[m
[32m+[m	[32m@./support/toc.js docs/guide.html[m
[32m+[m
[32m+[m[32m%.html: %.md[m
[32m+[m	[32m@echo "... $< -> $@"[m
[32m+[m	[32m@markdown $< \[m
[32m+[m	[32m  | cat docs/layout/head.html - docs/layout/foot.html \[m
[32m+[m	[32m  > $@[m
[32m+[m
[32m+[m[32msite:[m
[32m+[m	[32mrm -fr /tmp/docs \[m
[32m+[m	[32m  && cp -fr docs /tmp/docs \[m
[32m+[m	[32m  && git checkout gh-pages \[m
[32m+[m[41m  [m	[32m&& cp -fr /tmp/docs/* . \[m
[32m+[m		[32m&& echo "done"[m
[32m+[m
[32m+[m[32mdocclean:[m
[32m+[m	[32mrm -f docs/*.{1,html}[m
[32m+[m
[32m+[m[32m.PHONY: site test docs docclean[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/Readme.md b/node_modules/express/Readme.md[m
[1mnew file mode 100644[m
[1mindex 0000000..d2c64c7[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/Readme.md[m
[36m@@ -0,0 +1,145 @@[m
[32m+[m
[32m+[m[32m# Express[m
[32m+[m[41m      [m
[32m+[m[32m  Insanely fast (and small) server-side JavaScript web development framework[m
[32m+[m[32m  built on [node](http://nodejs.org) and [Connect](http://github.com/senchalabs/connect).[m
[32m+[m[41m  [m
[32m+[m[32m     var app = express.createServer();[m
[32m+[m[41m     [m
[32m+[m[32m     app.get('/', function(req, res){[m
[32m+[m[32m       res.send('Hello World');[m
[32m+[m[32m     });[m
[32m+[m[41m     [m
[32m+[m[32m     app.listen(3000);[m
[32m+[m
[32m+[m[32m## Installation[m
[32m+[m
[32m+[m[32m    $ npm install express[m
[32m+[m
[32m+[m[32mor to access the `express(1)` executable install globally:[m
[32m+[m
[32m+[m[32m    $ npm install -g express[m
[32m+[m
[32m+[m[32m## Quick Start[m
[32m+[m
[32m+[m[32m The quickest way to get started with express is to utilize the executable `express(1)` to generate an application as shown below:[m
[32m+[m
[32m+[m[32m Create the app:[m
[32m+[m
[32m+[m[32m    $ npm install -g express[m
[32m+[m[32m    $ express /tmp/foo && cd /tmp/foo[m
[32m+[m
[32m+[m[32m Install dependencies:[m
[32m+[m
[32m+[m[32m    $ npm install -d[m
[32m+[m
[32m+[m[32m Start the server:[m
[32m+[m
[32m+[m[32m    $ node app.js[m
[32m+[m
[32m+[m[32m## Features[m
[32m+[m
[32m+[m[32m  * Robust routing[m
[32m+[m[32m  * Redirection helpers[m
[32m+[m[32m  * Dynamic view helpers[m
[32m+[m[32m  * Content negotiation[m
[32m+[m[32m  * Focus on high performance[m
[32m+[m[32m  * View rendering and partials support[m
[32m+[m[32m  * Environment based configuration[m
[32m+[m[32m  * Session based flash notifications[m
[32m+[m[32m  * Built on [Connect](http://github.com/senchalabs/connect)[m
[32m+[m[32m  * High test coverage[m
[32m+[m[32m  * Executable for generating applications quickly[m
[32m+[m[32m  * Application level view options[m
[32m+[m
[32m+[m[32mVia Connect:[m
[32m+[m
[32m+[m[32m  * Session support[m
[32m+[m[32m  * Cache API[m
[32m+[m[32m  * Mime helpers[m
[32m+[m[32m  * ETag support[m
[32m+[m[32m  * Persistent flash notifications[m
[32m+[m[32m  * Cookie support[m
[32m+[m[32m  * JSON-RPC[m
[32m+[m[32m  * Logging[m
[32m+[m[32m  * and _much_ more![m
[32m+[m
[32m+[m[32m## Contributors[m
[32m+[m
[32m+[m[32mThe following are the major contributors of Express (in no specific order).[m
[32m+[m
[32m+[m[32m  * TJ Holowaychuk ([visionmedia](http://github.com/visionmedia))[m
[32m+[m[32m  * Ciaran Jessup ([ciaranj](http://github.com/ciaranj))[m
[32m+[m[32m  * Aaron Heckmann ([aheckmann](http://github.com/aheckmann))[m
[32m+[m[32m  * Guillermo Rauch ([guille](http://github.com/guille))[m
[32m+[m
[32m+[m[32m## More Information[m
[32m+[m
[32m+[m[32m  * #express on freenode[m
[32m+[m[32m  * [express-expose](http://github.com/visionmedia/express-expose) expose objects, functions, modules and more to client-side js with ease[m
[32m+[m[32m  * [express-configure](http://github.com/visionmedia/express-configuration) async configuration support[m
[32m+[m[32m  * [express-messages](http://github.com/visionmedia/express-messages) flash notification rendering helper[m
[32m+[m[32m  * [express-namespace](http://github.com/visionmedia/express-namespace) namespaced route support[m
[32m+[m[32m  * [express-params](https://github.com/visionmedia/express-params) param pre-condition functions[m
[32m+[m[32m  * [express-mongoose](https://github.com/LearnBoost/express-mongoose) plugin for easy rendering of Mongoose async Query results[m
[32m+[m[32m  * Follow [tjholowaychuk](http://twitter.com/tjholowaychuk) on twitter for updates[m
[32m+[m[32m  * [Google Group](http://groups.google.com/group/express-js) for discussion[m
[32m+[m[32m  * Visit the [Wiki](http://github.com/visionmedia/express/wiki)[m
[32m+[m[32m  * [日本語ドキュメンテーション](http://hideyukisaito.com/doc/expressjs/) by [hideyukisaito](https://github.com/hideyukisaito)[m
[32m+[m[32m  * Screencast - [Introduction](http://bit.ly/eRYu0O)[m
[32m+[m[32m  * Screencast - [View Partials](http://bit.ly/dU13Fx)[m
[32m+[m[32m  * Screencast - [Route Specific Middleware](http://bit.ly/hX4IaH)[m
[32m+[m[32m  * Screencast - [Route Path Placeholder Preconditions](http://bit.ly/eNqmVs)[m
[32m+[m
[32m+[m[32m## Node Compatibility[m
[32m+[m
[32m+[m[32mExpress 1.x is compatible with node 0.2.x and connect < 1.0.[m
[32m+[m
[32m+[m[32mExpress 2.x is compatible with node 0.4.x or 0.6.x, and connect 1.x[m
[32m+[m
[32m+[m[32mExpress 3.x (master) will be compatible with node 0.6.x and connect 2.x[m
[32m+[m
[32m+[m[32m## Viewing Examples[m
[32m+[m
[32m+[m[32mFirst install the dev dependencies to install all the example / test suite deps:[m
[32m+[m
[32m+[m[32m    $ npm install[m
[32m+[m
[32m+[m[32mthen run whichever tests you want:[m
[32m+[m
[32m+[m[32m    $ node examples/jade/app.js[m
[32m+[m
[32m+[m[32m## Running Tests[m
[32m+[m
[32m+[m[32mTo run the test suite first invoke the following command within the repo, installing the development dependencies:[m
[32m+[m
[32m+[m[32m    $ npm install[m
[32m+[m
[32m+[m[32mthen run the tests:[m
[32m+[m
[32m+[m[32m    $ make test[m
[32m+[m
[32m+[m[32m## License[m[41m [m
[32m+[m
[32m+[m[32m(The MIT License)[m
[32m+[m
[32m+[m[32mCopyright (c) 2009-2011 TJ Holowaychuk &lt;tj@vision-media.ca&gt;[m
[32m+[m
[32m+[m[32mPermission is hereby granted, free of charge, to any person obtaining[m
[32m+[m[32ma copy of this software and associated documentation files (the[m
[32m+[m[32m'Software'), to deal in the Software without restriction, including[m
[32m+[m[32mwithout limitation the rights to use, copy, modify, merge, publish,[m
[32m+[m[32mdistribute, sublicense, and/or sell copies of the Software, and to[m
[32m+[m[32mpermit persons to whom the Software is furnished to do so, subject to[m
[32m+[m[32mthe following conditions:[m
[32m+[m
[32m+[m[32mThe above copyright notice and this permission notice shall be[m
[32m+[m[32mincluded in all copies or substantial portions of the Software.[m
[32m+[m
[32m+[m[32mTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,[m
[32m+[m[32mEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF[m
[32m+[m[32mMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.[m
[32m+[m[32mIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY[m
[32m+[m[32mCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,[m
[32m+[m[32mTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE[m
[32m+[m[32mSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.[m
[1mdiff --git a/node_modules/express/bin/express b/node_modules/express/bin/express[m
[1mnew file mode 100755[m
[1mindex 0000000..367be59[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/bin/express[m
[36m@@ -0,0 +1,423 @@[m
[32m+[m[32m#!/usr/bin/env node[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar fs = require('fs')[m
[32m+[m[32m  , os = require('os')[m
[32m+[m[32m  , exec = require('child_process').exec[m
[32m+[m[32m  , mkdirp = require('mkdirp');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Package information.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar pkg = JSON.parse(fs.readFileSync(__dirname + '/../package.json'));[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Framework version.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar version = pkg.version;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Add session support.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar sessions = false;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * CSS engine to utilize.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar cssEngine;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * End-of-line code.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar eol = os.platform[m
[32m+[m[32m  ? ('win32' == os.platform() ? '\r\n' : '\n')[m
[32m+[m[32m  : '\n';[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Template engine to utilize.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar templateEngine = 'jade';[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Usage documentation.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar usage = ''[m
[32m+[m[32m  + '\n'[m
[32m+[m[32m  + '  Usage: express [options] [path]\n'[m
[32m+[m[32m  + '\n'[m
[32m+[m[32m  + '  Options:\n'[m
[32m+[m[32m  + '    -s, --sessions           add session support\n'[m
[32m+[m[32m  + '    -t, --template <engine>  add template <engine> support (jade|ejs). default=jade\n'[m
[32m+[m[32m  + '    -c, --css <engine>       add stylesheet <engine> support (stylus). default=plain css\n'[m
[32m+[m[32m  + '    -v, --version            output framework version\n'[m
[32m+[m[32m  + '    -h, --help               output help information\n'[m
[32m+[m[32m  ;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Routes index template.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar index = [[m
[32m+[m[32m    ''[m
[32m+[m[32m  , '/*'[m
[32m+[m[32m  , ' * GET home page.'[m
[32m+[m[32m  , ' */'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , 'exports.index = function(req, res){'[m
[32m+[m[32m  , '  res.render(\'index\', { title: \'Express\' })'[m
[32m+[m[32m  , '};'[m
[32m+[m[32m].join(eol);[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Jade layout template.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar jadeLayout = [[m
[32m+[m[32m    '!!!'[m
[32m+[m[32m  , 'html'[m
[32m+[m[32m  , '  head'[m
[32m+[m[32m  , '    title= title'[m
[32m+[m[32m  , '    link(rel=\'stylesheet\', href=\'/stylesheets/style.css\')'[m
[32m+[m[32m  , '  body!= body'[m
[32m+[m[32m].join(eol);[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Jade index template.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar jadeIndex = [[m
[32m+[m[32m    'h1= title'[m
[32m+[m[32m  , 'p Welcome to #{title}'[m
[32m+[m[32m].join(eol);[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * EJS layout template.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar ejsLayout = [[m
[32m+[m[32m    '<!DOCTYPE html>'[m
[32m+[m[32m  , '<html>'[m
[32m+[m[32m  , '  <head>'[m
[32m+[m[32m  , '    <title><%= title %></title>'[m
[32m+[m[32m  , '    <link rel=\'stylesheet\' href=\'/stylesheets/style.css\' />'[m
[32m+[m[32m  , '  </head>'[m
[32m+[m[32m  , '  <body>'[m
[32m+[m[32m  , '    <%- body %>'[m
[32m+[m[32m  , '  </body>'[m
[32m+[m[32m  , '</html>'[m
[32m+[m[32m].join(eol);[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * EJS index template.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar ejsIndex = [[m
[32m+[m[32m    '<h1><%= title %></h1>'[m
[32m+[m[32m  , '<p>Welcome to <%= title %></p>'[m
[32m+[m[32m  ].join(eol);[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Default css template.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar css = [[m
[32m+[m[32m    'body {'[m
[32m+[m[32m  , '  padding: 50px;'[m
[32m+[m[32m  , '  font: 14px "Lucida Grande", Helvetica, Arial, sans-serif;'[m
[32m+[m[32m  , '}'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , 'a {'[m
[32m+[m[32m  , '  color: #00B7FF;'[m
[32m+[m[32m  , '}'[m
[32m+[m[32m].join(eol);[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Default stylus template.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar stylus = [[m
[32m+[m[32m    'body'[m
[32m+[m[32m  , '  padding: 50px'[m
[32m+[m[32m  , '  font: 14px "Lucida Grande", Helvetica, Arial, sans-serif'[m
[32m+[m[32m  , 'a'[m
[32m+[m[32m  , '  color: #00B7FF'[m
[32m+[m[32m].join(eol);[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * App template.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar app = [[m
[32m+[m[32m    ''[m
[32m+[m[32m  , '/**'[m
[32m+[m[32m  , ' * Module dependencies.'[m
[32m+[m[32m  , ' */'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , 'var express = require(\'express\')'[m
[32m+[m[32m  , '  , routes = require(\'./routes\');'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , 'var app = module.exports = express.createServer();'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , '// Configuration'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , 'app.configure(function(){'[m
[32m+[m[32m  , '  app.set(\'views\', __dirname + \'/views\');'[m
[32m+[m[32m  , '  app.set(\'view engine\', \':TEMPLATE\');'[m
[32m+[m[32m  , '  app.use(express.bodyParser());'[m
[32m+[m[32m  , '  app.use(express.methodOverride());{sess}{css}'[m
[32m+[m[32m  , '  app.use(app.router);'[m
[32m+[m[32m  , '  app.use(express.static(__dirname + \'/public\'));'[m
[32m+[m[32m  , '});'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , 'app.configure(\'development\', function(){'[m
[32m+[m[32m  , '  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));'[m
[32m+[m[32m  , '});'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , 'app.configure(\'production\', function(){'[m
[32m+[m[32m  , '  app.use(express.errorHandler());'[m
[32m+[m[32m  , '});'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , '// Routes'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , 'app.get(\'/\', routes.index);'[m
[32m+[m[32m  , ''[m
[32m+[m[32m  , 'app.listen(3000, function(){'[m
[32m+[m[32m  , '  console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env);'[m
[32m+[m[32m  , '});'[m
[32m+[m[32m  , ''[m
[32m+[m[32m].join(eol);[m
[32m+[m
[32m+[m[32m// Parse arguments[m
[32m+[m
[32m+[m[32mvar args = process.argv.slice(2)[m
[32m+[m[32m  , path = '.';[m
[32m+[m
[32m+[m[32mwhile (args.length) {[m
[32m+[m[32m  var arg = args.shift();[m
[32m+[m[32m  switch (arg) {[m
[32m+[m[32m    case '-h':[m
[32m+[m[32m    case '--help':[m
[32m+[m[32m      abort(usage);[m
[32m+[m[32m      break;[m
[32m+[m[32m    case '-v':[m
[32m+[m[32m    case '--version':[m
[32m+[m[32m      abort(version);[m
[32m+[m[32m      break;[m
[32m+[m[32m    case '-s':[m
[32m+[m[32m    case '--session':[m
[32m+[m[32m    case '--sessions':[m
[32m+[m[32m      sessions = true;[m
[32m+[m[32m      break;[m
[32m+[m[32m    case '-c':[m
[32m+[m[32m    case '--css':[m
[32m+[m[32m      args.length[m
[32m+[m[32m        ? (cssEngine = args.shift())[m
[32m+[m[32m        : abort('--css requires an argument');[m
[32m+[m[32m      break;[m
[32m+[m[32m    case '-t':[m
[32m+[m[32m    case '--template':[m
[32m+[m[32m      args.length[m
[32m+[m[32m        ? (templateEngine = args.shift())[m
[32m+[m[32m        : abort('--template requires an argument');[m
[32m+[m[32m      break;[m
[32m+[m[32m    default:[m
[32m+[m[32m        path = arg;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Generate application[m
[32m+[m
[32m+[m[32m(function createApplication(path) {[m
[32m+[m[32m  emptyDirectory(path, function(empty){[m
[32m+[m[32m    if (empty) {[m
[32m+[m[32m      createApplicationAt(path);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      confirm('destination is not empty, continue? ', function(ok){[m
[32m+[m[32m        if (ok) {[m
[32m+[m[32m          process.stdin.destroy();[m
[32m+[m[32m          createApplicationAt(path);[m
[32m+[m[32m        } else {[m
[32m+[m[32m          abort('aborting');[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m})(path);[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Create application at the given directory `path`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction createApplicationAt(path) {[m
[32m+[m[32m  console.log();[m
[32m+[m[32m  process.on('exit', function(){[m
[32m+[m[32m    console.log();[m
[32m+[m[32m    console.log('   dont forget to install dependencies:');[m
[32m+[m[32m    console.log('   $ cd %s && npm install', path);[m
[32m+[m[32m    console.log();[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  mkdir(path, function(){[m
[32m+[m[32m    mkdir(path + '/public');[m
[32m+[m[32m    mkdir(path + '/public/javascripts');[m
[32m+[m[32m    mkdir(path + '/public/images');[m
[32m+[m[32m    mkdir(path + '/public/stylesheets', function(){[m
[32m+[m[32m      switch (cssEngine) {[m
[32m+[m[32m        case 'stylus':[m
[32m+[m[32m          write(path + '/public/stylesheets/style.styl', stylus);[m
[32m+[m[32m          break;[m
[32m+[m[32m        default:[m
[32m+[m[32m          write(path + '/public/stylesheets/style.css', css);[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    mkdir(path + '/routes', function(){[m
[32m+[m[32m      write(path + '/routes/index.js', index);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    mkdir(path + '/views', function(){[m
[32m+[m[32m      switch (templateEngine) {[m
[32m+[m[32m        case 'ejs':[m
[32m+[m[32m          write(path + '/views/layout.ejs', ejsLayout);[m
[32m+[m[32m          write(path + '/views/index.ejs', ejsIndex);[m
[32m+[m[32m          break;[m
[32m+[m[32m        case 'jade':[m
[32m+[m[32m          write(path + '/views/layout.jade', jadeLayout);[m
[32m+[m[32m          write(path + '/views/index.jade', jadeIndex);[m
[32m+[m[32m          break;[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    // CSS Engine support[m
[32m+[m[32m    switch (cssEngine) {[m
[32m+[m[32m      case 'stylus':[m
[32m+[m[32m        app = app.replace('{css}', eol + '  app.use(require(\'stylus\').middleware({ src: __dirname + \'/public\' }));');[m
[32m+[m[32m        break;[m
[32m+[m[32m      default:[m
[32m+[m[32m        app = app.replace('{css}', '');[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // Session support[m
[32m+[m[32m    app = app.replace('{sess}', sessions[m
[32m+[m[32m      ? eol + '  app.use(express.cookieParser());' + eol + '  app.use(express.session({ secret: \'your secret here\' }));'[m
[32m+[m[32m      : '');[m
[32m+[m
[32m+[m[32m    // Template support[m
[32m+[m[32m    app = app.replace(':TEMPLATE', templateEngine);[m
[32m+[m
[32m+[m[32m    // package.json[m
[32m+[m[32m    var json = '{' + eol;[m
[32m+[m[32m    json += '    "name": "application-name"' + eol;[m
[32m+[m[32m    json += '  , "version": "0.0.1"' + eol;[m
[32m+[m[32m    json += '  , "private": true' + eol;[m
[32m+[m[32m    json += '  , "dependencies": {' + eol;[m
[32m+[m[32m    json += '      "express": "' + version + '"' + eol;[m
[32m+[m[32m    if (cssEngine) json += '    , "' + cssEngine + '": ">= 0.0.1"' + eol;[m
[32m+[m[32m    if (templateEngine) json += '    , "' + templateEngine + '": ">= 0.0.1"' + eol;[m
[32m+[m[32m    json += '  }' + eol;[m
[32m+[m[32m    json += '}';[m
[32m+[m
[32m+[m
[32m+[m[32m    write(path + '/package.json', json);[m
[32m+[m[32m    write(path + '/app.js', app);[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if the given directory `path` is empty.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction emptyDirectory(path, fn) {[m
[32m+[m[32m  fs.readdir(path, function(err, files){[m
[32m+[m[32m    if (err && 'ENOENT' != err.code) throw err;[m
[32m+[m[32m    fn(!files || !files.length);[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * echo str > path.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction write(path, str) {[m
[32m+[m[32m  fs.writeFile(path, str);[m
[32m+[m[32m  console.log('   \x1b[36mcreate\x1b[0m : ' + path);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Prompt confirmation with the given `msg`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} msg[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction confirm(msg, fn) {[m
[32m+[m[32m  prompt(msg, function(val){[m
[32m+[m[32m    fn(/^ *y(es)?/i.test(val));[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Prompt input with the given `msg` and callback `fn`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} msg[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction prompt(msg, fn) {[m
[32m+[m[32m  // prompt[m
[32m+[m[32m  if (' ' == msg[msg.length - 1]) {[m
[32m+[m[32m    process.stdout.write(msg);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    console.log(msg);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // stdin[m
[32m+[m[32m  process.stdin.setEncoding('ascii');[m
[32m+[m[32m  process.stdin.once('data', function(data){[m
[32m+[m[32m    fn(data);[m
[32m+[m[32m  }).resume();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Mkdir -p.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction mkdir(path, fn) {[m
[32m+[m[32m  mkdirp(path, 0755, function(err){[m
[32m+[m[32m    if (err) throw err;[m
[32m+[m[32m    console.log('   \033[36mcreate\033[0m : ' + path);[m
[32m+[m[32m    fn && fn();[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Exit with the given `str`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction abort(str) {[m
[32m+[m[32m  console.error(str);[m
[32m+[m[32m  process.exit(1);[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/index.js b/node_modules/express/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..8d81ea7[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/index.js[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m
[32m+[m[32mmodule.exports = require('./lib/express');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/lib/express.js b/node_modules/express/lib/express.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7ea451d[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/express.js[m
[36m@@ -0,0 +1,79 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar connect = require('connect')[m
[32m+[m[32m  , HTTPSServer = require('./https')[m
[32m+[m[32m  , HTTPServer = require('./http')[m
[32m+[m[32m  , Route = require('./router/route')[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Re-export connect auto-loaders.[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * This prevents the need to `require('connect')` in order[m
[32m+[m[32m * to access core middleware, so for example `express.logger()` instead[m
[32m+[m[32m * of `require('connect').logger()`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar exports = module.exports = connect.middleware;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Framework version.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.version = '2.5.11';[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Shortcut for `new Server(...)`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} ...[m
[32m+[m[32m * @return {Server}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.createServer = function(options){[m
[32m+[m[32m  if ('object' == typeof options) {[m
[32m+[m[32m    return new HTTPSServer(options, Array.prototype.slice.call(arguments, 1));[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return new HTTPServer(Array.prototype.slice.call(arguments));[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose constructors.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.HTTPServer = HTTPServer;[m
[32m+[m[32mexports.HTTPSServer = HTTPSServer;[m
[32m+[m[32mexports.Route = Route;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * View extensions.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.View =[m
[32m+[m[32mexports.view = require('./view');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Response extensions.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mrequire('./response');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Request extensions.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mrequire('./request');[m
[32m+[m
[32m+[m[32m// Error handler title[m
[32m+[m
[32m+[m[32mexports.errorHandler.title = 'Express';[m
[32m+[m
[1mdiff --git a/node_modules/express/lib/http.js b/node_modules/express/lib/http.js[m
[1mnew file mode 100644[m
[1mindex 0000000..da2158f[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/http.js[m
[36m@@ -0,0 +1,582 @@[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - HTTPServer[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar qs = require('qs')[m
[32m+[m[32m  , connect = require('connect')[m
[32m+[m[32m  , router = require('./router')[m
[32m+[m[32m  , Router = require('./router')[m
[32m+[m[32m  , view = require('./view')[m
[32m+[m[32m  , toArray = require('./utils').toArray[m
[32m+[m[32m  , methods = router.methods.concat('del', 'all')[m
[32m+[m[32m  , url = require('url')[m
[32m+[m[32m  , utils = connect.utils;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose `HTTPServer`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = HTTPServer;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Server proto.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar app = HTTPServer.prototype;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new `HTTPServer` with optional `middleware`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Array} middleware[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction HTTPServer(middleware){[m
[32m+[m[32m  connect.HTTPServer.call(this, []);[m
[32m+[m[32m  this.init(middleware);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Inherit from `connect.HTTPServer`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.__proto__ = connect.HTTPServer.prototype;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize the server.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Array} middleware[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.init = function(middleware){[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  this.cache = {};[m
[32m+[m[32m  this.settings = {};[m
[32m+[m[32m  this.redirects = {};[m
[32m+[m[32m  this.isCallbacks = {};[m
[32m+[m[32m  this._locals = {};[m
[32m+[m[32m  this.dynamicViewHelpers = {};[m
[32m+[m[32m  this.errorHandlers = [];[m
[32m+[m
[32m+[m[32m  this.set('env', process.env.NODE_ENV || 'development');[m
[32m+[m
[32m+[m[32m  // expose objects to each other[m
[32m+[m[32m  this.use(function(req, res, next){[m
[32m+[m[32m    req.query = req.query || {};[m
[32m+[m[32m    res.setHeader('X-Powered-By', 'Express');[m
[32m+[m[32m    req.app = res.app = self;[m
[32m+[m[32m    req.res = res;[m
[32m+[m[32m    res.req = req;[m
[32m+[m[32m    req.next = next;[m
[32m+[m[32m    // assign req.query[m
[32m+[m[32m    if (req.url.indexOf('?') > 0) {[m
[32m+[m[32m      var query = url.parse(req.url).query;[m
[32m+[m[32m      req.query = qs.parse(query);[m
[32m+[m[32m    }[m
[32m+[m[32m    next();[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // apply middleware[m
[32m+[m[32m  if (middleware) middleware.forEach(self.use.bind(self));[m
[32m+[m
[32m+[m[32m  // router[m
[32m+[m[32m  this.routes = new Router(this);[m
[32m+[m[32m  this.__defineGetter__('router', function(){[m
[32m+[m[32m    this.__usedRouter = true;[m
[32m+[m[32m    return self.routes.middleware;[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // default locals[m
[32m+[m[32m  this.locals({[m
[32m+[m[32m      settings: this.settings[m
[32m+[m[32m    , app: this[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // default development configuration[m
[32m+[m[32m  this.configure('development', function(){[m
[32m+[m[32m    this.enable('hints');[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // default production configuration[m
[32m+[m[32m  this.configure('production', function(){[m
[32m+[m[32m    this.enable('view cache');[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // register error handlers on "listening"[m
[32m+[m[32m  // so that they disregard definition position.[m
[32m+[m[32m  this.on('listening', this.registerErrorHandlers.bind(this));[m
[32m+[m
[32m+[m[32m  // route manipulation methods[m
[32m+[m[32m  methods.forEach(function(method){[m
[32m+[m[32m    self.lookup[method] = function(path){[m
[32m+[m[32m      return self.routes.lookup(method, path);[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    self.match[method] = function(path){[m
[32m+[m[32m      return self.routes.match(method, path);[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    self.remove[method] = function(path){[m
[32m+[m[32m      return self.routes.lookup(method, path).remove();[m
[32m+[m[32m    };[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // del -> delete[m
[32m+[m[32m  self.lookup.del = self.lookup.delete;[m
[32m+[m[32m  self.match.del = self.match.delete;[m
[32m+[m[32m  self.remove.del = self.remove.delete;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Remove routes matching the given `path`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Route} path[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.remove = function(path){[m
[32m+[m[32m  return this.routes.lookup('all', path).remove();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Lookup routes defined with a path[m
[32m+[m[32m * equivalent to `path`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Stirng} path[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.lookup = function(path){[m
[32m+[m[32m  return this.routes.lookup('all', path);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Lookup routes matching the given `url`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Stirng} url[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.match = function(url){[m
[32m+[m[32m  return this.routes.match('all', url);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * When using the vhost() middleware register error handlers.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.onvhost = function(){[m
[32m+[m[32m  this.registerErrorHandlers();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Register error handlers.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.registerErrorHandlers = function(){[m
[32m+[m[32m  this.errorHandlers.forEach(function(fn){[m
[32m+[m[32m    this.use(function(err, req, res, next){[m
[32m+[m[32m      fn.apply(this, arguments);[m
[32m+[m[32m    });[m
[32m+[m[32m  }, this);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Proxy `connect.HTTPServer#use()` to apply settings to[m
[32m+[m[32m * mounted applications.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String|Function|Server} route[m
[32m+[m[32m * @param {Function|Server} middleware[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.use = function(route, middleware){[m
[32m+[m[32m  var app, base, handle;[m
[32m+[m
[32m+[m[32m  if ('string' != typeof route) {[m
[32m+[m[32m    middleware = route, route = '/';[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // express app[m
[32m+[m[32m  if (middleware.handle && middleware.set) app = middleware;[m
[32m+[m
[32m+[m[32m  // restore .app property on req and res[m
[32m+[m[32m  if (app) {[m
[32m+[m[32m    app.route = route;[m
[32m+[m[32m    middleware = function(req, res, next) {[m
[32m+[m[32m      var orig = req.app;[m
[32m+[m[32m      app.handle(req, res, function(err){[m
[32m+[m[32m        req.app = res.app = orig;[m
[32m+[m[32m        next(err);[m
[32m+[m[32m      });[m
[32m+[m[32m    };[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  connect.HTTPServer.prototype.use.call(this, route, middleware);[m
[32m+[m
[32m+[m[32m  // mounted an app, invoke the hook[m
[32m+[m[32m  // and adjust some settings[m
[32m+[m[32m  if (app) {[m
[32m+[m[32m    base = this.set('basepath') || this.route;[m
[32m+[m[32m    if ('/' == base) base = '';[m
[32m+[m[32m    base = base + (app.set('basepath') || app.route);[m
[32m+[m[32m    app.set('basepath', base);[m
[32m+[m[32m    app.parent = this;[m
[32m+[m[32m    if (app.__mounted) app.__mounted.call(app, this);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Assign a callback `fn` which is called[m
[32m+[m[32m * when this `Server` is passed to `Server#use()`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *    var app = express.createServer()[m
[32m+[m[32m *      , blog = express.createServer();[m
[32m+[m[32m *[m
[32m+[m[32m *    blog.mounted(function(parent){[m
[32m+[m[32m *      // parent is app[m
[32m+[m[32m *      // "this" is blog[m
[32m+[m[32m *    });[m
[32m+[m[32m *[m
[32m+[m[32m *    app.use(blog);[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.mounted = function(fn){[m
[32m+[m[32m  this.__mounted = fn;[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * See: view.register.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.register = function(){[m
[32m+[m[32m  view.register.apply(this, arguments);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Register the given view helpers `obj`. This method[m
[32m+[m[32m * can be called several times to apply additional helpers.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.helpers =[m
[32m+[m[32mapp.locals = function(obj){[m
[32m+[m[32m  utils.merge(this._locals, obj);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Register the given dynamic view helpers `obj`. This method[m
[32m+[m[32m * can be called several times to apply additional helpers.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.dynamicHelpers = function(obj){[m
[32m+[m[32m  utils.merge(this.dynamicViewHelpers, obj);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Map the given param placeholder `name`(s) to the given callback(s).[m
[32m+[m[32m *[m
[32m+[m[32m * Param mapping is used to provide pre-conditions to routes[m
[32m+[m[32m * which us normalized placeholders. This callback has the same[m
[32m+[m[32m * signature as regular middleware, for example below when ":userId"[m
[32m+[m[32m * is used this function will be invoked in an attempt to load the user.[m
[32m+[m[32m *[m
[32m+[m[32m *      app.param('userId', function(req, res, next, id){[m
[32m+[m[32m *        User.find(id, function(err, user){[m
[32m+[m[32m *          if (err) {[m
[32m+[m[32m *            next(err);[m
[32m+[m[32m *          } else if (user) {[m
[32m+[m[32m *            req.user = user;[m
[32m+[m[32m *            next();[m
[32m+[m[32m *          } else {[m
[32m+[m[32m *            next(new Error('failed to load user'));[m
[32m+[m[32m *          }[m
[32m+[m[32m *        });[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m
[32m+[m[32m * Passing a single function allows you to map logic[m
[32m+[m[32m * to the values passed to `app.param()`, for example[m
[32m+[m[32m * this is useful to provide coercion support in a concise manner.[m
[32m+[m[32m *[m
[32m+[m[32m * The following example maps regular expressions to param values[m
[32m+[m[32m * ensuring that they match, otherwise passing control to the next[m
[32m+[m[32m * route:[m
[32m+[m[32m *[m
[32m+[m[32m *      app.param(function(name, regexp){[m
[32m+[m[32m *        if (regexp instanceof RegExp) {[m
[32m+[m[32m *          return function(req, res, next, val){[m
[32m+[m[32m *            var captures;[m
[32m+[m[32m *            if (captures = regexp.exec(String(val))) {[m
[32m+[m[32m *              req.params[name] = captures;[m
[32m+[m[32m *              next();[m
[32m+[m[32m *            } else {[m
[32m+[m[32m *              next('route');[m
[32m+[m[32m *            }[m
[32m+[m[32m *          }[m
[32m+[m[32m *        }[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m
[32m+[m[32m * We can now use it as shown below, where "/commit/:commit" expects[m
[32m+[m[32m * that the value for ":commit" is at 5 or more digits. The capture[m
[32m+[m[32m * groups are then available as `req.params.commit` as we defined[m
[32m+[m[32m * in the function above.[m
[32m+[m[32m *[m
[32m+[m[32m *    app.param('commit', /^\d{5,}$/);[m
[32m+[m[32m *[m
[32m+[m[32m * For more of this useful functionality take a look[m
[32m+[m[32m * at [express-params](http://github.com/visionmedia/express-params).[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String|Array|Function} name[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.param = function(name, fn){[m
[32m+[m[32m  var self = this[m
[32m+[m[32m    , fns = [].slice.call(arguments, 1);[m
[32m+[m
[32m+[m[32m  // array[m
[32m+[m[32m  if (Array.isArray(name)) {[m
[32m+[m[32m    name.forEach(function(name){[m
[32m+[m[32m      fns.forEach(function(fn){[m
[32m+[m[32m        self.param(name, fn);[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m[32m  // param logic[m
[32m+[m[32m  } else if ('function' == typeof name) {[m
[32m+[m[32m    this.routes.param(name);[m
[32m+[m[32m  // single[m
[32m+[m[32m  } else {[m
[32m+[m[32m    if (':' == name[0]) name = name.substr(1);[m
[32m+[m[32m    fns.forEach(function(fn){[m
[32m+[m[32m      self.routes.param(name, fn);[m
[32m+[m[32m    });[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Assign a custom exception handler callback `fn`.[m
[32m+[m[32m * These handlers are always _last_ in the middleware stack.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.error = function(fn){[m
[32m+[m[32m  this.errorHandlers.push(fn);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Register the given callback `fn` for the given `type`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} type[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.is = function(type, fn){[m
[32m+[m[32m  if (!fn) return this.isCallbacks[type];[m
[32m+[m[32m  this.isCallbacks[type] = fn;[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Assign `setting` to `val`, or return `setting`'s value.[m
[32m+[m[32m * Mounted servers inherit their parent server's settings.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} setting[m
[32m+[m[32m * @param {String} val[m
[32m+[m[32m * @return {Server|Mixed} for chaining, or the setting value[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.set = function(setting, val){[m
[32m+[m[32m  if (val === undefined) {[m
[32m+[m[32m    if (this.settings.hasOwnProperty(setting)) {[m
[32m+[m[32m      return this.settings[setting];[m
[32m+[m[32m    } else if (this.parent) {[m
[32m+[m[32m      return this.parent.set(setting);[m
[32m+[m[32m    }[m
[32m+[m[32m  } else {[m
[32m+[m[32m    this.settings[setting] = val;[m
[32m+[m[32m    return this;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if `setting` is enabled.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} setting[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.enabled = function(setting){[m
[32m+[m[32m  return !!this.set(setting);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if `setting` is disabled.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} setting[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.disabled = function(setting){[m
[32m+[m[32m  return !this.set(setting);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Enable `setting`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} setting[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.enable = function(setting){[m
[32m+[m[32m  return this.set(setting, true);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Disable `setting`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} setting[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.disable = function(setting){[m
[32m+[m[32m  return this.set(setting, false);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Redirect `key` to `url`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} key[m
[32m+[m[32m * @param {String} url[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.redirect = function(key, url){[m
[32m+[m[32m  this.redirects[key] = url;[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Configure callback for zero or more envs,[m
[32m+[m[32m * when no env is specified that callback will[m
[32m+[m[32m * be invoked for all environments. Any combination[m
[32m+[m[32m * can be used multiple times, in any order desired.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *    app.configure(function(){[m
[32m+[m[32m *      // executed for all envs[m
[32m+[m[32m *    });[m
[32m+[m[32m *[m
[32m+[m[32m *    app.configure('stage', function(){[m
[32m+[m[32m *      // executed staging env[m
[32m+[m[32m *    });[m
[32m+[m[32m *[m
[32m+[m[32m *    app.configure('stage', 'production', function(){[m
[32m+[m[32m *      // executed for stage and production[m
[32m+[m[32m *    });[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} env...[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.configure = function(env, fn){[m
[32m+[m[32m  var envs = 'all'[m
[32m+[m[32m    , args = toArray(arguments);[m
[32m+[m[32m  fn = args.pop();[m
[32m+[m[32m  if (args.length) envs = args;[m
[32m+[m[32m  if ('all' == envs || ~envs.indexOf(this.settings.env)) fn.call(this);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Delegate `.VERB(...)` calls to `.route(VERB, ...)`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmethods.forEach(function(method){[m
[32m+[m[32m  app[method] = function(path){[m
[32m+[m[32m    if (1 == arguments.length) return this.routes.lookup(method, path);[m
[32m+[m[32m    var args = [method].concat(toArray(arguments));[m
[32m+[m[32m    if (!this.__usedRouter) this.use(this.router);[m
[32m+[m[32m    return this.routes._route.apply(this.routes, args);[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Special-cased "all" method, applying the given route `path`,[m
[32m+[m[32m * middleware, and callback to _every_ HTTP method.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {Function} ...[m
[32m+[m[32m * @return {Server} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.all = function(path){[m
[32m+[m[32m  var args = arguments;[m
[32m+[m[32m  if (1 == args.length) return this.routes.lookup('all', path);[m
[32m+[m[32m  methods.forEach(function(method){[m
[32m+[m[32m    if ('all' == method || 'del' == method) return;[m
[32m+[m[32m    app[method].apply(this, args);[m
[32m+[m[32m  }, this);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// del -> delete alias[m
[32m+[m
[32m+[m[32mapp.del = app.delete;[m
[32m+[m
[1mdiff --git a/node_modules/express/lib/https.js b/node_modules/express/lib/https.js[m
[1mnew file mode 100644[m
[1mindex 0000000..8a8c008[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/https.js[m
[36m@@ -0,0 +1,52 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - HTTPSServer[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar connect = require('connect')[m
[32m+[m[32m  , HTTPServer = require('./http')[m
[32m+[m[32m  , https = require('https');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose `HTTPSServer`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = HTTPSServer;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Server proto.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar app = HTTPSServer.prototype;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new `HTTPSServer` with the[m[41m [m
[32m+[m[32m * given `options`, and optional `middleware`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @param {Array} middleware[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction HTTPSServer(options, middleware){[m
[32m+[m[32m  connect.HTTPSServer.call(this, options, []);[m
[32m+[m[32m  this.init(middleware);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Inherit from `connect.HTTPSServer`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mapp.__proto__ = connect.HTTPSServer.prototype;[m
[32m+[m
[32m+[m[32m// mixin HTTPServer methods[m
[32m+[m
[32m+[m[32mObject.keys(HTTPServer.prototype).forEach(function(method){[m
[32m+[m[32m  app[method] = HTTPServer.prototype[method];[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/lib/request.js b/node_modules/express/lib/request.js[m
[1mnew file mode 100644[m
[1mindex 0000000..4138afe[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/request.js[m
[36m@@ -0,0 +1,357 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - request[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar http = require('http')[m
[32m+[m[32m  , req = http.IncomingMessage.prototype[m
[32m+[m[32m  , utils = require('./utils')[m
[32m+[m[32m  , parse = require('url').parse[m
[32m+[m[32m  , mime = require('mime');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Default flash formatters.[m
[32m+[m[32m *[m
[32m+[m[32m * @type Object[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar flashFormatters = exports.flashFormatters = {[m
[32m+[m[32m  s: function(val){[m
[32m+[m[32m    return String(val);[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return request header or optional default.[m
[32m+[m[32m *[m
[32m+[m[32m * The `Referrer` header field is special-cased,[m
[32m+[m[32m * both `Referrer` and `Referer` will yield are[m
[32m+[m[32m * interchangeable.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     req.header('Content-Type');[m
[32m+[m[32m *     // => "text/plain"[m
[32m+[m[32m *[m[41m     [m
[32m+[m[32m *     req.header('content-type');[m
[32m+[m[32m *     // => "text/plain"[m
[32m+[m[32m *[m[41m     [m
[32m+[m[32m *     req.header('Accept');[m
[32m+[m[32m *     // => undefined[m
[32m+[m[32m *[m[41m     [m
[32m+[m[32m *     req.header('Accept', 'text/html');[m
[32m+[m[32m *     // => "text/html"[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} name[m
[32m+[m[32m * @param {String} defaultValue[m
[32m+[m[32m * @return {String}[m[41m [m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.header = function(name, defaultValue){[m
[32m+[m[32m  switch (name = name.toLowerCase()) {[m
[32m+[m[32m    case 'referer':[m
[32m+[m[32m    case 'referrer':[m
[32m+[m[32m      return this.headers.referrer[m
[32m+[m[32m        || this.headers.referer[m
[32m+[m[32m        || defaultValue;[m
[32m+[m[32m    default:[m
[32m+[m[32m      return this.headers[name] || defaultValue;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Get `field`'s `param` value, defaulting to ''.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     req.get('content-disposition', 'filename');[m
[32m+[m[32m *     // => "something.png"[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} field[m
[32m+[m[32m * @param {String} param[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.get = function(field, param){[m
[32m+[m[32m  var val = this.header(field);[m
[32m+[m[32m  if (!val) return '';[m
[32m+[m[32m  var regexp = new RegExp(param + ' *= *(?:"([^"]+)"|([^;]+))', 'i');[m
[32m+[m[32m  if (!regexp.exec(val)) return '';[m
[32m+[m[32m  return RegExp.$1 || RegExp.$2;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Short-hand for `require('url').parse(req.url).pathname`.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.__defineGetter__('path', function(){[m
[32m+[m[32m  return parse(this.url).pathname;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if the _Accept_ header is present, and includes the given `type`.[m
[32m+[m[32m *[m
[32m+[m[32m * When the _Accept_ header is not present `true` is returned. Otherwise[m
[32m+[m[32m * the given `type` is matched by an exact match, and then subtypes. You[m
[32m+[m[32m * may pass the subtype such as "html" which is then converted internally[m
[32m+[m[32m * to "text/html" using the mime lookup table.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m *     // Accept: text/html[m
[32m+[m[32m *     req.accepts('html');[m
[32m+[m[32m *     // => true[m
[32m+[m[32m *[m
[32m+[m[32m *     // Accept: text/*; application/json[m
[32m+[m[32m *     req.accepts('html');[m
[32m+[m[32m *     req.accepts('text/html');[m
[32m+[m[32m *     req.accepts('text/plain');[m
[32m+[m[32m *     req.accepts('application/json');[m
[32m+[m[32m *     // => true[m
[32m+[m[32m *[m
[32m+[m[32m *     req.accepts('image/png');[m
[32m+[m[32m *     req.accepts('png');[m
[32m+[m[32m *     // => false[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} type[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.accepts = function(type){[m
[32m+[m[32m  var accept = this.header('Accept');[m
[32m+[m
[32m+[m[32m  // normalize extensions ".json" -> "json"[m
[32m+[m[32m  if (type && '.' == type[0]) type = type.substr(1);[m
[32m+[m
[32m+[m[32m  // when Accept does not exist, or contains '*/*' return true[m
[32m+[m[32m  if (!accept || ~accept.indexOf('*/*')) {[m
[32m+[m[32m    return true;[m
[32m+[m[32m  } else if (type) {[m
[32m+[m[32m    // allow "html" vs "text/html" etc[m
[32m+[m[32m    if (!~type.indexOf('/')) type = mime.lookup(type);[m
[32m+[m
[32m+[m[32m    // check if we have a direct match[m
[32m+[m[32m    if (~accept.indexOf(type)) return true;[m
[32m+[m
[32m+[m[32m    // check if we have type/*[m
[32m+[m[32m    type = type.split('/')[0] + '/*';[m
[32m+[m[32m    return !!~accept.indexOf(type);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return the value of param `name` when present or `defaultValue`.[m
[32m+[m[32m *[m
[32m+[m[32m *  - Checks route placeholders, ex: _/user/:id_[m
[32m+[m[32m *  - Checks query string params, ex: ?id=12[m
[32m+[m[32m *  - Checks urlencoded body params, ex: id=12[m
[32m+[m[32m *[m
[32m+[m[32m * To utilize urlencoded request bodies, `req.body`[m
[32m+[m[32m * should be an object. This can be done by using[m
[32m+[m[32m * the `connect.bodyParser` middleware.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} name[m
[32m+[m[32m * @param {Mixed} defaultValue[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.param = function(name, defaultValue){[m
[32m+[m[32m  // route params like /user/:id[m
[32m+[m[32m  if (this.params && this.params.hasOwnProperty(name) && undefined !== this.params[name]) {[m
[32m+[m[32m    return this.params[name];[m[41m [m
[32m+[m[32m  }[m
[32m+[m[32m  // query string params[m
[32m+[m[32m  if (undefined !== this.query[name]) {[m
[32m+[m[32m    return this.query[name];[m[41m [m
[32m+[m[32m  }[m
[32m+[m[32m  // request body params via connect.bodyParser[m
[32m+[m[32m  if (this.body && undefined !== this.body[name]) {[m
[32m+[m[32m    return this.body[name];[m
[32m+[m[32m  }[m
[32m+[m[32m  return defaultValue;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Queue flash `msg` of the given `type`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *      req.flash('info', 'email sent');[m
[32m+[m[32m *      req.flash('error', 'email delivery failed');[m
[32m+[m[32m *      req.flash('info', 'email re-sent');[m
[32m+[m[32m *      // => 2[m
[32m+[m[32m *[m
[32m+[m[32m *      req.flash('info');[m
[32m+[m[32m *      // => ['email sent', 'email re-sent'][m
[32m+[m[32m *[m
[32m+[m[32m *      req.flash('info');[m
[32m+[m[32m *      // => [][m
[32m+[m[32m *[m
[32m+[m[32m *      req.flash();[m
[32m+[m[32m *      // => { error: ['email delivery failed'], info: [] }[m
[32m+[m[32m *[m
[32m+[m[32m * Formatting:[m
[32m+[m[32m *[m
[32m+[m[32m * Flash notifications also support arbitrary formatting support.[m
[32m+[m[32m * For example you may pass variable arguments to `req.flash()`[m
[32m+[m[32m * and use the %s specifier to be replaced by the associated argument:[m
[32m+[m[32m *[m
[32m+[m[32m *     req.flash('info', 'email has been sent to %s.', userName);[m
[32m+[m[32m *[m
[32m+[m[32m * To add custom formatters use the `exports.flashFormatters` object.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} type[m
[32m+[m[32m * @param {String} msg[m
[32m+[m[32m * @return {Array|Object|Number}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.flash = function(type, msg){[m
[32m+[m[32m  if (this.session === undefined) throw Error('req.flash() requires sessions');[m
[32m+[m[32m  var msgs = this.session.flash = this.session.flash || {};[m
[32m+[m[32m  if (type && msg) {[m
[32m+[m[32m    var i = 2[m
[32m+[m[32m      , args = arguments[m
[32m+[m[32m      , formatters = this.app.flashFormatters || {};[m
[32m+[m[32m    formatters.__proto__ = flashFormatters;[m
[32m+[m[32m    msg = utils.miniMarkdown(msg);[m
[32m+[m[32m    msg = msg.replace(/%([a-zA-Z])/g, function(_, format){[m
[32m+[m[32m      var formatter = formatters[format];[m
[32m+[m[32m      if (formatter) return formatter(utils.escape(args[i++]));[m
[32m+[m[32m    });[m
[32m+[m[32m    return (msgs[type] = msgs[type] || []).push(msg);[m
[32m+[m[32m  } else if (type) {[m
[32m+[m[32m    var arr = msgs[type];[m
[32m+[m[32m    delete msgs[type];[m
[32m+[m[32m    return arr || [];[m
[32m+[m[32m  } else {[m
[32m+[m[32m    this.session.flash = {};[m
[32m+[m[32m    return msgs;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if the incoming request contains the "Content-Type"[m[41m [m
[32m+[m[32m * header field, and it contains the give mime `type`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *      // With Content-Type: text/html; charset=utf-8[m
[32m+[m[32m *      req.is('html');[m
[32m+[m[32m *      req.is('text/html');[m
[32m+[m[32m *      // => true[m
[32m+[m[32m *[m[41m     [m
[32m+[m[32m *      // When Content-Type is application/json[m
[32m+[m[32m *      req.is('json');[m
[32m+[m[32m *      req.is('application/json');[m
[32m+[m[32m *      // => true[m
[32m+[m[32m *[m[41m     [m
[32m+[m[32m *      req.is('html');[m
[32m+[m[32m *      // => false[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * Ad-hoc callbacks can also be registered with Express, to perform[m
[32m+[m[32m * assertions again the request, for example if we need an expressive[m
[32m+[m[32m * way to check if our incoming request is an image, we can register "an image"[m
[32m+[m[32m * callback:[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m *       app.is('an image', function(req){[m
[32m+[m[32m *         return 0 == req.headers['content-type'].indexOf('image');[m
[32m+[m[32m *       });[m
[32m+[m[32m *[m[41m       [m
[32m+[m[32m *  Now within our route callbacks, we can use to to assert content types[m
[32m+[m[32m *  such as "image/jpeg", "image/png", etc.[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m *      app.post('/image/upload', function(req, res, next){[m
[32m+[m[32m *        if (req.is('an image')) {[m
[32m+[m[32m *          // do something[m
[32m+[m[32m *        } else {[m
[32m+[m[32m *          next();[m
[32m+[m[32m *        }[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @param {String} type[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.is = function(type){[m
[32m+[m[32m  var fn = this.app.is(type);[m
[32m+[m[32m  if (fn) return fn(this);[m
[32m+[m[32m  var ct = this.headers['content-type'];[m
[32m+[m[32m  if (!ct) return false;[m
[32m+[m[32m  ct = ct.split(';')[0];[m
[32m+[m[32m  if (!~type.indexOf('/')) type = mime.lookup(type);[m
[32m+[m[32m  if (~type.indexOf('*')) {[m
[32m+[m[32m    type = type.split('/');[m
[32m+[m[32m    ct = ct.split('/');[m
[32m+[m[32m    if ('*' == type[0] && type[1] == ct[1]) return true;[m
[32m+[m[32m    if ('*' == type[1] && type[0] == ct[0]) return true;[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m  return !! ~ct.indexOf(type);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// Callback for isXMLHttpRequest / xhr[m
[32m+[m
[32m+[m[32mfunction isxhr() {[m
[32m+[m[32m  return this.header('X-Requested-With', '').toLowerCase() === 'xmlhttprequest';[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if the request was an _XMLHttpRequest_.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.__defineGetter__('isXMLHttpRequest', isxhr);[m
[32m+[m[32mreq.__defineGetter__('xhr', isxhr);[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return the protocol string "http" or "https"[m
[32m+[m[32m * when requested with TLS. When the "trust proxy"[m[41m [m
[32m+[m[32m * setting is enabled the "X-Forwarded-Proto" header[m
[32m+[m[32m * field will be trusted. If you're running behind[m
[32m+[m[32m * a reverse proxy that supplies https for you this[m
[32m+[m[32m * may be enabled.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.__defineGetter__('protocol', function(){[m
[32m+[m[32m  var trustProxy = this.app.set('trust proxy');[m
[32m+[m[32m  return this.connection.encrypted[m
[32m+[m[32m    ? 'https'[m
[32m+[m[32m    : trustProxy[m
[32m+[m[32m      ? (this.header('X-Forwarded-Proto') || 'http')[m
[32m+[m[32m      : 'http';[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Short-hand for:[m
[32m+[m[32m *[m
[32m+[m[32m *    req.protocol == 'https'[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mreq.__defineGetter__('secure', function(){[m
[32m+[m[32m  return 'https' == this.protocol;[m
[32m+[m[32m});[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/lib/response.js b/node_modules/express/lib/response.js[m
[1mnew file mode 100644[m
[1mindex 0000000..0174950[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/response.js[m
[36m@@ -0,0 +1,459 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - response[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar fs = require('fs')[m
[32m+[m[32m  , http = require('http')[m
[32m+[m[32m  , path = require('path')[m
[32m+[m[32m  , connect = require('connect')[m
[32m+[m[32m  , utils = connect.utils[m
[32m+[m[32m  , parseRange = require('./utils').parseRange[m
[32m+[m[32m  , res = http.ServerResponse.prototype[m
[32m+[m[32m  , send = connect.static.send[m
[32m+[m[32m  , mime = require('mime')[m
[32m+[m[32m  , basename = path.basename[m
[32m+[m[32m  , join = path.join;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Send a response with the given `body` and optional `headers` and `status` code.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     res.send();[m
[32m+[m[32m *     res.send(new Buffer('wahoo'));[m
[32m+[m[32m *     res.send({ some: 'json' });[m
[32m+[m[32m *     res.send('<p>some html</p>');[m
[32m+[m[32m *     res.send('Sorry, cant find that', 404);[m
[32m+[m[32m *     res.send('text', { 'Content-Type': 'text/plain' }, 201);[m
[32m+[m[32m *     res.send(404);[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String|Object|Number|Buffer} body or status[m
[32m+[m[32m * @param {Object|Number} headers or status[m
[32m+[m[32m * @param {Number} status[m
[32m+[m[32m * @return {ServerResponse}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.send = function(body, headers, status){[m
[32m+[m[32m  // allow status as second arg[m
[32m+[m[32m  if ('number' == typeof headers) {[m
[32m+[m[32m    status = headers,[m
[32m+[m[32m    headers = null;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // default status[m
[32m+[m[32m  status = status || this.statusCode;[m
[32m+[m
[32m+[m[32m  // allow 0 args as 204[m
[32m+[m[32m  if (!arguments.length || undefined === body) status = 204;[m
[32m+[m
[32m+[m[32m  // determine content type[m
[32m+[m[32m  switch (typeof body) {[m
[32m+[m[32m    case 'number':[m
[32m+[m[32m      if (!this.header('Content-Type')) {[m
[32m+[m[32m        this.contentType('.txt');[m
[32m+[m[32m      }[m
[32m+[m[32m      body = http.STATUS_CODES[status = body];[m
[32m+[m[32m      break;[m
[32m+[m[32m    case 'string':[m
[32m+[m[32m      if (!this.header('Content-Type')) {[m
[32m+[m[32m        this.charset = this.charset || 'utf-8';[m
[32m+[m[32m        this.contentType('.html');[m
[32m+[m[32m      }[m
[32m+[m[32m      break;[m
[32m+[m[32m    case 'boolean':[m
[32m+[m[32m    case 'object':[m
[32m+[m[32m      if (Buffer.isBuffer(body)) {[m
[32m+[m[32m        if (!this.header('Content-Type')) {[m
[32m+[m[32m          this.contentType('.bin');[m
[32m+[m[32m        }[m
[32m+[m[32m      } else {[m
[32m+[m[32m        return this.json(body, headers, status);[m
[32m+[m[32m      }[m
[32m+[m[32m      break;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // populate Content-Length[m
[32m+[m[32m  if (undefined !== body && !this.header('Content-Length')) {[m
[32m+[m[32m    this.header('Content-Length', Buffer.isBuffer(body)[m
[32m+[m[32m      ? body.length[m
[32m+[m[32m      : Buffer.byteLength(body));[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // merge headers passed[m
[32m+[m[32m  if (headers) {[m
[32m+[m[32m    var fields = Object.keys(headers);[m
[32m+[m[32m    for (var i = 0, len = fields.length; i < len; ++i) {[m
[32m+[m[32m      var field = fields[i];[m
[32m+[m[32m      this.header(field, headers[field]);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // strip irrelevant headers[m
[32m+[m[32m  if (204 == status || 304 == status) {[m
[32m+[m[32m    this.removeHeader('Content-Type');[m
[32m+[m[32m    this.removeHeader('Content-Length');[m
[32m+[m[32m    body = '';[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // respond[m
[32m+[m[32m  this.statusCode = status;[m
[32m+[m[32m  this.end('HEAD' == this.req.method ? null : body);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Send JSON response with `obj`, optional `headers`, and optional `status`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     res.json(null);[m
[32m+[m[32m *     res.json({ user: 'tj' });[m
[32m+[m[32m *     res.json('oh noes!', 500);[m
[32m+[m[32m *     res.json('I dont have that', 404);[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Mixed} obj[m
[32m+[m[32m * @param {Object|Number} headers or status[m
[32m+[m[32m * @param {Number} status[m
[32m+[m[32m * @return {ServerResponse}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.json = function(obj, headers, status){[m
[32m+[m[32m  var body = JSON.stringify(obj)[m
[32m+[m[32m    , callback = this.req.query.callback[m
[32m+[m[32m    , jsonp = this.app.enabled('jsonp callback');[m
[32m+[m
[32m+[m[32m  this.charset = this.charset || 'utf-8';[m
[32m+[m[32m  this.header('Content-Type', 'application/json');[m
[32m+[m
[32m+[m[32m  if (callback && jsonp) {[m
[32m+[m[32m    this.header('Content-Type', 'text/javascript');[m
[32m+[m[32m    body = callback.replace(/[^\w$.]/g, '') + '(' + body + ');';[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return this.send(body, headers, status);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Set status `code`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Number} code[m
[32m+[m[32m * @return {ServerResponse}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.status = function(code){[m
[32m+[m[32m  this.statusCode = code;[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Transfer the file at the given `path`. Automatically sets[m[41m [m
[32m+[m[32m * the _Content-Type_ response header field. `next()` is called[m
[32m+[m[32m * when `path` is a directory, or when an error occurs.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `maxAge` defaulting to 0[m
[32m+[m[32m *   - `root`   root directory for relative filenames[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {Object|Function} options or fn[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.sendfile = function(path, options, fn){[m
[32m+[m[32m  var next = this.req.next;[m
[32m+[m[32m  options = options || {};[m
[32m+[m
[32m+[m[32m  // support function as second arg[m
[32m+[m[32m  if ('function' == typeof options) {[m
[32m+[m[32m    fn = options;[m
[32m+[m[32m    options = {};[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  options.path = encodeURIComponent(path);[m
[32m+[m[32m  options.callback = fn;[m
[32m+[m[32m  send(this.req, this, next, options);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Set _Content-Type_ response header passed through `mime.lookup()`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     var filename = 'path/to/image.png';[m
[32m+[m[32m *     res.contentType(filename);[m
[32m+[m[32m *     // res.headers['Content-Type'] is now "image/png"[m
[32m+[m[32m *[m
[32m+[m[32m *     res.contentType('.html');[m
[32m+[m[32m *     res.contentType('html');[m
[32m+[m[32m *     res.contentType('json');[m
[32m+[m[32m *     res.contentType('png');[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} type[m
[32m+[m[32m * @return {String} the resolved mime type[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.contentType = function(type){[m
[32m+[m[32m  return this.header('Content-Type', mime.lookup(type));[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Set _Content-Disposition_ header to _attachment_ with optional `filename`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} filename[m
[32m+[m[32m * @return {ServerResponse}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.attachment = function(filename){[m
[32m+[m[32m  if (filename) this.contentType(filename);[m
[32m+[m[32m  this.header('Content-Disposition', filename[m
[32m+[m[32m    ? 'attachment; filename="' + basename(filename) + '"'[m
[32m+[m[32m    : 'attachment');[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Transfer the file at the given `path`, with optional[m[41m [m
[32m+[m[32m * `filename` as an attachment and optional callback `fn(err)`,[m
[32m+[m[32m * and optional `fn2(err)` which is invoked when an error has[m
[32m+[m[32m * occurred after header has been sent.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {String|Function} filename or fn[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @param {Function} fn2[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.download = function(path, filename, fn, fn2){[m
[32m+[m[32m  var self = this;[m
[32m+[m
[32m+[m[32m  // support callback as second arg[m
[32m+[m[32m  if ('function' == typeof filename) {[m
[32m+[m[32m    fn2 = fn;[m
[32m+[m[32m    fn = filename;[m
[32m+[m[32m    filename = null;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // transfer the file[m
[32m+[m[32m  this.attachment(filename || path).sendfile(path, function(err){[m
[32m+[m[32m    var sentHeader = self._header;[m
[32m+[m[32m    if (err) {[m
[32m+[m[32m      if (!sentHeader) self.removeHeader('Content-Disposition');[m
[32m+[m[32m      if (sentHeader) {[m
[32m+[m[32m        fn2 && fn2(err);[m
[32m+[m[32m      } else if (fn) {[m
[32m+[m[32m        fn(err);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        self.req.next(err);[m
[32m+[m[32m      }[m
[32m+[m[32m    } else if (fn) {[m
[32m+[m[32m      fn();[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Set or get response header `name` with optional `val`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} name[m
[32m+[m[32m * @param {String} val[m
[32m+[m[32m * @return {ServerResponse} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.header = function(name, val){[m
[32m+[m[32m  if (1 == arguments.length) return this.getHeader(name);[m
[32m+[m[32m  this.setHeader(name, val);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Clear cookie `name`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} name[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.clearCookie = function(name, options){[m
[32m+[m[32m  var opts = { expires: new Date(1) };[m
[32m+[m[32m  this.cookie(name, '', options[m
[32m+[m[32m    ? utils.merge(options, opts)[m
[32m+[m[32m    : opts);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Set cookie `name` to `val`, with the given `options`.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *    - `maxAge`   max-age in milliseconds, converted to `expires`[m
[32m+[m[32m *    - `path`     defaults to the "basepath" setting which is typically "/"[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *    // "Remember Me" for 15 minutes[m
[32m+[m[32m *    res.cookie('rememberme', '1', { expires: new Date(Date.now() + 900000), httpOnly: true });[m
[32m+[m[32m *[m
[32m+[m[32m *    // save as above[m
[32m+[m[32m *    res.cookie('rememberme', '1', { maxAge: 900000, httpOnly: true })[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} name[m
[32m+[m[32m * @param {String} val[m
[32m+[m[32m * @param {Options} options[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.cookie = function(name, val, options){[m
[32m+[m[32m  options = options || {};[m
[32m+[m[32m  if ('maxAge' in options) options.expires = new Date(Date.now() + options.maxAge);[m
[32m+[m[32m  if (undefined === options.path) options.path = this.app.set('basepath');[m
[32m+[m[32m  var cookie = utils.serializeCookie(name, val, options);[m
[32m+[m[32m  this.header('Set-Cookie', cookie);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Redirect to the given `url` with optional response `status`[m
[32m+[m[32m * defauling to 302.[m
[32m+[m[32m *[m
[32m+[m[32m * The given `url` can also be the name of a mapped url, for[m
[32m+[m[32m * example by default express supports "back" which redirects[m
[32m+[m[32m * to the _Referrer_ or _Referer_ headers or the application's[m
[32m+[m[32m * "basepath" setting. Express also supports "basepath" out of the box,[m
[32m+[m[32m * which can be set via `app.set('basepath', '/blog');`, and defaults[m
[32m+[m[32m * to '/'.[m
[32m+[m[32m *[m
[32m+[m[32m * Redirect Mapping:[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m *  To extend the redirect mapping capabilities that Express provides,[m
[32m+[m[32m *  we may use the `app.redirect()` method:[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m *     app.redirect('google', 'http://google.com');[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m *  Now in a route we may call:[m
[32m+[m[32m *[m
[32m+[m[32m *     res.redirect('google');[m
[32m+[m[32m *[m
[32m+[m[32m *  We may also map dynamic redirects:[m
[32m+[m[32m *[m
[32m+[m[32m *      app.redirect('comments', function(req, res){[m
[32m+[m[32m *          return '/post/' + req.params.id + '/comments';[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m
[32m+[m[32m *  So now we may do the following, and the redirect will dynamically adjust to[m
[32m+[m[32m *  the context of the request. If we called this route with _GET /post/12_ our[m
[32m+[m[32m *  redirect _Location_ would be _/post/12/comments_.[m
[32m+[m[32m *[m
[32m+[m[32m *      app.get('/post/:id', function(req, res){[m
[32m+[m[32m *        res.redirect('comments');[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m
[32m+[m[32m *  Unless an absolute `url` is given, the app's mount-point[m
[32m+[m[32m *  will be respected. For example if we redirect to `/posts`,[m
[32m+[m[32m *  and our app is mounted at `/blog` we will redirect to `/blog/posts`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} url[m
[32m+[m[32m * @param {Number} code[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.redirect = function(url, status){[m
[32m+[m[32m  var app = this.app[m
[32m+[m[32m    , req = this.req[m
[32m+[m[32m    , base = app.set('basepath') || app.route[m
[32m+[m[32m    , status = status || 302[m
[32m+[m[32m    , head = 'HEAD' == req.method[m
[32m+[m[32m    , body;[m
[32m+[m
[32m+[m[32m  // Setup redirect map[m
[32m+[m[32m  var map = {[m
[32m+[m[32m      back: req.header('Referrer', base)[m
[32m+[m[32m    , home: base[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  // Support custom redirect map[m
[32m+[m[32m  map.__proto__ = app.redirects;[m
[32m+[m
[32m+[m[32m  // Attempt mapped redirect[m
[32m+[m[32m  var mapped = 'function' == typeof map[url][m
[32m+[m[32m    ? map[url](req, this)[m
[32m+[m[32m    : map[url];[m
[32m+[m
[32m+[m[32m  // Perform redirect[m
[32m+[m[32m  url = mapped || url;[m
[32m+[m
[32m+[m[32m  // Relative[m
[32m+[m[32m  if (!~url.indexOf('://')) {[m
[32m+[m[32m    // Respect mount-point[m
[32m+[m[32m    if ('/' != base && 0 != url.indexOf(base)) url = base + url;[m
[32m+[m
[32m+[m[32m    // Absolute[m
[32m+[m[32m    var host = req.headers.host;[m
[32m+[m[32m    url = req.protocol + '://' + host + url;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // Support text/{plain,html} by default[m
[32m+[m[32m  if (req.accepts('html')) {[m
[32m+[m[32m    body = '<p>' + http.STATUS_CODES[status] + '. Redirecting to <a href="' + url + '">' + url + '</a></p>';[m
[32m+[m[32m    this.header('Content-Type', 'text/html');[m
[32m+[m[32m  } else {[m
[32m+[m[32m    body = http.STATUS_CODES[status] + '. Redirecting to ' + url;[m
[32m+[m[32m    this.header('Content-Type', 'text/plain');[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // Respond[m
[32m+[m[32m  this.statusCode = status;[m
[32m+[m[32m  this.header('Location', url);[m
[32m+[m[32m  this.end(head ? null : body);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Assign the view local variable `name` to `val` or return the[m
[32m+[m[32m * local previously assigned to `name`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} name[m
[32m+[m[32m * @param {Mixed} val[m
[32m+[m[32m * @return {Mixed} val[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.local = function(name, val){[m
[32m+[m[32m  this._locals = this._locals || {};[m
[32m+[m[32m  return undefined === val[m
[32m+[m[32m    ? this._locals[name][m
[32m+[m[32m    : this._locals[name] = val;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Assign several locals with the given `obj`,[m
[32m+[m[32m * or return the locals.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @return {Object|Undefined}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.locals =[m
[32m+[m[32mres.helpers = function(obj){[m
[32m+[m[32m  if (obj) {[m
[32m+[m[32m    for (var key in obj) {[m
[32m+[m[32m      this.local(key, obj[key]);[m
[32m+[m[32m    }[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return this._locals;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/lib/router/collection.js b/node_modules/express/lib/router/collection.js[m
[1mnew file mode 100644[m
[1mindex 0000000..991a9a2[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/router/collection.js[m
[36m@@ -0,0 +1,53 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - router - Collection[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose `Collection`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = Collection;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new route `Collection`[m
[32m+[m[32m * with the given `router`.[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @param {Router} router[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction Collection(router) {[m
[32m+[m[32m  Array.apply(this, arguments);[m
[32m+[m[32m  this.router = router;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Inherit from `Array.prototype`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mCollection.prototype.__proto__ = Array.prototype;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Remove the routes in this collection.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Collection} of routes removed[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mCollection.prototype.remove = function(){[m
[32m+[m[32m  var router = this.router[m
[32m+[m[32m    , len = this.length[m
[32m+[m[32m    , ret = new Collection(this.router);[m
[32m+[m
[32m+[m[32m  for (var i = 0; i < len; ++i) {[m
[32m+[m[32m    if (router.remove(this[i])) {[m
[32m+[m[32m      ret.push(this[i]);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return ret;[m
[32m+[m[32m};[m
[32m+[m
[1mdiff --git a/node_modules/express/lib/router/index.js b/node_modules/express/lib/router/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..ff1498b[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/router/index.js[m
[36m@@ -0,0 +1,398 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - Router[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar Route = require('./route')[m
[32m+[m[32m  , Collection = require('./collection')[m
[32m+[m[32m  , utils = require('../utils')[m
[32m+[m[32m  , parse = require('url').parse[m
[32m+[m[32m  , toArray = utils.toArray;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose `Router` constructor.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = Router;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose HTTP methods.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar methods = exports.methods = require('./methods');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new `Router` with the given `app`.[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @param {express.HTTPServer} app[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction Router(app) {[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  this.app = app;[m
[32m+[m[32m  this.routes = {};[m
[32m+[m[32m  this.params = {};[m
[32m+[m[32m  this._params = [];[m
[32m+[m
[32m+[m[32m  this.middleware = function(req, res, next){[m
[32m+[m[32m    self._dispatch(req, res, next);[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Register a param callback `fn` for the given `name`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String|Function} name[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Router} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype.param = function(name, fn){[m
[32m+[m[32m  // param logic[m
[32m+[m[32m  if ('function' == typeof name) {[m
[32m+[m[32m    this._params.push(name);[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // apply param functions[m
[32m+[m[32m  var params = this._params[m
[32m+[m[32m    , len = params.length[m
[32m+[m[32m    , ret;[m
[32m+[m
[32m+[m[32m  for (var i = 0; i < len; ++i) {[m
[32m+[m[32m    if (ret = params[i](name, fn)) {[m
[32m+[m[32m      fn = ret;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // ensure we end up with a[m
[32m+[m[32m  // middleware function[m
[32m+[m[32m  if ('function' != typeof fn) {[m
[32m+[m[32m    throw new Error('invalid param() call for ' + name + ', got ' + fn);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  (this.params[name] = this.params[name] || []).push(fn);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return a `Collection` of all routes defined.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Collection}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype.all = function(){[m
[32m+[m[32m  return this.find(function(){[m
[32m+[m[32m    return true;[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Remove the given `route`, returns[m
[32m+[m[32m * a bool indicating if the route was present[m
[32m+[m[32m * or not.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Route} route[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype.remove = function(route){[m
[32m+[m[32m  var routes = this.routes[route.method][m
[32m+[m[32m    , len = routes.length;[m
[32m+[m
[32m+[m[32m  for (var i = 0; i < len; ++i) {[m
[32m+[m[32m    if (route == routes[i]) {[m
[32m+[m[32m      routes.splice(i, 1);[m
[32m+[m[32m      return true;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return routes with route paths matching `path`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} method[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @return {Collection}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype.lookup = function(method, path){[m
[32m+[m[32m  return this.find(function(route){[m
[32m+[m[32m    return path == route.path[m
[32m+[m[32m      && (route.method == method[m
[32m+[m[32m      || method == 'all');[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return routes with regexps that match the given `url`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} method[m
[32m+[m[32m * @param {String} url[m
[32m+[m[32m * @return {Collection}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype.match = function(method, url){[m
[32m+[m[32m  return this.find(function(route){[m
[32m+[m[32m    return route.match(url)[m
[32m+[m[32m      && (route.method == method[m
[32m+[m[32m      || method == 'all');[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Find routes based on the return value of `fn`[m
[32m+[m[32m * which is invoked once per route.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Collection}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype.find = function(fn){[m
[32m+[m[32m  var len = methods.length[m
[32m+[m[32m    , ret = new Collection(this)[m
[32m+[m[32m    , method[m
[32m+[m[32m    , routes[m
[32m+[m[32m    , route;[m
[32m+[m
[32m+[m[32m  for (var i = 0; i < len; ++i) {[m
[32m+[m[32m    method = methods[i];[m
[32m+[m[32m    routes = this.routes[method];[m
[32m+[m[32m    if (!routes) continue;[m
[32m+[m[32m    for (var j = 0, jlen = routes.length; j < jlen; ++j) {[m
[32m+[m[32m      route = routes[j];[m
[32m+[m[32m      if (fn(route)) ret.push(route);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return ret;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Route dispatcher aka the route "middleware".[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingMessage} req[m
[32m+[m[32m * @param {ServerResponse} res[m
[32m+[m[32m * @param {Function} next[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype._dispatch = function(req, res, next){[m
[32m+[m[32m  var params = this.params[m
[32m+[m[32m    , self = this;[m
[32m+[m
[32m+[m[32m  // route dispatch[m
[32m+[m[32m  (function pass(i, err){[m
[32m+[m[32m    var paramCallbacks[m
[32m+[m[32m      , paramIndex = 0[m
[32m+[m[32m      , paramVal[m
[32m+[m[32m      , route[m
[32m+[m[32m      , keys[m
[32m+[m[32m      , key[m
[32m+[m[32m      , ret;[m
[32m+[m
[32m+[m[32m    // match next route[m
[32m+[m[32m    function nextRoute(err) {[m
[32m+[m[32m      pass(req._route_index + 1, err);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // match route[m
[32m+[m[32m    req.route = route = self._match(req, i);[m
[32m+[m
[32m+[m[32m    // implied OPTIONS[m
[32m+[m[32m    if (!route && 'OPTIONS' == req.method) return self._options(req, res);[m
[32m+[m
[32m+[m[32m    // no route[m
[32m+[m[32m    if (!route) return next(err);[m
[32m+[m
[32m+[m[32m    // we have a route[m
[32m+[m[32m    // start at param 0[m
[32m+[m[32m    req.params = route.params;[m
[32m+[m[32m    keys = route.keys;[m
[32m+[m[32m    i = 0;[m
[32m+[m
[32m+[m[32m    // param callbacks[m
[32m+[m[32m    function param(err) {[m
[32m+[m[32m      paramIndex = 0;[m
[32m+[m[32m      key = keys[i++];[m
[32m+[m[32m      paramVal = key && req.params[key.name];[m
[32m+[m[32m      paramCallbacks = key && params[key.name];[m
[32m+[m
[32m+[m[32m      try {[m
[32m+[m[32m        if ('route' == err) {[m
[32m+[m[32m          nextRoute();[m
[32m+[m[32m        } else if (err) {[m
[32m+[m[32m          i = 0;[m
[32m+[m[32m          callbacks(err);[m
[32m+[m[32m        } else if (paramCallbacks && undefined !== paramVal) {[m
[32m+[m[32m          paramCallback();[m
[32m+[m[32m        } else if (key) {[m
[32m+[m[32m          param();[m
[32m+[m[32m        } else {[m
[32m+[m[32m          i = 0;[m
[32m+[m[32m          callbacks();[m
[32m+[m[32m        }[m
[32m+[m[32m      } catch (err) {[m
[32m+[m[32m        param(err);[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    param(err);[m
[32m+[m[41m    [m
[32m+[m[32m    // single param callbacks[m
[32m+[m[32m    function paramCallback(err) {[m
[32m+[m[32m      var fn = paramCallbacks[paramIndex++];[m
[32m+[m[32m      if (err || !fn) return param(err);[m
[32m+[m[32m      fn(req, res, paramCallback, paramVal, key.name);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // invoke route callbacks[m
[32m+[m[32m    function callbacks(err) {[m
[32m+[m[32m      var fn = route.callbacks[i++];[m
[32m+[m[32m      try {[m
[32m+[m[32m        if ('route' == err) {[m
[32m+[m[32m          nextRoute();[m
[32m+[m[32m        } else if (err && fn) {[m
[32m+[m[32m          if (fn.length < 4) return callbacks(err);[m
[32m+[m[32m          fn(err, req, res, callbacks);[m
[32m+[m[32m        } else if (fn) {[m
[32m+[m[32m          fn(req, res, callbacks);[m
[32m+[m[32m        } else {[m
[32m+[m[32m          nextRoute(err);[m
[32m+[m[32m        }[m
[32m+[m[32m      } catch (err) {[m
[32m+[m[32m        callbacks(err);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })(0);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond to __OPTIONS__ method.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingMessage} req[m
[32m+[m[32m * @param {ServerResponse} res[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype._options = function(req, res){[m
[32m+[m[32m  var path = parse(req.url).pathname[m
[32m+[m[32m    , body = this._optionsFor(path).join(',');[m
[32m+[m[32m  res.send(body, { Allow: body });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return an array of HTTP verbs or "options" for `path`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype._optionsFor = function(path){[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  return methods.filter(function(method){[m
[32m+[m[32m    var routes = self.routes[method];[m
[32m+[m[32m    if (!routes || 'options' == method) return;[m
[32m+[m[32m    for (var i = 0, len = routes.length; i < len; ++i) {[m
[32m+[m[32m      if (routes[i].match(path)) return true;[m
[32m+[m[32m    }[m
[32m+[m[32m  }).map(function(method){[m
[32m+[m[32m    return method.toUpperCase();[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Attempt to match a route for `req`[m
[32m+[m[32m * starting from offset `i`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingMessage} req[m
[32m+[m[32m * @param {Number} i[m
[32m+[m[32m * @return {Route}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype._match = function(req, i){[m
[32m+[m[32m  var method = req.method.toLowerCase()[m
[32m+[m[32m    , url = parse(req.url)[m
[32m+[m[32m    , path = url.pathname[m
[32m+[m[32m    , routes = this.routes[m
[32m+[m[32m    , captures[m
[32m+[m[32m    , route[m
[32m+[m[32m    , keys;[m
[32m+[m
[32m+[m[32m  // pass HEAD to GET routes[m
[32m+[m[32m  if ('head' == method) method = 'get';[m
[32m+[m
[32m+[m[32m  // routes for this method[m
[32m+[m[32m  if (routes = routes[method]) {[m
[32m+[m
[32m+[m[32m    // matching routes[m
[32m+[m[32m    for (var len = routes.length; i < len; ++i) {[m
[32m+[m[32m      route = routes[i];[m
[32m+[m[32m      if (captures = route.match(path)) {[m
[32m+[m[32m        keys = route.keys;[m
[32m+[m[32m        route.params = [];[m
[32m+[m
[32m+[m[32m        // params from capture groups[m
[32m+[m[32m        for (var j = 1, jlen = captures.length; j < jlen; ++j) {[m
[32m+[m[32m          var key = keys[j-1][m
[32m+[m[32m            , val = 'string' == typeof captures[j][m
[32m+[m[32m              ? decodeURIComponent(captures[j])[m
[32m+[m[32m              : captures[j];[m
[32m+[m[32m          if (key) {[m
[32m+[m[32m            route.params[key.name] = val;[m
[32m+[m[32m          } else {[m
[32m+[m[32m            route.params.push(val);[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // all done[m
[32m+[m[32m        req._route_index = i;[m
[32m+[m[32m        return route;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Route `method`, `path`, and one or more callbacks.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} method[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {Function} callback...[m
[32m+[m[32m * @return {Router} for chaining[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRouter.prototype._route = function(method, path, callbacks){[m
[32m+[m[32m  var app = this.app[m
[32m+[m[32m    , callbacks = utils.flatten(toArray(arguments, 2));[m
[32m+[m
[32m+[m[32m  // ensure path was given[m
[32m+[m[32m  if (!path) throw new Error('app.' + method + '() requires a path');[m
[32m+[m
[32m+[m[32m  // create the route[m
[32m+[m[32m  var route = new Route(method, path, callbacks, {[m
[32m+[m[32m      sensitive: app.enabled('case sensitive routes')[m
[32m+[m[32m    , strict: app.enabled('strict routing')[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // add it[m
[32m+[m[32m  (this.routes[method] = this.routes[method] || [])[m
[32m+[m[32m    .push(route);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/lib/router/methods.js b/node_modules/express/lib/router/methods.js[m
[1mnew file mode 100644[m
[1mindex 0000000..71a969a[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/router/methods.js[m
[36m@@ -0,0 +1,79 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - router - methods[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Hypertext Transfer Protocol -- HTTP/1.1[m[41m [m
[32m+[m[32m * http://www.ietf.org/rfc/rfc2616.txt[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar RFC2616 = ['OPTIONS', 'GET', 'POST', 'PUT', 'DELETE', 'TRACE', 'CONNECT'];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * HTTP Extensions for Distributed Authoring -- WEBDAV[m
[32m+[m[32m * http://www.ietf.org/rfc/rfc2518.txt[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar RFC2518 = ['PROPFIND', 'PROPPATCH', 'MKCOL', 'COPY', 'MOVE', 'LOCK', 'UNLOCK'];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Versioning Extensions to WebDAV[m[41m [m
[32m+[m[32m * http://www.ietf.org/rfc/rfc3253.txt[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar RFC3253 = ['VERSION-CONTROL', 'REPORT', 'CHECKOUT', 'CHECKIN', 'UNCHECKOUT', 'MKWORKSPACE', 'UPDATE', 'LABEL', 'MERGE', 'BASELINE-CONTROL', 'MKACTIVITY'];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Ordered Collections Protocol (WebDAV)[m[41m [m
[32m+[m[32m * http://www.ietf.org/rfc/rfc3648.txt[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar RFC3648 = ['ORDERPATCH'];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol[m[41m [m
[32m+[m[32m * http://www.ietf.org/rfc/rfc3744.txt[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar RFC3744 = ['ACL'];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Web Distributed Authoring and Versioning (WebDAV) SEARCH[m
[32m+[m[32m * http://www.ietf.org/rfc/rfc5323.txt[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar RFC5323 = ['SEARCH'];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * PATCH Method for HTTP[m[41m [m
[32m+[m[32m * http://www.ietf.org/rfc/rfc5789.txt[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar RFC5789 = ['PATCH'];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * PURGE Method for caching reverse-proxy[m
[32m+[m[32m * http://wiki.squid-cache.org/SquidFaq/OperatingSquid#How_can_I_purge_an_object_from_my_cache.3F[m
[32m+[m[32m * https://www.varnish-cache.org/docs/trunk/tutorial/purging.html[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar CACHE_PURGE = ['PURGE'];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose the methods.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = [].concat([m
[32m+[m[32m    RFC2616[m
[32m+[m[32m  , RFC2518[m
[32m+[m[32m  , RFC3253[m
[32m+[m[32m  , RFC3648[m
[32m+[m[32m  , RFC3744[m
[32m+[m[32m  , RFC5323[m
[32m+[m[32m  , RFC5789[m
[32m+[m[32m  , CACHE_PURGE).map(function(method){[m
[32m+[m[32m    return method.toLowerCase();[m
[32m+[m[32m  });[m
[1mdiff --git a/node_modules/express/lib/router/route.js b/node_modules/express/lib/router/route.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7f2965c[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/router/route.js[m
[36m@@ -0,0 +1,88 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - router - Route[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose `Route`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = Route;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize `Route` with the given HTTP `method`, `path`,[m
[32m+[m[32m * and an array of `callbacks` and `options`.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `sensitive`    enable case-sensitive routes[m
[32m+[m[32m *   - `strict`       enable strict matching for trailing slashes[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} method[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {Array} callbacks[m
[32m+[m[32m * @param {Object} options.[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction Route(method, path, callbacks, options) {[m
[32m+[m[32m  options = options || {};[m
[32m+[m[32m  this.path = path;[m
[32m+[m[32m  this.method = method;[m
[32m+[m[32m  this.callbacks = callbacks;[m
[32m+[m[32m  this.regexp = normalize(path[m
[32m+[m[32m    , this.keys = [][m
[32m+[m[32m    , options.sensitive[m
[32m+[m[32m    , options.strict);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if this route matches `path` and return captures made.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mRoute.prototype.match = function(path){[m
[32m+[m[32m  return this.regexp.exec(path);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Normalize the given path string,[m
[32m+[m[32m * returning a regular expression.[m
[32m+[m[32m *[m
[32m+[m[32m * An empty array should be passed,[m
[32m+[m[32m * which will contain the placeholder[m
[32m+[m[32m * key names. For example "/user/:id" will[m
[32m+[m[32m * then contain ["id"].[m
[32m+[m[32m *[m
[32m+[m[32m * @param  {String|RegExp} path[m
[32m+[m[32m * @param  {Array} keys[m
[32m+[m[32m * @param  {Boolean} sensitive[m
[32m+[m[32m * @param  {Boolean} strict[m
[32m+[m[32m * @return {RegExp}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction normalize(path, keys, sensitive, strict) {[m
[32m+[m[32m  if (path instanceof RegExp) return path;[m
[32m+[m[32m  path = path[m
[32m+[m[32m    .concat(strict ? '' : '/?')[m
[32m+[m[32m    .replace(/\/\(/g, '(?:/')[m
[32m+[m[32m    .replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g, function(_, slash, format, key, capture, optional){[m
[32m+[m[32m      keys.push({ name: key, optional: !! optional });[m
[32m+[m[32m      slash = slash || '';[m
[32m+[m[32m      return ''[m
[32m+[m[32m        + (optional ? '' : slash)[m
[32m+[m[32m        + '(?:'[m
[32m+[m[32m        + (optional ? slash : '')[m
[32m+[m[32m        + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')'[m
[32m+[m[32m        + (optional || '');[m
[32m+[m[32m    })[m
[32m+[m[32m    .replace(/([\/.])/g, '\\$1')[m
[32m+[m[32m    .replace(/\*/g, '(.*)');[m
[32m+[m[32m  return new RegExp('^' + path + '$', sensitive ? '' : 'i');[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/lib/utils.js b/node_modules/express/lib/utils.js[m
[1mnew file mode 100644[m
[1mindex 0000000..d579f7c[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/utils.js[m
[36m@@ -0,0 +1,152 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - Utils[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if `path` looks absolute.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.isAbsolute = function(path){[m
[32m+[m[32m  if ('/' == path[0]) return true;[m
[32m+[m[32m  if (':' == path[1] && '\\' == path[2]) return true;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Merge object `b` with `a` giving precedence to[m
[32m+[m[32m * values in object `a`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} a[m
[32m+[m[32m * @param {Object} b[m
[32m+[m[32m * @return {Object} a[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.union = function(a, b){[m
[32m+[m[32m  if (a && b) {[m
[32m+[m[32m    var keys = Object.keys(b)[m
[32m+[m[32m      , len = keys.length[m
[32m+[m[32m      , key;[m
[32m+[m[32m    for (var i = 0; i < len; ++i) {[m
[32m+[m[32m      key = keys[i];[m
[32m+[m[32m      if (!a.hasOwnProperty(key)) {[m
[32m+[m[32m        a[key] = b[key];[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return a;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Flatten the given `arr`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Array} arr[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.flatten = function(arr, ret){[m
[32m+[m[32m  var ret = ret || [][m
[32m+[m[32m    , len = arr.length;[m
[32m+[m[32m  for (var i = 0; i < len; ++i) {[m
[32m+[m[32m    if (Array.isArray(arr[i])) {[m
[32m+[m[32m      exports.flatten(arr[i], ret);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      ret.push(arr[i]);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return ret;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse mini markdown implementation.[m
[32m+[m[32m * The following conversions are supported,[m
[32m+[m[32m * primarily for the "flash" middleware:[m
[32m+[m[32m *[m
[32m+[m[32m *    _foo_ or *foo* become <em>foo</em>[m
[32m+[m[32m *    __foo__ or **foo** become <strong>foo</strong>[m
[32m+[m[32m *    [A](B) becomes <a href="B">A</a>[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.miniMarkdown = function(str){[m
[32m+[m[32m  return String(str)[m
[32m+[m[32m    .replace(/(__|\*\*)(.*?)\1/g, '<strong>$2</strong>')[m
[32m+[m[32m    .replace(/(_|\*)(.*?)\1/g, '<em>$2</em>')[m
[32m+[m[32m    .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Escape special characters in the given string of html.[m
[32m+[m[32m *[m
[32m+[m[32m * @param  {String} html[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.escape = function(html) {[m
[32m+[m[32m  return String(html)[m
[32m+[m[32m    .replace(/&/g, '&amp;')[m
[32m+[m[32m    .replace(/"/g, '&quot;')[m
[32m+[m[32m    .replace(/</g, '&lt;')[m
[32m+[m[32m    .replace(/>/g, '&gt;');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse "Range" header `str` relative to the given file `size`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Number} size[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.parseRange = function(size, str){[m
[32m+[m[32m  var valid = true;[m
[32m+[m[32m  var arr = str.substr(6).split(',').map(function(range){[m
[32m+[m[32m    var range = range.split('-')[m
[32m+[m[32m      , start = parseInt(range[0], 10)[m
[32m+[m[32m      , end = parseInt(range[1], 10);[m
[32m+[m
[32m+[m[32m    // -500[m
[32m+[m[32m    if (isNaN(start)) {[m
[32m+[m[32m      start = size - end;[m
[32m+[m[32m      end = size - 1;[m
[32m+[m[32m    // 500-[m
[32m+[m[32m    } else if (isNaN(end)) {[m
[32m+[m[32m      end = size - 1;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // Invalid[m
[32m+[m[32m    if (isNaN(start) || isNaN(end) || start > end) valid = false;[m
[32m+[m
[32m+[m[32m    return { start: start, end: end };[m
[32m+[m[32m  });[m
[32m+[m[32m  return valid ? arr : undefined;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Fast alternative to `Array.prototype.slice.call()`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Arguments} args[m
[32m+[m[32m * @param {Number} n[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.toArray = function(args, i){[m
[32m+[m[32m  var arr = [][m
[32m+[m[32m    , len = args.length[m
[32m+[m[32m    , i = i || 0;[m
[32m+[m[32m  for (; i < len; ++i) arr.push(args[i]);[m
[32m+[m[32m  return arr;[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/lib/view.js b/node_modules/express/lib/view.js[m
[1mnew file mode 100644[m
[1mindex 0000000..5258249[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/view.js[m
[36m@@ -0,0 +1,460 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - view[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar path = require('path')[m
[32m+[m[32m  , extname = path.extname[m
[32m+[m[32m  , dirname = path.dirname[m
[32m+[m[32m  , basename = path.basename[m
[32m+[m[32m  , utils = require('connect').utils[m
[32m+[m[32m  , View = require('./view/view')[m
[32m+[m[32m  , partial = require('./view/partial')[m
[32m+[m[32m  , union = require('./utils').union[m
[32m+[m[32m  , merge = utils.merge[m
[32m+[m[32m  , http = require('http')[m
[32m+[m[32m  , res = http.ServerResponse.prototype;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose constructors.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = View;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Export template engine registrar.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.register = View.register;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Lookup and compile `view` with cache support by supplying[m
[32m+[m[32m * both the `cache` object and `cid` string,[m
[32m+[m[32m * followed by `options` passed to `exports.lookup()`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} view[m
[32m+[m[32m * @param {Object} cache[m
[32m+[m[32m * @param {Object} cid[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @return {View}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.compile = function(view, cache, cid, options){[m
[32m+[m[32m  if (cache && cid && cache[cid]){[m
[32m+[m[32m    options.filename = cache[cid].path;[m
[32m+[m[32m    return cache[cid];[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // lookup[m
[32m+[m[32m  view = exports.lookup(view, options);[m
[32m+[m
[32m+[m[32m  // hints[m
[32m+[m[32m  if (!view.exists) {[m
[32m+[m[32m    if (options.hint) hintAtViewPaths(view.original, options);[m
[32m+[m[32m    var err = new Error('failed to locate view "' + view.original.view + '"');[m
[32m+[m[32m    err.view = view.original;[m
[32m+[m[32m    throw err;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // compile[m
[32m+[m[32m  options.filename = view.path;[m
[32m+[m[32m  view.fn = view.templateEngine.compile(view.contents, options);[m
[32m+[m[32m  cache[cid] = view;[m
[32m+[m
[32m+[m[32m  return view;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Lookup `view`, returning an instanceof `View`.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `root` root directory path[m
[32m+[m[32m *   - `defaultEngine` default template engine[m
[32m+[m[32m *   - `parentView` parent `View` object[m
[32m+[m[32m *   - `cache` cache object[m
[32m+[m[32m *   - `cacheid` optional cache id[m
[32m+[m[32m *[m
[32m+[m[32m * Lookup:[m
[32m+[m[32m *[m
[32m+[m[32m *   - partial `_<name>`[m
[32m+[m[32m *   - any `<name>/index`[m
[32m+[m[32m *   - non-layout `../<name>/index`[m
[32m+[m[32m *   - any `<root>/<name>`[m
[32m+[m[32m *   - partial `<root>/_<name>`[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} view[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @return {View}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.lookup = function(view, options){[m
[32m+[m[32m  var orig = view = new View(view, options)[m
[32m+[m[32m    , partial = options.isPartial[m
[32m+[m[32m    , layout = options.isLayout;[m
[32m+[m
[32m+[m[32m  // Try _ prefix ex: ./views/_<name>.jade[m
[32m+[m[32m  // taking precedence over the direct path[m
[32m+[m[32m  if (partial) {[m
[32m+[m[32m    view = new View(orig.prefixPath, options);[m
[32m+[m[32m    if (!view.exists) view = orig;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // Try index ex: ./views/user/index.jade[m
[32m+[m[32m  if (!layout && !view.exists) view = new View(orig.indexPath, options);[m
[32m+[m
[32m+[m[32m  // Try ../<name>/index ex: ../user/index.jade[m
[32m+[m[32m  // when calling partial('user') within the same dir[m
[32m+[m[32m  if (!layout && !view.exists) view = new View(orig.upIndexPath, options);[m
[32m+[m
[32m+[m[32m  // Try root ex: <root>/user.jade[m
[32m+[m[32m  if (!view.exists) view = new View(orig.rootPath, options);[m
[32m+[m
[32m+[m[32m  // Try root _ prefix ex: <root>/_user.jade[m
[32m+[m[32m  if (!view.exists && partial) view = new View(view.prefixPath, options);[m
[32m+[m
[32m+[m[32m  view.original = orig;[m
[32m+[m[32m  return view;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Partial render helper.[m
[32m+[m[32m *[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction renderPartial(res, view, options, parentLocals, parent){[m
[32m+[m[32m  var collection, object, locals;[m
[32m+[m
[32m+[m[32m  if (options) {[m
[32m+[m[32m    // collection[m
[32m+[m[32m    if (options.collection) {[m
[32m+[m[32m      collection = options.collection;[m
[32m+[m[32m      delete options.collection;[m
[32m+[m[32m    } else if ('length' in options) {[m
[32m+[m[32m      collection = options;[m
[32m+[m[32m      options = {};[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // locals[m
[32m+[m[32m    if (options.locals) {[m
[32m+[m[32m      locals = options.locals;[m
[32m+[m[32m      delete options.locals;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // object[m
[32m+[m[32m    if ('Object' != options.constructor.name) {[m
[32m+[m[32m      object = options;[m
[32m+[m[32m      options = {};[m
[32m+[m[32m    } else if (undefined != options.object) {[m
[32m+[m[32m      object = options.object;[m
[32m+[m[32m      delete options.object;[m
[32m+[m[32m    }[m
[32m+[m[32m  } else {[m
[32m+[m[32m    options = {};[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // Inherit locals from parent[m
[32m+[m[32m  union(options, parentLocals);[m
[32m+[m
[32m+[m[32m  // Merge locals[m
[32m+[m[32m  if (locals) merge(options, locals);[m
[32m+[m
[32m+[m[32m  // Partials dont need layouts[m
[32m+[m[32m  options.isPartial = true;[m
[32m+[m[32m  options.layout = false;[m
[32m+[m
[32m+[m[32m  // Deduce name from view path[m
[32m+[m[32m  var name = options.as || partial.resolveObjectName(view);[m
[32m+[m
[32m+[m[32m  // Render partial[m
[32m+[m[32m  function render(){[m
[32m+[m[32m    if (object) {[m
[32m+[m[32m      if ('string' == typeof name) {[m
[32m+[m[32m        options[name] = object;[m
[32m+[m[32m      } else if (name === global) {[m
[32m+[m[32m        merge(options, object);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    return res.render(view, options, null, parent, true);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // Collection support[m
[32m+[m[32m  if (collection) {[m
[32m+[m[32m    var len = collection.length[m
[32m+[m[32m      , buf = ''[m
[32m+[m[32m      , keys[m
[32m+[m[32m      , key[m
[32m+[m[32m      , val;[m
[32m+[m
[32m+[m[32m    options.collectionLength = len;[m
[32m+[m
[32m+[m[32m    if ('number' == typeof len || Array.isArray(collection)) {[m
[32m+[m[32m      for (var i = 0; i < len; ++i) {[m
[32m+[m[32m        val = collection[i];[m
[32m+[m[32m        options.firstInCollection = i == 0;[m
[32m+[m[32m        options.indexInCollection = i;[m
[32m+[m[32m        options.lastInCollection = i == len - 1;[m
[32m+[m[32m        object = val;[m
[32m+[m[32m        buf += render();[m
[32m+[m[32m      }[m
[32m+[m[32m    } else {[m
[32m+[m[32m      keys = Object.keys(collection);[m
[32m+[m[32m      len = keys.length;[m
[32m+[m[32m      options.collectionLength = len;[m
[32m+[m[32m      options.collectionKeys = keys;[m
[32m+[m[32m      for (var i = 0; i < len; ++i) {[m
[32m+[m[32m        key = keys[i];[m
[32m+[m[32m        val = collection[key];[m
[32m+[m[32m        options.keyInCollection = key;[m
[32m+[m[32m        options.firstInCollection = i == 0;[m
[32m+[m[32m        options.indexInCollection = i;[m
[32m+[m[32m        options.lastInCollection = i == len - 1;[m
[32m+[m[32m        object = val;[m
[32m+[m[32m        buf += render();[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return buf;[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return render();[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Render `view` partial with the given `options`. Optionally a[m
[32m+[m[32m * callback `fn(err, str)` may be passed instead of writing to[m
[32m+[m[32m * the socket.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `object` Single object with name derived from the view (unless `as` is present)[m
[32m+[m[32m *[m
[32m+[m[32m *   - `as` Variable name for each `collection` value, defaults to the view name.[m
[32m+[m[32m *     * as: 'something' will add the `something` local variable[m
[32m+[m[32m *     * as: this will use the collection value as the template context[m
[32m+[m[32m *     * as: global will merge the collection value's properties with `locals`[m
[32m+[m[32m *[m
[32m+[m[32m *   - `collection` Array of objects, the name is derived from the view name itself.[m
[32m+[m[32m *     For example _video.html_ will have a object _video_ available to it.[m
[32m+[m[32m *[m
[32m+[m[32m * @param  {String} view[m
[32m+[m[32m * @param  {Object|Array|Function} options, collection, callback, or object[m
[32m+[m[32m * @param  {Function} fn[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.partial = function(view, options, fn){[m
[32m+[m[32m  var app = this.app[m
[32m+[m[32m    , options = options || {}[m
[32m+[m[32m    , viewEngine = app.set('view engine')[m
[32m+[m[32m    , parent = {};[m
[32m+[m
[32m+[m[32m  // accept callback as second argument[m
[32m+[m[32m  if ('function' == typeof options) {[m
[32m+[m[32m    fn = options;[m
[32m+[m[32m    options = {};[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // root "views" option[m
[32m+[m[32m  parent.dirname = app.set('views') || process.cwd() + '/views';[m
[32m+[m
[32m+[m[32m  // utilize "view engine" option[m
[32m+[m[32m  if (viewEngine) parent.engine = viewEngine;[m
[32m+[m
[32m+[m[32m  // render the partial[m
[32m+[m[32m  try {[m
[32m+[m[32m    var str = renderPartial(this, view, options, null, parent);[m
[32m+[m[32m  } catch (err) {[m
[32m+[m[32m    if (fn) {[m
[32m+[m[32m      fn(err);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      this.req.next(err);[m
[32m+[m[32m    }[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // callback or transfer[m
[32m+[m[32m  if (fn) {[m
[32m+[m[32m    fn(null, str);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    this.send(str);[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Render `view` with the given `options` and optional callback `fn`.[m
[32m+[m[32m * When a callback function is given a response will _not_ be made[m
[32m+[m[32m * automatically, however otherwise a response of _200_ and _text/html_ is given.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *  - `scope`     Template evaluation context (the value of `this`)[m
[32m+[m[32m *  - `debug`     Output debugging information[m
[32m+[m[32m *  - `status`    Response status code[m
[32m+[m[32m *[m
[32m+[m[32m * @param  {String} view[m
[32m+[m[32m * @param  {Object|Function} options or callback function[m
[32m+[m[32m * @param  {Function} fn[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.render = function(view, opts, fn, parent, sub){[m
[32m+[m[32m  // support callback function as second arg[m
[32m+[m[32m  if ('function' == typeof opts) {[m
[32m+[m[32m    fn = opts, opts = null;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  try {[m
[32m+[m[32m    return this._render(view, opts, fn, parent, sub);[m
[32m+[m[32m  } catch (err) {[m
[32m+[m[32m    // callback given[m
[32m+[m[32m    if (fn) {[m
[32m+[m[32m      fn(err);[m
[32m+[m[32m    // unwind to root call to prevent multiple callbacks[m
[32m+[m[32m    } else if (sub) {[m
[32m+[m[32m      throw err;[m
[32m+[m[32m    // root template, next(err)[m
[32m+[m[32m    } else {[m
[32m+[m[32m      this.req.next(err);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// private render()[m
[32m+[m
[32m+[m[32mres._render = function(view, opts, fn, parent, sub){[m
[32m+[m[32m  var options = {}[m
[32m+[m[32m    , self = this[m
[32m+[m[32m    , app = this.app[m
[32m+[m[32m    , helpers = app._locals[m
[32m+[m[32m    , dynamicHelpers = app.dynamicViewHelpers[m
[32m+[m[32m    , viewOptions = app.set('view options')[m
[32m+[m[32m    , root = app.set('views') || process.cwd() + '/views';[m
[32m+[m
[32m+[m[32m  // cache id[m
[32m+[m[32m  var cid = app.enabled('view cache')[m
[32m+[m[32m    ? view + (parent ? ':' + parent.path : '')[m
[32m+[m[32m    : false;[m
[32m+[m
[32m+[m[32m  // merge "view options"[m
[32m+[m[32m  if (viewOptions) merge(options, viewOptions);[m
[32m+[m
[32m+[m[32m  // merge res._locals[m
[32m+[m[32m  if (this._locals) merge(options, this._locals);[m
[32m+[m
[32m+[m[32m  // merge render() options[m
[32m+[m[32m  if (opts) merge(options, opts);[m
[32m+[m
[32m+[m[32m  // merge render() .locals[m
[32m+[m[32m  if (opts && opts.locals) merge(options, opts.locals);[m
[32m+[m
[32m+[m[32m  // status support[m
[32m+[m[32m  if (options.status) this.statusCode = options.status;[m
[32m+[m
[32m+[m[32m  // capture attempts[m
[32m+[m[32m  options.attempts = [];[m
[32m+[m
[32m+[m[32m  var partial = options.isPartial[m
[32m+[m[32m    , layout = options.layout;[m
[32m+[m
[32m+[m[32m  // Layout support[m
[32m+[m[32m  if (true === layout || undefined === layout) {[m
[32m+[m[32m    layout = 'layout';[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // Default execution scope to a plain object[m
[32m+[m[32m  options.scope = options.scope || {};[m
[32m+[m
[32m+[m[32m  // Populate view[m
[32m+[m[32m  options.parentView = parent;[m
[32m+[m
[32m+[m[32m  // "views" setting[m
[32m+[m[32m  options.root = root;[m
[32m+[m
[32m+[m[32m  // "view engine" setting[m
[32m+[m[32m  options.defaultEngine = app.set('view engine');[m
[32m+[m
[32m+[m[32m  // charset option[m
[32m+[m[32m  if (options.charset) this.charset = options.charset;[m
[32m+[m
[32m+[m[32m  // Dynamic helper support[m
[32m+[m[32m  if (false !== options.dynamicHelpers) {[m
[32m+[m[32m    // cache[m
[32m+[m[32m    if (!this.__dynamicHelpers) {[m
[32m+[m[32m      this.__dynamicHelpers = {};[m
[32m+[m[32m      for (var key in dynamicHelpers) {[m
[32m+[m[32m        this.__dynamicHelpers[key] = dynamicHelpers[key].call([m
[32m+[m[32m            this.app[m
[32m+[m[32m          , this.req[m
[32m+[m[32m          , this);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // apply[m
[32m+[m[32m    merge(options, this.__dynamicHelpers);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // Merge view helpers[m
[32m+[m[32m  union(options, helpers);[m
[32m+[m
[32m+[m[32m  // Always expose partial() as a local[m
[32m+[m[32m  options.partial = function(path, opts){[m
[32m+[m[32m    return renderPartial(self, path, opts, options, view);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  // View lookup[m
[32m+[m[32m  options.hint = app.enabled('hints');[m
[32m+[m[32m  view = exports.compile(view, app.cache, cid, options);[m
[32m+[m
[32m+[m[32m  // layout helper[m
[32m+[m[32m  options.layout = function(path){[m
[32m+[m[32m    layout = path;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  // render[m
[32m+[m[32m  var str = view.fn.call(options.scope, options);[m
[32m+[m
[32m+[m[32m  // layout expected[m
[32m+[m[32m  if (layout) {[m
[32m+[m[32m    options.isLayout = true;[m
[32m+[m[32m    options.layout = false;[m
[32m+[m[32m    options.body = str;[m
[32m+[m[32m    this.render(layout, options, fn, view, true);[m
[32m+[m[32m  // partial return[m
[32m+[m[32m  } else if (partial) {[m
[32m+[m[32m    return str;[m
[32m+[m[32m  // render complete, and[m
[32m+[m[32m  // callback given[m
[32m+[m[32m  } else if (fn) {[m
[32m+[m[32m    fn(null, str);[m
[32m+[m[32m  // respond[m
[32m+[m[32m  } else {[m
[32m+[m[32m    this.send(str);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Hint at view path resolution, outputting the[m
[32m+[m[32m * paths that Express has tried.[m
[32m+[m[32m *[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction hintAtViewPaths(view, options) {[m
[32m+[m[32m  console.error();[m
[32m+[m[32m  console.error('failed to locate view "' + view.view + '", tried:');[m
[32m+[m[32m  options.attempts.forEach(function(path){[m
[32m+[m[32m    console.error('  - %s', path);[m
[32m+[m[32m  });[m
[32m+[m[32m  console.error();[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/lib/view/partial.js b/node_modules/express/lib/view/partial.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7d2f69b[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/view/partial.js[m
[36m@@ -0,0 +1,40 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - view - Partial[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Memory cache.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar cache = {};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Resolve partial object name from the view path.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *   "user.ejs" becomes "user"[m
[32m+[m[32m *   "forum thread.ejs" becomes "forumThread"[m
[32m+[m[32m *   "forum/thread/post.ejs" becomes "post"[m
[32m+[m[32m *   "blog-post.ejs" becomes "blogPost"[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.resolveObjectName = function(view){[m
[32m+[m[32m  return cache[view] || (cache[view] = view[m
[32m+[m[32m    .split('/')[m
[32m+[m[32m    .slice(-1)[0][m
[32m+[m[32m    .split('.')[0][m
[32m+[m[32m    .replace(/^_/, '')[m
[32m+[m[32m    .replace(/[^a-zA-Z0-9 ]+/g, ' ')[m
[32m+[m[32m    .split(/ +/).map(function(word, i){[m
[32m+[m[32m      return i[m
[32m+[m[32m        ? word[0].toUpperCase() + word.substr(1)[m
[32m+[m[32m        : word;[m
[32m+[m[32m    }).join(''));[m
[32m+[m[32m};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/lib/view/view.js b/node_modules/express/lib/view/view.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7d9392c[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/lib/view/view.js[m
[36m@@ -0,0 +1,210 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Express - View[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar path = require('path')[m
[32m+[m[32m  , utils = require('../utils')[m
[32m+[m[32m  , extname = path.extname[m
[32m+[m[32m  , dirname = path.dirname[m
[32m+[m[32m  , basename = path.basename[m
[32m+[m[32m  , fs = require('fs')[m
[32m+[m[32m  , stat = fs.statSync;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose `View`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = View;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Require cache.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar cache = {};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new `View` with the given `view` path and `options`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} view[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction View(view, options) {[m
[32m+[m[32m  options = options || {};[m
[32m+[m[32m  this.view = view;[m
[32m+[m[32m  this.root = options.root;[m
[32m+[m[32m  this.relative = false !== options.relative;[m
[32m+[m[32m  this.defaultEngine = options.defaultEngine;[m
[32m+[m[32m  this.parent = options.parentView;[m
[32m+[m[32m  this.basename = basename(view);[m
[32m+[m[32m  this.engine = this.resolveEngine();[m
[32m+[m[32m  this.extension = '.' + this.engine;[m
[32m+[m[32m  this.name = this.basename.replace(this.extension, '');[m
[32m+[m[32m  this.path = this.resolvePath();[m
[32m+[m[32m  this.dirname = dirname(this.path);[m
[32m+[m[32m  if (options.attempts) {[m
[32m+[m[32m    if (!~options.attempts.indexOf(this.path))[m
[32m+[m[32m      options.attempts.push(this.path);[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if the view path exists.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mView.prototype.__defineGetter__('exists', function(){[m
[32m+[m[32m  try {[m
[32m+[m[32m    stat(this.path);[m
[32m+[m[32m    return true;[m
[32m+[m[32m  } catch (err) {[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Resolve view engine.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mView.prototype.resolveEngine = function(){[m
[32m+[m[32m  // Explicit[m
[32m+[m[32m  if (~this.basename.indexOf('.')) return extname(this.basename).substr(1);[m
[32m+[m[32m  // Inherit from parent[m
[32m+[m[32m  if (this.parent) return this.parent.engine;[m
[32m+[m[32m  // Default[m
[32m+[m[32m  return this.defaultEngine;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Resolve view path.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mView.prototype.resolvePath = function(){[m
[32m+[m[32m  var path = this.view;[m
[32m+[m[32m  // Implicit engine[m
[32m+[m[32m  if (!~this.basename.indexOf('.')) path += this.extension;[m
[32m+[m[32m  // Absolute[m
[32m+[m[32m  if (utils.isAbsolute(path)) return path;[m
[32m+[m[32m  // Relative to parent[m
[32m+[m[32m  if (this.relative && this.parent) return this.parent.dirname + '/' + path;[m
[32m+[m[32m  // Relative to root[m
[32m+[m[32m  return this.root[m
[32m+[m[32m    ? this.root + '/' + path[m
[32m+[m[32m    : path;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Get view contents. This is a one-time hit, so we[m
[32m+[m[32m * can afford to be sync.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mView.prototype.__defineGetter__('contents', function(){[m
[32m+[m[32m  return fs.readFileSync(this.path, 'utf8');[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Get template engine api, cache exports to reduce[m
[32m+[m[32m * require() calls.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Object}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mView.prototype.__defineGetter__('templateEngine', function(){[m
[32m+[m[32m  var ext = this.extension;[m
[32m+[m[32m  return cache[ext] || (cache[ext] = require(this.engine));[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return root path alternative.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mView.prototype.__defineGetter__('rootPath', function(){[m
[32m+[m[32m  this.relative = false;[m
[32m+[m[32m  return this.resolvePath();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return index path alternative.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mView.prototype.__defineGetter__('indexPath', function(){[m
[32m+[m[32m  return this.dirname[m
[32m+[m[32m    + '/' + this.basename.replace(this.extension, '')[m
[32m+[m[32m    + '/index' + this.extension;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return ../<name>/index path alternative.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mView.prototype.__defineGetter__('upIndexPath', function(){[m
[32m+[m[32m  return this.dirname + '/../' + this.name + '/index' + this.extension;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return _ prefix path alternative[m
[32m+[m[32m *[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mView.prototype.__defineGetter__('prefixPath', function(){[m
[32m+[m[32m  return this.dirname + '/_' + this.basename;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Register the given template engine `exports`[m
[32m+[m[32m * as `ext`. For example we may wish to map ".html"[m
[32m+[m[32m * files to jade:[m
[32m+[m[32m *[m
[32m+[m[32m *    app.register('.html', require('jade'));[m
[32m+[m[32m *[m
[32m+[m[32m * or[m
[32m+[m[32m *[m
[32m+[m[32m *    app.register('html', require('jade'));[m
[32m+[m[32m *[m
[32m+[m[32m * This is also useful for libraries that may not[m
[32m+[m[32m * match extensions correctly. For example my haml.js[m
[32m+[m[32m * library is installed from npm as "hamljs" so instead[m
[32m+[m[32m * of layout.hamljs, we can register the engine as ".haml":[m
[32m+[m[32m *[m
[32m+[m[32m *    app.register('.haml', require('haml-js'));[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} ext[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.register = function(ext, exports) {[m
[32m+[m[32m  if ('.' != ext[0]) ext = '.' + ext;[m
[32m+[m[32m  cache[ext] = exports;[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/.npmignore b/node_modules/express/node_modules/connect/.npmignore[m
[1mnew file mode 100644[m
[1mindex 0000000..b04a224[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/.npmignore[m
[36m@@ -0,0 +1,11 @@[m
[32m+[m[32m*.markdown[m
[32m+[m[32m*.md[m
[32m+[m[32m.git*[m
[32m+[m[32mMakefile[m
[32m+[m[32mbenchmarks/[m
[32m+[m[32mdocs/[m
[32m+[m[32mexamples/[m
[32m+[m[32minstall.sh[m
[32m+[m[32msupport/[m
[32m+[m[32mtest/[m
[32m+[m[32m.DS_Store[m
[1mdiff --git a/node_modules/express/node_modules/connect/LICENSE b/node_modules/express/node_modules/connect/LICENSE[m
[1mnew file mode 100644[m
[1mindex 0000000..0c5d22d[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/LICENSE[m
[36m@@ -0,0 +1,24 @@[m
[32m+[m[32m(The MIT License)[m
[32m+[m
[32m+[m[32mCopyright (c) 2010 Sencha Inc.[m
[32m+[m[32mCopyright (c) 2011 LearnBoost[m
[32m+[m[32mCopyright (c) 2011 TJ Holowaychuk[m
[32m+[m
[32m+[m[32mPermission is hereby granted, free of charge, to any person obtaining[m
[32m+[m[32ma copy of this software and associated documentation files (the[m
[32m+[m[32m'Software'), to deal in the Software without restriction, including[m
[32m+[m[32mwithout limitation the rights to use, copy, modify, merge, publish,[m
[32m+[m[32mdistribute, sublicense, and/or sell copies of the Software, and to[m
[32m+[m[32mpermit persons to whom the Software is furnished to do so, subject to[m
[32m+[m[32mthe following conditions:[m
[32m+[m
[32m+[m[32mThe above copyright notice and this permission notice shall be[m
[32m+[m[32mincluded in all copies or substantial portions of the Software.[m
[32m+[m
[32m+[m[32mTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,[m
[32m+[m[32mEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF[m
[32m+[m[32mMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.[m
[32m+[m[32mIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY[m
[32m+[m[32mCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,[m
[32m+[m[32mTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE[m
[32m+[m[32mSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/index.js b/node_modules/express/node_modules/connect/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7477048[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/index.js[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m
[32m+[m[32mmodule.exports = require('./lib/connect');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/cache.js b/node_modules/express/node_modules/connect/lib/cache.js[m
[1mnew file mode 100644[m
[1mindex 0000000..4aa026e[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/cache.js[m
[36m@@ -0,0 +1,81 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - Cache[m
[32m+[m[32m * Copyright(c) 2011 Sencha Inc.[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose `Cache`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = Cache;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * LRU cache store.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Number} limit[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction Cache(limit) {[m
[32m+[m[32m  this.store = {};[m
[32m+[m[32m  this.keys = [];[m
[32m+[m[32m  this.limit = limit;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Touch `key`, promoting the object.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} key[m
[32m+[m[32m * @param {Number} i[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mCache.prototype.touch = function(key, i){[m
[32m+[m[32m  this.keys.splice(i,1);[m
[32m+[m[32m  this.keys.push(key);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Remove `key`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} key[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mCache.prototype.remove = function(key){[m
[32m+[m[32m  delete this.store[key];[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Get the object stored for `key`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} key[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mCache.prototype.get = function(key){[m
[32m+[m[32m  return this.store[key];[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Add a cache `key`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} key[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mCache.prototype.add = function(key){[m
[32m+[m[32m  // initialize store[m
[32m+[m[32m  var len = this.keys.push(key);[m
[32m+[m
[32m+[m[32m  // limit reached, invalid LRU[m
[32m+[m[32m  if (len > this.limit) this.remove(this.keys.shift());[m
[32m+[m
[32m+[m[32m  var arr = this.store[key] = [];[m
[32m+[m[32m  arr.createdAt = new Date;[m
[32m+[m[32m  return arr;[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/connect.js b/node_modules/express/node_modules/connect/lib/connect.js[m
[1mnew file mode 100644[m
[1mindex 0000000..338d96f[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/connect.js[m
[36m@@ -0,0 +1,106 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar HTTPServer = require('./http').Server[m
[32m+[m[32m  , HTTPSServer = require('./https').Server[m
[32m+[m[32m  , fs = require('fs');[m
[32m+[m
[32m+[m[32m// node patches[m
[32m+[m
[32m+[m[32mrequire('./patch');[m
[32m+[m
[32m+[m[32m// expose createServer() as the module[m
[32m+[m
[32m+[m[32mexports = module.exports = createServer;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Framework version.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.version = '1.9.2';[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new `connect.HTTPServer` with the middleware[m
[32m+[m[32m * passed to this function. When an object is passed _first_,[m
[32m+[m[32m * we assume these are the tls options, and return a `connect.HTTPSServer`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m * An example HTTP server, accepting several middleware.[m
[32m+[m[32m *[m
[32m+[m[32m *     var server = connect.createServer([m
[32m+[m[32m *         connect.logger()[m
[32m+[m[32m *       , connect.static(__dirname + '/public')[m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m * An HTTPS server, utilizing the same middleware as above.[m
[32m+[m[32m *[m
[32m+[m[32m *     var server = connect.createServer([m
[32m+[m[32m *         { key: key, cert: cert }[m
[32m+[m[32m *       , connect.logger()[m
[32m+[m[32m *       , connect.static(__dirname + '/public')[m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m * Alternatively with connect 1.0 we may omit `createServer()`.[m
[32m+[m[32m *[m
[32m+[m[32m *     connect([m
[32m+[m[32m *         connect.logger()[m
[32m+[m[32m *       , connect.static(__dirname + '/public')[m
[32m+[m[32m *     ).listen(3000);[m
[32m+[m[32m *[m
[32m+[m[32m * @param  {Object|Function} ...[m
[32m+[m[32m * @return {Server}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction createServer() {[m
[32m+[m[32m  if ('object' == typeof arguments[0]) {[m
[32m+[m[32m    return new HTTPSServer(arguments[0], Array.prototype.slice.call(arguments, 1));[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return new HTTPServer(Array.prototype.slice.call(arguments));[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// support connect.createServer()[m
[32m+[m
[32m+[m[32mexports.createServer = createServer;[m
[32m+[m
[32m+[m[32m// auto-load getters[m
[32m+[m
[32m+[m[32mexports.middleware = {};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Auto-load bundled middleware with getters.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfs.readdirSync(__dirname + '/middleware').forEach(function(filename){[m
[32m+[m[32m  if (/\.js$/.test(filename)) {[m
[32m+[m[32m    var name = filename.substr(0, filename.lastIndexOf('.'));[m
[32m+[m[32m    exports.middleware.__defineGetter__(name, function(){[m
[32m+[m[32m      return require('./middleware/' + name);[m
[32m+[m[32m    });[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// expose utils[m
[32m+[m
[32m+[m[32mexports.utils = require('./utils');[m
[32m+[m
[32m+[m[32m// expose getters as first-class exports[m
[32m+[m
[32m+[m[32mexports.utils.merge(exports, exports.middleware);[m
[32m+[m
[32m+[m[32m// expose constructors[m
[32m+[m
[32m+[m[32mexports.HTTPServer = HTTPServer;[m
[32m+[m[32mexports.HTTPSServer = HTTPSServer;[m
[32m+[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/http.js b/node_modules/express/node_modules/connect/lib/http.js[m
[1mnew file mode 100644[m
[1mindex 0000000..1d35f12[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/http.js[m
[36m@@ -0,0 +1,218 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - HTTPServer[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar http = require('http')[m
[32m+[m[32m  , parse = require('url').parse[m
[32m+[m[32m  , assert = require('assert')[m
[32m+[m[32m  , utils = require('./utils');[m
[32m+[m
[32m+[m[32m// environment[m
[32m+[m
[32m+[m[32mvar env = process.env.NODE_ENV || 'development';[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new `Server` with the given `middleware`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     var server = connect.createServer([m
[32m+[m[32m *         connect.favicon()[m
[32m+[m[32m *       , connect.logger()[m
[32m+[m[32m *       , connect.static(__dirname + '/public')[m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m * @params {Array} middleware[m[41m [m
[32m+[m[32m * @return {Server}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar Server = exports.Server = function HTTPServer(middleware) {[m
[32m+[m[32m  this.stack = [];[m
[32m+[m[32m  middleware.forEach(function(fn){[m
[32m+[m[32m    this.use(fn);[m
[32m+[m[32m  }, this);[m
[32m+[m[32m  http.Server.call(this, this.handle);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Inherit from `http.Server.prototype`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mServer.prototype.__proto__ = http.Server.prototype;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Utilize the given middleware `handle` to the given `route`,[m
[32m+[m[32m * defaulting to _/_. This "route" is the mount-point for the[m
[32m+[m[32m * middleware, when given a value other than _/_ the middleware[m
[32m+[m[32m * is only effective when that segment is present in the request's[m
[32m+[m[32m * pathname.[m
[32m+[m[32m *[m
[32m+[m[32m * For example if we were to mount a function at _/admin_, it would[m
[32m+[m[32m * be invoked on _/admin_, and _/admin/settings_, however it would[m
[32m+[m[32m * not be invoked for _/_, or _/posts_.[m
[32m+[m[32m *[m
[32m+[m[32m * This is effectively the same as passing middleware to `connect.createServer()`,[m
[32m+[m[32m * however provides a progressive api.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *      var server = connect.createServer();[m
[32m+[m[32m *      server.use(connect.favicon());[m
[32m+[m[32m *      server.use(connect.logger());[m
[32m+[m[32m *      server.use(connect.static(__dirname + '/public'));[m
[32m+[m[32m *[m
[32m+[m[32m * If we wanted to prefix static files with _/public_, we could[m
[32m+[m[32m * "mount" the `static()` middleware:[m
[32m+[m[32m *[m
[32m+[m[32m *      server.use('/public', connect.static(__dirname + '/public'));[m
[32m+[m[32m *[m
[32m+[m[32m * This api is chainable, meaning the following is valid:[m
[32m+[m[32m *[m
[32m+[m[32m *      connect.createServer()[m
[32m+[m[32m *        .use(connect.favicon())[m
[32m+[m[32m *        .use(connect.logger())[m
[32m+[m[32m *        .use(connect.static(__dirname + '/public'))[m
[32m+[m[32m *        .listen(3000);[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String|Function} route or handle[m
[32m+[m[32m * @param {Function} handle[m
[32m+[m[32m * @return {Server}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mServer.prototype.use = function(route, handle){[m
[32m+[m[32m  this.route = '/';[m
[32m+[m
[32m+[m[32m  // default route to '/'[m
[32m+[m[32m  if ('string' != typeof route) {[m
[32m+[m[32m    handle = route;[m
[32m+[m[32m    route = '/';[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // wrap sub-apps[m
[32m+[m[32m  if ('function' == typeof handle.handle) {[m
[32m+[m[32m    var server = handle;[m
[32m+[m[32m    server.route = route;[m
[32m+[m[32m    handle = function(req, res, next) {[m
[32m+[m[32m      server.handle(req, res, next);[m
[32m+[m[32m    };[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // wrap vanilla http.Servers[m
[32m+[m[32m  if (handle instanceof http.Server) {[m
[32m+[m[32m    handle = handle.listeners('request')[0];[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // normalize route to not trail with slash[m
[32m+[m[32m  if ('/' == route[route.length - 1]) {[m
[32m+[m[32m    route = route.substr(0, route.length - 1);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // add the middleware[m
[32m+[m[32m  this.stack.push({ route: route, handle: handle });[m
[32m+[m
[32m+[m[32m  // allow chaining[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Handle server requests, punting them down[m
[32m+[m[32m * the middleware stack.[m
[32m+[m[32m *[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mServer.prototype.handle = function(req, res, out) {[m
[32m+[m[32m  var writeHead = res.writeHead[m
[32m+[m[32m    , stack = this.stack[m
[32m+[m[32m    , removed = ''[m
[32m+[m[32m    , index = 0;[m
[32m+[m
[32m+[m[32m  function next(err) {[m
[32m+[m[32m    var layer, path, c;[m
[32m+[m[32m    req.url = removed + req.url;[m
[32m+[m[32m    req.originalUrl = req.originalUrl || req.url;[m
[32m+[m[32m    removed = '';[m
[32m+[m
[32m+[m[32m    layer = stack[index++];[m
[32m+[m
[32m+[m[32m    // all done[m
[32m+[m[32m    if (!layer || res.headerSent) {[m
[32m+[m[32m      // but wait! we have a parent[m
[32m+[m[32m      if (out) return out(err);[m
[32m+[m
[32m+[m[32m      // error[m
[32m+[m[32m      if (err) {[m
[32m+[m[32m        var msg = 'production' == env[m
[32m+[m[32m          ? 'Internal Server Error'[m
[32m+[m[32m          : err.stack || err.toString();[m
[32m+[m
[32m+[m[32m        // output to stderr in a non-test env[m
[32m+[m[32m        if ('test' != env) console.error(err.stack || err.toString());[m
[32m+[m
[32m+[m[32m        // unable to respond[m
[32m+[m[32m        if (res.headerSent) return req.socket.destroy();[m
[32m+[m
[32m+[m[32m        res.statusCode = 500;[m
[32m+[m[32m        res.setHeader('Content-Type', 'text/plain');[m
[32m+[m[32m        if ('HEAD' == req.method) return res.end();[m
[32m+[m[32m        res.end(msg);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        res.statusCode = 404;[m
[32m+[m[32m        res.setHeader('Content-Type', 'text/plain');[m
[32m+[m[32m        if ('HEAD' == req.method) return res.end();[m
[32m+[m[32m        res.end('Cannot ' + req.method + ' ' + utils.escape(req.originalUrl));[m
[32m+[m[32m      }[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    try {[m
[32m+[m[32m      path = parse(req.url).pathname;[m
[32m+[m[32m      if (undefined == path) path = '/';[m
[32m+[m
[32m+[m[32m      // skip this layer if the route doesn't match.[m
[32m+[m[32m      if (0 != path.indexOf(layer.route)) return next(err);[m
[32m+[m
[32m+[m[32m      c = path[layer.route.length];[m
[32m+[m[32m      if (c && '/' != c && '.' != c) return next(err);[m
[32m+[m
[32m+[m[32m      // Call the layer handler[m
[32m+[m[32m      // Trim off the part of the url that matches the route[m
[32m+[m[32m      removed = layer.route;[m
[32m+[m[32m      req.url = req.url.substr(removed.length);[m
[32m+[m
[32m+[m[32m      // Ensure leading slash[m
[32m+[m[32m      if ('/' != req.url[0]) req.url = '/' + req.url;[m
[32m+[m
[32m+[m[32m      var arity = layer.handle.length;[m
[32m+[m[32m      if (err) {[m
[32m+[m[32m        if (arity === 4) {[m
[32m+[m[32m          layer.handle(err, req, res, next);[m
[32m+[m[32m        } else {[m
[32m+[m[32m          next(err);[m
[32m+[m[32m        }[m
[32m+[m[32m      } else if (arity < 4) {[m
[32m+[m[32m        layer.handle(req, res, next);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        next();[m
[32m+[m[32m      }[m
[32m+[m[32m    } catch (e) {[m
[32m+[m[32m      if (e instanceof assert.AssertionError) {[m
[32m+[m[32m        console.error(e.stack + '\n');[m
[32m+[m[32m        next(e);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        next(e);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  next();[m
[32m+[m[32m};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/https.js b/node_modules/express/node_modules/connect/lib/https.js[m
[1mnew file mode 100644[m
[1mindex 0000000..9b09fa4[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/https.js[m
[36m@@ -0,0 +1,47 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - HTTPServer[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar HTTPServer = require('./http').Server[m
[32m+[m[32m  , https = require('https');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new `Server` with the given[m
[32m+[m[32m *`options` and `middleware`. The HTTPS api[m
[32m+[m[32m * is identical to the [HTTP](http.html) server,[m
[32m+[m[32m * however TLS `options` must be provided before[m
[32m+[m[32m * passing in the optional middleware.[m
[32m+[m[32m *[m
[32m+[m[32m * @params {Object} options[m
[32m+[m[32m * @params {Array} middleawre[m
[32m+[m[32m * @return {Server}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar Server = exports.Server = function HTTPSServer(options, middleware) {[m
[32m+[m[32m  this.stack = [];[m
[32m+[m[32m  middleware.forEach(function(fn){[m
[32m+[m[32m    this.use(fn);[m
[32m+[m[32m  }, this);[m
[32m+[m[32m  https.Server.call(this, options, this.handle);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Inherit from `http.Server.prototype`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mServer.prototype.__proto__ = https.Server.prototype;[m
[32m+[m
[32m+[m[32m// mixin HTTPServer methods[m
[32m+[m
[32m+[m[32mObject.keys(HTTPServer.prototype).forEach(function(method){[m
[32m+[m[32m  Server.prototype[method] = HTTPServer.prototype[method];[m
[32m+[m[32m});[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/index.js b/node_modules/express/node_modules/connect/lib/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..77b14c3[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/index.js[m
[36m@@ -0,0 +1,46 @@[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * # Connect[m
[32m+[m[32m *[m
[32m+[m[32m * Connect is a middleware framework for node,[m
[32m+[m[32m * shipping with over 11 bundled middleware and a rich choice of[m
[32m+[m[32m * [3rd-party middleware](https://github.com/senchalabs/connect/wiki).[m
[32m+[m[32m *[m
[32m+[m[32m * Installation:[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m *     $ npm install connect[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * API:[m
[32m+[m[32m *[m
[32m+[m[32m *  - [connect](connect.html) general[m
[32m+[m[32m *  - [http](http.html) http server[m
[32m+[m[32m *  - [https](https.html) https server[m
[32m+[m[32m *[m
[32m+[m[32m * Middleware:[m
[32m+[m[32m *[m
[32m+[m[32m *  - [logger](middleware-logger.html) request logger with custom format support[m
[32m+[m[32m *  - [csrf](middleware-csrf.html) Cross-site request forgery protection[m
[32m+[m[32m *  - [basicAuth](middleware-basicAuth.html) basic http authentication[m
[32m+[m[32m *  - [bodyParser](middleware-bodyParser.html) extensible request body parser[m
[32m+[m[32m *  - [cookieParser](middleware-cookieParser.html) cookie parser[m
[32m+[m[32m *  - [session](middleware-session.html) session management support with bundled [MemoryStore](middleware-session-memory.html)[m
[32m+[m[32m *  - [compiler](middleware-compiler.html) static asset compiler (sass, less, coffee-script, etc)[m
[32m+[m[32m *  - [methodOverride](middleware-methodOverride.html) faux HTTP method support[m
[32m+[m[32m *  - [responseTime](middleware-responseTime.html) calculates response-time and exposes via X-Response-Time[m
[32m+[m[32m *  - [router](middleware-router.html) provides rich Sinatra / Express-like routing[m
[32m+[m[32m *  - [staticCache](middleware-staticCache.html) memory cache layer for the static() middleware[m
[32m+[m[32m *  - [static](middleware-static.html) streaming static file server supporting `Range` and more[m
[32m+[m[32m *  - [directory](middleware-directory.html) directory listing middleware[m
[32m+[m[32m *  - [vhost](middleware-vhost.html) virtual host sub-domain mapping middleware[m
[32m+[m[32m *  - [favicon](middleware-favicon.html) efficient favicon server (with default icon)[m
[32m+[m[32m *  - [limit](middleware-limit.html) limit the bytesize of request bodies[m
[32m+[m[32m *  - [profiler](middleware-profiler.html) request profiler reporting response-time, memory usage, etc[m
[32m+[m[32m *  - [query](middleware-query.html) automatic querystring parser, populating `req.query`[m
[32m+[m[32m *  - [errorHandler](middleware-errorHandler.html) flexible error handler[m
[32m+[m[32m *[m
[32m+[m[32m * Internals:[m
[32m+[m[32m *[m
[32m+[m[32m *  - connect [utilities](utils.html)[m
[32m+[m[32m *  - node monkey [patches](patch.html)[m
[32m+[m[32m *[m
[32m+[m[32m */[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/basicAuth.js b/node_modules/express/node_modules/connect/lib/middleware/basicAuth.js[m
[1mnew file mode 100644[m
[1mindex 0000000..3ff472b[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/basicAuth.js[m
[36m@@ -0,0 +1,93 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - basicAuth[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar utils = require('../utils')[m
[32m+[m[32m  , unauthorized = utils.unauthorized[m
[32m+[m[32m  , badRequest = utils.badRequest;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Enfore basic authentication by providing a `callback(user, pass)`,[m
[32m+[m[32m * which must return `true` in order to gain access. Alternatively an async[m
[32m+[m[32m * method is provided as well, invoking `callback(user, pass, callback)`. Populates[m
[32m+[m[32m * `req.remoteUser`. The final alternative is simply passing username / password[m
[32m+[m[32m * strings.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     connect(connect.basicAuth('username', 'password'));[m
[32m+[m[32m *[m
[32m+[m[32m *     connect([m
[32m+[m[32m *       connect.basicAuth(function(user, pass){[m
[32m+[m[32m *         return 'tj' == user & 'wahoo' == pass;[m
[32m+[m[32m *       })[m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m *     connect([m
[32m+[m[32m *       connect.basicAuth(function(user, pass, fn){[m
[32m+[m[32m *         User.authenticate({ user: user, pass: pass }, fn);[m
[32m+[m[32m *       })[m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function|String} callback or username[m
[32m+[m[32m * @param {String} realm[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function basicAuth(callback, realm) {[m
[32m+[m[32m  var username, password;[m
[32m+[m
[32m+[m[32m  // user / pass strings[m
[32m+[m[32m  if ('string' == typeof callback) {[m
[32m+[m[32m    username = callback;[m
[32m+[m[32m    password = realm;[m
[32m+[m[32m    if ('string' != typeof password) throw new Error('password argument required');[m
[32m+[m[32m    realm = arguments[2];[m
[32m+[m[32m    callback = function(user, pass){[m
[32m+[m[32m      return user == username && pass == password;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  realm = realm || 'Authorization Required';[m
[32m+[m
[32m+[m[32m  return function(req, res, next) {[m
[32m+[m[32m    var authorization = req.headers.authorization;[m
[32m+[m
[32m+[m[32m    if (req.remoteUser) return next();[m
[32m+[m[32m    if (!authorization) return unauthorized(res, realm);[m
[32m+[m
[32m+[m[32m    var parts = authorization.split(' ')[m
[32m+[m[32m      , scheme = parts[0][m
[32m+[m[32m      , credentials = new Buffer(parts[1], 'base64').toString().split(':');[m
[32m+[m
[32m+[m[32m    if ('Basic' != scheme) return badRequest(res);[m
[32m+[m
[32m+[m[32m    // async[m
[32m+[m[32m    if (callback.length >= 3) {[m
[32m+[m[32m      var pause = utils.pause(req);[m
[32m+[m[32m      callback(credentials[0], credentials[1], function(err, user){[m
[32m+[m[32m        if (err || !user)  return unauthorized(res, realm);[m
[32m+[m[32m        req.remoteUser = user;[m
[32m+[m[32m        next();[m
[32m+[m[32m        pause.resume();[m
[32m+[m[32m      });[m
[32m+[m[32m    // sync[m
[32m+[m[32m    } else {[m
[32m+[m[32m      if (callback(credentials[0], credentials[1])) {[m
[32m+[m[32m        req.remoteUser = credentials[0];[m
[32m+[m[32m        next();[m
[32m+[m[32m      } else {[m
[32m+[m[32m        unauthorized(res, realm);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js b/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js[m
[1mnew file mode 100644[m
[1mindex 0000000..a52568c[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js[m
[36m@@ -0,0 +1,196 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - bodyParser[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar qs = require('qs')[m
[32m+[m[32m  , formidable = require('formidable');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Extract the mime type from the given request's[m
[32m+[m[32m * _Content-Type_ header.[m
[32m+[m[32m *[m
[32m+[m[32m * @param  {IncomingMessage} req[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction mime(req) {[m
[32m+[m[32m  var str = req.headers['content-type'] || '';[m
[32m+[m[32m  return str.split(';')[0];[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse request bodies.[m
[32m+[m[32m *[m
[32m+[m[32m * By default _application/json_, _application/x-www-form-urlencoded_,[m
[32m+[m[32m * and _multipart/form-data_ are supported, however you may map `connect.bodyParser.parse[contentType]`[m
[32m+[m[32m * to a function receiving `(req, options, callback)`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *      connect.createServer([m
[32m+[m[32m *          connect.bodyParser()[m
[32m+[m[32m *        , function(req, res) {[m
[32m+[m[32m *          res.end('viewing user ' + req.body.user.name);[m
[32m+[m[32m *        }[m
[32m+[m[32m *      );[m
[32m+[m[32m *[m
[32m+[m[32m *      $ curl -d 'user[name]=tj' http://localhost/[m
[32m+[m[32m *      $ curl -d '{"user":{"name":"tj"}}' -H "Content-Type: application/json" http://localhost/[m
[32m+[m[32m *[m
[32m+[m[32m * Multipart req.files:[m
[32m+[m[32m *[m
[32m+[m[32m *   As a security measure files are stored in a separate object, stored[m
[32m+[m[32m *   as `req.files`. This prevents attacks that may potentially alter[m
[32m+[m[32m *   filenames, and depending on the application gain access to restricted files.[m
[32m+[m[32m *[m
[32m+[m[32m * Multipart configuration:[m
[32m+[m[32m *[m
[32m+[m[32m *  The `options` passed are provided to each parser function.[m
[32m+[m[32m *  The _multipart/form-data_ parser merges these with formidable's[m
[32m+[m[32m *  IncomingForm object, allowing you to tweak the upload directory,[m
[32m+[m[32m *  size limits, etc. For example you may wish to retain the file extension[m
[32m+[m[32m *  and change the upload directory:[m
[32m+[m[32m *[m
[32m+[m[32m *      server.use(bodyParser({ uploadDir: '/www/mysite.com/uploads' }));[m
[32m+[m[32m *[m
[32m+[m[32m *  View [node-formidable](https://github.com/felixge/node-formidable) for more information.[m
[32m+[m[32m *[m
[32m+[m[32m *  If you wish to use formidable directly within your app, and do not[m
[32m+[m[32m *  desire this behaviour for multipart requests simply remove the[m
[32m+[m[32m *  parser:[m[41m [m
[32m+[m[32m *[m
[32m+[m[32m *     delete connect.bodyParser.parse['multipart/form-data'];[m
[32m+[m[32m *[m
[32m+[m[32m *  Or[m
[32m+[m[32m *[m
[32m+[m[32m *     delete express.bodyParser.parse['multipart/form-data'];[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = function bodyParser(options){[m
[32m+[m[32m  options = options || {};[m
[32m+[m[32m  return function bodyParser(req, res, next) {[m
[32m+[m[32m    if (req.body) return next();[m
[32m+[m[32m    req.body = {};[m
[32m+[m
[32m+[m[32m    if ('GET' == req.method || 'HEAD' == req.method) return next();[m
[32m+[m[32m    var parser = exports.parse[mime(req)];[m
[32m+[m[32m    if (parser) {[m
[32m+[m[32m      parser(req, options, next);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      next();[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parsers.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.parse = {};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse application/x-www-form-urlencoded.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.parse['application/x-www-form-urlencoded'] = function(req, options, fn){[m
[32m+[m[32m  var buf = '';[m
[32m+[m[32m  req.setEncoding('utf8');[m
[32m+[m[32m  req.on('data', function(chunk){ buf += chunk });[m
[32m+[m[32m  req.on('end', function(){[m
[32m+[m[32m    try {[m
[32m+[m[32m      req.body = buf.length[m
[32m+[m[32m        ? qs.parse(buf)[m
[32m+[m[32m        : {};[m
[32m+[m[32m      fn();[m
[32m+[m[32m    } catch (err){[m
[32m+[m[32m      fn(err);[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse application/json.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.parse['application/json'] = function(req, options, fn){[m
[32m+[m[32m  var buf = '';[m
[32m+[m[32m  req.setEncoding('utf8');[m
[32m+[m[32m  req.on('data', function(chunk){ buf += chunk });[m
[32m+[m[32m  req.on('end', function(){[m
[32m+[m[32m    try {[m
[32m+[m[32m      req.body = buf.length[m
[32m+[m[32m        ? JSON.parse(buf)[m
[32m+[m[32m        : {};[m
[32m+[m[32m      fn();[m
[32m+[m[32m    } catch (err){[m
[32m+[m[32m      fn(err);[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse multipart/form-data.[m
[32m+[m[32m *[m
[32m+[m[32m * TODO: make multiple support optional[m
[32m+[m[32m * TODO: revisit "error" flag if it's a formidable bug[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.parse['multipart/form-data'] = function(req, options, fn){[m
[32m+[m[32m  var form = new formidable.IncomingForm[m
[32m+[m[32m    , data = {}[m
[32m+[m[32m    , files = {}[m
[32m+[m[32m    , done;[m
[32m+[m
[32m+[m[32m  Object.keys(options).forEach(function(key){[m
[32m+[m[32m    form[key] = options[key];[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  function ondata(name, val, data){[m
[32m+[m[32m    if (Array.isArray(data[name])) {[m
[32m+[m[32m      data[name].push(val);[m
[32m+[m[32m    } else if (data[name]) {[m
[32m+[m[32m      data[name] = [data[name], val];[m
[32m+[m[32m    } else {[m
[32m+[m[32m      data[name] = val;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  form.on('field', function(name, val){[m
[32m+[m[32m    ondata(name, val, data);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form.on('file', function(name, val){[m
[32m+[m[32m    ondata(name, val, files);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form.on('error', function(err){[m
[32m+[m[32m    fn(err);[m
[32m+[m[32m    done = true;[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form.on('end', function(){[m
[32m+[m[32m    if (done) return;[m
[32m+[m[32m    try {[m
[32m+[m[32m      req.body = qs.parse(data);[m
[32m+[m[32m      req.files = qs.parse(files);[m
[32m+[m[32m      fn();[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      fn(err);[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form.parse(req);[m
[32m+[m[32m};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/compiler.js b/node_modules/express/node_modules/connect/lib/middleware/compiler.js[m
[1mnew file mode 100644[m
[1mindex 0000000..dc4dd66[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/compiler.js[m
[36m@@ -0,0 +1,163 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - compiler[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar fs = require('fs')[m
[32m+[m[32m  , path = require('path')[m
[32m+[m[32m  , parse = require('url').parse;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Require cache.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar cache = {};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Setup compiler.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `src`     Source directory, defaults to **CWD**.[m
[32m+[m[32m *   - `dest`    Destination directory, defaults `src`.[m
[32m+[m[32m *   - `enable`  Array of enabled compilers.[m
[32m+[m[32m *[m
[32m+[m[32m * Compilers:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `sass`   Compiles sass to css[m
[32m+[m[32m *   - `less`   Compiles less to css[m
[32m+[m[32m *   - `coffeescript`   Compiles coffee to js[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = function compiler(options){[m
[32m+[m[32m  options = options || {};[m
[32m+[m
[32m+[m[32m  var srcDir = options.src || process.cwd()[m
[32m+[m[32m    , destDir = options.dest || srcDir[m
[32m+[m[32m    , enable = options.enable;[m
[32m+[m
[32m+[m[32m  if (!enable || enable.length === 0) {[m
[32m+[m[32m    throw new Error('compiler\'s "enable" option is not set, nothing will be compiled.');[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return function compiler(req, res, next){[m
[32m+[m[32m    if ('GET' != req.method) return next();[m
[32m+[m[32m    var pathname = parse(req.url).pathname;[m
[32m+[m[32m    for (var i = 0, len = enable.length; i < len; ++i) {[m
[32m+[m[32m      var name = enable[i][m
[32m+[m[32m        , compiler = compilers[name];[m
[32m+[m[32m      if (compiler.match.test(pathname)) {[m
[32m+[m[32m        var src = (srcDir + pathname).replace(compiler.match, compiler.ext)[m
[32m+[m[32m          , dest = destDir + pathname;[m
[32m+[m
[32m+[m[32m        // Compare mtimes[m
[32m+[m[32m        fs.stat(src, function(err, srcStats){[m
[32m+[m[32m          if (err) {[m
[32m+[m[32m            if ('ENOENT' == err.code) {[m
[32m+[m[32m              next();[m
[32m+[m[32m            } else {[m
[32m+[m[32m              next(err);[m
[32m+[m[32m            }[m
[32m+[m[32m          } else {[m
[32m+[m[32m            fs.stat(dest, function(err, destStats){[m
[32m+[m[32m              if (err) {[m
[32m+[m[32m                // Oh snap! it does not exist, compile it[m
[32m+[m[32m                if ('ENOENT' == err.code) {[m
[32m+[m[32m                  compile();[m
[32m+[m[32m                } else {[m
[32m+[m[32m                  next(err);[m
[32m+[m[32m                }[m
[32m+[m[32m              } else {[m
[32m+[m[32m                // Source has changed, compile it[m
[32m+[m[32m                if (srcStats.mtime > destStats.mtime) {[m
[32m+[m[32m                  compile();[m
[32m+[m[32m                } else {[m
[32m+[m[32m                  // Defer file serving[m
[32m+[m[32m                  next();[m
[32m+[m[32m                }[m
[32m+[m[32m              }[m
[32m+[m[32m            });[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        // Compile to the destination[m
[32m+[m[32m        function compile() {[m
[32m+[m[32m          fs.readFile(src, 'utf8', function(err, str){[m
[32m+[m[32m            if (err) {[m
[32m+[m[32m              next(err);[m
[32m+[m[32m            } else {[m
[32m+[m[32m              compiler.compile(str, function(err, str){[m
[32m+[m[32m                if (err) {[m
[32m+[m[32m                  next(err);[m
[32m+[m[32m                } else {[m
[32m+[m[32m                  fs.writeFile(dest, str, 'utf8', function(err){[m
[32m+[m[32m                    next(err);[m
[32m+[m[32m                  });[m
[32m+[m[32m                }[m
[32m+[m[32m              });[m
[32m+[m[32m            }[m
[32m+[m[32m          });[m
[32m+[m[32m        }[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    next();[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Bundled compilers:[m
[32m+[m[32m *[m
[32m+[m[32m *  - [sass](http://github.com/visionmedia/sass.js) to _css_[m
[32m+[m[32m *  - [less](http://github.com/cloudhead/less.js) to _css_[m
[32m+[m[32m *  - [coffee](http://github.com/jashkenas/coffee-script) to _js_[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar compilers = exports.compilers = {[m
[32m+[m[32m  sass: {[m
[32m+[m[32m    match: /\.css$/,[m
[32m+[m[32m    ext: '.sass',[m
[32m+[m[32m    compile: function(str, fn){[m
[32m+[m[32m      var sass = cache.sass || (cache.sass = require('sass'));[m
[32m+[m[32m      try {[m
[32m+[m[32m        fn(null, sass.render(str));[m
[32m+[m[32m      } catch (err) {[m
[32m+[m[32m        fn(err);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  less: {[m
[32m+[m[32m    match: /\.css$/,[m
[32m+[m[32m    ext: '.less',[m
[32m+[m[32m    compile: function(str, fn){[m
[32m+[m[32m      var less = cache.less || (cache.less = require('less'));[m
[32m+[m[32m      try {[m
[32m+[m[32m        less.render(str, fn);[m
[32m+[m[32m      } catch (err) {[m
[32m+[m[32m        fn(err);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  coffeescript: {[m
[32m+[m[32m    match: /\.js$/,[m
[32m+[m[32m    ext: '.coffee',[m
[32m+[m[32m    compile: function(str, fn){[m
[32m+[m[32m      var coffee = cache.coffee || (cache.coffee = require('coffee-script'));[m
[32m+[m[32m      try {[m
[32m+[m[32m        fn(null, coffee.compile(str));[m
[32m+[m[32m      } catch (err) {[m
[32m+[m[32m        fn(err);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/compress.js b/node_modules/express/node_modules/connect/lib/middleware/compress.js[m
[1mnew file mode 100644[m
[1mindex 0000000..addc5c9[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/compress.js[m
[36m@@ -0,0 +1,146 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - compress[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * Copyright(c) 2012 Nebojsa Sabovic[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar zlib = require('zlib');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Supported content-encoding methods.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.methods = {[m
[32m+[m[32m    gzip: zlib.createGzip[m
[32m+[m[32m  , deflate: zlib.createDeflate[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Default filter function.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.filter = function(req, res){[m
[32m+[m[32m  var type = res.getHeader('Content-Type') || '';[m
[32m+[m[32m  return type.match(/json|text|javascript/);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Compress:[m
[32m+[m[32m *[m
[32m+[m[32m * Compress response data with gzip/deflate.[m
[32m+[m[32m *[m
[32m+[m[32m * Filter:[m
[32m+[m[32m *[m
[32m+[m[32m *  A `filter` callback function may be passed to[m
[32m+[m[32m *  replace the default logic of:[m
[32m+[m[32m *[m
[32m+[m[32m *     exports.filter = function(req, res){[m
[32m+[m[32m *       var type = res.getHeader('Content-Type') || '';[m
[32m+[m[32m *       return type.match(/json|text|javascript/);[m
[32m+[m[32m *     };[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *  All remaining options are passed to the gzip/deflate[m
[32m+[m[32m *  creation functions. Consult node's docs for additional details.[m
[32m+[m[32m *[m
[32m+[m[32m *   - `chunkSize` (default: 16*1024)[m
[32m+[m[32m *   - `windowBits`[m
[32m+[m[32m *   - `level`: 0-9 where 0 is no compression, and 9 is slow but best compression[m
[32m+[m[32m *   - `memLevel`: 1-9 low is slower but uses less memory, high is fast but uses more[m
[32m+[m[32m *   - `strategy`: compression strategy[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function compress(options) {[m
[32m+[m[32m  var options = options || {}[m
[32m+[m[32m    , names = Object.keys(exports.methods)[m
[32m+[m[32m    , filter = options.filter || exports.filter;[m
[32m+[m
[32m+[m[32m  return function(req, res, next){[m
[32m+[m[32m    var accept = req.headers['accept-encoding'][m
[32m+[m[32m      , write = res.write[m
[32m+[m[32m      , writeHead = res.writeHead[m
[32m+[m[32m      , end = res.end[m
[32m+[m[32m      , stream[m
[32m+[m[32m      , method;[m
[32m+[m
[32m+[m[32m    // vary[m
[32m+[m[32m    res.setHeader('Vary', 'Accept-Encoding');[m
[32m+[m
[32m+[m[32m    // proxy[m
[32m+[m
[32m+[m[32m    res.write = function(chunk, encoding){[m
[32m+[m[32m      if (!this._header) this._implicitHeader();[m
[32m+[m[32m      return stream[m
[32m+[m[32m        ? stream.write(chunk, encoding)[m
[32m+[m[32m        : write.call(this, chunk, encoding);[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    res.end = function(chunk, encoding){[m
[32m+[m[32m      if (!this._header) {[m
[32m+[m[32m        this._implicitHeader();[m
[32m+[m[32m      }[m
[32m+[m[32m      if (chunk) this.write(chunk, encoding);[m
[32m+[m[32m      return stream[m
[32m+[m[32m        ? stream.end()[m
[32m+[m[32m        : end.call(this);[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    res.writeHead = function(){[m
[32m+[m[32m      res.writeHead = writeHead;[m
[32m+[m
[32m+[m[32m      // default request filter, SHOULD use identity, head[m
[32m+[m[32m      if (filter(req, res) && accept && 'HEAD' != req.method) {[m
[32m+[m[32m        // default to gzip[m
[32m+[m[32m        if ('*' == accept.trim()) {[m
[32m+[m[32m          method = 'gzip';[m
[32m+[m[32m        } else {[m
[32m+[m[32m          for (var i = 0, len = names.length; i < len; ++i) {[m
[32m+[m[32m            if (~accept.indexOf(names[i])) {[m
[32m+[m[32m              method = names[i];[m
[32m+[m[32m              break;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // compression method[m
[32m+[m[32m        if (method) {[m
[32m+[m[32m          // compression stream[m
[32m+[m[32m          stream = exports.methods[method](options);[m
[32m+[m
[32m+[m[32m          // header fields[m
[32m+[m[32m          res.setHeader('Content-Encoding', method);[m
[32m+[m[32m          res.removeHeader('Content-Length');[m
[32m+[m[32m          // WARNING: We do not strip content-length out of passed-in headers[m
[32m+[m
[32m+[m[32m          // compression[m
[32m+[m[32m          stream.on('data', function(chunk){[m
[32m+[m[32m            write.call(res, chunk);[m
[32m+[m[32m          });[m
[32m+[m
[32m+[m[32m          stream.on('end', function(){[m
[32m+[m[32m            end.call(res);[m
[32m+[m[32m          });[m
[32m+[m
[32m+[m[32m          stream.on('drain', function() {[m
[32m+[m[32m            res.emit('drain');[m
[32m+[m[32m          });[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m      return res.writeHead.apply(this, arguments);[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    next();[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/cookieParser.js b/node_modules/express/node_modules/connect/lib/middleware/cookieParser.js[m
[1mnew file mode 100644[m
[1mindex 0000000..d6b69de[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/cookieParser.js[m
[36m@@ -0,0 +1,46 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - cookieParser[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar utils = require('./../utils');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse _Cookie_ header and populate `req.cookies`[m
[32m+[m[32m * with an object keyed by the cookie names.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     connect.createServer([m
[32m+[m[32m *         connect.cookieParser()[m
[32m+[m[32m *       , function(req, res, next){[m
[32m+[m[32m *         res.end(JSON.stringify(req.cookies));[m
[32m+[m[32m *       }[m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function cookieParser(){[m
[32m+[m[32m  return function cookieParser(req, res, next) {[m
[32m+[m[32m    var cookie = req.headers.cookie;[m
[32m+[m[32m    if (req.cookies) return next();[m
[32m+[m[32m    req.cookies = {};[m
[32m+[m[32m    if (cookie) {[m
[32m+[m[32m      try {[m
[32m+[m[32m        req.cookies = utils.parseCookie(cookie);[m
[32m+[m[32m      } catch (err) {[m
[32m+[m[32m        return next(err);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    next();[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/csrf.js b/node_modules/express/node_modules/connect/lib/middleware/csrf.js[m
[1mnew file mode 100644[m
[1mindex 0000000..53347e7[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/csrf.js[m
[36m@@ -0,0 +1,105 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - csrf[m
[32m+[m[32m * Copyright(c) 2011 Sencha Inc.[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar utils = require('../utils')[m
[32m+[m[32m  , crypto = require('crypto');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * CRSF protection middleware.[m
[32m+[m[32m *[m
[32m+[m[32m * By default this middleware generates a token named "_csrf"[m
[32m+[m[32m * which should be added to requests which mutate[m
[32m+[m[32m * state, within a hidden form field, query-string etc. This[m
[32m+[m[32m * token is validated against the visitor's `req.session._csrf`[m
[32m+[m[32m * property which is re-generated per request.[m
[32m+[m[32m *[m
[32m+[m[32m * The default `value` function checks `req.body` generated[m
[32m+[m[32m * by the `bodyParser()` middleware, `req.query` generated[m
[32m+[m[32m * by `query()`, and the "X-CSRF-Token" header field.[m
[32m+[m[32m *[m
[32m+[m[32m * This middleware requires session support, thus should be added[m
[32m+[m[32m * somewhere _below_ `session()` and `cookieParser()`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *      var form = '\n\[m
[32m+[m[32m *        <form action="/" method="post">\n\[m
[32m+[m[32m *          <input type="hidden" name="_csrf" value="{token}" />\n\[m
[32m+[m[32m *          <input type="text" name="user[name]" value="{user}" />\n\[m
[32m+[m[32m *          <input type="password" name="user[pass]" />\n\[m
[32m+[m[32m *          <input type="submit" value="Login" />\n\[m
[32m+[m[32m *        </form>\n\[m
[32m+[m[32m *      ';[m[41m [m
[32m+[m[32m *[m[41m      [m
[32m+[m[32m *      connect([m
[32m+[m[32m *          connect.cookieParser()[m
[32m+[m[32m *        , connect.session({ secret: 'keyboard cat' })[m
[32m+[m[32m *        , connect.bodyParser()[m
[32m+[m[32m *        , connect.csrf()[m
[32m+[m[32m *[m[41m      [m
[32m+[m[32m *        , function(req, res, next){[m
[32m+[m[32m *          if ('POST' != req.method) return next();[m
[32m+[m[32m *          req.session.user = req.body.user;[m
[32m+[m[32m *          next();[m
[32m+[m[32m *        }[m
[32m+[m[32m *[m[41m      [m
[32m+[m[32m *        , function(req, res){[m
[32m+[m[32m *          res.setHeader('Content-Type', 'text/html');[m
[32m+[m[32m *          var body = form[m
[32m+[m[32m *            .replace('{token}', req.session._csrf)[m
[32m+[m[32m *            .replace('{user}', req.session.user && req.session.user.name || '');[m
[32m+[m[32m *          res.end(body);[m
[32m+[m[32m *        }[m
[32m+[m[32m *      ).listen(3000);[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *    - `value` a function accepting the request, returning the token[m[41m [m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function csrf(options) {[m
[32m+[m[32m  var options = options || {}[m
[32m+[m[32m    , value = options.value || defaultValue;[m
[32m+[m
[32m+[m[32m  return function(req, res, next){[m
[32m+[m[32m    // generate CSRF token[m
[32m+[m[32m    var token = req.session._csrf || (req.session._csrf = utils.uid(24));[m
[32m+[m
[32m+[m[32m    // ignore GET (for now)[m
[32m+[m[32m    if ('GET' == req.method || 'HEAD' == req.method || 'OPTIONS' == req.method) return next();[m
[32m+[m
[32m+[m[32m    // determine value[m
[32m+[m[32m    var val = value(req);[m
[32m+[m
[32m+[m[32m    // check[m
[32m+[m[32m    if (val != token) return utils.forbidden(res);[m
[32m+[m[41m    [m
[32m+[m[32m    next();[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Default value function, checking the `req.body`[m
[32m+[m[32m * and `req.query` for the CSRF token.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingMessage} req[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction defaultValue(req) {[m
[32m+[m[32m  return (req.body && req.body._csrf)[m
[32m+[m[32m    || (req.query && req.query._csrf)[m
[32m+[m[32m    || (req.headers['x-csrf-token']);[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/directory.js b/node_modules/express/node_modules/connect/lib/middleware/directory.js[m
[1mnew file mode 100644[m
[1mindex 0000000..df5b5e6[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/directory.js[m
[36m@@ -0,0 +1,222 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - directory[m
[32m+[m[32m * Copyright(c) 2011 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m// TODO: icon / style for directories[m
[32m+[m[32m// TODO: arrow key navigation[m
[32m+[m[32m// TODO: make icons extensible[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar fs = require('fs')[m
[32m+[m[32m  , parse = require('url').parse[m
[32m+[m[32m  , utils = require('../utils')[m
[32m+[m[32m  , path = require('path')[m
[32m+[m[32m  , normalize = path.normalize[m
[32m+[m[32m  , extname = path.extname[m
[32m+[m[32m  , join = path.join;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Icon cache.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar cache = {};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Serve directory listings with the given `root` path.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *  - `hidden` display hidden (dot) files. Defaults to false.[m
[32m+[m[32m *  - `icons`  display icons. Defaults to false.[m
[32m+[m[32m *  - `filter` Apply this filter function to files. Defaults to false.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} root[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = function directory(root, options){[m
[32m+[m[32m  options = options || {};[m
[32m+[m
[32m+[m[32m  // root required[m
[32m+[m[32m  if (!root) throw new Error('directory() root path required');[m
[32m+[m[32m  var hidden = options.hidden[m
[32m+[m[32m    , icons = options.icons[m
[32m+[m[32m    , filter = options.filter[m
[32m+[m[32m    , root = normalize(root);[m
[32m+[m
[32m+[m[32m  return function directory(req, res, next) {[m
[32m+[m[32m    var accept = req.headers.accept || 'text/plain'[m
[32m+[m[32m      , url = parse(req.url)[m
[32m+[m[32m      , dir = decodeURIComponent(url.pathname)[m
[32m+[m[32m      , path = normalize(join(root, dir))[m
[32m+[m[32m      , originalUrl = parse(req.originalUrl)[m
[32m+[m[32m      , originalDir = decodeURIComponent(originalUrl.pathname)[m
[32m+[m[32m      , showUp = path != root && path != root + '/';[m
[32m+[m
[32m+[m[32m    // null byte(s)[m
[32m+[m[32m    if (~path.indexOf('\0')) return utils.badRequest(res);[m
[32m+[m
[32m+[m[32m    // malicious path[m
[32m+[m[32m    if (0 != path.indexOf(root)) return utils.forbidden(res);[m
[32m+[m
[32m+[m[32m    // check if we have a directory[m
[32m+[m[32m    fs.stat(path, function(err, stat){[m
[32m+[m[32m      if (err) return 'ENOENT' == err.code[m
[32m+[m[32m        ? next()[m
[32m+[m[32m        : next(err);[m
[32m+[m
[32m+[m[32m      if (!stat.isDirectory()) return next();[m
[32m+[m
[32m+[m[32m      // fetch files[m
[32m+[m[32m      fs.readdir(path, function(err, files){[m
[32m+[m[32m        if (err) return next(err);[m
[32m+[m[32m        if (!hidden) files = removeHidden(files);[m
[32m+[m[32m        if (filter) files = files.filter(filter);[m
[32m+[m[32m        files.sort();[m
[32m+[m[32m        // content-negotiation[m
[32m+[m[32m        for (var key in exports) {[m
[32m+[m[32m          if (~accept.indexOf(key) || ~accept.indexOf('*/*')) {[m
[32m+[m[32m            exports[key](req, res, files, next, originalDir, showUp, icons);[m
[32m+[m[32m            return;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m        utils.notAcceptable(res);[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond with text/html.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.html = function(req, res, files, next, dir, showUp, icons){[m
[32m+[m[32m  fs.readFile(__dirname + '/../public/directory.html', 'utf8', function(err, str){[m
[32m+[m[32m    if (err) return next(err);[m
[32m+[m[32m    fs.readFile(__dirname + '/../public/style.css', 'utf8', function(err, style){[m
[32m+[m[32m      if (err) return next(err);[m
[32m+[m[32m      if (showUp) files.unshift('..');[m
[32m+[m[32m      str = str[m
[32m+[m[32m        .replace('{style}', style)[m
[32m+[m[32m        .replace('{files}', html(files, dir, icons))[m
[32m+[m[32m        .replace('{directory}', dir)[m
[32m+[m		[32m.replace('{linked-path}', htmlPath(dir));[m
[32m+[m[32m      res.setHeader('Content-Type', 'text/html');[m
[32m+[m[32m      res.setHeader('Content-Length', str.length);[m
[32m+[m[32m      res.end(str);[m
[32m+[m[32m    });[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond with application/json.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.json = function(req, res, files){[m
[32m+[m[32m  files = JSON.stringify(files);[m
[32m+[m[32m  res.setHeader('Content-Type', 'application/json');[m
[32m+[m[32m  res.setHeader('Content-Length', files.length);[m
[32m+[m[32m  res.end(files);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond with text/plain.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.plain = function(req, res, files){[m
[32m+[m[32m  files = files.join('\n') + '\n';[m
[32m+[m[32m  res.setHeader('Content-Type', 'text/plain');[m
[32m+[m[32m  res.setHeader('Content-Length', files.length);[m
[32m+[m[32m  res.end(files);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Map html `dir`, returning a linked path.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction htmlPath(dir) {[m
[32m+[m[32m  var curr = [];[m
[32m+[m[32m  return dir.split('/').map(function(part){[m
[32m+[m[32m    curr.push(part);[m
[32m+[m[32m    return '<a href="' + curr.join('/') + '">' + part + '</a>';[m
[32m+[m[32m  }).join(' / ');[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Map html `files`, returning an html unordered list.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction html(files, dir, useIcons) {[m
[32m+[m[32m  return '<ul id="files">' + files.map(function(file){[m
[32m+[m[32m    var icon = ''[m
[32m+[m[32m      , classes = [];[m
[32m+[m
[32m+[m[32m    if (useIcons && '..' != file) {[m
[32m+[m[32m      icon = icons[extname(file)] || icons.default;[m
[32m+[m[32m      icon = '<img src="data:image/png;base64,' + load(icon) + '" />';[m
[32m+[m[32m      classes.push('icon');[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return '<li><a href="'[m
[32m+[m[32m      + join(dir, file)[m
[32m+[m[32m      + '" class="'[m
[32m+[m[32m      + classes.join(' ') + '"'[m
[32m+[m[32m      + ' title="' + file + '">'[m
[32m+[m[32m      + icon + file + '</a></li>';[m
[32m+[m
[32m+[m[32m  }).join('\n') + '</ul>';[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Load and cache the given `icon`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} icon[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction load(icon) {[m
[32m+[m[32m  if (cache[icon]) return cache[icon];[m
[32m+[m[32m  return cache[icon] = fs.readFileSync(__dirname + '/../public/icons/' + icon, 'base64');[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Filter "hidden" `files`, aka files[m
[32m+[m[32m * beginning with a `.`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Array} files[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction removeHidden(files) {[m
[32m+[m[32m  return files.filter(function(file){[m
[32m+[m[32m    return '.' != file[0];[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Icon map.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar icons = {[m
[32m+[m[32m    '.js': 'page_white_code_red.png'[m
[32m+[m[32m  , '.c': 'page_white_c.png'[m
[32m+[m[32m  , '.h': 'page_white_h.png'[m
[32m+[m[32m  , '.cc': 'page_white_cplusplus.png'[m
[32m+[m[32m  , '.php': 'page_white_php.png'[m
[32m+[m[32m  , '.rb': 'page_white_ruby.png'[m
[32m+[m[32m  , '.cpp': 'page_white_cplusplus.png'[m
[32m+[m[32m  , '.swf': 'page_white_flash.png'[m
[32m+[m[32m  , '.pdf': 'page_white_acrobat.png'[m
[32m+[m[32m  , 'default': 'page_white.png'[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/errorHandler.js b/node_modules/express/node_modules/connect/lib/middleware/errorHandler.js[m
[1mnew file mode 100644[m
[1mindex 0000000..f2fc44f[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/errorHandler.js[m
[36m@@ -0,0 +1,100 @@[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - errorHandler[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar utils = require('../utils')[m
[32m+[m[32m  , url = require('url')[m
[32m+[m[32m  , fs = require('fs');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Flexible error handler, providing (_optional_) stack traces[m
[32m+[m[32m * and error message responses for requests accepting text, html,[m
[32m+[m[32m * or json.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `showStack`, `stack` respond with both the error message and stack trace. Defaults to `false`[m
[32m+[m[32m *   - `showMessage`, `message`, respond with the exception message only. Defaults to `false`[m
[32m+[m[32m *   - `dumpExceptions`, `dump`, dump exceptions to stderr (without terminating the process). Defaults to `false`[m
[32m+[m[32m *[m
[32m+[m[32m * Text:[m
[32m+[m[32m *[m
[32m+[m[32m *   By default, and when _text/plain_ is accepted a simple stack trace[m
[32m+[m[32m *   or error message will be returned.[m
[32m+[m[32m *[m
[32m+[m[32m * JSON:[m
[32m+[m[32m *[m
[32m+[m[32m *   When _application/json_ is accepted, connect will respond with[m
[32m+[m[32m *   an object in the form of `{ "error": error }`.[m[41m [m
[32m+[m[32m *[m
[32m+[m[32m * HTML:[m
[32m+[m[32m *[m
[32m+[m[32m *   When accepted connect will output a nice html stack trace.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = function errorHandler(options){[m
[32m+[m[32m  options = options || {};[m
[32m+[m
[32m+[m[32m  // defaults[m
[32m+[m[32m  var showStack = options.showStack || options.stack[m
[32m+[m[32m    , showMessage = options.showMessage || options.message[m
[32m+[m[32m    , dumpExceptions = options.dumpExceptions || options.dump[m
[32m+[m[32m    , formatUrl = options.formatUrl;[m
[32m+[m
[32m+[m[32m  return function errorHandler(err, req, res, next){[m
[32m+[m[32m    res.statusCode = 500;[m
[32m+[m[32m    if (dumpExceptions) console.error(err.stack);[m
[32m+[m[32m    if (showStack) {[m
[32m+[m[32m      var accept = req.headers.accept || '';[m
[32m+[m[32m      // html[m
[32m+[m[32m      if (~accept.indexOf('html')) {[m
[32m+[m[32m        fs.readFile(__dirname + '/../public/style.css', 'utf8', function(e, style){[m
[32m+[m[32m          fs.readFile(__dirname + '/../public/error.html', 'utf8', function(e, html){[m
[32m+[m[32m            var stack = (err.stack || '')[m
[32m+[m[32m              .split('\n').slice(1)[m
[32m+[m[32m              .map(function(v){ return '<li>' + v + '</li>'; }).join('');[m
[32m+[m[32m              html = html[m
[32m+[m[32m                .replace('{style}', style)[m
[32m+[m[32m                .replace('{stack}', stack)[m
[32m+[m[32m                .replace('{title}', exports.title)[m
[32m+[m[32m                .replace(/\{error\}/g, utils.escape(err.toString()));[m
[32m+[m[32m              res.setHeader('Content-Type', 'text/html');[m
[32m+[m[32m              res.end(html);[m
[32m+[m[32m          });[m
[32m+[m[32m        });[m
[32m+[m[32m      // json[m
[32m+[m[32m      } else if (~accept.indexOf('json')) {[m
[32m+[m[32m        var json = JSON.stringify({ error: err });[m
[32m+[m[32m        res.setHeader('Content-Type', 'application/json');[m
[32m+[m[32m        res.end(json);[m
[32m+[m[32m      // plain text[m
[32m+[m[32m      } else {[m
[32m+[m[32m        res.writeHead(500, { 'Content-Type': 'text/plain' });[m
[32m+[m[32m        res.end(err.stack);[m
[32m+[m[32m      }[m
[32m+[m[32m    } else {[m
[32m+[m[32m      var body = showMessage[m
[32m+[m[32m        ? err.toString()[m
[32m+[m[32m        : 'Internal Server Error';[m
[32m+[m[32m      res.setHeader('Content-Type', 'text/plain');[m
[32m+[m[32m      res.end(body);[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Template title.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.title = 'Connect';[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/favicon.js b/node_modules/express/node_modules/connect/lib/middleware/favicon.js[m
[1mnew file mode 100644[m
[1mindex 0000000..8eeafba[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/favicon.js[m
[36m@@ -0,0 +1,76 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - favicon[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar fs = require('fs')[m
[32m+[m[32m  , utils = require('../utils');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Favicon cache.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar icon;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * By default serves the connect favicon, or the favicon[m
[32m+[m[32m * located by the given `path`.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `maxAge`  cache-control max-age directive, defaulting to 1 day[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     connect.createServer([m
[32m+[m[32m *       connect.favicon()[m[41m    [m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m *     connect.createServer([m
[32m+[m[32m *       connect.favicon(__dirname + '/public/favicon.ico')[m[41m    [m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function favicon(path, options){[m
[32m+[m[32m  var options = options || {}[m
[32m+[m[32m    , path = path || __dirname + '/../public/favicon.ico'[m
[32m+[m[32m    , maxAge = options.maxAge || 86400000;[m
[32m+[m
[32m+[m[32m  return function favicon(req, res, next){[m
[32m+[m[32m    if ('/favicon.ico' == req.url) {[m
[32m+[m[32m      if (icon) {[m
[32m+[m[32m        res.writeHead(200, icon.headers);[m
[32m+[m[32m        res.end(icon.body);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        fs.readFile(path, function(err, buf){[m
[32m+[m[32m          if (err) return next(err);[m
[32m+[m[32m          icon = {[m
[32m+[m[32m            headers: {[m
[32m+[m[32m                'Content-Type': 'image/x-icon'[m
[32m+[m[32m              , 'Content-Length': buf.length[m
[32m+[m[32m              , 'ETag': '"' + utils.md5(buf) + '"'[m
[32m+[m[32m              , 'Cache-Control': 'public, max-age=' + (maxAge / 1000)[m
[32m+[m[32m            },[m
[32m+[m[32m            body: buf[m
[32m+[m[32m          };[m
[32m+[m[32m          res.writeHead(200, icon.headers);[m
[32m+[m[32m          res.end(icon.body);[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    } else {[m
[32m+[m[32m      next();[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/limit.js b/node_modules/express/node_modules/connect/lib/middleware/limit.js[m
[1mnew file mode 100644[m
[1mindex 0000000..a604ffb[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/limit.js[m
[36m@@ -0,0 +1,80 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - limit[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Limit request bodies to the given size in `bytes`.[m
[32m+[m[32m *[m
[32m+[m[32m * A string representation of the bytesize may also be passed,[m
[32m+[m[32m * for example "5mb", "200kb", "1gb", etc.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     var server = connect([m
[32m+[m[32m *       connect.limit('5.5mb')[m
[32m+[m[32m *     ).listen(3000);[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Number|String} bytes[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function limit(bytes){[m
[32m+[m[32m  if ('string' == typeof bytes) bytes = parse(bytes);[m
[32m+[m[32m  if ('number' != typeof bytes) throw new Error('limit() bytes required');[m
[32m+[m[32m  return function limit(req, res, next){[m
[32m+[m[32m    var received = 0[m
[32m+[m[32m      , len = req.headers['content-length'][m
[32m+[m[32m        ? parseInt(req.headers['content-length'], 10)[m
[32m+[m[32m        : null;[m
[32m+[m
[32m+[m[32m    // deny the request[m
[32m+[m[32m    function deny() {[m
[32m+[m[32m      req.destroy();[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // self-awareness[m
[32m+[m[32m    if (req._limit) return next();[m
[32m+[m[32m    req._limit = true;[m
[32m+[m
[32m+[m[32m    // limit by content-length[m
[32m+[m[32m    if (len && len > bytes) {[m
[32m+[m[32m      res.statusCode = 413;[m
[32m+[m[32m      res.end('Request Entity Too Large');[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // limit[m
[32m+[m[32m    req.on('data', function(chunk){[m
[32m+[m[32m      received += chunk.length;[m
[32m+[m[32m      if (received > bytes) deny();[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    next();[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse byte `size` string.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} size[m
[32m+[m[32m * @return {Number}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction parse(size) {[m
[32m+[m[32m  var parts = size.match(/^(\d+(?:\.\d+)?) *(kb|mb|gb)$/)[m
[32m+[m[32m    , n = parseFloat(parts[1])[m
[32m+[m[32m    , type = parts[2];[m
[32m+[m
[32m+[m[32m  var map = {[m
[32m+[m[32m      kb: 1024[m
[32m+[m[32m    , mb: 1024 * 1024[m
[32m+[m[32m    , gb: 1024 * 1024 * 1024[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  return map[type] * n;[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/logger.js b/node_modules/express/node_modules/connect/lib/middleware/logger.js[m
[1mnew file mode 100644[m
[1mindex 0000000..75cc5aa[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/logger.js[m
[36m@@ -0,0 +1,299 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - logger[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Log buffer.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar buf = [];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Default log buffer duration.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar defaultBufferDuration = 1000;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Log requests with the given `options` or a `format` string.[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `format`  Format string, see below for tokens[m
[32m+[m[32m *   - `stream`  Output stream, defaults to _stdout_[m
[32m+[m[32m *   - `buffer`  Buffer duration, defaults to 1000ms when _true_[m
[32m+[m[32m *   - `immediate`  Write log line on request instead of response (for response times)[m
[32m+[m[32m *[m
[32m+[m[32m * Tokens:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `:req[header]` ex: `:req[Accept]`[m
[32m+[m[32m *   - `:res[header]` ex: `:res[Content-Length]`[m
[32m+[m[32m *   - `:http-version`[m
[32m+[m[32m *   - `:response-time`[m
[32m+[m[32m *   - `:remote-addr`[m
[32m+[m[32m *   - `:date`[m
[32m+[m[32m *   - `:method`[m
[32m+[m[32m *   - `:url`[m
[32m+[m[32m *   - `:referrer`[m
[32m+[m[32m *   - `:user-agent`[m
[32m+[m[32m *   - `:status`[m
[32m+[m[32m *[m
[32m+[m[32m * Formats:[m
[32m+[m[32m *[m
[32m+[m[32m *   Pre-defined formats that ship with connect:[m
[32m+[m[32m *[m
[32m+[m[32m *    - `default` ':remote-addr - - [:date] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"'[m
[32m+[m[32m *    - `short` ':remote-addr - :method :url HTTP/:http-version :status :res[content-length] - :response-time ms'[m
[32m+[m[32m *    - `tiny`  ':method :url :status :res[content-length] - :response-time ms'[m
[32m+[m[32m *    - `dev` concise output colored by response status for development use[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *      connect.logger() // default[m
[32m+[m[32m *      connect.logger('short')[m
[32m+[m[32m *      connect.logger('tiny')[m
[32m+[m[32m *      connect.logger('dev')[m
[32m+[m[32m *      connect.logger(':method :url - :referrer')[m
[32m+[m[32m *      connect.logger(':req[content-type] -> :res[content-type]')[m
[32m+[m[32m *      connect.logger(function(req, res){ return 'some format string' })[m
[32m+[m[32m *[m
[32m+[m[32m * Defining Tokens:[m
[32m+[m[32m *[m
[32m+[m[32m *   To define a token, simply invoke `connect.logger.token()` with the[m
[32m+[m[32m *   name and a callback function. The value returned is then available[m
[32m+[m[32m *   as ":type" in this case.[m
[32m+[m[32m *[m
[32m+[m[32m *      connect.logger.token('type', function(req, res){ return req.headers['content-type']; })[m
[32m+[m[32m *[m
[32m+[m[32m * Defining Formats:[m
[32m+[m[32m *[m
[32m+[m[32m *   All default formats are defined this way, however it's public API as well:[m
[32m+[m[32m *[m
[32m+[m[32m *       connect.logger.format('name', 'string or function')[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String|Function|Object} format or options[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = function logger(options) {[m
[32m+[m[32m  if ('object' == typeof options) {[m
[32m+[m[32m    options = options || {};[m
[32m+[m[32m  } else if (options) {[m
[32m+[m[32m    options = { format: options };[m
[32m+[m[32m  } else {[m
[32m+[m[32m    options = {};[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // output on request instead of response[m
[32m+[m[32m  var immediate = options.immediate;[m
[32m+[m
[32m+[m[32m  // format name[m
[32m+[m[32m  var fmt = exports[options.format] || options.format || exports.default;[m
[32m+[m
[32m+[m[32m  // compile format[m
[32m+[m[32m  if ('function' != typeof fmt) fmt = compile(fmt);[m
[32m+[m
[32m+[m[32m  // options[m
[32m+[m[32m  var stream = options.stream || process.stdout[m
[32m+[m[32m    , buffer = options.buffer;[m
[32m+[m
[32m+[m[32m  // buffering support[m
[32m+[m[32m  if (buffer) {[m
[32m+[m[32m    var realStream = stream[m
[32m+[m[32m      , interval = 'number' == typeof buffer[m
[32m+[m[32m        ? buffer[m
[32m+[m[32m        : defaultBufferDuration;[m
[32m+[m
[32m+[m[32m    // flush interval[m
[32m+[m[32m    setInterval(function(){[m
[32m+[m[32m      if (buf.length) {[m
[32m+[m[32m        realStream.write(buf.join(''), 'ascii');[m
[32m+[m[32m        buf.length = 0;[m
[32m+[m[32m      }[m
[32m+[m[32m    }, interval);[m[41m [m
[32m+[m
[32m+[m[32m    // swap the stream[m
[32m+[m[32m    stream = {[m
[32m+[m[32m      write: function(str){[m
[32m+[m[32m        buf.push(str);[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return function logger(req, res, next) {[m
[32m+[m[32m    req._startTime = new Date;[m
[32m+[m
[32m+[m[32m    // mount safety[m
[32m+[m[32m    if (req._logging) return next();[m
[32m+[m
[32m+[m[32m    // flag as logging[m
[32m+[m[32m    req._logging = true;[m
[32m+[m
[32m+[m[32m    // immediate[m
[32m+[m[32m    if (immediate) {[m
[32m+[m[32m      var line = fmt(exports, req, res);[m
[32m+[m[32m      if (null == line) return;[m
[32m+[m[32m      stream.write(line + '\n', 'ascii');[m
[32m+[m[32m    } else {[m
[32m+[m[32m      // proxy end to output loggging[m
[32m+[m[32m      var end = res.end;[m
[32m+[m[32m      res.end = function(chunk, encoding){[m
[32m+[m[32m        res.end = end;[m
[32m+[m[32m        res.end(chunk, encoding);[m
[32m+[m[32m        var line = fmt(exports, req, res);[m
[32m+[m[32m        if (null == line) return;[m
[32m+[m[32m        stream.write(line + '\n', 'ascii');[m
[32m+[m[32m      };[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m
[32m+[m[32m    next();[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Compile `fmt` into a function.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} fmt[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction compile(fmt) {[m
[32m+[m[32m  fmt = fmt.replace(/"/g, '\\"');[m
[32m+[m[32m  var js = '  return "' + fmt.replace(/:([-\w]{2,})(?:\[([^\]]+)\])?/g, function(_, name, arg){[m
[32m+[m[32m    return '"\n    + (tokens["' + name + '"](req, res, "' + arg + '") || "-") + "';[m
[32m+[m[32m  }) + '";'[m
[32m+[m[32m  return new Function('tokens, req, res', js);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Define a token function with the given `name`,[m
[32m+[m[32m * and callback `fn(req, res)`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} name[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Object} exports for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.token = function(name, fn) {[m
[32m+[m[32m  exports[name] = fn;[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Define a `fmt` with the given `name`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} name[m
[32m+[m[32m * @param {String|Function} fmt[m
[32m+[m[32m * @return {Object} exports for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.format = function(name, str){[m
[32m+[m[32m  exports[name] = str;[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// default format[m
[32m+[m
[32m+[m[32mexports.format('default', ':remote-addr - - [:date] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"');[m
[32m+[m
[32m+[m[32m// short format[m
[32m+[m
[32m+[m[32mexports.format('short', ':remote-addr - :method :url HTTP/:http-version :status :res[content-length] - :response-time ms');[m
[32m+[m
[32m+[m[32m// tiny format[m
[32m+[m
[32m+[m[32mexports.format('tiny', ':method :url :status :res[content-length] - :response-time ms');[m
[32m+[m
[32m+[m[32m// dev (colored)[m
[32m+[m
[32m+[m[32mexports.format('dev', function(tokens, req, res){[m
[32m+[m[32m  var status = res.statusCode[m
[32m+[m[32m    , color = 32;[m
[32m+[m
[32m+[m[32m  if (status >= 500) color = 31[m
[32m+[m[32m  else if (status >= 400) color = 33[m
[32m+[m[32m  else if (status >= 300) color = 36;[m
[32m+[m
[32m+[m[32m  return '\033[90m' + req.method[m
[32m+[m[32m    + ' ' + req.originalUrl + ' '[m
[32m+[m[32m    + '\033[' + color + 'm' + res.statusCode[m
[32m+[m[32m    + ' \033[90m'[m
[32m+[m[32m    + (new Date - req._startTime)[m
[32m+[m[32m    + 'ms\033[0m';[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// request url[m
[32m+[m
[32m+[m[32mexports.token('url', function(req){[m
[32m+[m[32m  return req.originalUrl;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// request method[m
[32m+[m
[32m+[m[32mexports.token('method', function(req){[m
[32m+[m[32m  return req.method;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// response time in milliseconds[m
[32m+[m
[32m+[m[32mexports.token('response-time', function(req){[m
[32m+[m[32m  return new Date - req._startTime;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// UTC date[m
[32m+[m
[32m+[m[32mexports.token('date', function(){[m
[32m+[m[32m  return new Date().toUTCString();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// response status code[m
[32m+[m
[32m+[m[32mexports.token('status', function(req, res){[m
[32m+[m[32m  return res.statusCode;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// normalized referrer[m
[32m+[m
[32m+[m[32mexports.token('referrer', function(req){[m
[32m+[m[32m  return req.headers['referer'] || req.headers['referrer'];[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// remote address[m
[32m+[m
[32m+[m[32mexports.token('remote-addr', function(req){[m
[32m+[m[32m  return req.socket && (req.socket.remoteAddress || (req.socket.socket && req.socket.socket.remoteAddress));[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// HTTP version[m
[32m+[m
[32m+[m[32mexports.token('http-version', function(req){[m
[32m+[m[32m  return req.httpVersionMajor + '.' + req.httpVersionMinor;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// UA string[m
[32m+[m
[32m+[m[32mexports.token('user-agent', function(req){[m
[32m+[m[32m  return req.headers['user-agent'];[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// request header[m
[32m+[m
[32m+[m[32mexports.token('req', function(req, res, field){[m
[32m+[m[32m  return req.headers[field.toLowerCase()];[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// response header[m
[32m+[m
[32m+[m[32mexports.token('res', function(req, res, field){[m
[32m+[m[32m  return (res._headers || {})[field.toLowerCase()];[m
[32m+[m[32m});[m
[32m+[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js b/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js[m
[1mnew file mode 100644[m
[1mindex 0000000..db4e9f3[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js[m
[36m@@ -0,0 +1,38 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - methodOverride[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Provides faux HTTP method support.[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * Pass an optional `key` to use when checking for[m
[32m+[m[32m * a method override, othewise defaults to _\_method_.[m
[32m+[m[32m * The original method is available via `req.originalMethod`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} key[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function methodOverride(key){[m
[32m+[m[32m  key = key || "_method";[m
[32m+[m[32m  return function methodOverride(req, res, next) {[m
[32m+[m[32m    req.originalMethod = req.originalMethod || req.method;[m
[32m+[m
[32m+[m[32m    // req.body[m
[32m+[m[32m    if (req.body && key in req.body) {[m
[32m+[m[32m      req.method = req.body[key].toUpperCase();[m
[32m+[m[32m      delete req.body[key];[m
[32m+[m[32m    // check X-HTTP-Method-Override[m
[32m+[m[32m    } else if (req.headers['x-http-method-override']) {[m
[32m+[m[32m      req.method = req.headers['x-http-method-override'].toUpperCase();[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    next();[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/profiler.js b/node_modules/express/node_modules/connect/lib/middleware/profiler.js[m
[1mnew file mode 100644[m
[1mindex 0000000..b0b5bac[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/profiler.js[m
[36m@@ -0,0 +1,100 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - profiler[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Profile the duration of a request.[m
[32m+[m[32m *[m
[32m+[m[32m * Typically this middleware should be utilized[m
[32m+[m[32m * _above_ all others, as it proxies the `res.end()`[m
[32m+[m[32m * method, being first allows it to encapsulate all[m
[32m+[m[32m * other middleware.[m
[32m+[m[32m *[m
[32m+[m[32m * Example Output:[m
[32m+[m[32m *[m
[32m+[m[32m *      GET /[m
[32m+[m[32m *      response time 2ms[m
[32m+[m[32m *      memory rss 52.00kb[m
[32m+[m[32m *      memory vsize 2.07mb[m
[32m+[m[32m *      heap before 3.76mb / 8.15mb[m
[32m+[m[32m *      heap after 3.80mb / 8.15mb[m
[32m+[m[32m *[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function profiler(){[m
[32m+[m[32m  return function(req, res, next){[m
[32m+[m[32m    var end = res.end[m
[32m+[m[32m      , start = snapshot();[m
[32m+[m
[32m+[m[32m    // state snapshot[m
[32m+[m[32m    function snapshot() {[m
[32m+[m[32m      return {[m
[32m+[m[32m          mem: process.memoryUsage()[m
[32m+[m[32m        , time: new Date[m
[32m+[m[32m      };[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // proxy res.end()[m
[32m+[m[32m    res.end = function(data, encoding){[m
[32m+[m[32m      res.end = end;[m
[32m+[m[32m      res.end(data, encoding);[m
[32m+[m[32m      compare(req, start, snapshot())[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    next();[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Compare `start` / `end` snapshots.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingRequest} req[m
[32m+[m[32m * @param {Object} start[m
[32m+[m[32m * @param {Object} end[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction compare(req, start, end) {[m
[32m+[m[32m  console.log();[m
[32m+[m[32m  row(req.method, req.url);[m
[32m+[m[32m  row('response time:', (end.time - start.time) + 'ms');[m
[32m+[m[32m  row('memory rss:', formatBytes(end.mem.rss - start.mem.rss));[m
[32m+[m[32m  row('memory vsize:', formatBytes(end.mem.vsize - start.mem.vsize));[m
[32m+[m[32m  row('heap before:', formatBytes(start.mem.heapUsed) + ' / ' + formatBytes(start.mem.heapTotal));[m
[32m+[m[32m  row('heap after:', formatBytes(end.mem.heapUsed) + ' / ' + formatBytes(end.mem.heapTotal));[m
[32m+[m[32m  console.log();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Row helper[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} key[m
[32m+[m[32m * @param {String} val[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction row(key, val) {[m
[32m+[m[32m  console.log('  \033[90m%s\033[0m \033[36m%s\033[0m', key, val);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Format byte-size.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Number} bytes[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction formatBytes(bytes) {[m
[32m+[m[32m  var kb = 1024[m
[32m+[m[32m    , mb = 1024 * kb[m
[32m+[m[32m    , gb = 1024 * mb;[m
[32m+[m[32m  if (bytes < kb) return bytes + 'b';[m
[32m+[m[32m  if (bytes < mb) return (bytes / kb).toFixed(2) + 'kb';[m
[32m+[m[32m  if (bytes < gb) return (bytes / mb).toFixed(2) + 'mb';[m
[32m+[m[32m  return (bytes / gb).toFixed(2) + 'gb';[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/query.js b/node_modules/express/node_modules/connect/lib/middleware/query.js[m
[1mnew file mode 100644[m
[1mindex 0000000..d3b1acd[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/query.js[m
[36m@@ -0,0 +1,40 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - query[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * Copyright(c) 2011 Sencha Inc.[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar qs = require('qs')[m
[32m+[m[32m  , parse = require('url').parse;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Automatically parse the query-string when available,[m
[32m+[m[32m * populating the `req.query` object.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     connect([m
[32m+[m[32m *         connect.query()[m
[32m+[m[32m *       , function(req, res){[m
[32m+[m[32m *         res.end(JSON.stringify(req.query));[m
[32m+[m[32m *       }[m
[32m+[m[32m *     ).listen(3000);[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function query(){[m
[32m+[m[32m  return function query(req, res, next){[m
[32m+[m[32m    req.query = ~req.url.indexOf('?')[m
[32m+[m[32m      ? qs.parse(parse(req.url).query)[m
[32m+[m[32m      : {};[m
[32m+[m[32m    next();[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/responseTime.js b/node_modules/express/node_modules/connect/lib/middleware/responseTime.js[m
[1mnew file mode 100644[m
[1mindex 0000000..2b2133a[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/responseTime.js[m
[36m@@ -0,0 +1,34 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - responseTime[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Adds the `X-Response-Time` header displaying the response[m
[32m+[m[32m * duration in milliseconds.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function responseTime(){[m
[32m+[m[32m  return function(req, res, next){[m
[32m+[m[32m    var writeHead = res.writeHead[m
[32m+[m[32m      , start = new Date;[m
[32m+[m
[32m+[m[32m    if (res._responseTime) return next();[m
[32m+[m[32m    res._responseTime = true;[m
[32m+[m
[32m+[m[32m    // proxy writeHead to calculate duration[m
[32m+[m[32m    res.writeHead = function(status, headers){[m
[32m+[m[32m      var duration = new Date - start;[m
[32m+[m[32m      res.setHeader('X-Response-Time', duration + 'ms');[m
[32m+[m[32m      res.writeHead = writeHead;[m
[32m+[m[32m      res.writeHead(status, headers);[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    next();[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/router.js b/node_modules/express/node_modules/connect/lib/middleware/router.js[m
[1mnew file mode 100644[m
[1mindex 0000000..a07452e[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/router.js[m
[36m@@ -0,0 +1,379 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - router[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar utils = require('../utils')[m
[32m+[m[32m  , parse = require('url').parse;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose router.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = router;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Supported HTTP / WebDAV methods.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar _methods = exports.methods = [[m
[32m+[m[32m    'get'[m
[32m+[m[32m  , 'post'[m
[32m+[m[32m  , 'put'[m
[32m+[m[32m  , 'delete'[m
[32m+[m[32m  , 'connect'[m
[32m+[m[32m  , 'options'[m
[32m+[m[32m  , 'trace'[m
[32m+[m[32m  , 'copy'[m
[32m+[m[32m  , 'lock'[m
[32m+[m[32m  , 'mkcol'[m
[32m+[m[32m  , 'move'[m
[32m+[m[32m  , 'propfind'[m
[32m+[m[32m  , 'proppatch'[m
[32m+[m[32m  , 'unlock'[m
[32m+[m[32m  , 'report'[m
[32m+[m[32m  , 'mkactivity'[m
[32m+[m[32m  , 'checkout'[m
[32m+[m[32m  , 'merge'[m
[32m+[m[32m];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Provides Sinatra and Express-like routing capabilities.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     connect.router(function(app){[m
[32m+[m[32m *       app.get('/user/:id', function(req, res, next){[m
[32m+[m[32m *         // populates req.params.id[m
[32m+[m[32m *       });[m
[32m+[m[32m *       app.put('/user/:id', function(req, res, next){[m
[32m+[m[32m *         // populates req.params.id[m
[32m+[m[32m *       });[m
[32m+[m[32m *     })[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction router(fn){[m
[32m+[m[32m  var self = this[m
[32m+[m[32m    , methods = {}[m
[32m+[m[32m    , routes = {}[m
[32m+[m[32m    , params = {};[m
[32m+[m
[32m+[m[32m  if (!fn) throw new Error('router provider requires a callback function');[m
[32m+[m
[32m+[m[32m  // Generate method functions[m
[32m+[m[32m  _methods.forEach(function(method){[m
[32m+[m[32m    methods[method] = generateMethodFunction(method.toUpperCase());[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // Alias del -> delete[m
[32m+[m[32m  methods.del = methods.delete;[m
[32m+[m
[32m+[m[32m  // Apply callback to all methods[m
[32m+[m[32m  methods.all = function(){[m
[32m+[m[32m    var args = arguments;[m
[32m+[m[32m    _methods.forEach(function(name){[m
[32m+[m[32m      methods[name].apply(this, args);[m
[32m+[m[32m    });[m
[32m+[m[32m    return self;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  // Register param callback[m
[32m+[m[32m  methods.param = function(name, fn){[m
[32m+[m[32m    params[name] = fn;[m
[32m+[m[32m  };[m
[32m+[m[41m      [m
[32m+[m[32m  fn.call(this, methods);[m
[32m+[m
[32m+[m[32m  function generateMethodFunction(name) {[m
[32m+[m[32m    var localRoutes = routes[name] = routes[name] || [];[m
[32m+[m[32m    return function(path, fn){[m
[32m+[m[32m      var keys = [][m
[32m+[m[32m        , middleware = [];[m
[32m+[m
[32m+[m[32m      // slice middleware[m
[32m+[m[32m      if (arguments.length > 2) {[m
[32m+[m[32m        middleware = Array.prototype.slice.call(arguments, 1, arguments.length);[m
[32m+[m[32m        fn = middleware.pop();[m
[32m+[m[32m        middleware = utils.flatten(middleware);[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      fn.middleware = middleware;[m
[32m+[m
[32m+[m[32m      if (!path) throw new Error(name + ' route requires a path');[m
[32m+[m[32m      if (!fn) throw new Error(name + ' route ' + path + ' requires a callback');[m
[32m+[m[32m      var regexp = path instanceof RegExp[m
[32m+[m[32m        ? path[m
[32m+[m[32m        : normalizePath(path, keys);[m
[32m+[m[32m      localRoutes.push({[m
[32m+[m[32m          fn: fn[m
[32m+[m[32m        , path: regexp[m
[32m+[m[32m        , keys: keys[m
[32m+[m[32m        , orig: path[m
[32m+[m[32m        , method: name[m
[32m+[m[32m      });[m
[32m+[m[32m      return self;[m
[32m+[m[32m    };[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  function router(req, res, next){[m
[32m+[m[32m    var route[m
[32m+[m[32m      , self = this;[m
[32m+[m
[32m+[m[32m    (function pass(i){[m
[32m+[m[32m      if (route = match(req, routes, i)) {[m
[32m+[m[32m        var i = 0[m
[32m+[m[32m          , keys = route.keys;[m
[32m+[m
[32m+[m[32m        req.params = route.params;[m
[32m+[m
[32m+[m[32m        // Param preconditions[m
[32m+[m[32m        (function param(err) {[m
[32m+[m[32m          try {[m
[32m+[m[32m            var key = keys[i++][m
[32m+[m[32m              , val = req.params[key][m
[32m+[m[32m              , fn = params[key];[m
[32m+[m
[32m+[m[32m            if ('route' == err) {[m
[32m+[m[32m              pass(req._route_index + 1);[m
[32m+[m[32m            // Error[m
[32m+[m[32m            } else if (err) {[m
[32m+[m[32m              next(err);[m
[32m+[m[32m            // Param has callback[m
[32m+[m[32m            } else if (fn) {[m
[32m+[m[32m              // Return style[m
[32m+[m[32m              if (1 == fn.length) {[m
[32m+[m[32m                req.params[key] = fn(val);[m
[32m+[m[32m                param();[m
[32m+[m[32m              // Middleware style[m
[32m+[m[32m              } else {[m
[32m+[m[32m                fn(req, res, param, val);[m
[32m+[m[32m              }[m
[32m+[m[32m            // Finished processing params[m
[32m+[m[32m            } else if (!key) {[m
[32m+[m[32m              // route middleware[m
[32m+[m[32m              i = 0;[m
[32m+[m[32m              (function nextMiddleware(err){[m
[32m+[m[32m                var fn = route.middleware[i++];[m
[32m+[m[32m                if ('route' == err) {[m
[32m+[m[32m                  pass(req._route_index + 1);[m
[32m+[m[32m                } else if (err) {[m
[32m+[m[32m                  next(err);[m
[32m+[m[32m                } else if (fn) {[m
[32m+[m[32m                  fn(req, res, nextMiddleware);[m
[32m+[m[32m                } else {[m
[32m+[m[32m                  route.call(self, req, res, function(err){[m
[32m+[m[32m                    if (err) {[m
[32m+[m[32m                      next(err);[m
[32m+[m[32m                    } else {[m
[32m+[m[32m                      pass(req._route_index + 1);[m
[32m+[m[32m                    }[m
[32m+[m[32m                  });[m
[32m+[m[32m                }[m
[32m+[m[32m              })();[m
[32m+[m[32m            // More params[m
[32m+[m[32m            } else {[m
[32m+[m[32m              param();[m
[32m+[m[32m            }[m
[32m+[m[32m          } catch (err) {[m
[32m+[m[32m            next(err);[m
[32m+[m[32m          }[m
[32m+[m[32m        })();[m
[32m+[m[32m      } else if ('OPTIONS' == req.method) {[m
[32m+[m[32m        options(req, res, routes);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        next();[m
[32m+[m[32m      }[m
[32m+[m[32m    })();[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  router.remove = function(path, method){[m
[32m+[m[32m    var fns = router.lookup(path, method);[m
[32m+[m[32m    fns.forEach(function(fn){[m
[32m+[m[32m      routes[fn.method].splice(fn.index, 1);[m
[32m+[m[32m    });[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  router.lookup = function(path, method, ret){[m
[32m+[m[32m    ret = ret || [];[m
[32m+[m
[32m+[m[32m    // method specific lookup[m
[32m+[m[32m    if (method) {[m
[32m+[m[32m      method = method.toUpperCase();[m
[32m+[m[32m      if (routes[method]) {[m
[32m+[m[32m        routes[method].forEach(function(route, i){[m
[32m+[m[32m          if (path == route.orig) {[m
[32m+[m[32m            var fn = route.fn;[m
[32m+[m[32m            fn.regexp = route.path;[m
[32m+[m[32m            fn.keys = route.keys;[m
[32m+[m[32m            fn.path = route.orig;[m
[32m+[m[32m            fn.method = route.method;[m
[32m+[m[32m            fn.index = i;[m
[32m+[m[32m            ret.push(fn);[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    // global lookup[m
[32m+[m[32m    } else {[m
[32m+[m[32m      _methods.forEach(function(method){[m
[32m+[m[32m        router.lookup(path, method, ret);[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return ret;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  router.match = function(url, method, ret){[m
[32m+[m[32m    var ret = ret || [][m
[32m+[m[32m      , i = 0[m
[32m+[m[32m      , fn[m
[32m+[m[32m      , req;[m
[32m+[m
[32m+[m[32m    // method specific matches[m
[32m+[m[32m    if (method) {[m
[32m+[m[32m      method = method.toUpperCase();[m
[32m+[m[32m      req = { url: url, method: method };[m
[32m+[m[32m      while (fn = match(req, routes, i)) {[m
[32m+[m[32m        i = req._route_index + 1;[m
[32m+[m[32m        ret.push(fn);[m
[32m+[m[32m      }[m[41m [m
[32m+[m[32m    // global matches[m
[32m+[m[32m    } else {[m
[32m+[m[32m      _methods.forEach(function(method){[m
[32m+[m[32m        router.match(url, method, ret);[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return ret;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  return router;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond to OPTIONS.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {ServerRequest} req[m
[32m+[m[32m * @param {ServerResponse} req[m
[32m+[m[32m * @param {Array} routes[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction options(req, res, routes) {[m
[32m+[m[32m  var pathname = parse(req.url).pathname[m
[32m+[m[32m    , body = optionsFor(pathname, routes).join(',');[m
[32m+[m[32m  res.writeHead(200, {[m
[32m+[m[32m      'Content-Length': body.length[m
[32m+[m[32m    , 'Allow': body[m
[32m+[m[32m  });[m
[32m+[m[32m  res.end(body);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return OPTIONS array for the given `path`, matching `routes`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} path[m
[32m+[m[32m * @param {Array} routes[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction optionsFor(path, routes) {[m
[32m+[m[32m  return _methods.filter(function(method){[m
[32m+[m[32m    var arr = routes[method.toUpperCase()];[m
[32m+[m[32m    for (var i = 0, len = arr.length; i < len; ++i) {[m
[32m+[m[32m      if (arr[i].path.test(path)) return true;[m
[32m+[m[32m    }[m
[32m+[m[32m  }).map(function(method){[m
[32m+[m[32m    return method.toUpperCase();[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Normalize the given path string,[m
[32m+[m[32m * returning a regular expression.[m
[32m+[m[32m *[m
[32m+[m[32m * An empty array should be passed,[m
[32m+[m[32m * which will contain the placeholder[m
[32m+[m[32m * key names. For example "/user/:id" will[m
[32m+[m[32m * then contain ["id"].[m
[32m+[m[32m *[m
[32m+[m[32m * @param  {String} path[m
[32m+[m[32m * @param  {Array} keys[m
[32m+[m[32m * @return {RegExp}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction normalizePath(path, keys) {[m
[32m+[m[32m  path = path[m
[32m+[m[32m    .concat('/?')[m
[32m+[m[32m    .replace(/\/\(/g, '(?:/')[m
[32m+[m[32m    .replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g, function(_, slash, format, key, capture, optional){[m
[32m+[m[32m      keys.push(key);[m
[32m+[m[32m      slash = slash || '';[m
[32m+[m[32m      return ''[m
[32m+[m[32m        + (optional ? '' : slash)[m
[32m+[m[32m        + '(?:'[m
[32m+[m[32m        + (optional ? slash : '')[m
[32m+[m[32m        + (format || '') + (capture || '([^/]+?)') + ')'[m
[32m+[m[32m        + (optional || '');[m
[32m+[m[32m    })[m
[32m+[m[32m    .replace(/([\/.])/g, '\\$1')[m
[32m+[m[32m    .replace(/\*/g, '(.+)');[m
[32m+[m[32m  return new RegExp('^' + path + '$', 'i');[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Attempt to match the given request to[m
[32m+[m[32m * one of the routes. When successful[m
[32m+[m[32m * a route function is returned.[m
[32m+[m[32m *[m
[32m+[m[32m * @param  {ServerRequest} req[m
[32m+[m[32m * @param  {Object} routes[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction match(req, routes, i) {[m
[32m+[m[32m  var captures[m
[32m+[m[32m    , method = req.method[m
[32m+[m[32m    , i = i || 0;[m
[32m+[m[32m  if ('HEAD' == method) method = 'GET';[m
[32m+[m[32m  if (routes = routes[method]) {[m
[32m+[m[32m    var url = parse(req.url)[m
[32m+[m[32m      , pathname = url.pathname;[m
[32m+[m[32m    for (var len = routes.length; i < len; ++i) {[m
[32m+[m[32m      var route = routes[i][m
[32m+[m[32m        , fn = route.fn[m
[32m+[m[32m        , path = route.path[m
[32m+[m[32m        , keys = fn.keys = route.keys;[m
[32m+[m[32m      if (captures = path.exec(pathname)) {[m
[32m+[m[32m        fn.method = method;[m
[32m+[m[32m        fn.params = [];[m
[32m+[m[32m        for (var j = 1, len = captures.length; j < len; ++j) {[m
[32m+[m[32m          var key = keys[j-1],[m
[32m+[m[32m            val = typeof captures[j] === 'string'[m
[32m+[m[32m              ? decodeURIComponent(captures[j])[m
[32m+[m[32m              : captures[j];[m
[32m+[m[32m          if (key) {[m
[32m+[m[32m            fn.params[key] = val;[m
[32m+[m[32m          } else {[m
[32m+[m[32m            fn.params.push(val);[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m        req._route_index = i;[m
[32m+[m[32m        return fn;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session.js b/node_modules/express/node_modules/connect/lib/middleware/session.js[m
[1mnew file mode 100644[m
[1mindex 0000000..6616fad[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/session.js[m
[36m@@ -0,0 +1,345 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - session[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar Session = require('./session/session')[m
[32m+[m[32m  , MemoryStore = require('./session/memory')[m
[32m+[m[32m  , Cookie = require('./session/cookie')[m
[32m+[m[32m  , Store = require('./session/store')[m
[32m+[m[32m  , utils = require('./../utils')[m
[32m+[m[32m  , parse = require('url').parse[m
[32m+[m[32m  , crypto = require('crypto');[m
[32m+[m
[32m+[m[32m// environment[m
[32m+[m
[32m+[m[32mvar env = process.env.NODE_ENV;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose the middleware.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = session;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose constructors.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.Store = Store;[m
[32m+[m[32mexports.Cookie = Cookie;[m
[32m+[m[32mexports.Session = Session;[m
[32m+[m[32mexports.MemoryStore = MemoryStore;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Warning message for `MemoryStore` usage in production.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar warning = 'Warning: connection.session() MemoryStore is not\n'[m
[32m+[m[32m  + 'designed for a production environment, as it will leak\n'[m
[32m+[m[32m  + 'memory, and obviously only work within a single process.';[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Default finger-printing function.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction defaultFingerprint(req) {[m
[32m+[m[32m  return '';[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Paths to ignore.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.ignore = [];[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Setup session store with the given `options`.[m
[32m+[m[32m *[m
[32m+[m[32m * Session data is _not_ saved in the cookie itself, however[m
[32m+[m[32m * cookies are used, so we must use the [cookieParser()](middleware-cookieParser.html)[m
[32m+[m[32m * middleware _before_ `session()`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     connect.createServer([m
[32m+[m[32m *         connect.cookieParser()[m
[32m+[m[32m *       , connect.session({ secret: 'keyboard cat' })[m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `key`           cookie name defaulting to `connect.sid`[m
[32m+[m[32m *   - `store`         Session store instance[m
[32m+[m[32m *   - `fingerprint`   Custom fingerprint generating function[m
[32m+[m[32m *   - `cookie`        Session cookie settings, defaulting to `{ path: '/', httpOnly: true, maxAge: 14400000 }`[m
[32m+[m[32m *   - `secret`        Secret string used to compute hash[m
[32m+[m[32m *[m
[32m+[m[32m * Ignore Paths:[m
[32m+[m[32m *[m
[32m+[m[32m *  By default `/favicon.ico` is the only ignored path, all others[m
[32m+[m[32m *  will utilize sessions, to manipulate the paths ignored, use[m
[32m+[m[32m * `connect.session.ignore.push('/my/path')`. This works for _full_[m
[32m+[m[32m *  pathnames only, not segments nor substrings.[m
[32m+[m[32m *[m
[32m+[m[32m *     connect.session.ignore.push('/robots.txt');[m
[32m+[m[32m *[m
[32m+[m[32m * ## req.session[m
[32m+[m[32m *[m
[32m+[m[32m *  To store or access session data, simply use the request property `req.session`,[m
[32m+[m[32m *  which is (generally) serialized as JSON by the store, so nested objects[m[41m [m
[32m+[m[32m *  are typically fine. For example below is a user-specific view counter:[m
[32m+[m[32m *[m
[32m+[m[32m *       connect([m
[32m+[m[32m *           connect.cookieParser()[m
[32m+[m[32m *         , connect.session({ secret: 'keyboard cat', cookie: { maxAge: 60000 }})[m
[32m+[m[32m *         , connect.favicon()[m
[32m+[m[32m *         , function(req, res, next){[m
[32m+[m[32m *           var sess = req.session;[m
[32m+[m[32m *           if (sess.views) {[m
[32m+[m[32m *             res.setHeader('Content-Type', 'text/html');[m
[32m+[m[32m *             res.write('<p>views: ' + sess.views + '</p>');[m
[32m+[m[32m *             res.write('<p>expires in: ' + (sess.cookie.maxAge / 1000) + 's</p>');[m
[32m+[m[32m *             res.end();[m
[32m+[m[32m *             sess.views++;[m
[32m+[m[32m *           } else {[m
[32m+[m[32m *             sess.views = 1;[m
[32m+[m[32m *             res.end('welcome to the session demo. refresh!');[m
[32m+[m[32m *           }[m
[32m+[m[32m *         }[m
[32m+[m[32m *       ).listen(3000);[m
[32m+[m[32m *[m
[32m+[m[32m * ## Session#regenerate()[m
[32m+[m[32m *[m
[32m+[m[32m *  To regenerate the session simply invoke the method, once complete[m
[32m+[m[32m *  a new SID and `Session` instance will be initialized at `req.session`.[m
[32m+[m[32m *[m
[32m+[m[32m *      req.session.regenerate(function(err){[m
[32m+[m[32m *        // will have a new session here[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m
[32m+[m[32m * ## Session#destroy()[m
[32m+[m[32m *[m
[32m+[m[32m *  Destroys the session, removing `req.session`, will be re-generated next request.[m
[32m+[m[32m *[m
[32m+[m[32m *      req.session.destroy(function(err){[m
[32m+[m[32m *        // cannot access session here[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * ## Session#reload()[m
[32m+[m[32m *[m
[32m+[m[32m *  Reloads the session data.[m
[32m+[m[32m *[m
[32m+[m[32m *      req.session.reload(function(err){[m
[32m+[m[32m *        // session updated[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m
[32m+[m[32m * ## Session#save()[m
[32m+[m[32m *[m
[32m+[m[32m *  Save the session.[m
[32m+[m[32m *[m
[32m+[m[32m *      req.session.save(function(err){[m
[32m+[m[32m *        // session saved[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m
[32m+[m[32m * ## Session#touch()[m
[32m+[m[32m *[m
[32m+[m[32m *   Updates the `.maxAge`, and `.lastAccess` properties. Typically this is[m
[32m+[m[32m *   not necessary to call, as the session middleware does this for you.[m
[32m+[m[32m *[m
[32m+[m[32m * ## Session#cookie[m
[32m+[m[32m *[m
[32m+[m[32m *  Each session has a unique cookie object accompany it. This allows[m
[32m+[m[32m *  you to alter the session cookie per visitor. For example we can[m
[32m+[m[32m *  set `req.session.cookie.expires` to `false` to enable the cookie[m
[32m+[m[32m *  to remain for only the duration of the user-agent.[m
[32m+[m[32m *[m
[32m+[m[32m * ## Session#maxAge[m
[32m+[m[32m *[m
[32m+[m[32m *  Alternatively `req.session.cookie.maxAge` will return the time[m
[32m+[m[32m *  remaining in milliseconds, which we may also re-assign a new value[m
[32m+[m[32m *  to adjust the `.expires` property appropriately. The following[m
[32m+[m[32m *  are essentially equivalent[m
[32m+[m[32m *[m
[32m+[m[32m *     var hour = 3600000;[m
[32m+[m[32m *     req.session.cookie.expires = new Date(Date.now() + hour);[m
[32m+[m[32m *     req.session.cookie.maxAge = hour;[m
[32m+[m[32m *[m
[32m+[m[32m * For example when `maxAge` is set to `60000` (one minute), and 30 seconds[m
[32m+[m[32m * has elapsed it will return `30000` until the current request has completed,[m
[32m+[m[32m * at which time `req.session.touch()` is called to update `req.session.lastAccess`,[m
[32m+[m[32m * and reset `req.session.maxAge` to its original value.[m
[32m+[m[32m *[m
[32m+[m[32m *     req.session.cookie.maxAge;[m
[32m+[m[32m *     // => 30000[m
[32m+[m[32m *[m
[32m+[m[32m * Session Store Implementation:[m
[32m+[m[32m *[m
[32m+[m[32m * Every session store _must_ implement the following methods[m
[32m+[m[32m *[m
[32m+[m[32m *    - `.get(sid, callback)`[m
[32m+[m[32m *    - `.set(sid, session, callback)`[m
[32m+[m[32m *    - `.destroy(sid, callback)`[m
[32m+[m[32m *[m
[32m+[m[32m * Recommended methods include, but are not limited to:[m
[32m+[m[32m *[m
[32m+[m[32m *    - `.length(callback)`[m
[32m+[m[32m *    - `.clear(callback)`[m
[32m+[m[32m *[m
[32m+[m[32m * For an example implementation view the [connect-redis](http://github.com/visionmedia/connect-redis) repo.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction session(options){[m
[32m+[m[32m  var options = options || {}[m
[32m+[m[32m    , key = options.key || 'connect.sid'[m
[32m+[m[32m    , secret = options.secret[m
[32m+[m[32m    , store = options.store || new MemoryStore[m
[32m+[m[32m    , fingerprint = options.fingerprint || defaultFingerprint[m
[32m+[m[32m    , cookie = options.cookie;[m
[32m+[m
[32m+[m[32m  // notify user that this store is not[m
[32m+[m[32m  // meant for a production environment[m
[32m+[m[32m  if ('production' == env && store instanceof MemoryStore) {[m
[32m+[m[32m    console.warn(warning);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // ensure secret is present[m
[32m+[m[32m  if (!secret) {[m
[32m+[m[32m    throw new Error('connect.session({ secret: "string" }) required for security');[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // session hashing function[m
[32m+[m[32m  store.hash = function(req, base) {[m
[32m+[m[32m    return crypto[m
[32m+[m[32m      .createHmac('sha256', secret)[m
[32m+[m[32m      .update(base + fingerprint(req))[m
[32m+[m[32m      .digest('base64')[m
[32m+[m[32m      .replace(/=*$/, '');[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  // generates the new session[m
[32m+[m[32m  store.generate = function(req){[m
[32m+[m[32m    var base = utils.uid(24);[m
[32m+[m[32m    var sessionID = base + '.' + store.hash(req, base);[m
[32m+[m[32m    req.sessionID = sessionID;[m
[32m+[m[32m    req.session = new Session(req);[m
[32m+[m[32m    req.session.cookie = new Cookie(cookie);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  return function session(req, res, next) {[m
[32m+[m[32m    // self-awareness[m
[32m+[m[32m    if (req.session) return next();[m
[32m+[m
[32m+[m[32m    // parse url[m
[32m+[m[32m    var url = parse(req.url)[m
[32m+[m[32m      , path = url.pathname;[m
[32m+[m
[32m+[m[32m    // ignorable paths[m
[32m+[m[32m    if (~exports.ignore.indexOf(path)) return next();[m
[32m+[m
[32m+[m[32m    // expose store[m
[32m+[m[32m    req.sessionStore = store;[m
[32m+[m
[32m+[m[32m    // proxy writeHead() to Set-Cookie[m
[32m+[m[32m    var writeHead = res.writeHead;[m
[32m+[m[32m    res.writeHead = function(status, headers){[m
[32m+[m[32m      if (req.session) {[m
[32m+[m[32m        var cookie = req.session.cookie;[m
[32m+[m[32m        // only send secure session cookies when there is a secure connection.[m
[32m+[m[32m        // proxySecure is a custom attribute to allow for a reverse proxy[m
[32m+[m[32m        // to handle SSL connections and to communicate to connect over HTTP that[m
[32m+[m[32m        // the incoming connection is secure.[m
[32m+[m[32m        var secured = cookie.secure && (req.connection.encrypted || req.connection.proxySecure);[m
[32m+[m[32m        if (secured || !cookie.secure) {[m
[32m+[m[32m          res.setHeader('Set-Cookie', cookie.serialize(key, req.sessionID));[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      res.writeHead = writeHead;[m
[32m+[m[32m      return res.writeHead(status, headers);[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    // proxy end() to commit the session[m
[32m+[m[32m    var end = res.end;[m
[32m+[m[32m    res.end = function(data, encoding){[m
[32m+[m[32m      res.end = end;[m
[32m+[m[32m      if (req.session) {[m
[32m+[m[32m        // HACK: ensure Set-Cookie for implicit writeHead()[m
[32m+[m[32m        if (!res._header) res._implicitHeader();[m
[32m+[m[32m        req.session.resetMaxAge();[m
[32m+[m[32m        req.session.save(function(){[m
[32m+[m[32m          res.end(data, encoding);[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        res.end(data, encoding);[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    // session hashing[m
[32m+[m[32m    function hash(base) {[m
[32m+[m[32m      return store.hash(req, base);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // generate the session[m
[32m+[m[32m    function generate() {[m
[32m+[m[32m      store.generate(req);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // get the sessionID from the cookie[m
[32m+[m[32m    req.sessionID = req.cookies[key];[m
[32m+[m
[32m+[m[32m    // make a new session if the browser doesn't send a sessionID[m
[32m+[m[32m    if (!req.sessionID) {[m
[32m+[m[32m      generate();[m
[32m+[m[32m      next();[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // check the fingerprint[m
[32m+[m[32m    var parts = req.sessionID.split('.');[m
[32m+[m[32m    if (parts[1] != hash(parts[0])) {[m
[32m+[m[32m      generate();[m
[32m+[m[32m      next();[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // generate the session object[m
[32m+[m[32m    var pause = utils.pause(req);[m
[32m+[m[32m    store.get(req.sessionID, function(err, sess){[m
[32m+[m[32m      // proxy to resume() events[m
[32m+[m[32m      var _next = next;[m
[32m+[m[32m      next = function(err){[m
[32m+[m[32m        _next(err);[m
[32m+[m[32m        pause.resume();[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      // error handling[m
[32m+[m[32m      if (err) {[m
[32m+[m[32m        if ('ENOENT' == err.code) {[m
[32m+[m[32m          generate();[m
[32m+[m[32m          next();[m
[32m+[m[32m        } else {[m
[32m+[m[32m          next(err);[m
[32m+[m[32m        }[m
[32m+[m[32m      // no session[m
[32m+[m[32m      } else if (!sess) {[m
[32m+[m[32m        generate();[m
[32m+[m[32m        next();[m
[32m+[m[32m      // populate req.session[m
[32m+[m[32m      } else {[m
[32m+[m[32m        store.createSession(req, sess);[m
[32m+[m[32m        next();[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session/cookie.js b/node_modules/express/node_modules/connect/lib/middleware/session/cookie.js[m
[1mnew file mode 100644[m
[1mindex 0000000..793c2e9[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/session/cookie.js[m
[36m@@ -0,0 +1,126 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - session - Cookie[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar utils = require('../../utils');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new `Cookie` with the given `options`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar Cookie = module.exports = function Cookie(options) {[m
[32m+[m[32m  this.path = '/';[m
[32m+[m[32m  this.httpOnly = true;[m
[32m+[m[32m  this.maxAge = 14400000;[m
[32m+[m[32m  if (options) utils.merge(this, options);[m
[32m+[m[32m  this.originalMaxAge = undefined == this.originalMaxAge[m
[32m+[m[32m    ? this.maxAge[m
[32m+[m[32m    : this.originalMaxAge;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Prototype.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mCookie.prototype = {[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Set expires `date`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {Date} date[m
[32m+[m[32m   * @api public[m
[32m+[m[32m   */[m
[32m+[m[41m  [m
[32m+[m[32m  set expires(date) {[m
[32m+[m[32m    this._expires = date;[m
[32m+[m[32m    this.originalMaxAge = this.maxAge;[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Get expires `date`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {Date}[m
[32m+[m[32m   * @api public[m
[32m+[m[32m   */[m
[32m+[m
[32m+[m[32m  get expires() {[m
[32m+[m[32m    return this._expires;[m
[32m+[m[32m  },[m
[32m+[m[41m  [m
[32m+[m[32m  /**[m
[32m+[m[32m   * Set expires via max-age in `ms`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param {Number} ms[m
[32m+[m[32m   * @api public[m
[32m+[m[32m   */[m
[32m+[m[41m  [m
[32m+[m[32m  set maxAge(ms) {[m
[32m+[m[32m    this.expires = 'number' == typeof ms[m
[32m+[m[32m      ? new Date(Date.now() + ms)[m
[32m+[m[32m      : ms;[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Get expires max-age in `ms`.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {Number}[m
[32m+[m[32m   * @api public[m
[32m+[m[32m   */[m
[32m+[m
[32m+[m[32m  get maxAge() {[m
[32m+[m[32m    return this.expires instanceof Date[m
[32m+[m[32m      ? this.expires.valueOf() - Date.now()[m
[32m+[m[32m      : this.expires;[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Return cookie data object.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {Object}[m
[32m+[m[32m   * @api private[m
[32m+[m[32m   */[m
[32m+[m
[32m+[m[32m  get data() {[m
[32m+[m[32m    return {[m
[32m+[m[32m        originalMaxAge: this.originalMaxAge[m
[32m+[m[32m      , expires: this._expires[m
[32m+[m[32m      , secure: this.secure[m
[32m+[m[32m      , httpOnly: this.httpOnly[m
[32m+[m[32m      , domain: this.domain[m
[32m+[m[32m      , path: this.path[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Return a serialized cookie string.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {String}[m
[32m+[m[32m   * @api public[m
[32m+[m[32m   */[m
[32m+[m
[32m+[m[32m  serialize: function(name, val){[m
[32m+[m[32m    return utils.serializeCookie(name, val, this.data);[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Return JSON representation of this cookie.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @return {Object}[m
[32m+[m[32m   * @api private[m
[32m+[m[32m   */[m
[32m+[m[41m  [m
[32m+[m[32m  toJSON: function(){[m
[32m+[m[32m    return this.data;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session/memory.js b/node_modules/express/node_modules/connect/lib/middleware/session/memory.js[m
[1mnew file mode 100644[m
[1mindex 0000000..ec569f5[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/session/memory.js[m
[36m@@ -0,0 +1,131 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - session - MemoryStore[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar Store = require('./store')[m
[32m+[m[32m  , utils = require('../../utils')[m
[32m+[m[32m  , Session = require('./session');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize a new `MemoryStore`.[m
[32m+[m[32m *[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar MemoryStore = module.exports = function MemoryStore() {[m
[32m+[m[32m  this.sessions = {};[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Inherit from `Store.prototype`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mMemoryStore.prototype.__proto__ = Store.prototype;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Attempt to fetch session by the given `sid`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} sid[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mMemoryStore.prototype.get = function(sid, fn){[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  process.nextTick(function(){[m
[32m+[m[32m    var expires[m
[32m+[m[32m      , sess = self.sessions[sid];[m
[32m+[m[32m    if (sess) {[m
[32m+[m[32m      sess = JSON.parse(sess);[m
[32m+[m[32m      expires = 'string' == typeof sess.cookie.expires[m
[32m+[m[32m        ? new Date(sess.cookie.expires)[m
[32m+[m[32m        : sess.cookie.expires;[m
[32m+[m[32m      if (!expires || new Date < expires) {[m
[32m+[m[32m        fn(null, sess);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        self.destroy(sid, fn);[m
[32m+[m[32m      }[m
[32m+[m[32m    } else {[m
[32m+[m[32m      fn();[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Commit the given `sess` object associated with the given `sid`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} sid[m
[32m+[m[32m * @param {Session} sess[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mMemoryStore.prototype.set = function(sid, sess, fn){[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  process.nextTick(function(){[m
[32m+[m[32m    self.sessions[sid] = JSON.stringify(sess);[m
[32m+[m[32m    fn && fn();[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Destroy the session associated with the given `sid`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} sid[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mMemoryStore.prototype.destroy = function(sid, fn){[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  process.nextTick(function(){[m
[32m+[m[32m    delete self.sessions[sid];[m
[32m+[m[32m    fn && fn();[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Invoke the given callback `fn` with all active sessions.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mMemoryStore.prototype.all = function(fn){[m
[32m+[m[32m  var arr = [][m
[32m+[m[32m    , keys = Object.keys(this.sessions);[m
[32m+[m[32m  for (var i = 0, len = keys.length; i < len; ++i) {[m
[32m+[m[32m    arr.push(this.sessions[keys[i]]);[m
[32m+[m[32m  }[m
[32m+[m[32m  fn(null, arr);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Clear all sessions.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mMemoryStore.prototype.clear = function(fn){[m
[32m+[m[32m  this.sessions = {};[m
[32m+[m[32m  fn && fn();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Fetch number of sessions.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mMemoryStore.prototype.length = function(fn){[m
[32m+[m[32m  fn(null, Object.keys(this.sessions).length);[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session/session.js b/node_modules/express/node_modules/connect/lib/middleware/session/session.js[m
[1mnew file mode 100644[m
[1mindex 0000000..4e7e1a6[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/session/session.js[m
[36m@@ -0,0 +1,137 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - session - Session[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar utils = require('../../utils')[m
[32m+[m[32m  , Cookie = require('./cookie');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Create a new `Session` with the given request and `data`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingRequest} req[m
[32m+[m[32m * @param {Object} data[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar Session = module.exports = function Session(req, data) {[m
[32m+[m[32m  Object.defineProperty(this, 'req', { value: req });[m
[32m+[m[32m  Object.defineProperty(this, 'id', { value: req.sessionID });[m
[32m+[m[32m  if ('object' == typeof data) {[m
[32m+[m[32m    utils.merge(this, data);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    this.lastAccess = Date.now();[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Update `.lastAccess` timestamp,[m
[32m+[m[32m * and reset `.cookie.maxAge` to prevent[m
[32m+[m[32m * the cookie from expiring when the[m
[32m+[m[32m * session is still active.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Session} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mSession.prototype.touch = function(){[m
[32m+[m[32m  return this[m
[32m+[m[32m    .resetLastAccess()[m
[32m+[m[32m    .resetMaxAge();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Update `.lastAccess` timestamp.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Session} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mSession.prototype.resetLastAccess = function(){[m
[32m+[m[32m  this.lastAccess = Date.now();[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Reset `.maxAge` to `.originalMaxAge`.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Session} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mSession.prototype.resetMaxAge = function(){[m
[32m+[m[32m  this.cookie.maxAge = this.cookie.originalMaxAge;[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Save the session data with optional callback `fn(err)`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Session} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mSession.prototype.save = function(fn){[m
[32m+[m[32m  this.req.sessionStore.set(this.id, this, fn || function(){});[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Re-loads the session data _without_ altering[m
[32m+[m[32m * the maxAge or lastAccess properties. Invokes the[m
[32m+[m[32m * callback `fn(err)`, after which time if no exception[m
[32m+[m[32m * has occurred the `req.session` property will be[m
[32m+[m[32m * a new `Session` object, although representing the[m
[32m+[m[32m * same session.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Session} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mSession.prototype.reload = function(fn){[m
[32m+[m[32m  var req = this.req[m
[32m+[m[32m    , store = this.req.sessionStore;[m
[32m+[m[32m  store.get(this.id, function(err, sess){[m
[32m+[m[32m    if (err) return fn(err);[m
[32m+[m[32m    if (!sess) return fn(new Error('failed to load session'));[m
[32m+[m[32m    store.createSession(req, sess);[m
[32m+[m[32m    fn();[m
[32m+[m[32m  });[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Destroy `this` session.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Session} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mSession.prototype.destroy = function(fn){[m
[32m+[m[32m  delete this.req.session;[m
[32m+[m[32m  this.req.sessionStore.destroy(this.id, fn);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Regenerate this request's session.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @return {Session} for chaining[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mSession.prototype.regenerate = function(fn){[m
[32m+[m[32m  this.req.sessionStore.regenerate(this.req, fn);[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/session/store.js b/node_modules/express/node_modules/connect/lib/middleware/session/store.js[m
[1mnew file mode 100644[m
[1mindex 0000000..6a3d47d[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/session/store.js[m
[36m@@ -0,0 +1,87 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - session - Store[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar EventEmitter = require('events').EventEmitter[m
[32m+[m[32m  , Session = require('./session')[m
[32m+[m[32m  , Cookie = require('./cookie')[m
[32m+[m[32m  , utils = require('../../utils');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Initialize abstract `Store`.[m
[32m+[m[32m *[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar Store = module.exports = function Store(options){};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Inherit from `EventEmitter.prototype`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mStore.prototype.__proto__ = EventEmitter.prototype;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Re-generate the given requests's session.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingRequest} req[m
[32m+[m[32m * @return {Function} fn[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mStore.prototype.regenerate = function(req, fn){[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  this.destroy(req.sessionID, function(err){[m
[32m+[m[32m    self.generate(req);[m
[32m+[m[32m    fn(err);[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Load a `Session` instance via the given `sid`[m
[32m+[m[32m * and invoke the callback `fn(err, sess)`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} sid[m
[32m+[m[32m * @param {Function} fn[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mStore.prototype.load = function(sid, fn){[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  this.get(sid, function(err, sess){[m
[32m+[m[32m    if (err) return fn(err);[m
[32m+[m[32m    if (!sess) return fn();[m
[32m+[m[32m    var req = { sessionID: sid, sessionStore: self };[m
[32m+[m[32m    sess = self.createSession(req, sess, false);[m
[32m+[m[32m    fn(null, sess);[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Create session from JSON `sess` data.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingRequest} req[m
[32m+[m[32m * @param {Object} sess[m
[32m+[m[32m * @return {Session}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mStore.prototype.createSession = function(req, sess, update){[m
[32m+[m[32m  var expires = sess.cookie.expires[m
[32m+[m[32m    , orig = sess.cookie.originalMaxAge[m
[32m+[m[32m    , update = null == update ? true : false;[m
[32m+[m[32m  sess.cookie = new Cookie(sess.cookie);[m
[32m+[m[32m  if ('string' == typeof expires) sess.cookie.expires = new Date(expires);[m
[32m+[m[32m  sess.cookie.originalMaxAge = orig;[m
[32m+[m[32m  req.session = new Session(req, sess);[m
[32m+[m[32m  if (update) req.session.resetLastAccess();[m
[32m+[m[32m  return req.session;[m
[32m+[m[32m};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/static.js b/node_modules/express/node_modules/connect/lib/middleware/static.js[m
[1mnew file mode 100644[m
[1mindex 0000000..b9c2c86[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/static.js[m
[36m@@ -0,0 +1,225 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - staticProvider[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar fs = require('fs')[m
[32m+[m[32m  , path = require('path')[m
[32m+[m[32m  , join = path.join[m
[32m+[m[32m  , basename = path.basename[m
[32m+[m[32m  , normalize = path.normalize[m
[32m+[m[32m  , utils = require('../utils')[m
[32m+[m[32m  , Buffer = require('buffer').Buffer[m
[32m+[m[32m  , parse = require('url').parse[m
[32m+[m[32m  , mime = require('mime');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Static file server with the given `root` path.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     var oneDay = 86400000;[m
[32m+[m[32m *[m
[32m+[m[32m *     connect([m
[32m+[m[32m *       connect.static(__dirname + '/public')[m
[32m+[m[32m *     ).listen(3000);[m
[32m+[m[32m *[m
[32m+[m[32m *     connect([m
[32m+[m[32m *       connect.static(__dirname + '/public', { maxAge: oneDay })[m
[32m+[m[32m *     ).listen(3000);[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *    - `maxAge`   Browser cache maxAge in milliseconds. defaults to 0[m
[32m+[m[32m *    - `hidden`   Allow transfer of hidden files. defaults to false[m
[32m+[m[32m *    - `redirect`   Redirect to trailing "/" when the pathname is a dir[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} root[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports = module.exports = function static(root, options){[m
[32m+[m[32m  options = options || {};[m
[32m+[m
[32m+[m[32m  // root required[m
[32m+[m[32m  if (!root) throw new Error('static() root path required');[m
[32m+[m[32m  options.root = root;[m
[32m+[m
[32m+[m[32m  return function static(req, res, next) {[m
[32m+[m[32m    options.path = req.url;[m
[32m+[m[32m    options.getOnly = true;[m
[32m+[m[32m    send(req, res, next, options);[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Expose mime module.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.mime = mime;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond with 416  "Requested Range Not Satisfiable"[m
[32m+[m[32m *[m
[32m+[m[32m * @param {ServerResponse} res[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction invalidRange(res) {[m
[32m+[m[32m  var body = 'Requested Range Not Satisfiable';[m
[32m+[m[32m  res.setHeader('Content-Type', 'text/plain');[m
[32m+[m[32m  res.setHeader('Content-Length', body.length);[m
[32m+[m[32m  res.statusCode = 416;[m
[32m+[m[32m  res.end(body);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Attempt to tranfer the requseted file to `res`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {ServerRequest}[m
[32m+[m[32m * @param {ServerResponse}[m
[32m+[m[32m * @param {Function} next[m
[32m+[m[32m * @param {Object} options[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar send = exports.send = function(req, res, next, options){[m
[32m+[m[32m  options = options || {};[m
[32m+[m[32m  if (!options.path) throw new Error('path required');[m
[32m+[m
[32m+[m[32m  // setup[m
[32m+[m[32m  var maxAge = options.maxAge || 0[m
[32m+[m[32m    , ranges = req.headers.range[m
[32m+[m[32m    , head = 'HEAD' == req.method[m
[32m+[m[32m    , get = 'GET' == req.method[m
[32m+[m[32m    , root = options.root ? normalize(options.root) : null[m
[32m+[m[32m    , redirect = false === options.redirect ? false : true[m
[32m+[m[32m    , getOnly = options.getOnly[m
[32m+[m[32m    , fn = options.callback[m
[32m+[m[32m    , hidden = options.hidden[m
[32m+[m[32m    , done;[m
[32m+[m
[32m+[m[32m  // replace next() with callback when available[m
[32m+[m[32m  if (fn) next = fn;[m
[32m+[m
[32m+[m[32m  // ignore non-GET requests[m
[32m+[m[32m  if (getOnly && !get && !head) return next();[m
[32m+[m
[32m+[m[32m  // parse url[m
[32m+[m[32m  var url = parse(options.path)[m
[32m+[m[32m    , path = decodeURIComponent(url.pathname)[m
[32m+[m[32m    , type;[m
[32m+[m
[32m+[m[32m  // null byte(s)[m
[32m+[m[32m  if (~path.indexOf('\0')) return utils.badRequest(res);[m
[32m+[m
[32m+[m[32m  // when root is not given, consider .. malicious[m
[32m+[m[32m  if (!root && ~path.indexOf('..')) return utils.forbidden(res);[m
[32m+[m
[32m+[m[32m  // join / normalize from optional root dir[m
[32m+[m[32m  path = normalize(join(root, path));[m
[32m+[m
[32m+[m[32m  // malicious path[m
[32m+[m[32m  if (root && 0 != path.indexOf(root)) return fn[m
[32m+[m[32m    ? fn(new Error('Forbidden'))[m
[32m+[m[32m    : utils.forbidden(res);[m
[32m+[m
[32m+[m[32m  // index.html support[m
[32m+[m[32m  if (normalize('/') == path[path.length - 1]) path += 'index.html';[m
[32m+[m
[32m+[m[32m  // "hidden" file[m
[32m+[m[32m  if (!hidden && '.' == basename(path)[0]) return next();[m
[32m+[m
[32m+[m[32m  fs.stat(path, function(err, stat){[m
[32m+[m[32m    // mime type[m
[32m+[m[32m    type = mime.lookup(path);[m
[32m+[m
[32m+[m[32m    // ignore ENOENT[m
[32m+[m[32m    if (err) {[m
[32m+[m[32m      if (fn) return fn(err);[m
[32m+[m[32m      return 'ENOENT' == err.code[m
[32m+[m[32m        ? next()[m
[32m+[m[32m        : next(err);[m
[32m+[m[32m    // redirect directory in case index.html is present[m
[32m+[m[32m    } else if (stat.isDirectory()) {[m
[32m+[m[32m      if (!redirect) return next();[m
[32m+[m[32m      res.statusCode = 301;[m
[32m+[m[32m      res.setHeader('Location', url.pathname + '/');[m
[32m+[m[32m      res.end('Redirecting to ' + url.pathname + '/');[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // header fields[m
[32m+[m[32m    if (!res.getHeader('Date')) res.setHeader('Date', new Date().toUTCString());[m
[32m+[m[32m    if (!res.getHeader('Cache-Control')) res.setHeader('Cache-Control', 'public, max-age=' + (maxAge / 1000));[m
[32m+[m[32m    if (!res.getHeader('Last-Modified')) res.setHeader('Last-Modified', stat.mtime.toUTCString());[m
[32m+[m[32m    if (!res.getHeader('ETag')) res.setHeader('ETag', utils.etag(stat));[m
[32m+[m[32m    if (!res.getHeader('content-type')) {[m
[32m+[m[32m      var charset = mime.charsets.lookup(type);[m
[32m+[m[32m      res.setHeader('Content-Type', type + (charset ? '; charset=' + charset : ''));[m
[32m+[m[32m    }[m
[32m+[m[32m    res.setHeader('Accept-Ranges', 'bytes');[m
[32m+[m
[32m+[m[32m    // conditional GET support[m
[32m+[m[32m    if (utils.conditionalGET(req)) {[m
[32m+[m[32m      if (!utils.modified(req, res)) {[m
[32m+[m[32m        req.emit('static');[m
[32m+[m[32m        return utils.notModified(res);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    var opts = {};[m
[32m+[m[32m    var chunkSize = stat.size;[m
[32m+[m
[32m+[m[32m    // we have a Range request[m
[32m+[m[32m    if (ranges) {[m
[32m+[m[32m      ranges = utils.parseRange(stat.size, ranges);[m
[32m+[m[32m      // valid[m
[32m+[m[32m      if (ranges) {[m
[32m+[m[32m        // TODO: stream options[m
[32m+[m[32m        // TODO: multiple support[m
[32m+[m[32m        opts.start = ranges[0].start;[m
[32m+[m[32m        opts.end = ranges[0].end;[m
[32m+[m[32m        chunkSize = opts.end - opts.start + 1;[m
[32m+[m[32m        res.statusCode = 206;[m
[32m+[m[32m        res.setHeader('Content-Range', 'bytes '[m
[32m+[m[32m          + opts.start[m
[32m+[m[32m          + '-'[m
[32m+[m[32m          + opts.end[m
[32m+[m[32m          + '/'[m
[32m+[m[32m          + stat.size);[m
[32m+[m[32m      // invalid[m
[32m+[m[32m      } else {[m
[32m+[m[32m        return fn[m
[32m+[m[32m          ? fn(new Error('Requested Range Not Satisfiable'))[m
[32m+[m[32m          : invalidRange(res);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    res.setHeader('Content-Length', chunkSize);[m
[32m+[m
[32m+[m[32m    // transfer[m
[32m+[m[32m    if (head) return res.end();[m
[32m+[m
[32m+[m[32m    // stream[m
[32m+[m[32m    var stream = fs.createReadStream(path, opts);[m
[32m+[m[32m    req.emit('static', stream);[m
[32m+[m[32m    stream.pipe(res);[m
[32m+[m
[32m+[m[32m    // callback[m
[32m+[m[32m    if (fn) {[m
[32m+[m[32m      function callback(err) { done || fn(err); done = true }[m
[32m+[m[32m      req.on('close', callback);[m
[32m+[m[32m      stream.on('end', callback);[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/staticCache.js b/node_modules/express/node_modules/connect/lib/middleware/staticCache.js[m
[1mnew file mode 100644[m
[1mindex 0000000..9ea8eb7[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/staticCache.js[m
[36m@@ -0,0 +1,175 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - staticCache[m
[32m+[m[32m * Copyright(c) 2011 Sencha Inc.[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar http = require('http')[m
[32m+[m[32m  , utils = require('../utils')[m
[32m+[m[32m  , Cache = require('../cache')[m
[32m+[m[32m  , url = require('url')[m
[32m+[m[32m  , fs = require('fs');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Enables a memory cache layer on top of[m
[32m+[m[32m * the `static()` middleware, serving popular[m
[32m+[m[32m * static files.[m
[32m+[m[32m *[m
[32m+[m[32m * By default a maximum of 128 objects are[m
[32m+[m[32m * held in cache, with a max of 256k each,[m
[32m+[m[32m * totalling ~32mb.[m
[32m+[m[32m *[m
[32m+[m[32m * A Least-Recently-Used (LRU) cache algo[m
[32m+[m[32m * is implemented through the `Cache` object,[m
[32m+[m[32m * simply rotating cache objects as they are[m
[32m+[m[32m * hit. This means that increasingly popular[m
[32m+[m[32m * objects maintain their positions while[m
[32m+[m[32m * others get shoved out of the stack and[m
[32m+[m[32m * garbage collected.[m
[32m+[m[32m *[m
[32m+[m[32m * Benchmarks:[m
[32m+[m[32m *[m
[32m+[m[32m *     static(): 2700 rps[m
[32m+[m[32m *     node-static: 5300 rps[m
[32m+[m[32m *     static() + staticCache(): 7500 rps[m
[32m+[m[32m *[m
[32m+[m[32m * Options:[m
[32m+[m[32m *[m
[32m+[m[32m *   - `maxObjects`  max cache objects [128][m
[32m+[m[32m *   - `maxLength`  max cache object length 256kb[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Type} name[m
[32m+[m[32m * @return {Type}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function staticCache(options){[m
[32m+[m[32m  var options = options || {}[m
[32m+[m[32m    , cache = new Cache(options.maxObjects || 128)[m
[32m+[m[32m    , maxlen = options.maxLength || 1024 * 256;[m
[32m+[m
[32m+[m[32m  return function staticCache(req, res, next){[m
[32m+[m[32m    var path = url.parse(req.url).pathname[m
[32m+[m[32m      , ranges = req.headers.range[m
[32m+[m[32m      , hit = cache.get(path)[m
[32m+[m[32m      , hitCC[m
[32m+[m[32m      , uaCC[m
[32m+[m[32m      , header[m
[32m+[m[32m      , age;[m
[32m+[m
[32m+[m[32m    // cache static[m
[32m+[m[32m    req.on('static', function(stream){[m
[32m+[m[32m      var headers = res._headers[m
[32m+[m[32m        , cc = utils.parseCacheControl(headers['cache-control'] || '')[m
[32m+[m[32m        , contentLength = headers['content-length'][m
[32m+[m[32m        , hit;[m
[32m+[m
[32m+[m[32m      // ignore larger files[m
[32m+[m[32m      if (!contentLength || contentLength > maxlen) return;[m
[32m+[m
[32m+[m[32m      // dont cache items we shouldn't be[m
[32m+[m[32m      if ( cc['no-cache'][m
[32m+[m[32m        || cc['no-store'][m
[32m+[m[32m        || cc['private'][m
[32m+[m[32m        || cc['must-revalidate']) return;[m
[32m+[m
[32m+[m[32m      // if already in cache then validate[m
[32m+[m[32m      if (hit = cache.get(path)){[m
[32m+[m[32m        if (headers.etag == hit[0].etag) {[m
[32m+[m[32m          hit[0].date = new Date;[m
[32m+[m[32m          return;[m
[32m+[m[32m        } else {[m
[32m+[m[32m          cache.remove(path);[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      // validation notifiactions don't contain a steam[m
[32m+[m[32m      if (null == stream) return;[m
[32m+[m
[32m+[m[32m      // add the cache object[m
[32m+[m[32m      var arr = cache.add(path);[m
[32m+[m[32m      arr.push(headers);[m
[32m+[m
[32m+[m[32m      // store the chunks[m
[32m+[m[32m      stream.on('data', function(chunk){[m
[32m+[m[32m        arr.push(chunk);[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      // flag it as complete[m
[32m+[m[32m      stream.on('end', function(){[m
[32m+[m[32m        arr.complete = true;[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    // cache hit, doesnt support range requests[m
[32m+[m[32m    if (hit && hit.complete && !ranges) {[m
[32m+[m[32m      header = utils.merge({}, hit[0]);[m
[32m+[m[32m      header.Age = age = (new Date - new Date(header.date)) / 1000 | 0;[m
[32m+[m[32m      header.date = new Date().toUTCString();[m
[32m+[m
[32m+[m[32m      // parse cache-controls[m
[32m+[m[32m      hitCC = utils.parseCacheControl(header['cache-control'] || '');[m
[32m+[m[32m      uaCC = utils.parseCacheControl(req.headers['cache-control'] || '');[m
[32m+[m
[32m+[m[32m      // check if we must revalidate(bypass)[m
[32m+[m[32m      if (hitCC['no-cache'] || uaCC['no-cache']) return next();[m
[32m+[m
[32m+[m[32m      // check freshness of entity[m
[32m+[m[32m      if (isStale(hitCC, age) || isStale(uaCC, age)) return next();[m
[32m+[m
[32m+[m[32m      // conditional GET support[m
[32m+[m[32m      if (utils.conditionalGET(req)) {[m
[32m+[m[32m        if (!utils.modified(req, res, header)) {[m
[32m+[m[32m          header['content-length'] = 0;[m
[32m+[m[32m          res.writeHead(304, header);[m
[32m+[m[32m          return res.end();[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      // HEAD support[m
[32m+[m[32m      if ('HEAD' == req.method) {[m
[32m+[m[32m        header['content-length'] = 0;[m
[32m+[m[32m        res.writeHead(200, header);[m
[32m+[m[32m        return res.end();[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      // respond with cache[m
[32m+[m[32m      res.writeHead(200, header);[m
[32m+[m
[32m+[m[32m      // backpressure[m
[32m+[m[32m      function write(i) {[m
[32m+[m[32m        var buf = hit[i];[m
[32m+[m[32m        if (!buf) return res.end();[m
[32m+[m[32m        if (false === res.write(buf)) {[m
[32m+[m[32m          res.once('drain', function(){[m
[32m+[m[32m            write(++i);[m
[32m+[m[32m          });[m
[32m+[m[32m        } else {[m
[32m+[m[32m          write(++i);[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      return write(1);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    next();[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if cache item is stale[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} cc[m
[32m+[m[32m * @param {Number} age[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction isStale(cc, age) {[m
[32m+[m[32m  return cc['max-age'] && cc['max-age'] <= age;[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/middleware/vhost.js b/node_modules/express/node_modules/connect/lib/middleware/vhost.js[m
[1mnew file mode 100644[m
[1mindex 0000000..913d756[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/middleware/vhost.js[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - vhost[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Setup vhost for the given `hostname` and `server`.[m
[32m+[m[32m *[m
[32m+[m[32m * Examples:[m
[32m+[m[32m *[m
[32m+[m[32m *     connect([m
[32m+[m[32m *       connect.vhost('foo.com',[m
[32m+[m[32m *         connect.createServer(...middleware...)[m
[32m+[m[32m *       ),[m
[32m+[m[32m *       connect.vhost('bar.com',[m
[32m+[m[32m *         connect.createServer(...middleware...)[m
[32m+[m[32m *       )[m
[32m+[m[32m *     );[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} hostname[m
[32m+[m[32m * @param {Server} server[m
[32m+[m[32m * @return {Function}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mmodule.exports = function vhost(hostname, server){[m
[32m+[m[32m  if (!hostname) throw new Error('vhost hostname required');[m
[32m+[m[32m  if (!server) throw new Error('vhost server required');[m
[32m+[m[32m  var regexp = new RegExp('^' + hostname.replace(/[*]/g, '(.*?)') + '$');[m
[32m+[m[32m  if (server.onvhost) server.onvhost(hostname);[m
[32m+[m[32m  return function vhost(req, res, next){[m
[32m+[m[32m    if (!req.headers.host) return next();[m
[32m+[m[32m    var host = req.headers.host.split(':')[0];[m
[32m+[m[32m    if (req.subdomains = regexp.exec(host)) {[m
[32m+[m[32m      req.subdomains = req.subdomains[0].split('.').slice(0, -1);[m
[32m+[m[32m      server.emit("request", req, res);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      next();[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/patch.js b/node_modules/express/node_modules/connect/lib/patch.js[m
[1mnew file mode 100644[m
[1mindex 0000000..a6ff297[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/patch.js[m
[36m@@ -0,0 +1,79 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar http = require('http')[m
[32m+[m[32m  , res = http.OutgoingMessage.prototype;[m
[32m+[m
[32m+[m[32m// original setHeader()[m
[32m+[m
[32m+[m[32mvar setHeader = res.setHeader;[m
[32m+[m
[32m+[m[32m// original _renderHeaders()[m
[32m+[m
[32m+[m[32mvar _renderHeaders = res._renderHeaders;[m
[32m+[m
[32m+[m[32mif (res._hasConnectPatch) return;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Provide a public "header sent" flag[m
[32m+[m[32m * until node does.[m
[32m+[m[32m *[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.__defineGetter__('headerSent', function(){[m
[32m+[m[32m  return this._headerSent;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Set header `field` to `val`, special-casing[m
[32m+[m[32m * the `Set-Cookie` field for multiple support.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} field[m
[32m+[m[32m * @param {String} val[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres.setHeader = function(field, val){[m
[32m+[m[32m  var key = field.toLowerCase()[m
[32m+[m[32m    , prev;[m
[32m+[m
[32m+[m[32m  // special-case Set-Cookie[m
[32m+[m[32m  if (this._headers && 'set-cookie' == key) {[m
[32m+[m[32m    if (prev = this.getHeader(field)) {[m
[32m+[m[32m      val = Array.isArray(prev)[m
[32m+[m[32m        ? prev.concat(val)[m
[32m+[m[32m        : [prev, val];[m
[32m+[m[32m    }[m
[32m+[m[32m  // charset[m
[32m+[m[32m  } else if ('content-type' == key && this.charset) {[m
[32m+[m[32m    val += '; charset=' + this.charset;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return setHeader.call(this, field, val);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Proxy `res.end()` to expose a 'header' event,[m
[32m+[m[32m * allowing arbitrary augmentation before the header[m
[32m+[m[32m * fields are written to the socket.[m
[32m+[m[32m *[m
[32m+[m[32m * NOTE: this _only_ supports node's progressive header[m
[32m+[m[32m * field API aka `res.setHeader()`.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mres._renderHeaders = function(){[m
[32m+[m[32m  this.emit('header');[m
[32m+[m[32m  return _renderHeaders.call(this);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mres._hasConnectPatch = true;[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/directory.html b/node_modules/express/node_modules/connect/lib/public/directory.html[m
[1mnew file mode 100644[m
[1mindex 0000000..15164bb[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/public/directory.html[m
[36m@@ -0,0 +1,75 @@[m
[32m+[m[32m<html>[m
[32m+[m[32m  <head>[m
[32m+[m[32m    <title>listing directory {directory}</title>[m
[32m+[m[32m    <style>{style}</style>[m
[32m+[m[32m    <script>[m
[32m+[m[32m      function $(id){[m
[32m+[m[32m        var el = 'string' == typeof id[m
[32m+[m[32m          ? document.getElementById(id)[m
[32m+[m[32m          : id;[m
[32m+[m
[32m+[m[32m        el.on = function(event, fn){[m
[32m+[m[32m          if ('content loaded' == event) event = 'DOMContentLoaded';[m
[32m+[m[32m          el.addEventListener(event, fn, false);[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        el.all = function(selector){[m
[32m+[m[32m          return $(el.querySelectorAll(selector));[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        el.each = function(fn){[m
[32m+[m[32m          for (var i = 0, len = el.length; i < len; ++i) {[m
[32m+[m[32m            fn($(el[i]), i);[m
[32m+[m[32m          }[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        el.getClasses = function(){[m
[32m+[m[32m          return this.getAttribute('class').split(/\s+/);[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        el.addClass = function(name){[m
[32m+[m[32m          var classes = this.getAttribute('class');[m
[32m+[m[32m          el.setAttribute('class', classes[m
[32m+[m[32m            ? classes + ' ' + name[m
[32m+[m[32m            : name);[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        el.removeClass = function(name){[m
[32m+[m[32m          var classes = this.getClasses().filter(function(curr){[m
[32m+[m[32m            return curr != name;[m
[32m+[m[32m          });[m
[32m+[m[32m          this.setAttribute('class', classes);[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        return el;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      function search() {[m
[32m+[m[32m        var str = $('search').value[m
[32m+[m[32m          , links = $('files').all('a');[m
[32m+[m
[32m+[m[32m        links.each(function(link){[m
[32m+[m[32m          var text = link.textContent;[m
[32m+[m
[32m+[m[32m          if ('..' == text) return;[m
[32m+[m[32m          if (str.length && ~text.indexOf(str)) {[m
[32m+[m[32m            link.addClass('highlight');[m
[32m+[m[32m          } else {[m
[32m+[m[32m            link.removeClass('highlight');[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      $(window).on('content loaded', function(){[m
[32m+[m[32m        $('search').on('keyup', search);[m
[32m+[m[32m      });[m
[32m+[m[32m    </script>[m
[32m+[m[32m  </head>[m
[32m+[m[32m  <body class="directory">[m
[32m+[m[32m    <input id="search" type="text" placeholder="Search" autocomplete="off" />[m
[32m+[m[32m    <div id="wrapper">[m
[32m+[m[32m      <h1>{linked-path}</h1>[m
[32m+[m[32m      {files}[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/error.html b/node_modules/express/node_modules/connect/lib/public/error.html[m
[1mnew file mode 100644[m
[1mindex 0000000..34e0df5[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/public/error.html[m
[36m@@ -0,0 +1,13 @@[m
[32m+[m[32m<html>[m
[32m+[m[32m  <head>[m
[32m+[m[32m    <title>{error}</title>[m
[32m+[m[32m    <style>{style}</style>[m
[32m+[m[32m  </head>[m
[32m+[m[32m  <body>[m
[32m+[m[32m    <div id="wrapper">[m
[32m+[m[32m      <h1>{title}</h1>[m
[32m+[m[32m      <h2><em>500</em> {error}</h2>[m
[32m+[m[32m      <ul id="stacktrace">{stack}</ul>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/favicon.ico b/node_modules/express/node_modules/connect/lib/public/favicon.ico[m
[1mnew file mode 100644[m
[1mindex 0000000..895fc96[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/favicon.ico differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page.png b/node_modules/express/node_modules/connect/lib/public/icons/page.png[m
[1mnew file mode 100755[m
[1mindex 0000000..03ddd79[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_add.png b/node_modules/express/node_modules/connect/lib/public/icons/page_add.png[m
[1mnew file mode 100755[m
[1mindex 0000000..d5bfa07[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_add.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_attach.png b/node_modules/express/node_modules/connect/lib/public/icons/page_attach.png[m
[1mnew file mode 100755[m
[1mindex 0000000..89ee2da[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_attach.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_code.png b/node_modules/express/node_modules/connect/lib/public/icons/page_code.png[m
[1mnew file mode 100755[m
[1mindex 0000000..f7ea904[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_code.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_copy.png b/node_modules/express/node_modules/connect/lib/public/icons/page_copy.png[m
[1mnew file mode 100755[m
[1mindex 0000000..195dc6d[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_copy.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_delete.png b/node_modules/express/node_modules/connect/lib/public/icons/page_delete.png[m
[1mnew file mode 100755[m
[1mindex 0000000..3141467[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_delete.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_edit.png b/node_modules/express/node_modules/connect/lib/public/icons/page_edit.png[m
[1mnew file mode 100755[m
[1mindex 0000000..046811e[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_edit.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_error.png b/node_modules/express/node_modules/connect/lib/public/icons/page_error.png[m
[1mnew file mode 100755[m
[1mindex 0000000..f07f449[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_error.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_excel.png b/node_modules/express/node_modules/connect/lib/public/icons/page_excel.png[m
[1mnew file mode 100755[m
[1mindex 0000000..eb6158e[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_excel.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_find.png b/node_modules/express/node_modules/connect/lib/public/icons/page_find.png[m
[1mnew file mode 100755[m
[1mindex 0000000..2f19388[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_find.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_gear.png b/node_modules/express/node_modules/connect/lib/public/icons/page_gear.png[m
[1mnew file mode 100755[m
[1mindex 0000000..8e83281[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_gear.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_go.png b/node_modules/express/node_modules/connect/lib/public/icons/page_go.png[m
[1mnew file mode 100755[m
[1mindex 0000000..80fe1ed[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_go.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_green.png b/node_modules/express/node_modules/connect/lib/public/icons/page_green.png[m
[1mnew file mode 100755[m
[1mindex 0000000..de8e003[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_green.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_key.png b/node_modules/express/node_modules/connect/lib/public/icons/page_key.png[m
[1mnew file mode 100755[m
[1mindex 0000000..d6626cb[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_key.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_lightning.png b/node_modules/express/node_modules/connect/lib/public/icons/page_lightning.png[m
[1mnew file mode 100755[m
[1mindex 0000000..7e56870[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_lightning.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_link.png b/node_modules/express/node_modules/connect/lib/public/icons/page_link.png[m
[1mnew file mode 100755[m
[1mindex 0000000..312eab0[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_link.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_paintbrush.png b/node_modules/express/node_modules/connect/lib/public/icons/page_paintbrush.png[m
[1mnew file mode 100755[m
[1mindex 0000000..246a2f0[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_paintbrush.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_paste.png b/node_modules/express/node_modules/connect/lib/public/icons/page_paste.png[m
[1mnew file mode 100755[m
[1mindex 0000000..968f073[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_paste.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_red.png b/node_modules/express/node_modules/connect/lib/public/icons/page_red.png[m
[1mnew file mode 100755[m
[1mindex 0000000..0b18247[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_red.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_refresh.png b/node_modules/express/node_modules/connect/lib/public/icons/page_refresh.png[m
[1mnew file mode 100755[m
[1mindex 0000000..cf347c7[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_refresh.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_save.png b/node_modules/express/node_modules/connect/lib/public/icons/page_save.png[m
[1mnew file mode 100755[m
[1mindex 0000000..caea546[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_save.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white.png[m
[1mnew file mode 100755[m
[1mindex 0000000..8b8b1ca[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_acrobat.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_acrobat.png[m
[1mnew file mode 100755[m
[1mindex 0000000..8f8095e[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_acrobat.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_actionscript.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_actionscript.png[m
[1mnew file mode 100755[m
[1mindex 0000000..159b240[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_actionscript.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_add.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_add.png[m
[1mnew file mode 100755[m
[1mindex 0000000..aa23dde[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_add.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_c.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_c.png[m
[1mnew file mode 100755[m
[1mindex 0000000..34a05cc[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_c.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_camera.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_camera.png[m
[1mnew file mode 100755[m
[1mindex 0000000..f501a59[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_camera.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_cd.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_cd.png[m
[1mnew file mode 100755[m
[1mindex 0000000..848bdaf[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_cd.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_code.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_code.png[m
[1mnew file mode 100755[m
[1mindex 0000000..0c76bd1[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_code.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_code_red.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_code_red.png[m
[1mnew file mode 100755[m
[1mindex 0000000..87a6914[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_code_red.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_coldfusion.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_coldfusion.png[m
[1mnew file mode 100755[m
[1mindex 0000000..c66011f[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_coldfusion.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_compressed.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_compressed.png[m
[1mnew file mode 100755[m
[1mindex 0000000..2b6b100[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_compressed.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_copy.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_copy.png[m
[1mnew file mode 100755[m
[1mindex 0000000..a9f31a2[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_copy.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_cplusplus.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_cplusplus.png[m
[1mnew file mode 100755[m
[1mindex 0000000..a87cf84[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_cplusplus.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_csharp.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_csharp.png[m
[1mnew file mode 100755[m
[1mindex 0000000..ffb8fc9[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_csharp.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_cup.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_cup.png[m
[1mnew file mode 100755[m
[1mindex 0000000..0a7d6f4[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_cup.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_database.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_database.png[m
[1mnew file mode 100755[m
[1mindex 0000000..bddba1f[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_database.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_delete.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_delete.png[m
[1mnew file mode 100755[m
[1mindex 0000000..af1ecaf[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_delete.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_dvd.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_dvd.png[m
[1mnew file mode 100755[m
[1mindex 0000000..4cc537a[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_dvd.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_edit.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_edit.png[m
[1mnew file mode 100755[m
[1mindex 0000000..b93e776[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_edit.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_error.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_error.png[m
[1mnew file mode 100755[m
[1mindex 0000000..9fc5a0a[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_error.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_excel.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_excel.png[m
[1mnew file mode 100755[m
[1mindex 0000000..b977d7e[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_excel.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_find.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_find.png[m
[1mnew file mode 100755[m
[1mindex 0000000..5818436[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_find.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_flash.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_flash.png[m
[1mnew file mode 100755[m
[1mindex 0000000..5769120[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_flash.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_freehand.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_freehand.png[m
[1mnew file mode 100755[m
[1mindex 0000000..8d719df[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_freehand.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_gear.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_gear.png[m
[1mnew file mode 100755[m
[1mindex 0000000..106f5aa[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_gear.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_get.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_get.png[m
[1mnew file mode 100755[m
[1mindex 0000000..e4a1ecb[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_get.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_go.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_go.png[m
[1mnew file mode 100755[m
[1mindex 0000000..7e62a92[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_go.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_h.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_h.png[m
[1mnew file mode 100755[m
[1mindex 0000000..e902abb[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_h.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_horizontal.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_horizontal.png[m
[1mnew file mode 100755[m
[1mindex 0000000..1d2d0a4[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_horizontal.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_key.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_key.png[m
[1mnew file mode 100755[m
[1mindex 0000000..d616484[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_key.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_lightning.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_lightning.png[m
[1mnew file mode 100755[m
[1mindex 0000000..7215d1e[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_lightning.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_link.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_link.png[m
[1mnew file mode 100755[m
[1mindex 0000000..bf7bd1c[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_link.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_magnify.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_magnify.png[m
[1mnew file mode 100755[m
[1mindex 0000000..f6b74cc[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_magnify.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_medal.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_medal.png[m
[1mnew file mode 100755[m
[1mindex 0000000..d3fffb6[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_medal.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_office.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_office.png[m
[1mnew file mode 100755[m
[1mindex 0000000..a65bcb3[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_office.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_paint.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_paint.png[m
[1mnew file mode 100755[m
[1mindex 0000000..23a37b8[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_paint.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_paintbrush.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_paintbrush.png[m
[1mnew file mode 100755[m
[1mindex 0000000..f907e44[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_paintbrush.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_paste.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_paste.png[m
[1mnew file mode 100755[m
[1mindex 0000000..5b2cbb3[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_paste.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_php.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_php.png[m
[1mnew file mode 100755[m
[1mindex 0000000..7868a25[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_php.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_picture.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_picture.png[m
[1mnew file mode 100755[m
[1mindex 0000000..134b669[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_picture.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_powerpoint.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_powerpoint.png[m
[1mnew file mode 100755[m
[1mindex 0000000..c4eff03[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_powerpoint.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_put.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_put.png[m
[1mnew file mode 100755[m
[1mindex 0000000..884ffd6[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_put.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_ruby.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_ruby.png[m
[1mnew file mode 100755[m
[1mindex 0000000..f59b7c4[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_ruby.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_stack.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_stack.png[m
[1mnew file mode 100755[m
[1mindex 0000000..44084ad[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_stack.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_star.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_star.png[m
[1mnew file mode 100755[m
[1mindex 0000000..3a1441c[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_star.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_swoosh.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_swoosh.png[m
[1mnew file mode 100755[m
[1mindex 0000000..e770829[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_swoosh.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_text.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_text.png[m
[1mnew file mode 100755[m
[1mindex 0000000..813f712[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_text.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_text_width.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_text_width.png[m
[1mnew file mode 100755[m
[1mindex 0000000..d9cf132[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_text_width.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_tux.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_tux.png[m
[1mnew file mode 100755[m
[1mindex 0000000..52699bf[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_tux.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_vector.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_vector.png[m
[1mnew file mode 100755[m
[1mindex 0000000..4a05955[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_vector.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_visualstudio.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_visualstudio.png[m
[1mnew file mode 100755[m
[1mindex 0000000..a0a433d[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_visualstudio.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_width.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_width.png[m
[1mnew file mode 100755[m
[1mindex 0000000..1eb8809[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_width.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_word.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_word.png[m
[1mnew file mode 100755[m
[1mindex 0000000..ae8ecbf[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_word.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_world.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_world.png[m
[1mnew file mode 100755[m
[1mindex 0000000..6ed2490[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_world.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_wrench.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_wrench.png[m
[1mnew file mode 100755[m
[1mindex 0000000..fecadd0[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_wrench.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_white_zip.png b/node_modules/express/node_modules/connect/lib/public/icons/page_white_zip.png[m
[1mnew file mode 100755[m
[1mindex 0000000..fd4bbcc[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_white_zip.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_word.png b/node_modules/express/node_modules/connect/lib/public/icons/page_word.png[m
[1mnew file mode 100755[m
[1mindex 0000000..834cdfa[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_word.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/icons/page_world.png b/node_modules/express/node_modules/connect/lib/public/icons/page_world.png[m
[1mnew file mode 100755[m
[1mindex 0000000..b8895dd[m
Binary files /dev/null and b/node_modules/express/node_modules/connect/lib/public/icons/page_world.png differ
[1mdiff --git a/node_modules/express/node_modules/connect/lib/public/style.css b/node_modules/express/node_modules/connect/lib/public/style.css[m
[1mnew file mode 100644[m
[1mindex 0000000..32b6507[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/public/style.css[m
[36m@@ -0,0 +1,141 @@[m
[32m+[m[32mbody {[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  padding: 80px 100px;[m
[32m+[m[32m  font: 13px "Helvetica Neue", "Lucida Grande", "Arial";[m
[32m+[m[32m  background: #ECE9E9 -webkit-gradient(linear, 0% 0%, 0% 100%, from(#fff), to(#ECE9E9));[m
[32m+[m[32m  background: #ECE9E9 -moz-linear-gradient(top, #fff, #ECE9E9);[m
[32m+[m[32m  background-repeat: no-repeat;[m
[32m+[m[32m  color: #555;[m
[32m+[m[32m  -webkit-font-smoothing: antialiased;[m
[32m+[m[32m}[m
[32m+[m[32mh1, h2, h3 {[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  font-size: 22px;[m
[32m+[m[32m  color: #343434;[m
[32m+[m[32m}[m
[32m+[m[32mh1 em, h2 em {[m
[32m+[m[32m  padding: 0 5px;[m
[32m+[m[32m  font-weight: normal;[m
[32m+[m[32m}[m
[32m+[m[32mh1 {[m
[32m+[m[32m  font-size: 60px;[m
[32m+[m[32m}[m
[32m+[m[32mh2 {[m
[32m+[m	[32mmargin-top: 10px;[m
[32m+[m[32m}[m
[32m+[m[32mh3 {[m
[32m+[m[32m  margin: 5px 0 10px 0;[m
[32m+[m[32m  padding-bottom: 5px;[m
[32m+[m[32m  border-bottom: 1px solid #eee;[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m}[m
[32m+[m[32mul {[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  padding: 0;[m
[32m+[m[32m}[m
[32m+[m[32mul li {[m
[32m+[m[32m  margin: 5px 0;[m
[32m+[m[32m  padding: 3px 8px;[m
[32m+[m[32m  list-style: none;[m
[32m+[m[32m}[m
[32m+[m[32mul li:hover {[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  color: #2e2e2e;[m
[32m+[m[32m}[m
[32m+[m[32mul li .path {[m
[32m+[m[32m  padding-left: 5px;[m
[32m+[m[32m  font-weight: bold;[m
[32m+[m[32m}[m
[32m+[m[32mul li .line {[m
[32m+[m[32m  padding-right: 5px;[m
[32m+[m[32m  font-style: italic;[m
[32m+[m[32m}[m
[32m+[m[32mul li:first-child .path {[m
[32m+[m[32m  padding-left: 0;[m
[32m+[m[32m}[m
[32m+[m[32mp {[m
[32m+[m[32m  line-height: 1.5;[m
[32m+[m[32m}[m
[32m+[m[32ma {[m
[32m+[m[32m  color: #555;[m
[32m+[m[32m  text-decoration: none;[m
[32m+[m[32m}[m
[32m+[m[32ma:hover {[m
[32m+[m[32m  color: #303030;[m
[32m+[m[32m}[m
[32m+[m[32m#stacktrace {[m
[32m+[m	[32mmargin-top: 15px;[m
[32m+[m[32m}[m
[32m+[m[32m.directory h1 {[m
[32m+[m[32m  margin-bottom: 15px;[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m}[m
[32m+[m[32mul#files {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 500px;[m
[32m+[m[32m}[m
[32m+[m[32mul#files li {[m
[32m+[m[32m  padding: 0;[m
[32m+[m[32m}[m
[32m+[m[32mul#files li img {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  top: 5px;[m
[32m+[m[32m  left: 5px;[m
[32m+[m[32m}[m
[32m+[m[32mul#files li a {[m
[32m+[m[32m   position: relative;[m
[32m+[m[32m  display: block;[m
[32m+[m[32m  margin: 1px;[m
[32m+[m[32m  width: 30%;[m
[32m+[m[32m  height: 25px;[m
[32m+[m[32m  line-height: 25px;[m
[32m+[m[32m  text-indent: 8px;[m
[32m+[m[32m  float: left;[m
[32m+[m[32m  border: 1px solid transparent;[m
[32m+[m[32m  -webkit-border-radius: 5px;[m
[32m+[m[32m  -moz-border-radius: 5px;[m
[32m+[m[32m  border-radius: 5px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  text-overflow: ellipsis;[m
[32m+[m[32m}[m
[32m+[m[32mul#files li a.icon {[m
[32m+[m[32m  text-indent: 25px;[m
[32m+[m[32m}[m
[32m+[m[32mul#files li a:focus,[m
[32m+[m[32mul#files li a:hover {[m
[32m+[m[32m  outline: none;[m
[32m+[m[32m  background: rgba(255,255,255,0.65);[m
[32m+[m[32m  border: 1px solid #ececec;[m
[32m+[m[32m}[m
[32m+[m[32mul#files li a.highlight {[m
[32m+[m[32m  -webkit-transition: background .4s ease-in-out;[m
[32m+[m[32m  background: #ffff4f;[m
[32m+[m[32m  border-color: #E9DC51;[m
[32m+[m[32m}[m
[32m+[m[32m#search {[m
[32m+[m[32m  display: block;[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  top: 20px;[m
[32m+[m[32m  right: 20px;[m
[32m+[m[32m  width: 90px;[m
[32m+[m[32m  -webkit-transition: width ease 0.2s, opacity ease 0.4s;[m
[32m+[m[32m  -moz-transition: width ease 0.2s, opacity ease 0.4s;[m
[32m+[m[32m  -webkit-border-radius: 32px;[m
[32m+[m[32m  -moz-border-radius: 32px;[m
[32m+[m[32m  -webkit-box-shadow: inset 0px 0px 3px rgba(0, 0, 0, 0.25), inset 0px 1px 3px rgba(0, 0, 0, 0.7), 0px 1px 0px rgba(255, 255, 255, 0.03);[m
[32m+[m[32m  -moz-box-shadow: inset 0px 0px 3px rgba(0, 0, 0, 0.25), inset 0px 1px 3px rgba(0, 0, 0, 0.7), 0px 1px 0px rgba(255, 255, 255, 0.03);[m
[32m+[m[32m  -webkit-font-smoothing: antialiased;[m
[32m+[m[32m  text-align: left;[m
[32m+[m[32m  font: 13px "Helvetica Neue", Arial, sans-serif;[m
[32m+[m[32m  padding: 4px 10px;[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  background: transparent;[m
[32m+[m[32m  margin-bottom: 0;[m
[32m+[m[32m  outline: none;[m
[32m+[m[32m  opacity: 0.7;[m
[32m+[m[32m  color: #888;[m
[32m+[m[32m}[m
[32m+[m[32m#search:focus {[m
[32m+[m[32m  width: 120px;[m
[32m+[m[32m  opacity: 1.0;[m[41m [m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/lib/utils.js b/node_modules/express/node_modules/connect/lib/utils.js[m
[1mnew file mode 100644[m
[1mindex 0000000..d0bc172[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/lib/utils.js[m
[36m@@ -0,0 +1,451 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * Connect - utils[m
[32m+[m[32m * Copyright(c) 2010 Sencha Inc.[m
[32m+[m[32m * Copyright(c) 2011 TJ Holowaychuk[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar crypto = require('crypto')[m
[32m+[m[32m  , Path = require('path')[m
[32m+[m[32m  , fs = require('fs');[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Flatten the given `arr`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Array} arr[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.flatten = function(arr, ret){[m
[32m+[m[32m  var ret = ret || [][m
[32m+[m[32m    , len = arr.length;[m
[32m+[m[32m  for (var i = 0; i < len; ++i) {[m
[32m+[m[32m    if (Array.isArray(arr[i])) {[m
[32m+[m[32m      exports.flatten(arr[i], ret);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      ret.push(arr[i]);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return ret;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return md5 hash of the given string and optional encoding,[m
[32m+[m[32m * defaulting to hex.[m
[32m+[m[32m *[m
[32m+[m[32m *     utils.md5('wahoo');[m
[32m+[m[32m *     // => "e493298061761236c96b02ea6aa8a2ad"[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m * @param {String} encoding[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.md5 = function(str, encoding){[m
[32m+[m[32m  return crypto[m
[32m+[m[32m    .createHash('md5')[m
[32m+[m[32m    .update(str)[m
[32m+[m[32m    .digest(encoding || 'hex');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Merge object b with object a.[m
[32m+[m[32m *[m
[32m+[m[32m *     var a = { foo: 'bar' }[m
[32m+[m[32m *       , b = { bar: 'baz' };[m
[32m+[m[32m *[m[41m     [m
[32m+[m[32m *     utils.merge(a, b);[m
[32m+[m[32m *     // => { foo: 'bar', bar: 'baz' }[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} a[m
[32m+[m[32m * @param {Object} b[m
[32m+[m[32m * @return {Object}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.merge = function(a, b){[m
[32m+[m[32m  if (a && b) {[m
[32m+[m[32m    for (var key in b) {[m
[32m+[m[32m      a[key] = b[key];[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return a;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Escape the given string of `html`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} html[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.escape = function(html){[m
[32m+[m[32m  return String(html)[m
[32m+[m[32m    .replace(/&(?!\w+;)/g, '&amp;')[m
[32m+[m[32m    .replace(/</g, '&lt;')[m
[32m+[m[32m    .replace(/>/g, '&gt;')[m
[32m+[m[32m    .replace(/"/g, '&quot;');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return a unique identifier with the given `len`.[m
[32m+[m[32m *[m
[32m+[m[32m *     utils.uid(10);[m
[32m+[m[32m *     // => "FDaS435D2z"[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Number} len[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.uid = function(len) {[m
[32m+[m[32m  var buf = [][m
[32m+[m[32m    , chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'[m
[32m+[m[32m    , charlen = chars.length;[m
[32m+[m
[32m+[m[32m  for (var i = 0; i < len; ++i) {[m
[32m+[m[32m    buf.push(chars[getRandomInt(0, charlen - 1)]);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return buf.join('');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse the given cookie string into an object.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m * @return {Object}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.parseCookie = function(str){[m
[32m+[m[32m  var obj = {}[m
[32m+[m[32m    , pairs = str.split(/[;,] */);[m
[32m+[m[32m  for (var i = 0, len = pairs.length; i < len; ++i) {[m
[32m+[m[32m    var pair = pairs[i][m
[32m+[m[32m      , eqlIndex = pair.indexOf('=')[m
[32m+[m[32m      , key = pair.substr(0, eqlIndex).trim().toLowerCase()[m
[32m+[m[32m      , val = pair.substr(++eqlIndex, pair.length).trim();[m
[32m+[m
[32m+[m[32m    // quoted values[m
[32m+[m[32m    if ('"' == val[0]) val = val.slice(1, -1);[m
[32m+[m
[32m+[m[32m    // only assign once[m
[32m+[m[32m    if (undefined == obj[key]) {[m
[32m+[m[32m      val = val.replace(/\+/g, ' ');[m
[32m+[m[32m      try {[m
[32m+[m[32m        obj[key] = decodeURIComponent(val);[m
[32m+[m[32m      } catch (err) {[m
[32m+[m[32m        if (err instanceof URIError) {[m
[32m+[m[32m          obj[key] = val;[m
[32m+[m[32m        } else {[m
[32m+[m[32m          throw err;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return obj;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Serialize the given object into a cookie string.[m
[32m+[m[32m *[m
[32m+[m[32m *      utils.serializeCookie('name', 'tj', { httpOnly: true })[m
[32m+[m[32m *      // => "name=tj; httpOnly"[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} name[m
[32m+[m[32m * @param {String} val[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.serializeCookie = function(name, val, obj){[m
[32m+[m[32m  var pairs = [name + '=' + encodeURIComponent(val)][m
[32m+[m[32m    , obj = obj || {};[m
[32m+[m
[32m+[m[32m  if (obj.domain) pairs.push('domain=' + obj.domain);[m
[32m+[m[32m  if (obj.path) pairs.push('path=' + obj.path);[m
[32m+[m[32m  if (obj.expires) pairs.push('expires=' + obj.expires.toUTCString());[m
[32m+[m[32m  if (obj.httpOnly) pairs.push('httpOnly');[m
[32m+[m[32m  if (obj.secure) pairs.push('secure');[m
[32m+[m
[32m+[m[32m  return pairs.join('; ');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Pause `data` and `end` events on the given `obj`.[m
[32m+[m[32m * Middleware performing async tasks _should_ utilize[m
[32m+[m[32m * this utility (or similar), to re-emit data once[m
[32m+[m[32m * the async operation has completed, otherwise these[m
[32m+[m[32m * events may be lost.[m
[32m+[m[32m *[m
[32m+[m[32m *      var pause = utils.pause(req);[m
[32m+[m[32m *      fs.readFile(path, function(){[m
[32m+[m[32m *         next();[m
[32m+[m[32m *         pause.resume();[m
[32m+[m[32m *      });[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @return {Object}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.pause = function(obj){[m
[32m+[m[32m  var onData[m
[32m+[m[32m    , onEnd[m
[32m+[m[32m    , events = [];[m
[32m+[m
[32m+[m[32m  // buffer data[m
[32m+[m[32m  obj.on('data', onData = function(data, encoding){[m
[32m+[m[32m    events.push(['data', data, encoding]);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // buffer end[m
[32m+[m[32m  obj.on('end', onEnd = function(data, encoding){[m
[32m+[m[32m    events.push(['end', data, encoding]);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  return {[m
[32m+[m[32m    end: function(){[m
[32m+[m[32m      obj.removeListener('data', onData);[m
[32m+[m[32m      obj.removeListener('end', onEnd);[m
[32m+[m[32m    },[m
[32m+[m[32m    resume: function(){[m
[32m+[m[32m      this.end();[m
[32m+[m[32m      for (var i = 0, len = events.length; i < len; ++i) {[m
[32m+[m[32m        obj.emit.apply(obj, events[i]);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check `req` and `res` to see if it has been modified.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingMessage} req[m
[32m+[m[32m * @param {ServerResponse} res[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.modified = function(req, res, headers) {[m
[32m+[m[32m  var headers = headers || res._headers || {}[m
[32m+[m[32m    , modifiedSince = req.headers['if-modified-since'][m
[32m+[m[32m    , lastModified = headers['last-modified'][m
[32m+[m[32m    , noneMatch = req.headers['if-none-match'][m
[32m+[m[32m    , etag = headers['etag'];[m
[32m+[m
[32m+[m[32m  if (noneMatch) noneMatch = noneMatch.split(/ *, */);[m
[32m+[m
[32m+[m[32m  // check If-None-Match[m
[32m+[m[32m  if (noneMatch && etag && ~noneMatch.indexOf(etag)) {[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // check If-Modified-Since[m
[32m+[m[32m  if (modifiedSince && lastModified) {[m
[32m+[m[32m    modifiedSince = new Date(modifiedSince);[m
[32m+[m[32m    lastModified = new Date(lastModified);[m
[32m+[m[32m    // Ignore invalid dates[m
[32m+[m[32m    if (!isNaN(modifiedSince.getTime())) {[m
[32m+[m[32m      if (lastModified <= modifiedSince) return false;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  return true;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Strip `Content-*` headers from `res`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {ServerResponse} res[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.removeContentHeaders = function(res){[m
[32m+[m[32m  Object.keys(res._headers).forEach(function(field){[m
[32m+[m[32m    if (0 == field.indexOf('content')) {[m
[32m+[m[32m      res.removeHeader(field);[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if `req` is a conditional GET request.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {IncomingMessage} req[m
[32m+[m[32m * @return {Boolean}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.conditionalGET = function(req) {[m
[32m+[m[32m  return req.headers['if-modified-since'][m
[32m+[m[32m    || req.headers['if-none-match'];[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond with 403 "Forbidden".[m
[32m+[m[32m *[m
[32m+[m[32m * @param {ServerResponse} res[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.forbidden = function(res) {[m
[32m+[m[32m  var body = 'Forbidden';[m
[32m+[m[32m  res.setHeader('Content-Type', 'text/plain');[m
[32m+[m[32m  res.setHeader('Content-Length', body.length);[m
[32m+[m[32m  res.statusCode = 403;[m
[32m+[m[32m  res.end(body);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond with 401 "Unauthorized".[m
[32m+[m[32m *[m
[32m+[m[32m * @param {ServerResponse} res[m
[32m+[m[32m * @param {String} realm[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.unauthorized = function(res, realm) {[m
[32m+[m[32m  res.statusCode = 401;[m
[32m+[m[32m  res.setHeader('WWW-Authenticate', 'Basic realm="' + realm + '"');[m
[32m+[m[32m  res.end('Unauthorized');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond with 400 "Bad Request".[m
[32m+[m[32m *[m
[32m+[m[32m * @param {ServerResponse} res[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.badRequest = function(res) {[m
[32m+[m[32m  res.statusCode = 400;[m
[32m+[m[32m  res.end('Bad Request');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Respond with 304 "Not Modified".[m
[32m+[m[32m *[m
[32m+[m[32m * @param {ServerResponse} res[m
[32m+[m[32m * @param {Object} headers[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.notModified = function(res) {[m
[32m+[m[32m  exports.removeContentHeaders(res);[m
[32m+[m[32m  res.statusCode = 304;[m
[32m+[m[32m  res.end();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Return an ETag in the form of `"<size>-<mtime>"`[m
[32m+[m[32m * from the given `stat`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} stat[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.etag = function(stat) {[m
[32m+[m[32m  return '"' + stat.size + '-' + Number(stat.mtime) + '"';[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse "Range" header `str` relative to the given file `size`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Number} size[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.parseRange = function(size, str){[m
[32m+[m[32m  var valid = true;[m
[32m+[m[32m  var arr = str.substr(6).split(',').map(function(range){[m
[32m+[m[32m    var range = range.split('-')[m
[32m+[m[32m      , start = parseInt(range[0], 10)[m
[32m+[m[32m      , end = parseInt(range[1], 10);[m
[32m+[m
[32m+[m[32m    // -500[m
[32m+[m[32m    if (isNaN(start)) {[m
[32m+[m[32m      start = size - end;[m
[32m+[m[32m      end = size - 1;[m
[32m+[m[32m    // 500-[m
[32m+[m[32m    } else if (isNaN(end)) {[m
[32m+[m[32m      end = size - 1;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // Invalid[m
[32m+[m[32m    if (isNaN(start) || isNaN(end) || start > end) valid = false;[m
[32m+[m
[32m+[m[32m    return { start: start, end: end };[m
[32m+[m[32m  });[m
[32m+[m[32m  return valid ? arr : undefined;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse the given Cache-Control `str`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m * @return {Object}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.parseCacheControl = function(str){[m
[32m+[m[32m  var directives = str.split(',')[m
[32m+[m[32m    , obj = {};[m
[32m+[m
[32m+[m[32m  for(var i = 0, len = directives.length; i < len; i++) {[m
[32m+[m[32m    var parts = directives[i].split('=')[m
[32m+[m[32m      , key = parts.shift().trim()[m
[32m+[m[32m      , val = parseInt(parts.shift(), 10);[m
[32m+[m
[32m+[m[32m    obj[key] = isNaN(val) ? true : val;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return obj;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Convert array-like object to an `Array`.[m
[32m+[m[32m *[m
[32m+[m[32m * node-bench measured "16.5 times faster than Array.prototype.slice.call()"[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @return {Array}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar toArray = exports.toArray = function(obj){[m
[32m+[m[32m  var len = obj.length[m
[32m+[m[32m    , arr = new Array(len);[m
[32m+[m[32m  for (var i = 0; i < len; ++i) {[m
[32m+[m[32m    arr[i] = obj[i];[m
[32m+[m[32m  }[m
[32m+[m[32m  return arr;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Retrun a random int, used by `utils.uid()`[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Number} min[m
[32m+[m[32m * @param {Number} max[m
[32m+[m[32m * @return {Number}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction getRandomInt(min, max) {[m
[32m+[m[32m  return Math.floor(Math.random() * (max - min + 1)) + min;[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/.npmignore b/node_modules/express/node_modules/connect/node_modules/formidable/.npmignore[m
[1mnew file mode 100644[m
[1mindex 0000000..4fbabb3[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/.npmignore[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m/test/tmp/[m
[32m+[m[32m*.upload[m
[32m+[m[32m*.un~[m
[32m+[m[32m*.http[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/.travis.yml b/node_modules/express/node_modules/connect/node_modules/formidable/.travis.yml[m
[1mnew file mode 100644[m
[1mindex 0000000..f1d0f13[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/.travis.yml[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32mlanguage: node_js[m
[32m+[m[32mnode_js:[m
[32m+[m[32m  - 0.4[m
[32m+[m[32m  - 0.6[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/Makefile b/node_modules/express/node_modules/connect/node_modules/formidable/Makefile[m
[1mnew file mode 100644[m
[1mindex 0000000..8945872[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/Makefile[m
[36m@@ -0,0 +1,14 @@[m
[32m+[m[32mSHELL := /bin/bash[m
[32m+[m
[32m+[m[32mtest:[m
[32m+[m	[32m@./test/run.js[m
[32m+[m
[32m+[m[32mbuild: npm test[m
[32m+[m
[32m+[m[32mnpm:[m
[32m+[m	[32mnpm install .[m
[32m+[m
[32m+[m[32mclean:[m
[32m+[m	[32mrm test/tmp/*[m
[32m+[m
[32m+[m[32m.PHONY: test clean build[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/Readme.md b/node_modules/express/node_modules/connect/node_modules/formidable/Readme.md[m
[1mnew file mode 100644[m
[1mindex 0000000..a5ca104[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/Readme.md[m
[36m@@ -0,0 +1,311 @@[m
[32m+[m[32m# Formidable[m
[32m+[m
[32m+[m[32m[![Build Status](https://secure.travis-ci.org/felixge/node-formidable.png?branch=master)](http://travis-ci.org/felixge/node-formidable)[m
[32m+[m
[32m+[m[32m## Purpose[m
[32m+[m
[32m+[m[32mA node.js module for parsing form data, especially file uploads.[m
[32m+[m
[32m+[m[32m## Current status[m
[32m+[m
[32m+[m[32mThis module was developed for [Transloadit](http://transloadit.com/), a service focused on uploading[m
[32m+[m[32mand encoding images and videos. It has been battle-tested against hundreds of GB of file uploads from[m
[32m+[m[32ma large variety of clients and is considered production-ready.[m
[32m+[m
[32m+[m[32m## Features[m
[32m+[m
[32m+[m[32m* Fast (~500mb/sec), non-buffering multipart parser[m
[32m+[m[32m* Automatically writing file uploads to disk[m
[32m+[m[32m* Low memory footprint[m
[32m+[m[32m* Graceful error handling[m
[32m+[m[32m* Very high test coverage[m
[32m+[m
[32m+[m[32m## Changelog[m
[32m+[m
[32m+[m[32m### v1.0.9[m
[32m+[m
[32m+[m[32m* Emit progress when content length header parsed (Tim Koschützki)[m
[32m+[m[32m* Fix Readme syntax due to GitHub changes (goob)[m
[32m+[m[32m* Replace references to old 'sys' module in Readme with 'util' (Peter Sugihara)[m
[32m+[m
[32m+[m[32m### v1.0.8[m
[32m+[m
[32m+[m[32m* Strip potentially unsafe characters when using `keepExtensions: true`.[m
[32m+[m[32m* Switch to utest / urun for testing[m
[32m+[m[32m* Add travis build[m
[32m+[m
[32m+[m[32m### v1.0.7[m
[32m+[m
[32m+[m[32m* Remove file from package that was causing problems when installing on windows. (#102)[m
[32m+[m[32m* Fix typos in Readme (Jason Davies).[m
[32m+[m
[32m+[m[32m### v1.0.6[m
[32m+[m
[32m+[m[32m* Do not default to the default to the field name for file uploads where[m
[32m+[m[32m  filename="".[m
[32m+[m
[32m+[m[32m### v1.0.5[m
[32m+[m
[32m+[m[32m* Support filename="" in multipart parts[m
[32m+[m[32m* Explain unexpected end() errors in parser better[m
[32m+[m
[32m+[m[32m**Note:** Starting with this version, formidable emits 'file' events for empty[m
[32m+[m[32mfile input fields. Previously those were incorrectly emitted as regular file[m
[32m+[m[32minput fields with value = "".[m
[32m+[m
[32m+[m[32m### v1.0.4[m
[32m+[m
[32m+[m[32m* Detect a good default tmp directory regardless of platform. (#88)[m
[32m+[m
[32m+[m[32m### v1.0.3[m
[32m+[m
[32m+[m[32m* Fix problems with utf8 characters (#84) / semicolons in filenames (#58)[m
[32m+[m[32m* Small performance improvements[m
[32m+[m[32m* New test suite and fixture system[m
[32m+[m
[32m+[m[32m### v1.0.2[m
[32m+[m
[32m+[m[32m* Exclude node\_modules folder from git[m
[32m+[m[32m* Implement new `'aborted'` event[m
[32m+[m[32m* Fix files in example folder to work with recent node versions[m
[32m+[m[32m* Make gently a devDependency[m
[32m+[m
[32m+[m[32m[See Commits](https://github.com/felixge/node-formidable/compare/v1.0.1...v1.0.2)[m
[32m+[m
[32m+[m[32m### v1.0.1[m
[32m+[m
[32m+[m[32m* Fix package.json to refer to proper main directory. (#68, Dean Landolt)[m
[32m+[m
[32m+[m[32m[See Commits](https://github.com/felixge/node-formidable/compare/v1.0.0...v1.0.1)[m
[32m+[m
[32m+[m[32m### v1.0.0[m
[32m+[m
[32m+[m[32m* Add support for multipart boundaries that are quoted strings. (Jeff Craig)[m
[32m+[m
[32m+[m[32mThis marks the beginning of development on version 2.0 which will include[m
[32m+[m[32mseveral architectural improvements.[m
[32m+[m
[32m+[m[32m[See Commits](https://github.com/felixge/node-formidable/compare/v0.9.11...v1.0.0)[m
[32m+[m
[32m+[m[32m### v0.9.11[m
[32m+[m
[32m+[m[32m* Emit `'progress'` event when receiving data, regardless of parsing it. (Tim Koschützki)[m
[32m+[m[32m* Use [W3C FileAPI Draft](http://dev.w3.org/2006/webapi/FileAPI/) properties for File class[m
[32m+[m
[32m+[m[32m**Important:** The old property names of the File class will be removed in a[m
[32m+[m[32mfuture release.[m
[32m+[m
[32m+[m[32m[See Commits](https://github.com/felixge/node-formidable/compare/v0.9.10...v0.9.11)[m
[32m+[m
[32m+[m[32m### Older releases[m
[32m+[m
[32m+[m[32mThese releases were done before starting to maintain the above Changelog:[m
[32m+[m
[32m+[m[32m* [v0.9.10](https://github.com/felixge/node-formidable/compare/v0.9.9...v0.9.10)[m
[32m+[m[32m* [v0.9.9](https://github.com/felixge/node-formidable/compare/v0.9.8...v0.9.9)[m
[32m+[m[32m* [v0.9.8](https://github.com/felixge/node-formidable/compare/v0.9.7...v0.9.8)[m
[32m+[m[32m* [v0.9.7](https://github.com/felixge/node-formidable/compare/v0.9.6...v0.9.7)[m
[32m+[m[32m* [v0.9.6](https://github.com/felixge/node-formidable/compare/v0.9.5...v0.9.6)[m
[32m+[m[32m* [v0.9.5](https://github.com/felixge/node-formidable/compare/v0.9.4...v0.9.5)[m
[32m+[m[32m* [v0.9.4](https://github.com/felixge/node-formidable/compare/v0.9.3...v0.9.4)[m
[32m+[m[32m* [v0.9.3](https://github.com/felixge/node-formidable/compare/v0.9.2...v0.9.3)[m
[32m+[m[32m* [v0.9.2](https://github.com/felixge/node-formidable/compare/v0.9.1...v0.9.2)[m
[32m+[m[32m* [v0.9.1](https://github.com/felixge/node-formidable/compare/v0.9.0...v0.9.1)[m
[32m+[m[32m* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[32m+[m[32m* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[32m+[m[32m* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[32m+[m[32m* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[32m+[m[32m* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[32m+[m[32m* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[32m+[m[32m* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[32m+[m[32m* [v0.9.0](https://github.com/felixge/node-formidable/compare/v0.8.0...v0.9.0)[m
[32m+[m[32m* [v0.1.0](https://github.com/felixge/node-formidable/commits/v0.1.0)[m
[32m+[m
[32m+[m[32m## Installation[m
[32m+[m
[32m+[m[32mVia [npm](http://github.com/isaacs/npm):[m
[32m+[m
[32m+[m[32m    npm install formidable@latest[m
[32m+[m
[32m+[m[32mManually:[m
[32m+[m
[32m+[m[32m    git clone git://github.com/felixge/node-formidable.git formidable[m
[32m+[m[32m    vim my.js[m
[32m+[m[32m    # var formidable = require('./formidable');[m
[32m+[m
[32m+[m[32mNote: Formidable requires [gently](http://github.com/felixge/node-gently) to run the unit tests, but you won't need it for just using the library.[m
[32m+[m
[32m+[m[32m## Example[m
[32m+[m
[32m+[m[32mParse an incoming file upload.[m
[32m+[m
[32m+[m[32m    var formidable = require('formidable'),[m
[32m+[m[32m        http = require('http'),[m
[32m+[m
[32m+[m[32m        util = require('util');[m
[32m+[m
[32m+[m[32m    http.createServer(function(req, res) {[m
[32m+[m[32m      if (req.url == '/upload' && req.method.toLowerCase() == 'post') {[m
[32m+[m[32m        // parse a file upload[m
[32m+[m[32m        var form = new formidable.IncomingForm();[m
[32m+[m[32m        form.parse(req, function(err, fields, files) {[m
[32m+[m[32m          res.writeHead(200, {'content-type': 'text/plain'});[m
[32m+[m[32m          res.write('received upload:\n\n');[m
[32m+[m[32m          res.end(util.inspect({fields: fields, files: files}));[m
[32m+[m[32m        });[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      // show a file upload form[m
[32m+[m[32m      res.writeHead(200, {'content-type': 'text/html'});[m
[32m+[m[32m      res.end([m
[32m+[m[32m        '<form action="/upload" enctype="multipart/form-data" method="post">'+[m
[32m+[m[32m        '<input type="text" name="title"><br>'+[m
[32m+[m[32m        '<input type="file" name="upload" multiple="multiple"><br>'+[m
[32m+[m[32m        '<input type="submit" value="Upload">'+[m
[32m+[m[32m        '</form>'[m
[32m+[m[32m      );[m
[32m+[m[32m    }).listen(80);[m
[32m+[m
[32m+[m[32m## API[m
[32m+[m
[32m+[m[32m### formidable.IncomingForm[m
[32m+[m
[32m+[m[32m__new formidable.IncomingForm()__[m
[32m+[m
[32m+[m[32mCreates a new incoming form.[m
[32m+[m
[32m+[m[32m__incomingForm.encoding = 'utf-8'__[m
[32m+[m
[32m+[m[32mThe encoding to use for incoming form fields.[m
[32m+[m
[32m+[m[32m__incomingForm.uploadDir = process.env.TMP || '/tmp' || process.cwd()__[m
[32m+[m
[32m+[m[32mThe directory for placing file uploads in. You can move them later on using[m
[32m+[m[32m`fs.rename()`. The default directory is picked at module load time depending on[m
[32m+[m[32mthe first existing directory from those listed above.[m
[32m+[m
[32m+[m[32m__incomingForm.keepExtensions = false__[m
[32m+[m
[32m+[m[32mIf you want the files written to `incomingForm.uploadDir` to include the extensions of the original files, set this property to `true`.[m
[32m+[m
[32m+[m[32m__incomingForm.type__[m
[32m+[m
[32m+[m[32mEither 'multipart' or 'urlencoded' depending on the incoming request.[m
[32m+[m
[32m+[m[32m__incomingForm.maxFieldsSize = 2 * 1024 * 1024__[m
[32m+[m
[32m+[m[32mLimits the amount of memory a field (not file) can allocate in bytes.[m
[32m+[m[32mIf this value is exceeded, an `'error'` event is emitted. The default[m
[32m+[m[32msize is 2MB.[m
[32m+[m
[32m+[m[32m__incomingForm.hash = false__[m
[32m+[m
[32m+[m[32mIf you want checksums calculated for incoming files, set this to either `'sha1'` or `'md5'`.[m
[32m+[m
[32m+[m[32m__incomingForm.bytesReceived__[m
[32m+[m
[32m+[m[32mThe amount of bytes received for this form so far.[m
[32m+[m
[32m+[m[32m__incomingForm.bytesExpected__[m
[32m+[m
[32m+[m[32mThe expected number of bytes in this form.[m
[32m+[m
[32m+[m[32m__incomingForm.parse(request, [cb])__[m
[32m+[m
[32m+[m[32mParses an incoming node.js `request` containing form data. If `cb` is provided, all fields an files are collected and passed to the callback:[m
[32m+[m
[32m+[m[32m    incomingForm.parse(req, function(err, fields, files) {[m
[32m+[m[32m      // ...[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m__incomingForm.onPart(part)__[m
[32m+[m
[32m+[m[32mYou may overwrite this method if you are interested in directly accessing the multipart stream. Doing so will disable any `'field'` / `'file'` events  processing which would occur otherwise, making you fully responsible for handling the processing.[m
[32m+[m
[32m+[m[32m    incomingForm.onPart = function(part) {[m
[32m+[m[32m      part.addListener('data', function() {[m
[32m+[m[32m        // ...[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32mIf you want to use formidable to only handle certain parts for you, you can do so:[m
[32m+[m
[32m+[m[32m    incomingForm.onPart = function(part) {[m
[32m+[m[32m      if (!part.filename) {[m
[32m+[m[32m        // let formidable handle all non-file parts[m
[32m+[m[32m        incomingForm.handlePart(part);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32mCheck the code in this method for further inspiration.[m
[32m+[m
[32m+[m[32m__Event: 'progress' (bytesReceived, bytesExpected)__[m
[32m+[m
[32m+[m[32mEmitted after each incoming chunk of data that has been parsed. Can be used to roll your own progress bar.[m
[32m+[m
[32m+[m[32m__Event: 'field' (name, value)__[m
[32m+[m
[32m+[m[32mEmitted whenever a field / value pair has been received.[m
[32m+[m
[32m+[m[32m__Event: 'fileBegin' (name, file)__[m
[32m+[m
[32m+[m[32mEmitted whenever a new file is detected in the upload stream. Use this even if[m
[32m+[m[32myou want to stream the file to somewhere else while buffering the upload on[m
[32m+[m[32mthe file system.[m
[32m+[m
[32m+[m[32m__Event: 'file' (name, file)__[m
[32m+[m
[32m+[m[32mEmitted whenever a field / file pair has been received. `file` is an instance of `File`.[m
[32m+[m
[32m+[m[32m__Event: 'error' (err)__[m
[32m+[m
[32m+[m[32mEmitted when there is an error processing the incoming form. A request that experiences an error is automatically paused, you will have to manually call `request.resume()` if you want the request to continue firing `'data'` events.[m
[32m+[m
[32m+[m[32m__Event: 'aborted'__[m
[32m+[m
[32m+[m[32mEmitted when the request was aborted by the user. Right now this can be due to a 'timeout' or 'close' event on the socket. In the future there will be a separate 'timeout' event (needs a change in the node core).[m
[32m+[m
[32m+[m[32m__Event: 'end' ()__[m
[32m+[m
[32m+[m[32mEmitted when the entire request has been received, and all contained files have finished flushing to disk. This is a great place for you to send your response.[m
[32m+[m
[32m+[m[32m### formidable.File[m
[32m+[m
[32m+[m[32m__file.size = 0__[m
[32m+[m
[32m+[m[32mThe size of the uploaded file in bytes. If the file is still being uploaded (see `'fileBegin'` event), this property says how many bytes of the file have been written to disk yet.[m
[32m+[m
[32m+[m[32m__file.path = null__[m
[32m+[m
[32m+[m[32mThe path this file is being written to. You can modify this in the `'fileBegin'` event in[m
[32m+[m[32mcase you are unhappy with the way formidable generates a temporary path for your files.[m
[32m+[m
[32m+[m[32m__file.name = null__[m
[32m+[m
[32m+[m[32mThe name this file had according to the uploading client.[m
[32m+[m
[32m+[m[32m__file.type = null__[m
[32m+[m
[32m+[m[32mThe mime type of this file, according to the uploading client.[m
[32m+[m
[32m+[m[32m__file.lastModifiedDate = null__[m
[32m+[m
[32m+[m[32mA date object (or `null`) containing the time this file was last written to. Mostly[m
[32m+[m[32mhere for compatibility with the [W3C File API Draft](http://dev.w3.org/2006/webapi/FileAPI/).[m
[32m+[m
[32m+[m[32m__file.hash = null__[m
[32m+[m
[32m+[m[32mIf hash calculation was set, you can read the hex digest out of this var.[m
[32m+[m
[32m+[m[32m## License[m
[32m+[m
[32m+[m[32mFormidable is licensed under the MIT license.[m
[32m+[m
[32m+[m[32m## Ports[m
[32m+[m
[32m+[m[32m* [multipart-parser](http://github.com/FooBarWidget/multipart-parser): a C++ parser based on formidable[m
[32m+[m
[32m+[m[32m## Credits[m
[32m+[m
[32m+[m[32m* [Ryan Dahl](http://twitter.com/ryah) for his work on [http-parser](http://github.com/ry/http-parser) which heavily inspired multipart_parser.js[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/TODO b/node_modules/express/node_modules/connect/node_modules/formidable/TODO[m
[1mnew file mode 100644[m
[1mindex 0000000..e1107f2[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/TODO[m
[36m@@ -0,0 +1,3 @@[m
[32m+[m[32m- Better bufferMaxSize handling approach[m
[32m+[m[32m- Add tests for JSON parser pull request and merge it[m
[32m+[m[32m- Implement QuerystringParser the same way as MultipartParser[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/benchmark/bench-multipart-parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/benchmark/bench-multipart-parser.js[m
[1mnew file mode 100644[m
[1mindex 0000000..bff41f1[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/benchmark/bench-multipart-parser.js[m
[36m@@ -0,0 +1,70 @@[m
[32m+[m[32mrequire('../test/common');[m
[32m+[m[32mvar multipartParser = require('../lib/multipart_parser'),[m
[32m+[m[32m    MultipartParser = multipartParser.MultipartParser,[m
[32m+[m[32m    parser = new MultipartParser(),[m
[32m+[m[32m    Buffer = require('buffer').Buffer,[m
[32m+[m[32m    boundary = '-----------------------------168072824752491622650073',[m
[32m+[m[32m    mb = 100,[m
[32m+[m[32m    buffer = createMultipartBuffer(boundary, mb * 1024 * 1024),[m
[32m+[m[32m    callbacks =[m
[32m+[m[32m      { partBegin: -1,[m
[32m+[m[32m        partEnd: -1,[m
[32m+[m[32m        headerField: -1,[m
[32m+[m[32m        headerValue: -1,[m
[32m+[m[32m        partData: -1,[m
[32m+[m[32m        end: -1,[m
[32m+[m[32m      };[m
[32m+[m
[32m+[m
[32m+[m[32mparser.initWithBoundary(boundary);[m
[32m+[m[32mparser.onHeaderField = function() {[m
[32m+[m[32m  callbacks.headerField++;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mparser.onHeaderValue = function() {[m
[32m+[m[32m  callbacks.headerValue++;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mparser.onPartBegin = function() {[m
[32m+[m[32m  callbacks.partBegin++;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mparser.onPartData = function() {[m
[32m+[m[32m  callbacks.partData++;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mparser.onPartEnd = function() {[m
[32m+[m[32m  callbacks.partEnd++;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mparser.onEnd = function() {[m
[32m+[m[32m  callbacks.end++;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mvar start = +new Date(),[m
[32m+[m[32m    nparsed = parser.write(buffer),[m
[32m+[m[32m    duration = +new Date - start,[m
[32m+[m[32m    mbPerSec = (mb / (duration / 1000)).toFixed(2);[m
[32m+[m
[32m+[m[32mconsole.log(mbPerSec+' mb/sec');[m
[32m+[m
[32m+[m[32massert.equal(nparsed, buffer.length);[m
[32m+[m
[32m+[m[32mfunction createMultipartBuffer(boundary, size) {[m
[32m+[m[32m  var head =[m
[32m+[m[32m        '--'+boundary+'\r\n'[m
[32m+[m[32m      + 'content-disposition: form-data; name="field1"\r\n'[m
[32m+[m[32m      + '\r\n'[m
[32m+[m[32m    , tail = '\r\n--'+boundary+'--\r\n'[m
[32m+[m[32m    , buffer = new Buffer(size);[m
[32m+[m
[32m+[m[32m  buffer.write(head, 'ascii', 0);[m
[32m+[m[32m  buffer.write(tail, 'ascii', buffer.length - tail.length);[m
[32m+[m[32m  return buffer;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mprocess.on('exit', function() {[m
[32m+[m[32m  for (var k in callbacks) {[m
[32m+[m[32m    assert.equal(0, callbacks[k], k+' count off by '+callbacks[k]);[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/example/post.js b/node_modules/express/node_modules/connect/node_modules/formidable/example/post.js[m
[1mnew file mode 100644[m
[1mindex 0000000..f6c15a6[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/example/post.js[m
[36m@@ -0,0 +1,43 @@[m
[32m+[m[32mrequire('../test/common');[m
[32m+[m[32mvar http = require('http'),[m
[32m+[m[32m    util = require('util'),[m
[32m+[m[32m    formidable = require('formidable'),[m
[32m+[m[32m    server;[m
[32m+[m
[32m+[m[32mserver = http.createServer(function(req, res) {[m
[32m+[m[32m  if (req.url == '/') {[m
[32m+[m[32m    res.writeHead(200, {'content-type': 'text/html'});[m
[32m+[m[32m    res.end([m
[32m+[m[32m      '<form action="/post" method="post">'+[m
[32m+[m[32m      '<input type="text" name="title"><br>'+[m
[32m+[m[32m      '<input type="text" name="data[foo][]"><br>'+[m
[32m+[m[32m      '<input type="submit" value="Submit">'+[m
[32m+[m[32m      '</form>'[m
[32m+[m[32m    );[m
[32m+[m[32m  } else if (req.url == '/post') {[m
[32m+[m[32m    var form = new formidable.IncomingForm(),[m
[32m+[m[32m        fields = [];[m
[32m+[m
[32m+[m[32m    form[m
[32m+[m[32m      .on('error', function(err) {[m
[32m+[m[32m        res.writeHead(200, {'content-type': 'text/plain'});[m
[32m+[m[32m        res.end('error:\n\n'+util.inspect(err));[m
[32m+[m[32m      })[m
[32m+[m[32m      .on('field', function(field, value) {[m
[32m+[m[32m        console.log(field, value);[m
[32m+[m[32m        fields.push([field, value]);[m
[32m+[m[32m      })[m
[32m+[m[32m      .on('end', function() {[m
[32m+[m[32m        console.log('-> post done');[m
[32m+[m[32m        res.writeHead(200, {'content-type': 'text/plain'});[m
[32m+[m[32m        res.end('received fields:\n\n '+util.inspect(fields));[m
[32m+[m[32m      });[m
[32m+[m[32m    form.parse(req);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    res.writeHead(404, {'content-type': 'text/plain'});[m
[32m+[m[32m    res.end('404');[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m[32mserver.listen(TEST_PORT);[m
[32m+[m
[32m+[m[32mconsole.log('listening on http://localhost:'+TEST_PORT+'/');[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/example/upload.js b/node_modules/express/node_modules/connect/node_modules/formidable/example/upload.js[m
[1mnew file mode 100644[m
[1mindex 0000000..050cdd9[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/example/upload.js[m
[36m@@ -0,0 +1,48 @@[m
[32m+[m[32mrequire('../test/common');[m
[32m+[m[32mvar http = require('http'),[m
[32m+[m[32m    util = require('util'),[m
[32m+[m[32m    formidable = require('formidable'),[m
[32m+[m[32m    server;[m
[32m+[m
[32m+[m[32mserver = http.createServer(function(req, res) {[m
[32m+[m[32m  if (req.url == '/') {[m
[32m+[m[32m    res.writeHead(200, {'content-type': 'text/html'});[m
[32m+[m[32m    res.end([m
[32m+[m[32m      '<form action="/upload" enctype="multipart/form-data" method="post">'+[m
[32m+[m[32m      '<input type="text" name="title"><br>'+[m
[32m+[m[32m      '<input type="file" name="upload" multiple="multiple"><br>'+[m
[32m+[m[32m      '<input type="submit" value="Upload">'+[m
[32m+[m[32m      '</form>'[m
[32m+[m[32m    );[m
[32m+[m[32m  } else if (req.url == '/upload') {[m
[32m+[m[32m    var form = new formidable.IncomingForm(),[m
[32m+[m[32m        files = [],[m
[32m+[m[32m        fields = [];[m
[32m+[m
[32m+[m[32m    form.uploadDir = TEST_TMP;[m
[32m+[m
[32m+[m[32m    form[m
[32m+[m[32m      .on('field', function(field, value) {[m
[32m+[m[32m        console.log(field, value);[m
[32m+[m[32m        fields.push([field, value]);[m
[32m+[m[32m      })[m
[32m+[m[32m      .on('file', function(field, file) {[m
[32m+[m[32m        console.log(field, file);[m
[32m+[m[32m        files.push([field, file]);[m
[32m+[m[32m      })[m
[32m+[m[32m      .on('end', function() {[m
[32m+[m[32m        console.log('-> upload done');[m
[32m+[m[32m        res.writeHead(200, {'content-type': 'text/plain'});[m
[32m+[m[32m        res.write('received fields:\n\n '+util.inspect(fields));[m
[32m+[m[32m        res.write('\n\n');[m
[32m+[m[32m        res.end('received files:\n\n '+util.inspect(files));[m
[32m+[m[32m      });[m
[32m+[m[32m    form.parse(req);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    res.writeHead(404, {'content-type': 'text/plain'});[m
[32m+[m[32m    res.end('404');[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m[32mserver.listen(TEST_PORT);[m
[32m+[m
[32m+[m[32mconsole.log('listening on http://localhost:'+TEST_PORT+'/');[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/index.js b/node_modules/express/node_modules/connect/node_modules/formidable/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..be41032[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/index.js[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mmodule.exports = require('./lib/formidable');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/file.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/file.js[m
[1mnew file mode 100644[m
[1mindex 0000000..dad8d5f[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/lib/file.js[m
[36m@@ -0,0 +1,73 @@[m
[32m+[m[32mif (global.GENTLY) require = GENTLY.hijack(require);[m
[32m+[m
[32m+[m[32mvar util = require('./util'),[m
[32m+[m[32m    WriteStream = require('fs').WriteStream,[m
[32m+[m[32m    EventEmitter = require('events').EventEmitter,[m
[32m+[m[32m    crypto = require('crypto');[m
[32m+[m
[32m+[m[32mfunction File(properties) {[m
[32m+[m[32m  EventEmitter.call(this);[m
[32m+[m
[32m+[m[32m  this.size = 0;[m
[32m+[m[32m  this.path = null;[m
[32m+[m[32m  this.name = null;[m
[32m+[m[32m  this.type = null;[m
[32m+[m[32m  this.hash = null;[m
[32m+[m[32m  this.lastModifiedDate = null;[m
[32m+[m
[32m+[m[32m  this._writeStream = null;[m
[32m+[m[41m  [m
[32m+[m[32m  for (var key in properties) {[m
[32m+[m[32m    this[key] = properties[key];[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if(typeof this.hash === 'string') {[m
[32m+[m[32m    this.hash = crypto.createHash(properties.hash);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  this._backwardsCompatibility();[m
[32m+[m[32m}[m
[32m+[m[32mmodule.exports = File;[m
[32m+[m[32mutil.inherits(File, EventEmitter);[m
[32m+[m
[32m+[m[32m// @todo Next release: Show error messages when accessing these[m
[32m+[m[32mFile.prototype._backwardsCompatibility = function() {[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  this.__defineGetter__('length', function() {[m
[32m+[m[32m    return self.size;[m
[32m+[m[32m  });[m
[32m+[m[32m  this.__defineGetter__('filename', function() {[m
[32m+[m[32m    return self.name;[m
[32m+[m[32m  });[m
[32m+[m[32m  this.__defineGetter__('mime', function() {[m
[32m+[m[32m    return self.type;[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mFile.prototype.open = function() {[m
[32m+[m[32m  this._writeStream = new WriteStream(this.path);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mFile.prototype.write = function(buffer, cb) {[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  this._writeStream.write(buffer, function() {[m
[32m+[m[32m    if(self.hash) {[m
[32m+[m[32m      self.hash.update(buffer);[m
[32m+[m[32m    }[m
[32m+[m[32m    self.lastModifiedDate = new Date();[m
[32m+[m[32m    self.size += buffer.length;[m
[32m+[m[32m    self.emit('progress', self.size);[m
[32m+[m[32m    cb();[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mFile.prototype.end = function(cb) {[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  this._writeStream.end(function() {[m
[32m+[m[32m    if(self.hash) {[m
[32m+[m[32m      self.hash = self.hash.digest('hex');[m
[32m+[m[32m    }[m
[32m+[m[32m    self.emit('end');[m
[32m+[m[32m    cb();[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js[m
[1mnew file mode 100644[m
[1mindex 0000000..060eac2[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js[m
[36m@@ -0,0 +1,384 @@[m
[32m+[m[32mif (global.GENTLY) require = GENTLY.hijack(require);[m
[32m+[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar util = require('./util'),[m
[32m+[m[32m    path = require('path'),[m
[32m+[m[32m    File = require('./file'),[m
[32m+[m[32m    MultipartParser = require('./multipart_parser').MultipartParser,[m
[32m+[m[32m    QuerystringParser = require('./querystring_parser').QuerystringParser,[m
[32m+[m[32m    StringDecoder = require('string_decoder').StringDecoder,[m
[32m+[m[32m    EventEmitter = require('events').EventEmitter,[m
[32m+[m[32m    Stream = require('stream').Stream;[m
[32m+[m
[32m+[m[32mfunction IncomingForm(opts) {[m[41m  [m
[32m+[m[32m  if (!(this instanceof IncomingForm)) return new IncomingForm;[m
[32m+[m[32m  EventEmitter.call(this);[m
[32m+[m
[32m+[m[32m  opts=opts||{};[m
[32m+[m[41m  [m
[32m+[m[32m  this.error = null;[m
[32m+[m[32m  this.ended = false;[m
[32m+[m
[32m+[m[32m  this.maxFieldsSize = opts.maxFieldsSize || 2 * 1024 * 1024;[m
[32m+[m[32m  this.keepExtensions = opts.keepExtensions || false;[m
[32m+[m[32m  this.uploadDir = opts.uploadDir || IncomingForm.UPLOAD_DIR;[m
[32m+[m[32m  this.encoding = opts.encoding || 'utf-8';[m
[32m+[m[32m  this.headers = null;[m
[32m+[m[32m  this.type = null;[m
[32m+[m[32m  this.hash = false;[m
[32m+[m
[32m+[m[32m  this.bytesReceived = null;[m
[32m+[m[32m  this.bytesExpected = null;[m
[32m+[m
[32m+[m[32m  this._parser = null;[m
[32m+[m[32m  this._flushing = 0;[m
[32m+[m[32m  this._fieldsSize = 0;[m
[32m+[m[32m};[m
[32m+[m[32mutil.inherits(IncomingForm, EventEmitter);[m
[32m+[m[32mexports.IncomingForm = IncomingForm;[m
[32m+[m
[32m+[m[32mIncomingForm.UPLOAD_DIR = (function() {[m
[32m+[m[32m  var dirs = [process.env.TMP, '/tmp', process.cwd()];[m
[32m+[m[32m  for (var i = 0; i < dirs.length; i++) {[m
[32m+[m[32m    var dir = dirs[i];[m
[32m+[m[32m    var isDirectory = false;[m
[32m+[m
[32m+[m[32m    try {[m
[32m+[m[32m      isDirectory = fs.statSync(dir).isDirectory();[m
[32m+[m[32m    } catch (e) {}[m
[32m+[m
[32m+[m[32m    if (isDirectory) return dir;[m
[32m+[m[32m  }[m
[32m+[m[32m})();[m
[32m+[m
[32m+[m[32mIncomingForm.prototype.parse = function(req, cb) {[m
[32m+[m[32m  this.pause = function() {[m
[32m+[m[32m    try {[m
[32m+[m[32m      req.pause();[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      // the stream was destroyed[m
[32m+[m[32m      if (!this.ended) {[m
[32m+[m[32m        // before it was completed, crash & burn[m
[32m+[m[32m        this._error(err);[m
[32m+[m[32m      }[m
[32m+[m[32m      return false;[m
[32m+[m[32m    }[m
[32m+[m[32m    return true;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  this.resume = function() {[m
[32m+[m[32m    try {[m
[32m+[m[32m      req.resume();[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      // the stream was destroyed[m
[32m+[m[32m      if (!this.ended) {[m
[32m+[m[32m        // before it was completed, crash & burn[m
[32m+[m[32m        this._error(err);[m
[32m+[m[32m      }[m
[32m+[m[32m      return false;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return true;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  this.writeHeaders(req.headers);[m
[32m+[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  req[m
[32m+[m[32m    .on('error', function(err) {[m
[32m+[m[32m      self._error(err);[m
[32m+[m[32m    })[m
[32m+[m[32m    .on('aborted', function() {[m
[32m+[m[32m      self.emit('aborted');[m
[32m+[m[32m    })[m
[32m+[m[32m    .on('data', function(buffer) {[m
[32m+[m[32m      self.write(buffer);[m
[32m+[m[32m    })[m
[32m+[m[32m    .on('end', function() {[m
[32m+[m[32m      if (self.error) {[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      var err = self._parser.end();[m
[32m+[m[32m      if (err) {[m
[32m+[m[32m        self._error(err);[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m  if (cb) {[m
[32m+[m[32m    var fields = {}, files = {};[m
[32m+[m[32m    this[m
[32m+[m[32m      .on('field', function(name, value) {[m
[32m+[m[32m        fields[name] = value;[m
[32m+[m[32m      })[m
[32m+[m[32m      .on('file', function(name, file) {[m
[32m+[m[32m        files[name] = file;[m
[32m+[m[32m      })[m
[32m+[m[32m      .on('error', function(err) {[m
[32m+[m[32m        cb(err, fields, files);[m
[32m+[m[32m      })[m
[32m+[m[32m      .on('end', function() {[m
[32m+[m[32m        cb(null, fields, files);[m
[32m+[m[32m      });[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return this;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype.writeHeaders = function(headers) {[m
[32m+[m[32m  this.headers = headers;[m
[32m+[m[32m  this._parseContentLength();[m
[32m+[m[32m  this._parseContentType();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype.write = function(buffer) {[m
[32m+[m[32m  if (!this._parser) {[m
[32m+[m[32m    this._error(new Error('unintialized parser'));[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  this.bytesReceived += buffer.length;[m
[32m+[m[32m  this.emit('progress', this.bytesReceived, this.bytesExpected);[m
[32m+[m
[32m+[m[32m  var bytesParsed = this._parser.write(buffer);[m
[32m+[m[32m  if (bytesParsed !== buffer.length) {[m
[32m+[m[32m    this._error(new Error('parser error, '+bytesParsed+' of '+buffer.length+' bytes parsed'));[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return bytesParsed;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype.pause = function() {[m
[32m+[m[32m  // this does nothing, unless overwritten in IncomingForm.parse[m
[32m+[m[32m  return false;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype.resume = function() {[m
[32m+[m[32m  // this does nothing, unless overwritten in IncomingForm.parse[m
[32m+[m[32m  return false;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype.onPart = function(part) {[m
[32m+[m[32m  // this method can be overwritten by the user[m
[32m+[m[32m  this.handlePart(part);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype.handlePart = function(part) {[m
[32m+[m[32m  var self = this;[m
[32m+[m
[32m+[m[32m  if (part.filename === undefined) {[m
[32m+[m[32m    var value = ''[m
[32m+[m[32m      , decoder = new StringDecoder(this.encoding);[m
[32m+[m
[32m+[m[32m    part.on('data', function(buffer) {[m
[32m+[m[32m      self._fieldsSize += buffer.length;[m
[32m+[m[32m      if (self._fieldsSize > self.maxFieldsSize) {[m
[32m+[m[32m        self._error(new Error('maxFieldsSize exceeded, received '+self._fieldsSize+' bytes of field data'));[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m[32m      value += decoder.write(buffer);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    part.on('end', function() {[m
[32m+[m[32m      self.emit('field', part.name, value);[m
[32m+[m[32m    });[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  this._flushing++;[m
[32m+[m
[32m+[m[32m  var file = new File({[m
[32m+[m[32m    path: this._uploadPath(part.filename),[m
[32m+[m[32m    name: part.filename,[m
[32m+[m[32m    type: part.mime,[m
[32m+[m[32m    hash: self.hash[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  this.emit('fileBegin', part.name, file);[m
[32m+[m
[32m+[m[32m  file.open();[m
[32m+[m
[32m+[m[32m  part.on('data', function(buffer) {[m
[32m+[m[32m    self.pause();[m
[32m+[m[32m    file.write(buffer, function() {[m
[32m+[m[32m      self.resume();[m
[32m+[m[32m    });[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  part.on('end', function() {[m
[32m+[m[32m    file.end(function() {[m
[32m+[m[32m      self._flushing--;[m
[32m+[m[32m      self.emit('file', part.name, file);[m
[32m+[m[32m      self._maybeEnd();[m
[32m+[m[32m    });[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype._parseContentType = function() {[m
[32m+[m[32m  if (!this.headers['content-type']) {[m
[32m+[m[32m    this._error(new Error('bad content-type header, no content-type'));[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (this.headers['content-type'].match(/urlencoded/i)) {[m
[32m+[m[32m    this._initUrlencoded();[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (this.headers['content-type'].match(/multipart/i)) {[m
[32m+[m[32m    var m;[m
[32m+[m[32m    if (m = this.headers['content-type'].match(/boundary=(?:"([^"]+)"|([^;]+))/i)) {[m
[32m+[m[32m      this._initMultipart(m[1] || m[2]);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      this._error(new Error('bad content-type header, no multipart boundary'));[m
[32m+[m[32m    }[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  this._error(new Error('bad content-type header, unknown content-type: '+this.headers['content-type']));[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype._error = function(err) {[m
[32m+[m[32m  if (this.error) {[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  this.error = err;[m
[32m+[m[32m  this.pause();[m
[32m+[m[32m  this.emit('error', err);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype._parseContentLength = function() {[m
[32m+[m[32m  if (this.headers['content-length']) {[m
[32m+[m[32m    this.bytesReceived = 0;[m
[32m+[m[32m    this.bytesExpected = parseInt(this.headers['content-length'], 10);[m
[32m+[m[32m    this.emit('progress', this.bytesReceived, this.bytesExpected);[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype._newParser = function() {[m
[32m+[m[32m  return new MultipartParser();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype._initMultipart = function(boundary) {[m
[32m+[m[32m  this.type = 'multipart';[m
[32m+[m
[32m+[m[32m  var parser = new MultipartParser(),[m
[32m+[m[32m      self = this,[m
[32m+[m[32m      headerField,[m
[32m+[m[32m      headerValue,[m
[32m+[m[32m      part;[m
[32m+[m
[32m+[m[32m  parser.initWithBoundary(boundary);[m
[32m+[m
[32m+[m[32m  parser.onPartBegin = function() {[m
[32m+[m[32m    part = new Stream();[m
[32m+[m[32m    part.readable = true;[m
[32m+[m[32m    part.headers = {};[m
[32m+[m[32m    part.name = null;[m
[32m+[m[32m    part.filename = null;[m
[32m+[m[32m    part.mime = null;[m
[32m+[m[32m    headerField = '';[m
[32m+[m[32m    headerValue = '';[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onHeaderField = function(b, start, end) {[m
[32m+[m[32m    headerField += b.toString(self.encoding, start, end);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onHeaderValue = function(b, start, end) {[m
[32m+[m[32m    headerValue += b.toString(self.encoding, start, end);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onHeaderEnd = function() {[m
[32m+[m[32m    headerField = headerField.toLowerCase();[m
[32m+[m[32m    part.headers[headerField] = headerValue;[m
[32m+[m
[32m+[m[32m    var m;[m
[32m+[m[32m    if (headerField == 'content-disposition') {[m
[32m+[m[32m      if (m = headerValue.match(/name="([^"]+)"/i)) {[m
[32m+[m[32m        part.name = m[1];[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      part.filename = self._fileName(headerValue);[m
[32m+[m[32m    } else if (headerField == 'content-type') {[m
[32m+[m[32m      part.mime = headerValue;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    headerField = '';[m
[32m+[m[32m    headerValue = '';[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onHeadersEnd = function() {[m
[32m+[m[32m    self.onPart(part);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onPartData = function(b, start, end) {[m
[32m+[m[32m    part.emit('data', b.slice(start, end));[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onPartEnd = function() {[m
[32m+[m[32m    part.emit('end');[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onEnd = function() {[m
[32m+[m[32m    self.ended = true;[m
[32m+[m[32m    self._maybeEnd();[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  this._parser = parser;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype._fileName = function(headerValue) {[m
[32m+[m[32m  var m = headerValue.match(/filename="(.*?)"($|; )/i)[m
[32m+[m[32m  if (!m) return;[m
[32m+[m
[32m+[m[32m  var filename = m[1].substr(m[1].lastIndexOf('\\') + 1);[m
[32m+[m[32m  filename = filename.replace(/%22/g, '"');[m
[32m+[m[32m  filename = filename.replace(/&#([\d]{4});/g, function(m, code) {[m
[32m+[m[32m    return String.fromCharCode(code);[m
[32m+[m[32m  });[m
[32m+[m[32m  return filename;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype._initUrlencoded = function() {[m
[32m+[m[32m  this.type = 'urlencoded';[m
[32m+[m
[32m+[m[32m  var parser = new QuerystringParser()[m
[32m+[m[32m    , self = this;[m
[32m+[m
[32m+[m[32m  parser.onField = function(key, val) {[m
[32m+[m[32m    self.emit('field', key, val);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onEnd = function() {[m
[32m+[m[32m    self.ended = true;[m
[32m+[m[32m    self._maybeEnd();[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  this._parser = parser;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype._uploadPath = function(filename) {[m
[32m+[m[32m  var name = '';[m
[32m+[m[32m  for (var i = 0; i < 32; i++) {[m
[32m+[m[32m    name += Math.floor(Math.random() * 16).toString(16);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (this.keepExtensions) {[m
[32m+[m[32m    var ext = path.extname(filename);[m
[32m+[m[32m    ext     = ext.replace(/(\.[a-z0-9]+).*/, '$1')[m
[32m+[m
[32m+[m[32m    name += ext;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return path.join(this.uploadDir, name);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mIncomingForm.prototype._maybeEnd = function() {[m
[32m+[m[32m  if (!this.ended || this._flushing) {[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  this.emit('end');[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/index.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7a6e3e1[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/lib/index.js[m
[36m@@ -0,0 +1,3 @@[m
[32m+[m[32mvar IncomingForm = require('./incoming_form').IncomingForm;[m
[32m+[m[32mIncomingForm.IncomingForm = IncomingForm;[m
[32m+[m[32mmodule.exports = IncomingForm;[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/multipart_parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/multipart_parser.js[m
[1mnew file mode 100644[m
[1mindex 0000000..9ca567c[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/lib/multipart_parser.js[m
[36m@@ -0,0 +1,312 @@[m
[32m+[m[32mvar Buffer = require('buffer').Buffer,[m
[32m+[m[32m    s = 0,[m
[32m+[m[32m    S =[m
[32m+[m[32m    { PARSER_UNINITIALIZED: s++,[m
[32m+[m[32m      START: s++,[m
[32m+[m[32m      START_BOUNDARY: s++,[m
[32m+[m[32m      HEADER_FIELD_START: s++,[m
[32m+[m[32m      HEADER_FIELD: s++,[m
[32m+[m[32m      HEADER_VALUE_START: s++,[m
[32m+[m[32m      HEADER_VALUE: s++,[m
[32m+[m[32m      HEADER_VALUE_ALMOST_DONE: s++,[m
[32m+[m[32m      HEADERS_ALMOST_DONE: s++,[m
[32m+[m[32m      PART_DATA_START: s++,[m
[32m+[m[32m      PART_DATA: s++,[m
[32m+[m[32m      PART_END: s++,[m
[32m+[m[32m      END: s++,[m
[32m+[m[32m    },[m
[32m+[m
[32m+[m[32m    f = 1,[m
[32m+[m[32m    F =[m
[32m+[m[32m    { PART_BOUNDARY: f,[m
[32m+[m[32m      LAST_BOUNDARY: f *= 2,[m
[32m+[m[32m    },[m
[32m+[m
[32m+[m[32m    LF = 10,[m
[32m+[m[32m    CR = 13,[m
[32m+[m[32m    SPACE = 32,[m
[32m+[m[32m    HYPHEN = 45,[m
[32m+[m[32m    COLON = 58,[m
[32m+[m[32m    A = 97,[m
[32m+[m[32m    Z = 122,[m
[32m+[m
[32m+[m[32m    lower = function(c) {[m
[32m+[m[32m      return c | 0x20;[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32mfor (var s in S) {[m
[32m+[m[32m  exports[s] = S[s];[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction MultipartParser() {[m
[32m+[m[32m  this.boundary = null;[m
[32m+[m[32m  this.boundaryChars = null;[m
[32m+[m[32m  this.lookbehind = null;[m
[32m+[m[32m  this.state = S.PARSER_UNINITIALIZED;[m
[32m+[m
[32m+[m[32m  this.index = null;[m
[32m+[m[32m  this.flags = 0;[m
[32m+[m[32m};[m
[32m+[m[32mexports.MultipartParser = MultipartParser;[m
[32m+[m
[32m+[m[32mMultipartParser.stateToString = function(stateNumber) {[m
[32m+[m[32m  for (var state in S) {[m
[32m+[m[32m    var number = S[state];[m
[32m+[m[32m    if (number === stateNumber) return state;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mMultipartParser.prototype.initWithBoundary = function(str) {[m
[32m+[m[32m  this.boundary = new Buffer(str.length+4);[m
[32m+[m[32m  this.boundary.write('\r\n--', 'ascii', 0);[m
[32m+[m[32m  this.boundary.write(str, 'ascii', 4);[m
[32m+[m[32m  this.lookbehind = new Buffer(this.boundary.length+8);[m
[32m+[m[32m  this.state = S.START;[m
[32m+[m
[32m+[m[32m  this.boundaryChars = {};[m
[32m+[m[32m  for (var i = 0; i < this.boundary.length; i++) {[m
[32m+[m[32m    this.boundaryChars[this.boundary[i]] = true;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mMultipartParser.prototype.write = function(buffer) {[m
[32m+[m[32m  var self = this,[m
[32m+[m[32m      i = 0,[m
[32m+[m[32m      len = buffer.length,[m
[32m+[m[32m      prevIndex = this.index,[m
[32m+[m[32m      index = this.index,[m
[32m+[m[32m      state = this.state,[m
[32m+[m[32m      flags = this.flags,[m
[32m+[m[32m      lookbehind = this.lookbehind,[m
[32m+[m[32m      boundary = this.boundary,[m
[32m+[m[32m      boundaryChars = this.boundaryChars,[m
[32m+[m[32m      boundaryLength = this.boundary.length,[m
[32m+[m[32m      boundaryEnd = boundaryLength - 1,[m
[32m+[m[32m      bufferLength = buffer.length,[m
[32m+[m[32m      c,[m
[32m+[m[32m      cl,[m
[32m+[m
[32m+[m[32m      mark = function(name) {[m
[32m+[m[32m        self[name+'Mark'] = i;[m
[32m+[m[32m      },[m
[32m+[m[32m      clear = function(name) {[m
[32m+[m[32m        delete self[name+'Mark'];[m
[32m+[m[32m      },[m
[32m+[m[32m      callback = function(name, buffer, start, end) {[m
[32m+[m[32m        if (start !== undefined && start === end) {[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        var callbackSymbol = 'on'+name.substr(0, 1).toUpperCase()+name.substr(1);[m
[32m+[m[32m        if (callbackSymbol in self) {[m
[32m+[m[32m          self[callbackSymbol](buffer, start, end);[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      dataCallback = function(name, clear) {[m
[32m+[m[32m        var markSymbol = name+'Mark';[m
[32m+[m[32m        if (!(markSymbol in self)) {[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (!clear) {[m
[32m+[m[32m          callback(name, buffer, self[markSymbol], buffer.length);[m
[32m+[m[32m          self[markSymbol] = 0;[m
[32m+[m[32m        } else {[m
[32m+[m[32m          callback(name, buffer, self[markSymbol], i);[m
[32m+[m[32m          delete self[markSymbol];[m
[32m+[m[32m        }[m
[32m+[m[32m      };[m
[32m+[m
[32m+[m[32m  for (i = 0; i < len; i++) {[m
[32m+[m[32m    c = buffer[i];[m
[32m+[m[32m    switch (state) {[m
[32m+[m[32m      case S.PARSER_UNINITIALIZED:[m
[32m+[m[32m        return i;[m
[32m+[m[32m      case S.START:[m
[32m+[m[32m        index = 0;[m
[32m+[m[32m        state = S.START_BOUNDARY;[m
[32m+[m[32m      case S.START_BOUNDARY:[m
[32m+[m[32m        if (index == boundary.length - 2) {[m
[32m+[m[32m          if (c != CR) {[m
[32m+[m[32m            return i;[m
[32m+[m[32m          }[m
[32m+[m[32m          index++;[m
[32m+[m[32m          break;[m
[32m+[m[32m        } else if (index - 1 == boundary.length - 2) {[m
[32m+[m[32m          if (c != LF) {[m
[32m+[m[32m            return i;[m
[32m+[m[32m          }[m
[32m+[m[32m          index = 0;[m
[32m+[m[32m          callback('partBegin');[m
[32m+[m[32m          state = S.HEADER_FIELD_START;[m
[32m+[m[32m          break;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (c != boundary[index+2]) {[m
[32m+[m[32m          return i;[m
[32m+[m[32m        }[m
[32m+[m[32m        index++;[m
[32m+[m[32m        break;[m
[32m+[m[32m      case S.HEADER_FIELD_START:[m
[32m+[m[32m        state = S.HEADER_FIELD;[m
[32m+[m[32m        mark('headerField');[m
[32m+[m[32m        index = 0;[m
[32m+[m[32m      case S.HEADER_FIELD:[m
[32m+[m[32m        if (c == CR) {[m
[32m+[m[32m          clear('headerField');[m
[32m+[m[32m          state = S.HEADERS_ALMOST_DONE;[m
[32m+[m[32m          break;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        index++;[m
[32m+[m[32m        if (c == HYPHEN) {[m
[32m+[m[32m          break;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (c == COLON) {[m
[32m+[m[32m          if (index == 1) {[m
[32m+[m[32m            // empty header field[m
[32m+[m[32m            return i;[m
[32m+[m[32m          }[m
[32m+[m[32m          dataCallback('headerField', true);[m
[32m+[m[32m          state = S.HEADER_VALUE_START;[m
[32m+[m[32m          break;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        cl = lower(c);[m
[32m+[m[32m        if (cl < A || cl > Z) {[m
[32m+[m[32m          return i;[m
[32m+[m[32m        }[m
[32m+[m[32m        break;[m
[32m+[m[32m      case S.HEADER_VALUE_START:[m
[32m+[m[32m        if (c == SPACE) {[m
[32m+[m[32m          break;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        mark('headerValue');[m
[32m+[m[32m        state = S.HEADER_VALUE;[m
[32m+[m[32m      case S.HEADER_VALUE:[m
[32m+[m[32m        if (c == CR) {[m
[32m+[m[32m          dataCallback('headerValue', true);[m
[32m+[m[32m          callback('headerEnd');[m
[32m+[m[32m          state = S.HEADER_VALUE_ALMOST_DONE;[m
[32m+[m[32m        }[m
[32m+[m[32m        break;[m
[32m+[m[32m      case S.HEADER_VALUE_ALMOST_DONE:[m
[32m+[m[32m        if (c != LF) {[m
[32m+[m[32m          return i;[m
[32m+[m[32m        }[m
[32m+[m[32m        state = S.HEADER_FIELD_START;[m
[32m+[m[32m        break;[m
[32m+[m[32m      case S.HEADERS_ALMOST_DONE:[m
[32m+[m[32m        if (c != LF) {[m
[32m+[m[32m          return i;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        callback('headersEnd');[m
[32m+[m[32m        state = S.PART_DATA_START;[m
[32m+[m[32m        break;[m
[32m+[m[32m      case S.PART_DATA_START:[m
[32m+[m[32m        state = S.PART_DATA[m
[32m+[m[32m        mark('partData');[m
[32m+[m[32m      case S.PART_DATA:[m
[32m+[m[32m        prevIndex = index;[m
[32m+[m
[32m+[m[32m        if (index == 0) {[m
[32m+[m[32m          // boyer-moore derrived algorithm to safely skip non-boundary data[m
[32m+[m[32m          i += boundaryEnd;[m
[32m+[m[32m          while (i < bufferLength && !(buffer[i] in boundaryChars)) {[m
[32m+[m[32m            i += boundaryLength;[m
[32m+[m[32m          }[m
[32m+[m[32m          i -= boundaryEnd;[m
[32m+[m[32m          c = buffer[i];[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (index < boundary.length) {[m
[32m+[m[32m          if (boundary[index] == c) {[m
[32m+[m[32m            if (index == 0) {[m
[32m+[m[32m              dataCallback('partData', true);[m
[32m+[m[32m            }[m
[32m+[m[32m            index++;[m
[32m+[m[32m          } else {[m
[32m+[m[32m            index = 0;[m
[32m+[m[32m          }[m
[32m+[m[32m        } else if (index == boundary.length) {[m
[32m+[m[32m          index++;[m
[32m+[m[32m          if (c == CR) {[m
[32m+[m[32m            // CR = part boundary[m
[32m+[m[32m            flags |= F.PART_BOUNDARY;[m
[32m+[m[32m          } else if (c == HYPHEN) {[m
[32m+[m[32m            // HYPHEN = end boundary[m
[32m+[m[32m            flags |= F.LAST_BOUNDARY;[m
[32m+[m[32m          } else {[m
[32m+[m[32m            index = 0;[m
[32m+[m[32m          }[m
[32m+[m[32m        } else if (index - 1 == boundary.length)  {[m
[32m+[m[32m          if (flags & F.PART_BOUNDARY) {[m
[32m+[m[32m            index = 0;[m
[32m+[m[32m            if (c == LF) {[m
[32m+[m[32m              // unset the PART_BOUNDARY flag[m
[32m+[m[32m              flags &= ~F.PART_BOUNDARY;[m
[32m+[m[32m              callback('partEnd');[m
[32m+[m[32m              callback('partBegin');[m
[32m+[m[32m              state = S.HEADER_FIELD_START;[m
[32m+[m[32m              break;[m
[32m+[m[32m            }[m
[32m+[m[32m          } else if (flags & F.LAST_BOUNDARY) {[m
[32m+[m[32m            if (c == HYPHEN) {[m
[32m+[m[32m              callback('partEnd');[m
[32m+[m[32m              callback('end');[m
[32m+[m[32m              state = S.END;[m
[32m+[m[32m            } else {[m
[32m+[m[32m              index = 0;[m
[32m+[m[32m            }[m
[32m+[m[32m          } else {[m
[32m+[m[32m            index = 0;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (index > 0) {[m
[32m+[m[32m          // when matching a possible boundary, keep a lookbehind reference[m
[32m+[m[32m          // in case it turns out to be a false lead[m
[32m+[m[32m          lookbehind[index-1] = c;[m
[32m+[m[32m        } else if (prevIndex > 0) {[m
[32m+[m[32m          // if our boundary turned out to be rubbish, the captured lookbehind[m
[32m+[m[32m          // belongs to partData[m
[32m+[m[32m          callback('partData', lookbehind, 0, prevIndex);[m
[32m+[m[32m          prevIndex = 0;[m
[32m+[m[32m          mark('partData');[m
[32m+[m
[32m+[m[32m          // reconsider the current character even so it interrupted the sequence[m
[32m+[m[32m          // it could be the beginning of a new sequence[m
[32m+[m[32m          i--;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        break;[m
[32m+[m[32m      case S.END:[m
[32m+[m[32m        break;[m
[32m+[m[32m      default:[m
[32m+[m[32m        return i;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  dataCallback('headerField');[m
[32m+[m[32m  dataCallback('headerValue');[m
[32m+[m[32m  dataCallback('partData');[m
[32m+[m
[32m+[m[32m  this.index = index;[m
[32m+[m[32m  this.state = state;[m
[32m+[m[32m  this.flags = flags;[m
[32m+[m
[32m+[m[32m  return len;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mMultipartParser.prototype.end = function() {[m
[32m+[m[32m  if (this.state != S.END) {[m
[32m+[m[32m    return new Error('MultipartParser.end(): stream ended unexpectedly: ' + this.explain());[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mMultipartParser.prototype.explain = function() {[m
[32m+[m[32m  return 'state = ' + MultipartParser.stateToString(this.state);[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/querystring_parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/querystring_parser.js[m
[1mnew file mode 100644[m
[1mindex 0000000..63f109e[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/lib/querystring_parser.js[m
[36m@@ -0,0 +1,25 @@[m
[32m+[m[32mif (global.GENTLY) require = GENTLY.hijack(require);[m
[32m+[m
[32m+[m[32m// This is a buffering parser, not quite as nice as the multipart one.[m
[32m+[m[32m// If I find time I'll rewrite this to be fully streaming as well[m
[32m+[m[32mvar querystring = require('querystring');[m
[32m+[m
[32m+[m[32mfunction QuerystringParser() {[m
[32m+[m[32m  this.buffer = '';[m
[32m+[m[32m};[m
[32m+[m[32mexports.QuerystringParser = QuerystringParser;[m
[32m+[m
[32m+[m[32mQuerystringParser.prototype.write = function(buffer) {[m
[32m+[m[32m  this.buffer += buffer.toString('ascii');[m
[32m+[m[32m  return buffer.length;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mQuerystringParser.prototype.end = function() {[m
[32m+[m[32m  var fields = querystring.parse(this.buffer);[m
[32m+[m[32m  for (var field in fields) {[m
[32m+[m[32m    this.onField(field, fields[field]);[m
[32m+[m[32m  }[m
[32m+[m[32m  this.buffer = '';[m
[32m+[m
[32m+[m[32m  this.onEnd();[m
[32m+[m[32m};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/lib/util.js b/node_modules/express/node_modules/connect/node_modules/formidable/lib/util.js[m
[1mnew file mode 100644[m
[1mindex 0000000..e9493e9[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/lib/util.js[m
[36m@@ -0,0 +1,6 @@[m
[32m+[m[32m// Backwards compatibility ...[m
[32m+[m[32mtry {[m
[32m+[m[32m  module.exports = require('util');[m
[32m+[m[32m} catch (e) {[m
[32m+[m[32m  module.exports = require('sys');[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Makefile b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Makefile[m
[1mnew file mode 100644[m
[1mindex 0000000..01f7140[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Makefile[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32mtest:[m
[32m+[m	[32m@find test/simple/test-*.js | xargs -n 1 -t node[m
[32m+[m
[32m+[m[32m.PHONY: test[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Readme.md b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Readme.md[m
[1mnew file mode 100644[m
[1mindex 0000000..f8f0c66[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/Readme.md[m
[36m@@ -0,0 +1,167 @@[m
[32m+[m[32m# Gently[m
[32m+[m
[32m+[m[32m## Purpose[m
[32m+[m
[32m+[m[32mA node.js module that helps with stubbing and behavior verification. It allows you to test the most remote and nested corners of your code while keeping being fully unobtrusive.[m
[32m+[m
[32m+[m[32m## Features[m
[32m+[m
[32m+[m[32m* Overwrite and stub individual object functions[m
[32m+[m[32m* Verify that all expected calls have been made in the expected order[m
[32m+[m[32m* Restore stubbed functions to their original behavior[m
[32m+[m[32m* Detect object / class names from obj.constructor.name and obj.toString()[m
[32m+[m[32m* Hijack any required module function or class constructor[m
[32m+[m
[32m+[m[32m## Installation[m
[32m+[m
[32m+[m[32mVia [npm](http://github.com/isaacs/npm):[m
[32m+[m
[32m+[m[32m    npm install gently@latest[m
[32m+[m
[32m+[m[32m## Example[m
[32m+[m
[32m+[m[32mMake sure your dog is working properly:[m
[32m+[m
[32m+[m[32m    function Dog() {}[m
[32m+[m
[32m+[m[32m    Dog.prototype.seeCat = function() {[m
[32m+[m[32m      this.bark('whuf, whuf');[m
[32m+[m[32m      this.run();[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    Dog.prototype.bark = function(bark) {[m
[32m+[m[32m      require('sys').puts(bark);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    var gently = new (require('gently'))[m
[32m+[m[32m      , assert = require('assert')[m
[32m+[m[32m      , dog = new Dog();[m
[32m+[m
[32m+[m[32m    gently.expect(dog, 'bark', function(bark) {[m
[32m+[m[32m      assert.equal(bark, 'whuf, whuf');[m
[32m+[m[32m    });[m
[32m+[m[32m    gently.expect(dog, 'run');[m
[32m+[m
[32m+[m[32m    dog.seeCat();[m
[32m+[m
[32m+[m[32mYou can also easily test event emitters with this, for example a simple sequence of 2 events emitted by `fs.WriteStream`:[m
[32m+[m
[32m+[m[32m    var gently = new (require('gently'))[m
[32m+[m[32m      , stream = new (require('fs').WriteStream)('my_file.txt');[m
[32m+[m
[32m+[m[32m    gently.expect(stream, 'emit', function(event) {[m
[32m+[m[32m      assert.equal(event, 'open');[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(stream, 'emit', function(event) {[m
[32m+[m[32m      assert.equal(event, 'drain');[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32mFor a full read world example, check out this test case: [test-incoming-form.js](http://github.com/felixge/node-formidable/blob/master/test/simple/test-incoming-form.js) (in [node-formdiable](http://github.com/felixge/node-formidable)).[m
[32m+[m
[32m+[m[32m## API[m
[32m+[m
[32m+[m[32m### Gently[m
[32m+[m
[32m+[m[32m#### new Gently()[m
[32m+[m
[32m+[m[32mCreates a new gently instance. It listens to the process `'exit'` event to make sure all expectations have been verified.[m
[32m+[m
[32m+[m[32m#### gently.expect(obj, method, [[count], stubFn])[m
[32m+[m
[32m+[m[32mCreates an expectation for an objects method to be called. You can optionally specify the call `count` you are expecting, as well as `stubFn` function that will run instead of the original function.[m
[32m+[m
[32m+[m[32mReturns a reference to the function that is getting overwritten.[m
[32m+[m
[32m+[m[32m#### gently.expect([count], stubFn)[m
[32m+[m
[32m+[m[32mReturns a function that is supposed to be executed `count` times, delegating any calls to the provided `stubFn` function. Naming your stubFn closure will help to properly diagnose errors that are being thrown:[m
[32m+[m
[32m+[m[32m    childProcess.exec('ls', gently.expect(function lsCallback(code) {[m
[32m+[m[32m      assert.equal(0, code);[m
[32m+[m[32m    }));[m
[32m+[m
[32m+[m[32m#### gently.restore(obj, method)[m
[32m+[m
[32m+[m[32mRestores an object method that has been previously overwritten using `gently.expect()`.[m
[32m+[m
[32m+[m[32m#### gently.hijack(realRequire)[m
[32m+[m
[32m+[m[32mReturns a new require functions that catches a reference to all required modules into `gently.hijacked`.[m
[32m+[m
[32m+[m[32mTo use this function, include a line like this in your `'my-module.js'`.[m
[32m+[m
[32m+[m[32m    if (global.GENTLY) require = GENTLY.hijack(require);[m
[32m+[m
[32m+[m[32m    var sys = require('sys');[m
[32m+[m[32m    exports.hello = function() {[m
[32m+[m[32m      sys.log('world');[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32mNow you can write a test for the module above:[m
[32m+[m
[32m+[m[32m    var gently = global.GENTLY = new (require('gently'))[m
[32m+[m[32m      , myModule = require('./my-module');[m
[32m+[m
[32m+[m[32m    gently.expect(gently.hijacked.sys, 'log', function(str) {[m
[32m+[m[32m      assert.equal(str, 'world');[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    myModule.hello();[m
[32m+[m
[32m+[m[32m#### gently.stub(location, [exportsName])[m
[32m+[m
[32m+[m[32mReturns a stub class that will be used instead of the real class from the module at `location` with the given `exportsName`.[m
[32m+[m
[32m+[m[32mThis allows to test an OOP version of the previous example, where `'my-module.js'`.[m
[32m+[m
[32m+[m[32m    if (global.GENTLY) require = GENTLY.hijack(require);[m
[32m+[m
[32m+[m[32m    var World = require('./world');[m
[32m+[m
[32m+[m[32m    exports.hello = function() {[m
[32m+[m[32m      var world = new World();[m
[32m+[m[32m      world.hello();[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32mAnd `world.js` looks like this:[m
[32m+[m
[32m+[m[32m    var sys = require('sys');[m
[32m+[m
[32m+[m[32m    function World() {[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m[32m    module.exports = World;[m
[32m+[m
[32m+[m[32m    World.prototype.hello = function() {[m
[32m+[m[32m      sys.log('world');[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32mTesting `'my-module.js'` can now easily be accomplished:[m
[32m+[m
[32m+[m[32m    var gently = global.GENTLY = new (require('gently'))[m
[32m+[m[32m      , WorldStub = gently.stub('./world')[m
[32m+[m[32m      , myModule = require('./my-module')[m
[32m+[m[32m      , WORLD;[m
[32m+[m
[32m+[m[32m    gently.expect(WorldStub, 'new', function() {[m
[32m+[m[32m      WORLD = this;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(WORLD, 'hello');[m
[32m+[m
[32m+[m[32m    myModule.hello();[m
[32m+[m
[32m+[m[32m#### gently.hijacked[m
[32m+[m
[32m+[m[32mAn object that holds the references to all hijacked modules.[m
[32m+[m
[32m+[m[32m#### gently.verify([msg])[m
[32m+[m
[32m+[m[32mVerifies that all expectations of this gently instance have been satisfied. If not called manually, this method is called when the process `'exit'` event is fired.[m
[32m+[m
[32m+[m[32mIf `msg` is given, it will appear in any error that might be thrown.[m
[32m+[m
[32m+[m[32m## License[m
[32m+[m
[32m+[m[32mGently is licensed under the MIT license.[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/dog.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/dog.js[m
[1mnew file mode 100644[m
[1mindex 0000000..022fae0[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/dog.js[m
[36m@@ -0,0 +1,22 @@[m
[32m+[m[32mrequire('../test/common');[m
[32m+[m[32mfunction Dog() {}[m
[32m+[m
[32m+[m[32mDog.prototype.seeCat = function() {[m
[32m+[m[32m  this.bark('whuf, whuf');[m
[32m+[m[32m  this.run();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mDog.prototype.bark = function(bark) {[m
[32m+[m[32m  require('sys').puts(bark);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvar gently = new (require('gently'))[m
[32m+[m[32m  , assert = require('assert')[m
[32m+[m[32m  , dog = new Dog();[m
[32m+[m
[32m+[m[32mgently.expect(dog, 'bark', function(bark) {[m
[32m+[m[32m  assert.equal(bark, 'whuf, whuf');[m
[32m+[m[32m});[m
[32m+[m[32mgently.expect(dog, 'run');[m
[32m+[m
[32m+[m[32mdog.seeCat();[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/event_emitter.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/event_emitter.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7def134[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/example/event_emitter.js[m
[36m@@ -0,0 +1,11 @@[m
[32m+[m[32mrequire('../test/common');[m
[32m+[m[32mvar gently = new (require('gently'))[m
[32m+[m[32m  , stream = new (require('fs').WriteStream)('my_file.txt');[m
[32m+[m
[32m+[m[32mgently.expect(stream, 'emit', function(event) {[m
[32m+[m[32m  assert.equal(event, 'open');[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mgently.expect(stream, 'emit', function(event) {[m
[32m+[m[32m  assert.equal(event, 'drain');[m
[32m+[m[32m});[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/index.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..69122bd[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/index.js[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mmodule.exports = require('./lib/gently');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/gently.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/gently.js[m
[1mnew file mode 100644[m
[1mindex 0000000..8af0e1e[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/gently.js[m
[36m@@ -0,0 +1,184 @@[m
[32m+[m[32mvar path = require('path');[m
[32m+[m
[32m+[m[32mfunction Gently() {[m
[32m+[m[32m  this.expectations = [];[m
[32m+[m[32m  this.hijacked = {};[m
[32m+[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  process.addListener('exit', function() {[m
[32m+[m[32m    self.verify('process exit');[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m[32mmodule.exports = Gently;[m
[32m+[m
[32m+[m[32mGently.prototype.stub = function(location, exportsName) {[m
[32m+[m[32m  function Stub() {[m
[32m+[m[32m    return Stub['new'].apply(this, arguments);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  Stub['new'] = function () {};[m
[32m+[m
[32m+[m[32m  var stubName = 'require('+JSON.stringify(location)+')';[m
[32m+[m[32m  if (exportsName) {[m
[32m+[m[32m    stubName += '.'+exportsName;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  Stub.prototype.toString = Stub.toString = function() {[m
[32m+[m[32m    return stubName;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  var exports = this.hijacked[location] || {};[m
[32m+[m[32m  if (exportsName) {[m
[32m+[m[32m    exports[exportsName] = Stub;[m
[32m+[m[32m  } else {[m
[32m+[m[32m    exports = Stub;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  this.hijacked[location] = exports;[m
[32m+[m[32m  return Stub;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mGently.prototype.hijack = function(realRequire) {[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  return function(location) {[m
[32m+[m[32m    return self.hijacked[location] = (self.hijacked[location])[m
[32m+[m[32m      ? self.hijacked[location][m
[32m+[m[32m      : realRequire(location);[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mGently.prototype.expect = function(obj, method, count, stubFn) {[m
[32m+[m[32m  if (typeof obj != 'function' && typeof obj != 'object' && typeof obj != 'number') {[m
[32m+[m[32m    throw new Error[m
[32m+[m[32m      ( 'Bad 1st argument for gently.expect(), '[m
[32m+[m[32m      + 'object, function, or number expected, got: '+(typeof obj)[m
[32m+[m[32m      );[m
[32m+[m[32m  } else if (typeof obj == 'function' && (typeof method != 'string')) {[m
[32m+[m[32m    // expect(stubFn) interface[m
[32m+[m[32m    stubFn = obj;[m
[32m+[m[32m    obj = null;[m
[32m+[m[32m    method = null;[m
[32m+[m[32m    count = 1;[m
[32m+[m[32m  } else if (typeof method == 'function') {[m
[32m+[m[32m    // expect(count, stubFn) interface[m
[32m+[m[32m    count = obj;[m
[32m+[m[32m    stubFn = method;[m
[32m+[m[32m    obj = null;[m
[32m+[m[32m    method = null;[m
[32m+[m[32m  } else if (typeof count == 'function') {[m
[32m+[m[32m    // expect(obj, method, stubFn) interface[m
[32m+[m[32m    stubFn = count;[m
[32m+[m[32m    count = 1;[m
[32m+[m[32m  } else if (count === undefined) {[m
[32m+[m[32m    // expect(obj, method) interface[m
[32m+[m[32m    count = 1;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  var name = this._name(obj, method, stubFn);[m
[32m+[m[32m  this.expectations.push({obj: obj, method: method, stubFn: stubFn, name: name, count: count});[m
[32m+[m
[32m+[m[32m  var self = this;[m
[32m+[m[32m  function delegate() {[m
[32m+[m[32m    return self._stubFn(this, obj, method, name, Array.prototype.slice.call(arguments));[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (!obj) {[m
[32m+[m[32m    return delegate;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  var original = (obj[method])[m
[32m+[m[32m    ? obj[method]._original || obj[method][m
[32m+[m[32m    : undefined;[m
[32m+[m
[32m+[m[32m  obj[method] = delegate;[m
[32m+[m[32m  return obj[method]._original = original;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mGently.prototype.restore = function(obj, method) {[m
[32m+[m[32m  if (!obj[method] || !obj[method]._original) {[m
[32m+[m[32m    throw new Error(this._name(obj, method)+' is not gently stubbed');[m
[32m+[m[32m  }[m
[32m+[m[32m  obj[method] = obj[method]._original;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mGently.prototype.verify = function(msg) {[m
[32m+[m[32m  if (!this.expectations.length) {[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  var validExpectations = [];[m
[32m+[m[32m  for (var i = 0, l = this.expectations.length; i < l; i++) {[m
[32m+[m[32m    var expectation = this.expectations[i];[m
[32m+[m
[32m+[m[32m    if (expectation.count > 0) {[m
[32m+[m[32m      validExpectations.push(expectation);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  this.expectations = []; // reset so that no duplicate verification attempts are made[m
[32m+[m
[32m+[m[32m  if (!validExpectations.length) {[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  var expectation = validExpectations[0];[m
[32m+[m
[32m+[m[32m  throw new Error[m
[32m+[m[32m    ( 'Expected call to '+expectation.name+' did not happen'[m
[32m+[m[32m    + ( (msg)[m
[32m+[m[32m        ? ' ('+msg+')'[m
[32m+[m[32m        : ''[m
[32m+[m[32m      )[m
[32m+[m[32m    );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mGently.prototype._stubFn = function(self, obj, method, name, args) {[m
[32m+[m[32m  var expectation = this.expectations[0], obj, method;[m
[32m+[m
[32m+[m[32m  if (!expectation) {[m
[32m+[m[32m    throw new Error('Unexpected call to '+name+', no call was expected');[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (expectation.obj !== obj || expectation.method !== method) {[m
[32m+[m[32m    throw new Error('Unexpected call to '+name+', expected call to '+ expectation.name);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  expectation.count -= 1;[m
[32m+[m[32m  if (expectation.count === 0) {[m
[32m+[m[32m    this.expectations.shift();[m
[32m+[m
[32m+[m[32m    // autorestore original if its not a closure[m
[32m+[m[32m    // and no more expectations on that object[m
[32m+[m[32m    var has_more_expectations = this.expectations.reduce(function (memo, expectation) {[m
[32m+[m[32m      return memo || (expectation.obj === obj && expectation.method === method);[m
[32m+[m[32m    }, false);[m
[32m+[m[32m    if (obj !== null && method !== null && !has_more_expectations) {[m
[32m+[m[32m      if (typeof obj[method]._original !== 'undefined') {[m
[32m+[m[32m        obj[method] = obj[method]._original;[m
[32m+[m[32m        delete obj[method]._original;[m
[32m+[m[32m      } else {[m
[32m+[m[32m        delete obj[method];[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (expectation.stubFn) {[m
[32m+[m[32m    return expectation.stubFn.apply(self, args);[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mGently.prototype._name = function(obj, method, stubFn) {[m
[32m+[m[32m  if (obj) {[m
[32m+[m[32m    var objectName = obj.toString();[m
[32m+[m[32m    if (objectName == '[object Object]' && obj.constructor.name) {[m
[32m+[m[32m      objectName = '['+obj.constructor.name+']';[m
[32m+[m[32m    }[m
[32m+[m[32m    return (objectName)+'.'+method+'()';[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (stubFn.name) {[m
[32m+[m[32m    return stubFn.name+'()';[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return '>> '+stubFn.toString()+' <<';[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/index.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..64c1977[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/lib/gently/index.js[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mmodule.exports = require('./gently');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/package.json b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/package.json[m
[1mnew file mode 100644[m
[1mindex 0000000..9c1b7a0[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/package.json[m
[36m@@ -0,0 +1,14 @@[m
[32m+[m[32m{[m
[32m+[m[32m  "name": "gently",[m
[32m+[m[32m  "version": "0.9.2",[m
[32m+[m[32m  "directories": {[m
[32m+[m[32m    "lib": "./lib/gently"[m
[32m+[m[32m  },[m
[32m+[m[32m  "main": "./lib/gently/index",[m
[32m+[m[32m  "dependencies": {},[m
[32m+[m[32m  "devDependencies": {},[m
[32m+[m[32m  "engines": {[m
[32m+[m[32m    "node": "*"[m
[32m+[m[32m  },[m
[32m+[m[32m  "optionalDependencies": {}[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/common.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/common.js[m
[1mnew file mode 100644[m
[1mindex 0000000..978b5c5[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/common.js[m
[36m@@ -0,0 +1,8 @@[m
[32m+[m[32mvar path = require('path')[m
[32m+[m[32m  , sys = require('sys');[m
[32m+[m
[32m+[m[32mrequire.paths.unshift(path.dirname(__dirname)+'/lib');[m
[32m+[m
[32m+[m[32mglobal.puts = sys.puts;[m
[32m+[m[32mglobal.p = function() {sys.error(sys.inspect.apply(null, arguments))};;[m
[32m+[m[32mglobal.assert = require('assert');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/simple/test-gently.js b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/simple/test-gently.js[m
[1mnew file mode 100644[m
[1mindex 0000000..4f8fe2d[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/node-gently/test/simple/test-gently.js[m
[36m@@ -0,0 +1,348 @@[m
[32m+[m[32mrequire('../common');[m
[32m+[m[32mvar Gently = require('gently')[m
[32m+[m[32m  , gently;[m
[32m+[m
[32m+[m[32mfunction test(test) {[m
[32m+[m[32m  process.removeAllListeners('exit');[m
[32m+[m[32m  gently = new Gently();[m
[32m+[m[32m  test();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mtest(function constructor() {[m
[32m+[m[32m  assert.deepEqual(gently.expectations, []);[m
[32m+[m[32m  assert.deepEqual(gently.hijacked, {});[m
[32m+[m[32m  assert.equal(gently.constructor.name, 'Gently');[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function expectBadArgs() {[m
[32m+[m[32m  var BAD_ARG = 'oh no';[m
[32m+[m[32m  try {[m
[32m+[m[32m    gently.expect(BAD_ARG);[m
[32m+[m[32m    assert.ok(false, 'throw needs to happen');[m
[32m+[m[32m  } catch (e) {[m
[32m+[m[32m    assert.equal(e.message, 'Bad 1st argument for gently.expect(), object, function, or number expected, got: '+(typeof BAD_ARG));[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function expectObjMethod() {[m
[32m+[m[32m  var OBJ = {}, NAME = 'foobar';[m
[32m+[m[32m  OBJ.foo = function(x) {[m
[32m+[m[32m    return x;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  gently._name = function() {[m
[32m+[m[32m    return NAME;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  var original = OBJ.foo[m
[32m+[m[32m    , stubFn = function() {};[m
[32m+[m
[32m+[m[32m  (function testAddOne() {[m
[32m+[m[32m    assert.strictEqual(gently.expect(OBJ, 'foo', stubFn), original);[m
[32m+[m
[32m+[m[32m    assert.equal(gently.expectations.length, 1);[m
[32m+[m[32m    var expectation = gently.expectations[0];[m
[32m+[m[32m    assert.strictEqual(expectation.obj, OBJ);[m
[32m+[m[32m    assert.strictEqual(expectation.method, 'foo');[m
[32m+[m[32m    assert.strictEqual(expectation.stubFn, stubFn);[m
[32m+[m[32m    assert.strictEqual(expectation.name, NAME);[m
[32m+[m[32m    assert.strictEqual(OBJ.foo._original, original);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testAddTwo() {[m
[32m+[m[32m    gently.expect(OBJ, 'foo', 2, stubFn);[m
[32m+[m[32m    assert.equal(gently.expectations.length, 2);[m
[32m+[m[32m    assert.strictEqual(OBJ.foo._original, original);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testAddOneWithoutMock() {[m
[32m+[m[32m    gently.expect(OBJ, 'foo');[m
[32m+[m[32m    assert.equal(gently.expectations.length, 3);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  var stubFnCalled = 0, SELF = {};[m
[32m+[m[32m  gently._stubFn = function(self, obj, method, name, args) {[m
[32m+[m[32m    stubFnCalled++;[m
[32m+[m[32m    assert.strictEqual(self, SELF);[m
[32m+[m[32m    assert.strictEqual(obj, OBJ);[m
[32m+[m[32m    assert.strictEqual(method, 'foo');[m
[32m+[m[32m    assert.strictEqual(name, NAME);[m
[32m+[m[32m    assert.deepEqual(args, [1, 2]);[m
[32m+[m[32m    return 23;[m
[32m+[m[32m  };[m
[32m+[m[32m  assert.equal(OBJ.foo.apply(SELF, [1, 2]), 23);[m
[32m+[m[32m  assert.equal(stubFnCalled, 1);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function expectClosure() {[m
[32m+[m[32m  var NAME = 'MY CLOSURE';[m
[32m+[m[32m  function closureFn() {};[m
[32m+[m
[32m+[m[32m  gently._name = function() {[m
[32m+[m[32m    return NAME;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  var fn = gently.expect(closureFn);[m
[32m+[m[32m  assert.equal(gently.expectations.length, 1);[m
[32m+[m[32m  var expectation = gently.expectations[0];[m
[32m+[m[32m  assert.strictEqual(expectation.obj, null);[m
[32m+[m[32m  assert.strictEqual(expectation.method, null);[m
[32m+[m[32m  assert.strictEqual(expectation.stubFn, closureFn);[m
[32m+[m[32m  assert.strictEqual(expectation.name, NAME);[m
[32m+[m
[32m+[m[32m  var stubFnCalled = 0, SELF = {};[m
[32m+[m[32m  gently._stubFn = function(self, obj, method, name, args) {[m
[32m+[m[32m    stubFnCalled++;[m
[32m+[m[32m    assert.strictEqual(self, SELF);[m
[32m+[m[32m    assert.strictEqual(obj, null);[m
[32m+[m[32m    assert.strictEqual(method, null);[m
[32m+[m[32m    assert.strictEqual(name, NAME);[m
[32m+[m[32m    assert.deepEqual(args, [1, 2]);[m
[32m+[m[32m    return 23;[m
[32m+[m[32m  };[m
[32m+[m[32m  assert.equal(fn.apply(SELF, [1, 2]), 23);[m
[32m+[m[32m  assert.equal(stubFnCalled, 1);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function expectClosureCount() {[m
[32m+[m[32m  var stubFnCalled = 0;[m
[32m+[m[32m  function closureFn() {stubFnCalled++};[m
[32m+[m
[32m+[m[32m  var fn = gently.expect(2, closureFn);[m
[32m+[m[32m  assert.equal(gently.expectations.length, 1);[m
[32m+[m[32m  fn();[m
[32m+[m[32m  assert.equal(gently.expectations.length, 1);[m
[32m+[m[32m  fn();[m
[32m+[m[32m  assert.equal(stubFnCalled, 2);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function restore() {[m
[32m+[m[32m  var OBJ = {}, NAME = '[my object].myFn()';[m
[32m+[m[32m  OBJ.foo = function(x) {[m
[32m+[m[32m    return x;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  gently._name = function() {[m
[32m+[m[32m    return NAME;[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  var original = OBJ.foo;[m
[32m+[m[32m  gently.expect(OBJ, 'foo');[m
[32m+[m[32m  gently.restore(OBJ, 'foo');[m
[32m+[m[32m  assert.strictEqual(OBJ.foo, original);[m
[32m+[m
[32m+[m[32m  (function testError() {[m
[32m+[m[32m    try {[m
[32m+[m[32m      gently.restore(OBJ, 'foo');[m
[32m+[m[32m      assert.ok(false, 'throw needs to happen');[m
[32m+[m[32m    } catch (e) {[m
[32m+[m[32m      assert.equal(e.message, NAME+' is not gently stubbed');[m
[32m+[m[32m    }[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function _stubFn() {[m
[32m+[m[32m  var OBJ1 = {toString: function() {return '[OBJ 1]'}}[m
[32m+[m[32m    , OBJ2 = {toString: function() {return '[OBJ 2]'}, foo: function () {return 'bar';}}[m
[32m+[m[32m    , SELF = {};[m
[32m+[m
[32m+[m[32m  gently.expect(OBJ1, 'foo', function(x) {[m
[32m+[m[32m    assert.strictEqual(this, SELF);[m
[32m+[m[32m    return x * 2;[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  assert.equal(gently._stubFn(SELF, OBJ1, 'foo', 'dummy_name', [5]), 10);[m
[32m+[m
[32m+[m[32m  (function testAutorestore() {[m
[32m+[m[32m    assert.equal(OBJ2.foo(), 'bar');[m
[32m+[m
[32m+[m[32m    gently.expect(OBJ2, 'foo', function() {[m
[32m+[m[32m      return 'stubbed foo';[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(OBJ2, 'foo', function() {[m
[32m+[m[32m      return "didn't restore yet";[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    assert.equal(gently._stubFn(SELF, OBJ2, 'foo', 'dummy_name', []), 'stubbed foo');[m
[32m+[m[32m    assert.equal(gently._stubFn(SELF, OBJ2, 'foo', 'dummy_name', []), "didn't restore yet");[m
[32m+[m[32m    assert.equal(OBJ2.foo(), 'bar');[m
[32m+[m[32m    assert.deepEqual(gently.expectations, []);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testNoMoreCallExpected() {[m
[32m+[m[32m    try {[m
[32m+[m[32m      gently._stubFn(SELF, OBJ1, 'foo', 'dummy_name', [5]);[m
[32m+[m[32m      assert.ok(false, 'throw needs to happen');[m
[32m+[m[32m    } catch (e) {[m
[32m+[m[32m      assert.equal(e.message, 'Unexpected call to dummy_name, no call was expected');[m
[32m+[m[32m    }[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testDifferentCallExpected() {[m
[32m+[m[32m    gently.expect(OBJ2, 'bar');[m
[32m+[m[32m    try {[m
[32m+[m[32m      gently._stubFn(SELF, OBJ1, 'foo', 'dummy_name', [5]);[m
[32m+[m[32m      assert.ok(false, 'throw needs to happen');[m
[32m+[m[32m    } catch (e) {[m
[32m+[m[32m      assert.equal(e.message, 'Unexpected call to dummy_name, expected call to '+gently._name(OBJ2, 'bar'));[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    assert.equal(gently.expectations.length, 1);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testNoMockCallback() {[m
[32m+[m[32m    OBJ2.bar();[m
[32m+[m[32m    assert.equal(gently.expectations.length, 0);[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function stub() {[m
[32m+[m[32m  var LOCATION = './my_class';[m
[32m+[m
[32m+[m[32m  (function testRegular() {[m
[32m+[m[32m    var Stub = gently.stub(LOCATION);[m
[32m+[m[32m    assert.ok(Stub instanceof Function);[m
[32m+[m[32m    assert.strictEqual(gently.hijacked[LOCATION], Stub);[m
[32m+[m[32m    assert.ok(Stub['new'] instanceof Function);[m
[32m+[m[32m    assert.equal(Stub.toString(), 'require('+JSON.stringify(LOCATION)+')');[m
[32m+[m
[32m+[m[32m    (function testConstructor() {[m
[32m+[m[32m      var newCalled = 0[m
[32m+[m[32m        , STUB[m
[32m+[m[32m        , ARGS = ['foo', 'bar'];[m
[32m+[m
[32m+[m[32m      Stub['new'] = function(a, b) {[m
[32m+[m[32m        assert.equal(a, ARGS[0]);[m
[32m+[m[32m        assert.equal(b, ARGS[1]);[m
[32m+[m[32m        newCalled++;[m
[32m+[m[32m        STUB = this;[m
[32m+[m[32m      };[m
[32m+[m
[32m+[m[32m      var stub = new Stub(ARGS[0], ARGS[1]);[m
[32m+[m[32m      assert.strictEqual(stub, STUB);[m
[32m+[m[32m      assert.equal(newCalled, 1);[m
[32m+[m[32m      assert.equal(stub.toString(), 'require('+JSON.stringify(LOCATION)+')');[m
[32m+[m[32m    })();[m
[32m+[m
[32m+[m[32m    (function testUseReturnValueAsInstance() {[m
[32m+[m[32m      var R = {};[m
[32m+[m
[32m+[m[32m      Stub['new'] = function() {[m
[32m+[m[32m        return R;[m
[32m+[m[32m      };[m
[32m+[m
[32m+[m[32m      var stub = new Stub();[m
[32m+[m[32m      assert.strictEqual(stub, R);[m
[32m+[m
[32m+[m[32m    })();[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  var EXPORTS_NAME = 'MyClass';[m
[32m+[m[32m  test(function testExportsName() {[m
[32m+[m[32m    var Stub = gently.stub(LOCATION, EXPORTS_NAME);[m
[32m+[m[32m    assert.strictEqual(gently.hijacked[LOCATION][EXPORTS_NAME], Stub);[m
[32m+[m[32m    assert.equal(Stub.toString(), 'require('+JSON.stringify(LOCATION)+').'+EXPORTS_NAME);[m
[32m+[m
[32m+[m[32m    (function testConstructor() {[m
[32m+[m[32m      var stub = new Stub();[m
[32m+[m[32m      assert.equal(Stub.toString(), 'require('+JSON.stringify(LOCATION)+').'+EXPORTS_NAME);[m
[32m+[m[32m    })();[m
[32m+[m[32m  });[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function hijack() {[m
[32m+[m[32m  var LOCATION = './foo'[m
[32m+[m[32m    , REQUIRE_CALLS = 0[m
[32m+[m[32m    , EXPORTS = {}[m
[32m+[m[32m    , REQUIRE = function() {[m
[32m+[m[32m        REQUIRE_CALLS++;[m
[32m+[m[32m        return EXPORTS;[m
[32m+[m[32m      };[m
[32m+[m
[32m+[m[32m  var hijackedRequire = gently.hijack(REQUIRE);[m
[32m+[m[32m  hijackedRequire(LOCATION);[m
[32m+[m[32m  assert.strictEqual(gently.hijacked[LOCATION], EXPORTS);[m
[32m+[m
[32m+[m[32m  assert.equal(REQUIRE_CALLS, 1);[m
[32m+[m
[32m+[m[32m  // make sure we are caching the hijacked module[m
[32m+[m[32m  hijackedRequire(LOCATION);[m
[32m+[m[32m  assert.equal(REQUIRE_CALLS, 1);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function verify() {[m
[32m+[m[32m  var OBJ = {toString: function() {return '[OBJ]'}};[m
[32m+[m[32m  gently.verify();[m
[32m+[m
[32m+[m[32m  gently.expect(OBJ, 'foo');[m
[32m+[m[32m  try {[m
[32m+[m[32m    gently.verify();[m
[32m+[m[32m    assert.ok(false, 'throw needs to happen');[m
[32m+[m[32m  } catch (e) {[m
[32m+[m[32m    assert.equal(e.message, 'Expected call to [OBJ].foo() did not happen');[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  try {[m
[32m+[m[32m    gently.verify('foo');[m
[32m+[m[32m    assert.ok(false, 'throw needs to happen');[m
[32m+[m[32m  } catch (e) {[m
[32m+[m[32m    assert.equal(e.message, 'Expected call to [OBJ].foo() did not happen (foo)');[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function processExit() {[m
[32m+[m[32m  var verifyCalled = 0;[m
[32m+[m[32m  gently.verify = function(msg) {[m
[32m+[m[32m    verifyCalled++;[m
[32m+[m[32m    assert.equal(msg, 'process exit');[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  process.emit('exit');[m
[32m+[m[32m  assert.equal(verifyCalled, 1);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function _name() {[m
[32m+[m[32m  (function testNamedClass() {[m
[32m+[m[32m    function Foo() {};[m
[32m+[m[32m    var foo = new Foo();[m
[32m+[m[32m    assert.equal(gently._name(foo, 'bar'), '[Foo].bar()');[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testToStringPreference() {[m
[32m+[m[32m    function Foo() {};[m
[32m+[m[32m    Foo.prototype.toString = function() {[m
[32m+[m[32m      return '[Superman 123]';[m
[32m+[m[32m    };[m
[32m+[m[32m    var foo = new Foo();[m
[32m+[m[32m    assert.equal(gently._name(foo, 'bar'), '[Superman 123].bar()');[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testUnamedClass() {[m
[32m+[m[32m    var Foo = function() {};[m
[32m+[m[32m    var foo = new Foo();[m
[32m+[m[32m    assert.equal(gently._name(foo, 'bar'), foo.toString()+'.bar()');[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testNamedClosure() {[m
[32m+[m[32m    function myClosure() {};[m
[32m+[m[32m    assert.equal(gently._name(null, null, myClosure), myClosure.name+'()');[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testUnamedClosure() {[m
[32m+[m[32m    var myClosure = function() {2+2 == 5};[m
[32m+[m[32m    assert.equal(gently._name(null, null, myClosure), '>> '+myClosure.toString()+' <<');[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function verifyExpectNone() {[m
[32m+[m[32m  var OBJ = {toString: function() {return '[OBJ]'}};[m
[32m+[m[32m  gently.verify();[m
[32m+[m
[32m+[m[32m  gently.expect(OBJ, 'foo', 0);[m
[32m+[m[32m  try {[m
[32m+[m[32m    gently.verify();[m
[32m+[m[32m  } catch (e) {[m
[32m+[m[32m    assert.fail('Exception should not have been thrown');[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/package.json b/node_modules/express/node_modules/connect/node_modules/formidable/package.json[m
[1mnew file mode 100644[m
[1mindex 0000000..4d94297[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/package.json[m
[36m@@ -0,0 +1,23 @@[m
[32m+[m[32m{[m
[32m+[m[32m  "name": "formidable",[m
[32m+[m[32m  "version": "1.0.11",[m
[32m+[m[32m  "dependencies": {},[m
[32m+[m[32m  "devDependencies": {[m
[32m+[m[32m    "gently": "0.8.0",[m
[32m+[m[32m    "findit": "0.1.1",[m
[32m+[m[32m    "hashish": "0.0.4",[m
[32m+[m[32m    "urun": "0.0.4",[m
[32m+[m[32m    "utest": "0.0.3"[m
[32m+[m[32m  },[m
[32m+[m[32m  "directories": {[m
[32m+[m[32m    "lib": "./lib"[m
[32m+[m[32m  },[m
[32m+[m[32m  "main": "./lib/index",[m
[32m+[m[32m  "scripts": {[m
[32m+[m[32m    "test": "make test"[m
[32m+[m[32m  },[m
[32m+[m[32m  "engines": {[m
[32m+[m[32m    "node": "*"[m
[32m+[m[32m  },[m
[32m+[m[32m  "optionalDependencies": {}[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/common.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/common.js[m
[1mnew file mode 100644[m
[1mindex 0000000..eb432ad[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/common.js[m
[36m@@ -0,0 +1,19 @@[m
[32m+[m[32mvar mysql = require('..');[m
[32m+[m[32mvar path = require('path');[m
[32m+[m
[32m+[m[32mvar root = path.join(__dirname, '../');[m
[32m+[m[32mexports.dir = {[m
[32m+[m[32m  root    : root,[m
[32m+[m[32m  lib     : root + '/lib',[m
[32m+[m[32m  fixture : root + '/test/fixture',[m
[32m+[m[32m  tmp     : root + '/test/tmp',[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexports.port = 13532;[m
[32m+[m
[32m+[m[32mexports.formidable = require('..');[m
[32m+[m[32mexports.assert     = require('assert');[m
[32m+[m
[32m+[m[32mexports.require = function(lib) {[m
[32m+[m[32m  return require(exports.dir.lib + '/' + lib);[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/funkyfilename.txt b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/funkyfilename.txt[m
[1mnew file mode 100644[m
[1mindex 0000000..e7a4785[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/funkyfilename.txt[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mI am a text file with a funky name![m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/plain.txt b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/plain.txt[m
[1mnew file mode 100644[m
[1mindex 0000000..9b6903e[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/file/plain.txt[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mI am a plain text file[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/http/special-chars-in-filename/info.md b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/http/special-chars-in-filename/info.md[m
[1mnew file mode 100644[m
[1mindex 0000000..3c9dbe3[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/http/special-chars-in-filename/info.md[m
[36m@@ -0,0 +1,3 @@[m
[32m+[m[32m* Opera does not allow submitting this file, it shows a warning to the[m
[32m+[m[32m  user that the file could not be found instead. Tested in 9.8, 11.51 on OSX.[m
[32m+[m[32m  Reported to Opera on 08.09.2011 (tracking email DSK-346009@bugs.opera.com).[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/no-filename.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/no-filename.js[m
[1mnew file mode 100644[m
[1mindex 0000000..0bae449[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/no-filename.js[m
[36m@@ -0,0 +1,3 @@[m
[32m+[m[32mmodule.exports['generic.http'] = [[m
[32m+[m[32m  {type: 'file', name: 'upload', filename: '', fixture: 'plain.txt'},[m
[32m+[m[32m];[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/special-chars-in-filename.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/special-chars-in-filename.js[m
[1mnew file mode 100644[m
[1mindex 0000000..eb76fdc[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/js/special-chars-in-filename.js[m
[36m@@ -0,0 +1,21 @@[m
[32m+[m[32mvar properFilename = 'funkyfilename.txt';[m
[32m+[m
[32m+[m[32mfunction expect(filename) {[m
[32m+[m[32m  return [[m
[32m+[m[32m    {type: 'field', name: 'title', value: 'Weird filename'},[m
[32m+[m[32m    {type: 'file', name: 'upload', filename: filename, fixture: properFilename},[m
[32m+[m[32m  ];[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mvar webkit = " ? % * | \" < > . ? ; ' @ # $ ^ & ( ) - _ = + { } [ ] ` ~.txt";[m
[32m+[m[32mvar ffOrIe = " ? % * | \" < > . ☃ ; ' @ # $ ^ & ( ) - _ = + { } [ ] ` ~.txt";[m
[32m+[m
[32m+[m[32mmodule.exports = {[m
[32m+[m[32m  'osx-chrome-13.http'   : expect(webkit),[m
[32m+[m[32m  'osx-firefox-3.6.http' : expect(ffOrIe),[m
[32m+[m[32m  'osx-safari-5.http'    : expect(webkit),[m
[32m+[m[32m  'xp-chrome-12.http'    : expect(webkit),[m
[32m+[m[32m  'xp-ie-7.http'         : expect(ffOrIe),[m
[32m+[m[32m  'xp-ie-8.http'         : expect(ffOrIe),[m
[32m+[m[32m  'xp-safari-5.http'     : expect(webkit),[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/multipart.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/multipart.js[m
[1mnew file mode 100644[m
[1mindex 0000000..a476169[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/fixture/multipart.js[m
[36m@@ -0,0 +1,72 @@[m
[32m+[m[32mexports['rfc1867'] =[m
[32m+[m[32m  { boundary: 'AaB03x',[m
[32m+[m[32m    raw:[m
[32m+[m[32m      '--AaB03x\r\n'+[m
[32m+[m[32m      'content-disposition: form-data; name="field1"\r\n'+[m
[32m+[m[32m      '\r\n'+[m
[32m+[m[32m      'Joe Blow\r\nalmost tricked you!\r\n'+[m
[32m+[m[32m      '--AaB03x\r\n'+[m
[32m+[m[32m      'content-disposition: form-data; name="pics"; filename="file1.txt"\r\n'+[m
[32m+[m[32m      'Content-Type: text/plain\r\n'+[m
[32m+[m[32m      '\r\n'+[m
[32m+[m[32m      '... contents of file1.txt ...\r\r\n'+[m
[32m+[m[32m      '--AaB03x--\r\n',[m
[32m+[m[32m    parts:[m
[32m+[m[32m    [ { headers: {[m
[32m+[m[32m          'content-disposition': 'form-data; name="field1"',[m
[32m+[m[32m        },[m
[32m+[m[32m        data: 'Joe Blow\r\nalmost tricked you!',[m
[32m+[m[32m      },[m
[32m+[m[32m      { headers: {[m
[32m+[m[32m          'content-disposition': 'form-data; name="pics"; filename="file1.txt"',[m
[32m+[m[32m          'Content-Type': 'text/plain',[m
[32m+[m[32m        },[m
[32m+[m[32m        data: '... contents of file1.txt ...\r',[m
[32m+[m[32m      }[m
[32m+[m[32m    ][m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32mexports['noTrailing\r\n'] =[m
[32m+[m[32m  { boundary: 'AaB03x',[m
[32m+[m[32m    raw:[m
[32m+[m[32m      '--AaB03x\r\n'+[m
[32m+[m[32m      'content-disposition: form-data; name="field1"\r\n'+[m
[32m+[m[32m      '\r\n'+[m
[32m+[m[32m      'Joe Blow\r\nalmost tricked you!\r\n'+[m
[32m+[m[32m      '--AaB03x\r\n'+[m
[32m+[m[32m      'content-disposition: form-data; name="pics"; filename="file1.txt"\r\n'+[m
[32m+[m[32m      'Content-Type: text/plain\r\n'+[m
[32m+[m[32m      '\r\n'+[m
[32m+[m[32m      '... contents of file1.txt ...\r\r\n'+[m
[32m+[m[32m      '--AaB03x--',[m
[32m+[m[32m    parts:[m
[32m+[m[32m    [ { headers: {[m
[32m+[m[32m          'content-disposition': 'form-data; name="field1"',[m
[32m+[m[32m        },[m
[32m+[m[32m        data: 'Joe Blow\r\nalmost tricked you!',[m
[32m+[m[32m      },[m
[32m+[m[32m      { headers: {[m
[32m+[m[32m          'content-disposition': 'form-data; name="pics"; filename="file1.txt"',[m
[32m+[m[32m          'Content-Type': 'text/plain',[m
[32m+[m[32m        },[m
[32m+[m[32m        data: '... contents of file1.txt ...\r',[m
[32m+[m[32m      }[m
[32m+[m[32m    ][m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32mexports['emptyHeader'] =[m
[32m+[m[32m  { boundary: 'AaB03x',[m
[32m+[m[32m    raw:[m
[32m+[m[32m      '--AaB03x\r\n'+[m
[32m+[m[32m      'content-disposition: form-data; name="field1"\r\n'+[m
[32m+[m[32m      ': foo\r\n'+[m
[32m+[m[32m      '\r\n'+[m
[32m+[m[32m      'Joe Blow\r\nalmost tricked you!\r\n'+[m
[32m+[m[32m      '--AaB03x\r\n'+[m
[32m+[m[32m      'content-disposition: form-data; name="pics"; filename="file1.txt"\r\n'+[m
[32m+[m[32m      'Content-Type: text/plain\r\n'+[m
[32m+[m[32m      '\r\n'+[m
[32m+[m[32m      '... contents of file1.txt ...\r\r\n'+[m
[32m+[m[32m      '--AaB03x--\r\n',[m
[32m+[m[32m    expectError: true,[m
[32m+[m[32m  };[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/integration/test-fixtures.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/integration/test-fixtures.js[m
[1mnew file mode 100644[m
[1mindex 0000000..66ad259[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/integration/test-fixtures.js[m
[36m@@ -0,0 +1,89 @@[m
[32m+[m[32mvar hashish = require('hashish');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar findit = require('findit');[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar http = require('http');[m
[32m+[m[32mvar net = require('net');[m
[32m+[m[32mvar assert = require('assert');[m
[32m+[m
[32m+[m[32mvar common = require('../common');[m
[32m+[m[32mvar formidable = common.formidable;[m
[32m+[m
[32m+[m[32mvar server = http.createServer();[m
[32m+[m[32mserver.listen(common.port, findFixtures);[m
[32m+[m
[32m+[m[32mfunction findFixtures() {[m
[32m+[m[32m  var fixtures = [];[m
[32m+[m[32m  findit[m
[32m+[m[32m    .sync(common.dir.fixture + '/js')[m
[32m+[m[32m    .forEach(function(jsPath) {[m
[32m+[m[32m      if (!/\.js$/.test(jsPath)) return;[m
[32m+[m
[32m+[m[32m      var group = path.basename(jsPath, '.js');[m
[32m+[m[32m      hashish.forEach(require(jsPath), function(fixture, name) {[m
[32m+[m[32m        fixtures.push({[m
[32m+[m[32m          name    : group + '/' + name,[m
[32m+[m[32m          fixture : fixture,[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m  testNext(fixtures);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction testNext(fixtures) {[m
[32m+[m[32m  var fixture = fixtures.shift();[m
[32m+[m[32m  if (!fixture) return server.close();[m
[32m+[m
[32m+[m[32m  var name    = fixture.name;[m
[32m+[m[32m  var fixture = fixture.fixture;[m
[32m+[m
[32m+[m[32m  uploadFixture(name, function(err, parts) {[m
[32m+[m[32m    if (err) throw err;[m
[32m+[m
[32m+[m[32m    fixture.forEach(function(expectedPart, i) {[m
[32m+[m[32m      var parsedPart = parts[i];[m
[32m+[m[32m      assert.equal(parsedPart.type, expectedPart.type);[m
[32m+[m[32m      assert.equal(parsedPart.name, expectedPart.name);[m
[32m+[m
[32m+[m[32m      if (parsedPart.type === 'file') {[m
[32m+[m[32m        var filename = parsedPart.value.name;[m
[32m+[m[32m        assert.equal(filename, expectedPart.filename);[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    testNext(fixtures);[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mfunction uploadFixture(name, cb) {[m
[32m+[m[32m  server.once('request', function(req, res) {[m
[32m+[m[32m    var form = new formidable.IncomingForm();[m
[32m+[m[32m    form.uploadDir = common.dir.tmp;[m
[32m+[m[32m    form.parse(req);[m
[32m+[m
[32m+[m[32m    function callback() {[m
[32m+[m[32m      var realCallback = cb;[m
[32m+[m[32m      cb = function() {};[m
[32m+[m[32m      realCallback.apply(null, arguments);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    var parts = [];[m
[32m+[m[32m    form[m
[32m+[m[32m      .on('error', callback)[m
[32m+[m[32m      .on('fileBegin', function(name, value) {[m
[32m+[m[32m        parts.push({type: 'file', name: name, value: value});[m
[32m+[m[32m      })[m
[32m+[m[32m      .on('field', function(name, value) {[m
[32m+[m[32m        parts.push({type: 'field', name: name, value: value});[m
[32m+[m[32m      })[m
[32m+[m[32m      .on('end', function() {[m
[32m+[m[32m        callback(null, parts);[m
[32m+[m[32m      });[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  var socket = net.createConnection(common.port);[m
[32m+[m[32m  var file = fs.createReadStream(common.dir.fixture + '/http/' + name);[m
[32m+[m
[32m+[m[32m  file.pipe(socket);[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/common.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/common.js[m
[1mnew file mode 100644[m
[1mindex 0000000..2b98598[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/common.js[m
[36m@@ -0,0 +1,24 @@[m
[32m+[m[32mvar path = require('path'),[m
[32m+[m[32m    fs = require('fs');[m
[32m+[m
[32m+[m[32mtry {[m
[32m+[m[32m  global.Gently = require('gently');[m
[32m+[m[32m} catch (e) {[m
[32m+[m[32m  throw new Error('this test suite requires node-gently');[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexports.lib = path.join(__dirname, '../../lib');[m
[32m+[m
[32m+[m[32mglobal.GENTLY = new Gently();[m
[32m+[m
[32m+[m[32mglobal.assert = require('assert');[m
[32m+[m[32mglobal.TEST_PORT = 13532;[m
[32m+[m[32mglobal.TEST_FIXTURES = path.join(__dirname, '../fixture');[m
[32m+[m[32mglobal.TEST_TMP = path.join(__dirname, '../tmp');[m
[32m+[m
[32m+[m[32m// Stupid new feature in node that complains about gently attaching too many[m
[32m+[m[32m// listeners to process 'exit'. This is a workaround until I can think of a[m
[32m+[m[32m// better way to deal with this.[m
[32m+[m[32mif (process.setMaxListeners) {[m
[32m+[m[32m  process.setMaxListeners(10000);[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/integration/test-multipart-parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/integration/test-multipart-parser.js[m
[1mnew file mode 100644[m
[1mindex 0000000..75232aa[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/integration/test-multipart-parser.js[m
[36m@@ -0,0 +1,80 @@[m
[32m+[m[32mvar common = require('../common');[m
[32m+[m[32mvar CHUNK_LENGTH = 10,[m
[32m+[m[32m    multipartParser = require(common.lib + '/multipart_parser'),[m
[32m+[m[32m    MultipartParser = multipartParser.MultipartParser,[m
[32m+[m[32m    parser = new MultipartParser(),[m
[32m+[m[32m    fixtures = require(TEST_FIXTURES + '/multipart'),[m
[32m+[m[32m    Buffer = require('buffer').Buffer;[m
[32m+[m
[32m+[m[32mObject.keys(fixtures).forEach(function(name) {[m
[32m+[m[32m  var fixture = fixtures[name],[m
[32m+[m[32m      buffer = new Buffer(Buffer.byteLength(fixture.raw, 'binary')),[m
[32m+[m[32m      offset = 0,[m
[32m+[m[32m      chunk,[m
[32m+[m[32m      nparsed,[m
[32m+[m
[32m+[m[32m      parts = [],[m
[32m+[m[32m      part = null,[m
[32m+[m[32m      headerField,[m
[32m+[m[32m      headerValue,[m
[32m+[m[32m      endCalled = '';[m
[32m+[m
[32m+[m[32m  parser.initWithBoundary(fixture.boundary);[m
[32m+[m[32m  parser.onPartBegin = function() {[m
[32m+[m[32m    part = {headers: {}, data: ''};[m
[32m+[m[32m    parts.push(part);[m
[32m+[m[32m    headerField = '';[m
[32m+[m[32m    headerValue = '';[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onHeaderField = function(b, start, end) {[m
[32m+[m[32m    headerField += b.toString('ascii', start, end);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onHeaderValue = function(b, start, end) {[m
[32m+[m[32m    headerValue += b.toString('ascii', start, end);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  parser.onHeaderEnd = function() {[m
[32m+[m[32m    part.headers[headerField] = headerValue;[m
[32m+[m[32m    headerField = '';[m
[32m+[m[32m    headerValue = '';[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  parser.onPartData = function(b, start, end) {[m
[32m+[m[32m    var str = b.toString('ascii', start, end);[m
[32m+[m[32m    part.data += b.slice(start, end);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  parser.onEnd = function() {[m
[32m+[m[32m    endCalled = true;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  buffer.write(fixture.raw, 'binary', 0);[m
[32m+[m
[32m+[m[32m  while (offset < buffer.length) {[m
[32m+[m[32m    if (offset + CHUNK_LENGTH < buffer.length) {[m
[32m+[m[32m      chunk = buffer.slice(offset, offset+CHUNK_LENGTH);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      chunk = buffer.slice(offset, buffer.length);[m
[32m+[m[32m    }[m
[32m+[m[32m    offset = offset + CHUNK_LENGTH;[m
[32m+[m
[32m+[m[32m    nparsed = parser.write(chunk);[m
[32m+[m[32m    if (nparsed != chunk.length) {[m
[32m+[m[32m      if (fixture.expectError) {[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m[32m      puts('-- ERROR --');[m
[32m+[m[32m      p(chunk.toString('ascii'));[m
[32m+[m[32m      throw new Error(chunk.length+' bytes written, but only '+nparsed+' bytes parsed!');[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (fixture.expectError) {[m
[32m+[m[32m    throw new Error('expected parse error did not happen');[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  assert.ok(endCalled);[m
[32m+[m[32m  assert.deepEqual(parts, fixture.parts);[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-file.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-file.js[m
[1mnew file mode 100644[m
[1mindex 0000000..52ceedb[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-file.js[m
[36m@@ -0,0 +1,104 @@[m
[32m+[m[32mvar common = require('../common');[m
[32m+[m[32mvar WriteStreamStub = GENTLY.stub('fs', 'WriteStream');[m
[32m+[m
[32m+[m[32mvar File = require(common.lib + '/file'),[m
[32m+[m[32m    EventEmitter = require('events').EventEmitter,[m
[32m+[m[32m    file,[m
[32m+[m[32m    gently;[m
[32m+[m
[32m+[m[32mfunction test(test) {[m
[32m+[m[32m  gently = new Gently();[m
[32m+[m[32m  file = new File();[m
[32m+[m[32m  test();[m
[32m+[m[32m  gently.verify(test.name);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mtest(function constructor() {[m
[32m+[m[32m  assert.ok(file instanceof EventEmitter);[m
[32m+[m[32m  assert.strictEqual(file.size, 0);[m
[32m+[m[32m  assert.strictEqual(file.path, null);[m
[32m+[m[32m  assert.strictEqual(file.name, null);[m
[32m+[m[32m  assert.strictEqual(file.type, null);[m
[32m+[m[32m  assert.strictEqual(file.lastModifiedDate, null);[m
[32m+[m
[32m+[m[32m  assert.strictEqual(file._writeStream, null);[m
[32m+[m
[32m+[m[32m  (function testSetProperties() {[m
[32m+[m[32m    var file2 = new File({foo: 'bar'});[m
[32m+[m[32m    assert.equal(file2.foo, 'bar');[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function open() {[m
[32m+[m[32m  var WRITE_STREAM;[m
[32m+[m[32m  file.path = '/foo';[m
[32m+[m
[32m+[m[32m  gently.expect(WriteStreamStub, 'new', function (path) {[m
[32m+[m[32m    WRITE_STREAM = this;[m
[32m+[m[32m    assert.strictEqual(path, file.path);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  file.open();[m
[32m+[m[32m  assert.strictEqual(file._writeStream, WRITE_STREAM);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function write() {[m
[32m+[m[32m  var BUFFER = {length: 10},[m
[32m+[m[32m      CB_STUB,[m
[32m+[m[32m      CB = function() {[m
[32m+[m[32m        CB_STUB.apply(this, arguments);[m
[32m+[m[32m      };[m
[32m+[m
[32m+[m[32m  file._writeStream = {};[m
[32m+[m
[32m+[m[32m  gently.expect(file._writeStream, 'write', function (buffer, cb) {[m
[32m+[m[32m    assert.strictEqual(buffer, BUFFER);[m
[32m+[m
[32m+[m[32m    gently.expect(file, 'emit', function (event, bytesWritten) {[m
[32m+[m[32m      assert.ok(file.lastModifiedDate instanceof Date);[m
[32m+[m[32m      assert.equal(event, 'progress');[m
[32m+[m[32m      assert.equal(bytesWritten, file.size);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    CB_STUB = gently.expect(function writeCb() {[m
[32m+[m[32m      assert.equal(file.size, 10);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    cb();[m
[32m+[m
[32m+[m[32m    gently.expect(file, 'emit', function (event, bytesWritten) {[m
[32m+[m[32m      assert.equal(event, 'progress');[m
[32m+[m[32m      assert.equal(bytesWritten, file.size);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    CB_STUB = gently.expect(function writeCb() {[m
[32m+[m[32m      assert.equal(file.size, 20);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    cb();[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  file.write(BUFFER, CB);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function end() {[m
[32m+[m[32m  var CB_STUB,[m
[32m+[m[32m      CB = function() {[m
[32m+[m[32m        CB_STUB.apply(this, arguments);[m
[32m+[m[32m      };[m
[32m+[m
[32m+[m[32m  file._writeStream = {};[m
[32m+[m
[32m+[m[32m  gently.expect(file._writeStream, 'end', function (cb) {[m
[32m+[m[32m    gently.expect(file, 'emit', function (event) {[m
[32m+[m[32m      assert.equal(event, 'end');[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    CB_STUB = gently.expect(function endCb() {[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    cb();[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  file.end(CB);[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-incoming-form.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-incoming-form.js[m
[1mnew file mode 100644[m
[1mindex 0000000..84de439[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-incoming-form.js[m
[36m@@ -0,0 +1,727 @@[m
[32m+[m[32mvar common = require('../common');[m
[32m+[m[32mvar MultipartParserStub = GENTLY.stub('./multipart_parser', 'MultipartParser'),[m
[32m+[m[32m    QuerystringParserStub = GENTLY.stub('./querystring_parser', 'QuerystringParser'),[m
[32m+[m[32m    EventEmitterStub = GENTLY.stub('events', 'EventEmitter'),[m
[32m+[m[32m    StreamStub = GENTLY.stub('stream', 'Stream'),[m
[32m+[m[32m    FileStub = GENTLY.stub('./file');[m
[32m+[m
[32m+[m[32mvar formidable = require(common.lib + '/index'),[m
[32m+[m[32m    IncomingForm = formidable.IncomingForm,[m
[32m+[m[32m    events = require('events'),[m
[32m+[m[32m    fs = require('fs'),[m
[32m+[m[32m    path = require('path'),[m
[32m+[m[32m    Buffer = require('buffer').Buffer,[m
[32m+[m[32m    fixtures = require(TEST_FIXTURES + '/multipart'),[m
[32m+[m[32m    form,[m
[32m+[m[32m    gently;[m
[32m+[m
[32m+[m[32mfunction test(test) {[m
[32m+[m[32m  gently = new Gently();[m
[32m+[m[32m  gently.expect(EventEmitterStub, 'call');[m
[32m+[m[32m  form = new IncomingForm();[m
[32m+[m[32m  test();[m
[32m+[m[32m  gently.verify(test.name);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mtest(function constructor() {[m
[32m+[m[32m  assert.strictEqual(form.error, null);[m
[32m+[m[32m  assert.strictEqual(form.ended, false);[m
[32m+[m[32m  assert.strictEqual(form.type, null);[m
[32m+[m[32m  assert.strictEqual(form.headers, null);[m
[32m+[m[32m  assert.strictEqual(form.keepExtensions, false);[m
[32m+[m[32m  assert.strictEqual(form.uploadDir, '/tmp');[m
[32m+[m[32m  assert.strictEqual(form.encoding, 'utf-8');[m
[32m+[m[32m  assert.strictEqual(form.bytesReceived, null);[m
[32m+[m[32m  assert.strictEqual(form.bytesExpected, null);[m
[32m+[m[32m  assert.strictEqual(form.maxFieldsSize, 2 * 1024 * 1024);[m
[32m+[m[32m  assert.strictEqual(form._parser, null);[m
[32m+[m[32m  assert.strictEqual(form._flushing, 0);[m
[32m+[m[32m  assert.strictEqual(form._fieldsSize, 0);[m
[32m+[m[32m  assert.ok(form instanceof EventEmitterStub);[m
[32m+[m[32m  assert.equal(form.constructor.name, 'IncomingForm');[m
[32m+[m
[32m+[m[32m  (function testSimpleConstructor() {[m
[32m+[m[32m    gently.expect(EventEmitterStub, 'call');[m
[32m+[m[32m    var form = IncomingForm();[m
[32m+[m[32m    assert.ok(form instanceof IncomingForm);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testSimpleConstructorShortcut() {[m
[32m+[m[32m    gently.expect(EventEmitterStub, 'call');[m
[32m+[m[32m    var form = formidable();[m
[32m+[m[32m    assert.ok(form instanceof IncomingForm);[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function parse() {[m
[32m+[m[32m  var REQ = {headers: {}}[m
[32m+[m[32m    , emit = {};[m
[32m+[m
[32m+[m[32m  gently.expect(form, 'writeHeaders', function(headers) {[m
[32m+[m[32m    assert.strictEqual(headers, REQ.headers);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  var events = ['error', 'aborted', 'data', 'end'];[m
[32m+[m[32m  gently.expect(REQ, 'on', events.length, function(event, fn) {[m
[32m+[m[32m    assert.equal(event, events.shift());[m
[32m+[m[32m    emit[event] = fn;[m
[32m+[m[32m    return this;[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form.parse(REQ);[m
[32m+[m
[32m+[m[32m  (function testPause() {[m
[32m+[m[32m    gently.expect(REQ, 'pause');[m
[32m+[m[32m    assert.strictEqual(form.pause(), true);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testPauseCriticalException() {[m
[32m+[m[32m    form.ended = false;[m
[32m+[m
[32m+[m[32m    var ERR = new Error('dasdsa');[m
[32m+[m[32m    gently.expect(REQ, 'pause', function() {[m
[32m+[m[32m      throw ERR;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_error', function(err) {[m
[32m+[m[32m      assert.strictEqual(err, ERR);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    assert.strictEqual(form.pause(), false);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testPauseHarmlessException() {[m
[32m+[m[32m    form.ended = true;[m
[32m+[m
[32m+[m[32m    var ERR = new Error('dasdsa');[m
[32m+[m[32m    gently.expect(REQ, 'pause', function() {[m
[32m+[m[32m      throw ERR;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    assert.strictEqual(form.pause(), false);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testResume() {[m
[32m+[m[32m    gently.expect(REQ, 'resume');[m
[32m+[m[32m    assert.strictEqual(form.resume(), true);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testResumeCriticalException() {[m
[32m+[m[32m    form.ended = false;[m
[32m+[m
[32m+[m[32m    var ERR = new Error('dasdsa');[m
[32m+[m[32m    gently.expect(REQ, 'resume', function() {[m
[32m+[m[32m      throw ERR;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_error', function(err) {[m
[32m+[m[32m      assert.strictEqual(err, ERR);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    assert.strictEqual(form.resume(), false);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testResumeHarmlessException() {[m
[32m+[m[32m    form.ended = true;[m
[32m+[m
[32m+[m[32m    var ERR = new Error('dasdsa');[m
[32m+[m[32m    gently.expect(REQ, 'resume', function() {[m
[32m+[m[32m      throw ERR;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    assert.strictEqual(form.resume(), false);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testEmitError() {[m
[32m+[m[32m    var ERR = new Error('something bad happened');[m
[32m+[m[32m    gently.expect(form, '_error',function(err) {[m
[32m+[m[32m      assert.strictEqual(err, ERR);[m
[32m+[m[32m    });[m
[32m+[m[32m    emit.error(ERR);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testEmitAborted() {[m
[32m+[m[32m    gently.expect(form, 'emit',function(event) {[m
[32m+[m[32m      assert.equal(event, 'aborted');[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    emit.aborted();[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m
[32m+[m[32m  (function testEmitData() {[m
[32m+[m[32m    var BUFFER = [1, 2, 3];[m
[32m+[m[32m    gently.expect(form, 'write', function(buffer) {[m
[32m+[m[32m      assert.strictEqual(buffer, BUFFER);[m
[32m+[m[32m    });[m
[32m+[m[32m    emit.data(BUFFER);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testEmitEnd() {[m
[32m+[m[32m    form._parser = {};[m
[32m+[m
[32m+[m[32m    (function testWithError() {[m
[32m+[m[32m      var ERR = new Error('haha');[m
[32m+[m[32m      gently.expect(form._parser, 'end', function() {[m
[32m+[m[32m        return ERR;[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      gently.expect(form, '_error', function(err) {[m
[32m+[m[32m        assert.strictEqual(err, ERR);[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      emit.end();[m
[32m+[m[32m    })();[m
[32m+[m
[32m+[m[32m    (function testWithoutError() {[m
[32m+[m[32m      gently.expect(form._parser, 'end');[m
[32m+[m[32m      emit.end();[m
[32m+[m[32m    })();[m
[32m+[m
[32m+[m[32m    (function testAfterError() {[m
[32m+[m[32m      form.error = true;[m
[32m+[m[32m      emit.end();[m
[32m+[m[32m    })();[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testWithCallback() {[m
[32m+[m[32m    gently.expect(EventEmitterStub, 'call');[m
[32m+[m[32m    var form = new IncomingForm(),[m
[32m+[m[32m        REQ = {headers: {}},[m
[32m+[m[32m        parseCalled = 0;[m
[32m+[m
[32m+[m[32m    gently.expect(form, 'writeHeaders');[m
[32m+[m[32m    gently.expect(REQ, 'on', 4, function() {[m
[32m+[m[32m      return this;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(form, 'on', 4, function(event, fn) {[m
[32m+[m[32m      if (event == 'field') {[m
[32m+[m[32m        fn('field1', 'foo');[m
[32m+[m[32m        fn('field1', 'bar');[m
[32m+[m[32m        fn('field2', 'nice');[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      if (event == 'file') {[m
[32m+[m[32m        fn('file1', '1');[m
[32m+[m[32m        fn('file1', '2');[m
[32m+[m[32m        fn('file2', '3');[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      if (event == 'end') {[m
[32m+[m[32m        fn();[m
[32m+[m[32m      }[m
[32m+[m[32m      return this;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    form.parse(REQ, gently.expect(function parseCbOk(err, fields, files) {[m
[32m+[m[32m      assert.deepEqual(fields, {field1: 'bar', field2: 'nice'});[m
[32m+[m[32m      assert.deepEqual(files, {file1: '2', file2: '3'});[m
[32m+[m[32m    }));[m
[32m+[m
[32m+[m[32m    gently.expect(form, 'writeHeaders');[m
[32m+[m[32m    gently.expect(REQ, 'on', 4, function() {[m
[32m+[m[32m      return this;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    var ERR = new Error('test');[m
[32m+[m[32m    gently.expect(form, 'on', 3, function(event, fn) {[m
[32m+[m[32m      if (event == 'field') {[m
[32m+[m[32m        fn('foo', 'bar');[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      if (event == 'error') {[m
[32m+[m[32m        fn(ERR);[m
[32m+[m[32m        gently.expect(form, 'on');[m
[32m+[m[32m      }[m
[32m+[m[32m      return this;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    form.parse(REQ, gently.expect(function parseCbErr(err, fields, files) {[m
[32m+[m[32m      assert.strictEqual(err, ERR);[m
[32m+[m[32m      assert.deepEqual(fields, {foo: 'bar'});[m
[32m+[m[32m    }));[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function pause() {[m
[32m+[m[32m  assert.strictEqual(form.pause(), false);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function resume() {[m
[32m+[m[32m  assert.strictEqual(form.resume(), false);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m
[32m+[m[32mtest(function writeHeaders() {[m
[32m+[m[32m  var HEADERS = {};[m
[32m+[m[32m  gently.expect(form, '_parseContentLength');[m
[32m+[m[32m  gently.expect(form, '_parseContentType');[m
[32m+[m
[32m+[m[32m  form.writeHeaders(HEADERS);[m
[32m+[m[32m  assert.strictEqual(form.headers, HEADERS);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function write() {[m
[32m+[m[32m  var parser = {},[m
[32m+[m[32m      BUFFER = [1, 2, 3];[m
[32m+[m
[32m+[m[32m  form._parser = parser;[m
[32m+[m[32m  form.bytesExpected = 523423;[m
[32m+[m
[32m+[m[32m  (function testBasic() {[m
[32m+[m[32m    gently.expect(form, 'emit', function(event, bytesReceived, bytesExpected) {[m
[32m+[m[32m      assert.equal(event, 'progress');[m
[32m+[m[32m      assert.equal(bytesReceived, BUFFER.length);[m
[32m+[m[32m      assert.equal(bytesExpected, form.bytesExpected);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(parser, 'write', function(buffer) {[m
[32m+[m[32m      assert.strictEqual(buffer, BUFFER);[m
[32m+[m[32m      return buffer.length;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    assert.equal(form.write(BUFFER), BUFFER.length);[m
[32m+[m[32m    assert.equal(form.bytesReceived, BUFFER.length);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testParserError() {[m
[32m+[m[32m    gently.expect(form, 'emit');[m
[32m+[m
[32m+[m[32m    gently.expect(parser, 'write', function(buffer) {[m
[32m+[m[32m      assert.strictEqual(buffer, BUFFER);[m
[32m+[m[32m      return buffer.length - 1;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_error', function(err) {[m
[32m+[m[32m      assert.ok(err.message.match(/parser error/i));[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    assert.equal(form.write(BUFFER), BUFFER.length - 1);[m
[32m+[m[32m    assert.equal(form.bytesReceived, BUFFER.length + BUFFER.length);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testUninitialized() {[m
[32m+[m[32m    delete form._parser;[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_error', function(err) {[m
[32m+[m[32m      assert.ok(err.message.match(/unintialized parser/i));[m
[32m+[m[32m    });[m
[32m+[m[32m    form.write(BUFFER);[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function parseContentType() {[m
[32m+[m[32m  var HEADERS = {};[m
[32m+[m
[32m+[m[32m  form.headers = {'content-type': 'application/x-www-form-urlencoded'};[m
[32m+[m[32m  gently.expect(form, '_initUrlencoded');[m
[32m+[m[32m  form._parseContentType();[m
[32m+[m
[32m+[m[32m  // accept anything that has 'urlencoded' in it[m
[32m+[m[32m  form.headers = {'content-type': 'broken-client/urlencoded-stupid'};[m
[32m+[m[32m  gently.expect(form, '_initUrlencoded');[m
[32m+[m[32m  form._parseContentType();[m
[32m+[m
[32m+[m[32m  var BOUNDARY = '---------------------------57814261102167618332366269';[m
[32m+[m[32m  form.headers = {'content-type': 'multipart/form-data; boundary='+BOUNDARY};[m
[32m+[m
[32m+[m[32m  gently.expect(form, '_initMultipart', function(boundary) {[m
[32m+[m[32m    assert.equal(boundary, BOUNDARY);[m
[32m+[m[32m  });[m
[32m+[m[32m  form._parseContentType();[m
[32m+[m
[32m+[m[32m  (function testQuotedBoundary() {[m
[32m+[m[32m    form.headers = {'content-type': 'multipart/form-data; boundary="' + BOUNDARY + '"'};[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_initMultipart', function(boundary) {[m
[32m+[m[32m      assert.equal(boundary, BOUNDARY);[m
[32m+[m[32m    });[m
[32m+[m[32m    form._parseContentType();[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testNoBoundary() {[m
[32m+[m[32m    form.headers = {'content-type': 'multipart/form-data'};[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_error', function(err) {[m
[32m+[m[32m      assert.ok(err.message.match(/no multipart boundary/i));[m
[32m+[m[32m    });[m
[32m+[m[32m    form._parseContentType();[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testNoContentType() {[m
[32m+[m[32m    form.headers = {};[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_error', function(err) {[m
[32m+[m[32m      assert.ok(err.message.match(/no content-type/i));[m
[32m+[m[32m    });[m
[32m+[m[32m    form._parseContentType();[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testUnknownContentType() {[m
[32m+[m[32m    form.headers = {'content-type': 'invalid'};[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_error', function(err) {[m
[32m+[m[32m      assert.ok(err.message.match(/unknown content-type/i));[m
[32m+[m[32m    });[m
[32m+[m[32m    form._parseContentType();[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function parseContentLength() {[m
[32m+[m[32m  var HEADERS = {};[m
[32m+[m
[32m+[m[32m  form.headers = {};[m
[32m+[m[32m  form._parseContentLength();[m
[32m+[m[32m  assert.strictEqual(form.bytesReceived, null);[m
[32m+[m[32m  assert.strictEqual(form.bytesExpected, null);[m
[32m+[m
[32m+[m[32m  form.headers['content-length'] = '8';[m
[32m+[m[32m  gently.expect(form, 'emit', function(event, bytesReceived, bytesExpected) {[m
[32m+[m[32m    assert.equal(event, 'progress');[m
[32m+[m[32m    assert.equal(bytesReceived, 0);[m
[32m+[m[32m    assert.equal(bytesExpected, 8);[m
[32m+[m[32m  });[m
[32m+[m[32m  form._parseContentLength();[m
[32m+[m[32m  assert.strictEqual(form.bytesReceived, 0);[m
[32m+[m[32m  assert.strictEqual(form.bytesExpected, 8);[m
[32m+[m
[32m+[m[32m  // JS can be evil, lets make sure we are not[m
[32m+[m[32m  form.headers['content-length'] = '08';[m
[32m+[m[32m  gently.expect(form, 'emit', function(event, bytesReceived, bytesExpected) {[m
[32m+[m[32m    assert.equal(event, 'progress');[m
[32m+[m[32m    assert.equal(bytesReceived, 0);[m
[32m+[m[32m    assert.equal(bytesExpected, 8);[m
[32m+[m[32m  });[m
[32m+[m[32m  form._parseContentLength();[m
[32m+[m[32m  assert.strictEqual(form.bytesExpected, 8);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function _initMultipart() {[m
[32m+[m[32m  var BOUNDARY = '123',[m
[32m+[m[32m      PARSER;[m
[32m+[m
[32m+[m[32m  gently.expect(MultipartParserStub, 'new', function() {[m
[32m+[m[32m    PARSER = this;[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  gently.expect(MultipartParserStub.prototype, 'initWithBoundary', function(boundary) {[m
[32m+[m[32m    assert.equal(boundary, BOUNDARY);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form._initMultipart(BOUNDARY);[m
[32m+[m[32m  assert.equal(form.type, 'multipart');[m
[32m+[m[32m  assert.strictEqual(form._parser, PARSER);[m
[32m+[m
[32m+[m[32m  (function testRegularField() {[m
[32m+[m[32m    var PART;[m
[32m+[m[32m    gently.expect(StreamStub, 'new', function() {[m
[32m+[m[32m      PART = this;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(form, 'onPart', function(part) {[m
[32m+[m[32m      assert.strictEqual(part, PART);[m
[32m+[m[32m      assert.deepEqual[m
[32m+[m[32m        ( part.headers[m
[32m+[m[32m        , { 'content-disposition': 'form-data; name="field1"'[m
[32m+[m[32m          , 'foo': 'bar'[m
[32m+[m[32m          }[m
[32m+[m[32m        );[m
[32m+[m[32m      assert.equal(part.name, 'field1');[m
[32m+[m
[32m+[m[32m      var strings = ['hello', ' world'];[m
[32m+[m[32m      gently.expect(part, 'emit', 2, function(event, b) {[m
[32m+[m[32m          assert.equal(event, 'data');[m
[32m+[m[32m          assert.equal(b.toString(), strings.shift());[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      gently.expect(part, 'emit', function(event, b) {[m
[32m+[m[32m          assert.equal(event, 'end');[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    PARSER.onPartBegin();[m
[32m+[m[32m    PARSER.onHeaderField(new Buffer('content-disposition'), 0, 10);[m
[32m+[m[32m    PARSER.onHeaderField(new Buffer('content-disposition'), 10, 19);[m
[32m+[m[32m    PARSER.onHeaderValue(new Buffer('form-data; name="field1"'), 0, 14);[m
[32m+[m[32m    PARSER.onHeaderValue(new Buffer('form-data; name="field1"'), 14, 24);[m
[32m+[m[32m    PARSER.onHeaderEnd();[m
[32m+[m[32m    PARSER.onHeaderField(new Buffer('foo'), 0, 3);[m
[32m+[m[32m    PARSER.onHeaderValue(new Buffer('bar'), 0, 3);[m
[32m+[m[32m    PARSER.onHeaderEnd();[m
[32m+[m[32m    PARSER.onHeadersEnd();[m
[32m+[m[32m    PARSER.onPartData(new Buffer('hello world'), 0, 5);[m
[32m+[m[32m    PARSER.onPartData(new Buffer('hello world'), 5, 11);[m
[32m+[m[32m    PARSER.onPartEnd();[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testFileField() {[m
[32m+[m[32m    var PART;[m
[32m+[m[32m    gently.expect(StreamStub, 'new', function() {[m
[32m+[m[32m      PART = this;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(form, 'onPart', function(part) {[m
[32m+[m[32m      assert.deepEqual[m
[32m+[m[32m        ( part.headers[m
[32m+[m[32m        , { 'content-disposition': 'form-data; name="field2"; filename="C:\\Documents and Settings\\IE\\Must\\Die\\Sun"et.jpg"'[m
[32m+[m[32m          , 'content-type': 'text/plain'[m
[32m+[m[32m          }[m
[32m+[m[32m        );[m
[32m+[m[32m      assert.equal(part.name, 'field2');[m
[32m+[m[32m      assert.equal(part.filename, 'Sun"et.jpg');[m
[32m+[m[32m      assert.equal(part.mime, 'text/plain');[m
[32m+[m
[32m+[m[32m      gently.expect(part, 'emit', function(event, b) {[m
[32m+[m[32m        assert.equal(event, 'data');[m
[32m+[m[32m        assert.equal(b.toString(), '... contents of file1.txt ...');[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      gently.expect(part, 'emit', function(event, b) {[m
[32m+[m[32m          assert.equal(event, 'end');[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    PARSER.onPartBegin();[m
[32m+[m[32m    PARSER.onHeaderField(new Buffer('content-disposition'), 0, 19);[m
[32m+[m[32m    PARSER.onHeaderValue(new Buffer('form-data; name="field2"; filename="C:\\Documents and Settings\\IE\\Must\\Die\\Sun"et.jpg"'), 0, 85);[m
[32m+[m[32m    PARSER.onHeaderEnd();[m
[32m+[m[32m    PARSER.onHeaderField(new Buffer('Content-Type'), 0, 12);[m
[32m+[m[32m    PARSER.onHeaderValue(new Buffer('text/plain'), 0, 10);[m
[32m+[m[32m    PARSER.onHeaderEnd();[m
[32m+[m[32m    PARSER.onHeadersEnd();[m
[32m+[m[32m    PARSER.onPartData(new Buffer('... contents of file1.txt ...'), 0, 29);[m
[32m+[m[32m    PARSER.onPartEnd();[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testEnd() {[m
[32m+[m[32m    gently.expect(form, '_maybeEnd');[m
[32m+[m[32m    PARSER.onEnd();[m
[32m+[m[32m    assert.ok(form.ended);[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function _fileName() {[m
[32m+[m[32m  // TODO[m
[32m+[m[32m  return;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function _initUrlencoded() {[m
[32m+[m[32m  var PARSER;[m
[32m+[m
[32m+[m[32m  gently.expect(QuerystringParserStub, 'new', function() {[m
[32m+[m[32m    PARSER = this;[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form._initUrlencoded();[m
[32m+[m[32m  assert.equal(form.type, 'urlencoded');[m
[32m+[m[32m  assert.strictEqual(form._parser, PARSER);[m
[32m+[m
[32m+[m[32m  (function testOnField() {[m
[32m+[m[32m    var KEY = 'KEY', VAL = 'VAL';[m
[32m+[m[32m    gently.expect(form, 'emit', function(field, key, val) {[m
[32m+[m[32m      assert.equal(field, 'field');[m
[32m+[m[32m      assert.equal(key, KEY);[m
[32m+[m[32m      assert.equal(val, VAL);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    PARSER.onField(KEY, VAL);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testOnEnd() {[m
[32m+[m[32m    gently.expect(form, '_maybeEnd');[m
[32m+[m
[32m+[m[32m    PARSER.onEnd();[m
[32m+[m[32m    assert.equal(form.ended, true);[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function _error() {[m
[32m+[m[32m  var ERR = new Error('bla');[m
[32m+[m
[32m+[m[32m  gently.expect(form, 'pause');[m
[32m+[m[32m  gently.expect(form, 'emit', function(event, err) {[m
[32m+[m[32m    assert.equal(event, 'error');[m
[32m+[m[32m    assert.strictEqual(err, ERR);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form._error(ERR);[m
[32m+[m[32m  assert.strictEqual(form.error, ERR);[m
[32m+[m
[32m+[m[32m  // make sure _error only does its thing once[m
[32m+[m[32m  form._error(ERR);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function onPart() {[m
[32m+[m[32m  var PART = {};[m
[32m+[m[32m  gently.expect(form, 'handlePart', function(part) {[m
[32m+[m[32m    assert.strictEqual(part, PART);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form.onPart(PART);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function handlePart() {[m
[32m+[m[32m  (function testUtf8Field() {[m
[32m+[m[32m    var PART = new events.EventEmitter();[m
[32m+[m[32m    PART.name = 'my_field';[m
[32m+[m
[32m+[m[32m    gently.expect(form, 'emit', function(event, field, value) {[m
[32m+[m[32m      assert.equal(event, 'field');[m
[32m+[m[32m      assert.equal(field, 'my_field');[m
[32m+[m[32m      assert.equal(value, 'hello world: €');[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    form.handlePart(PART);[m
[32m+[m[32m    PART.emit('data', new Buffer('hello'));[m
[32m+[m[32m    PART.emit('data', new Buffer(' world: '));[m
[32m+[m[32m    PART.emit('data', new Buffer([0xE2]));[m
[32m+[m[32m    PART.emit('data', new Buffer([0x82, 0xAC]));[m
[32m+[m[32m    PART.emit('end');[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testBinaryField() {[m
[32m+[m[32m    var PART = new events.EventEmitter();[m
[32m+[m[32m    PART.name = 'my_field2';[m
[32m+[m
[32m+[m[32m    gently.expect(form, 'emit', function(event, field, value) {[m
[32m+[m[32m      assert.equal(event, 'field');[m
[32m+[m[32m      assert.equal(field, 'my_field2');[m
[32m+[m[32m      assert.equal(value, 'hello world: '+new Buffer([0xE2, 0x82, 0xAC]).toString('binary'));[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    form.encoding = 'binary';[m
[32m+[m[32m    form.handlePart(PART);[m
[32m+[m[32m    PART.emit('data', new Buffer('hello'));[m
[32m+[m[32m    PART.emit('data', new Buffer(' world: '));[m
[32m+[m[32m    PART.emit('data', new Buffer([0xE2]));[m
[32m+[m[32m    PART.emit('data', new Buffer([0x82, 0xAC]));[m
[32m+[m[32m    PART.emit('end');[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testFieldSize() {[m
[32m+[m[32m    form.maxFieldsSize = 8;[m
[32m+[m[32m    var PART = new events.EventEmitter();[m
[32m+[m[32m    PART.name = 'my_field';[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_error', function(err) {[m
[32m+[m[32m      assert.equal(err.message, 'maxFieldsSize exceeded, received 9 bytes of field data');[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    form.handlePart(PART);[m
[32m+[m[32m    form._fieldsSize = 1;[m
[32m+[m[32m    PART.emit('data', new Buffer(7));[m
[32m+[m[32m    PART.emit('data', new Buffer(1));[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testFilePart() {[m
[32m+[m[32m    var PART = new events.EventEmitter(),[m
[32m+[m[32m        FILE = new events.EventEmitter(),[m
[32m+[m[32m        PATH = '/foo/bar';[m
[32m+[m
[32m+[m[32m    PART.name = 'my_file';[m
[32m+[m[32m    PART.filename = 'sweet.txt';[m
[32m+[m[32m    PART.mime = 'sweet.txt';[m
[32m+[m
[32m+[m[32m    gently.expect(form, '_uploadPath', function(filename) {[m
[32m+[m[32m      assert.equal(filename, PART.filename);[m
[32m+[m[32m      return PATH;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(FileStub, 'new', function(properties) {[m
[32m+[m[32m      assert.equal(properties.path, PATH);[m
[32m+[m[32m      assert.equal(properties.name, PART.filename);[m
[32m+[m[32m      assert.equal(properties.type, PART.mime);[m
[32m+[m[32m      FILE = this;[m
[32m+[m
[32m+[m[32m      gently.expect(form, 'emit', function (event, field, file) {[m
[32m+[m[32m        assert.equal(event, 'fileBegin');[m
[32m+[m[32m        assert.strictEqual(field, PART.name);[m
[32m+[m[32m        assert.strictEqual(file, FILE);[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      gently.expect(FILE, 'open');[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    form.handlePart(PART);[m
[32m+[m[32m    assert.equal(form._flushing, 1);[m
[32m+[m
[32m+[m[32m    var BUFFER;[m
[32m+[m[32m    gently.expect(form, 'pause');[m
[32m+[m[32m    gently.expect(FILE, 'write', function(buffer, cb) {[m
[32m+[m[32m      assert.strictEqual(buffer, BUFFER);[m
[32m+[m[32m      gently.expect(form, 'resume');[m
[32m+[m[32m      // @todo handle cb(new Err)[m
[32m+[m[32m      cb();[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    PART.emit('data', BUFFER = new Buffer('test'));[m
[32m+[m
[32m+[m[32m    gently.expect(FILE, 'end', function(cb) {[m
[32m+[m[32m      gently.expect(form, 'emit', function(event, field, file) {[m
[32m+[m[32m        assert.equal(event, 'file');[m
[32m+[m[32m        assert.strictEqual(file, FILE);[m
[32m+[m[32m      });[m
[32m+[m
[32m+[m[32m      gently.expect(form, '_maybeEnd');[m
[32m+[m
[32m+[m[32m      cb();[m
[32m+[m[32m      assert.equal(form._flushing, 0);[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    PART.emit('end');[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function _uploadPath() {[m
[32m+[m[32m  (function testUniqueId() {[m
[32m+[m[32m    var UUID_A, UUID_B;[m
[32m+[m[32m    gently.expect(GENTLY.hijacked.path, 'join', function(uploadDir, uuid) {[m
[32m+[m[32m      assert.equal(uploadDir, form.uploadDir);[m
[32m+[m[32m      UUID_A = uuid;[m
[32m+[m[32m    });[m
[32m+[m[32m    form._uploadPath();[m
[32m+[m
[32m+[m[32m    gently.expect(GENTLY.hijacked.path, 'join', function(uploadDir, uuid) {[m
[32m+[m[32m      UUID_B = uuid;[m
[32m+[m[32m    });[m
[32m+[m[32m    form._uploadPath();[m
[32m+[m
[32m+[m[32m    assert.notEqual(UUID_A, UUID_B);[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testFileExtension() {[m
[32m+[m[32m    form.keepExtensions = true;[m
[32m+[m[32m    var FILENAME = 'foo.jpg',[m
[32m+[m[32m        EXT = '.bar';[m
[32m+[m
[32m+[m[32m    gently.expect(GENTLY.hijacked.path, 'extname', function(filename) {[m
[32m+[m[32m      assert.equal(filename, FILENAME);[m
[32m+[m[32m      gently.restore(path, 'extname');[m
[32m+[m
[32m+[m[32m      return EXT;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    gently.expect(GENTLY.hijacked.path, 'join', function(uploadDir, name) {[m
[32m+[m[32m      assert.equal(path.extname(name), EXT);[m
[32m+[m[32m    });[m
[32m+[m[32m    form._uploadPath(FILENAME);[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function _maybeEnd() {[m
[32m+[m[32m  gently.expect(form, 'emit', 0);[m
[32m+[m[32m  form._maybeEnd();[m
[32m+[m
[32m+[m[32m  form.ended = true;[m
[32m+[m[32m  form._flushing = 1;[m
[32m+[m[32m  form._maybeEnd();[m
[32m+[m
[32m+[m[32m  gently.expect(form, 'emit', function(event) {[m
[32m+[m[32m    assert.equal(event, 'end');[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  form.ended = true;[m
[32m+[m[32m  form._flushing = 0;[m
[32m+[m[32m  form._maybeEnd();[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-multipart-parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-multipart-parser.js[m
[1mnew file mode 100644[m
[1mindex 0000000..d8dc968[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-multipart-parser.js[m
[36m@@ -0,0 +1,50 @@[m
[32m+[m[32mvar common = require('../common');[m
[32m+[m[32mvar multipartParser = require(common.lib + '/multipart_parser'),[m
[32m+[m[32m    MultipartParser = multipartParser.MultipartParser,[m
[32m+[m[32m    events = require('events'),[m
[32m+[m[32m    Buffer = require('buffer').Buffer,[m
[32m+[m[32m    parser;[m
[32m+[m
[32m+[m[32mfunction test(test) {[m
[32m+[m[32m  parser = new MultipartParser();[m
[32m+[m[32m  test();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mtest(function constructor() {[m
[32m+[m[32m  assert.equal(parser.boundary, null);[m
[32m+[m[32m  assert.equal(parser.state, 0);[m
[32m+[m[32m  assert.equal(parser.flags, 0);[m
[32m+[m[32m  assert.equal(parser.boundaryChars, null);[m
[32m+[m[32m  assert.equal(parser.index, null);[m
[32m+[m[32m  assert.equal(parser.lookbehind, null);[m
[32m+[m[32m  assert.equal(parser.constructor.name, 'MultipartParser');[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function initWithBoundary() {[m
[32m+[m[32m  var boundary = 'abc';[m
[32m+[m[32m  parser.initWithBoundary(boundary);[m
[32m+[m[32m  assert.deepEqual(Array.prototype.slice.call(parser.boundary), [13, 10, 45, 45, 97, 98, 99]);[m
[32m+[m[32m  assert.equal(parser.state, multipartParser.START);[m
[32m+[m
[32m+[m[32m  assert.deepEqual(parser.boundaryChars, {10: true, 13: true, 45: true, 97: true, 98: true, 99: true});[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function parserError() {[m
[32m+[m[32m  var boundary = 'abc',[m
[32m+[m[32m      buffer = new Buffer(5);[m
[32m+[m
[32m+[m[32m  parser.initWithBoundary(boundary);[m
[32m+[m[32m  buffer.write('--ad', 'ascii', 0);[m
[32m+[m[32m  assert.equal(parser.write(buffer), 3);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function end() {[m
[32m+[m[32m  (function testError() {[m
[32m+[m[32m    assert.equal(parser.end().message, 'MultipartParser.end(): stream ended unexpectedly: ' + parser.explain());[m
[32m+[m[32m  })();[m
[32m+[m
[32m+[m[32m  (function testRegular() {[m
[32m+[m[32m    parser.state = multipartParser.END;[m
[32m+[m[32m    assert.strictEqual(parser.end(), undefined);[m
[32m+[m[32m  })();[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-querystring-parser.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-querystring-parser.js[m
[1mnew file mode 100644[m
[1mindex 0000000..54d3e2d[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/simple/test-querystring-parser.js[m
[36m@@ -0,0 +1,45 @@[m
[32m+[m[32mvar common = require('../common');[m
[32m+[m[32mvar QuerystringParser = require(common.lib + '/querystring_parser').QuerystringParser,[m
[32m+[m[32m    Buffer = require('buffer').Buffer,[m
[32m+[m[32m    gently,[m
[32m+[m[32m    parser;[m
[32m+[m
[32m+[m[32mfunction test(test) {[m
[32m+[m[32m  gently = new Gently();[m
[32m+[m[32m  parser = new QuerystringParser();[m
[32m+[m[32m  test();[m
[32m+[m[32m  gently.verify(test.name);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mtest(function constructor() {[m
[32m+[m[32m  assert.equal(parser.buffer, '');[m
[32m+[m[32m  assert.equal(parser.constructor.name, 'QuerystringParser');[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function write() {[m
[32m+[m[32m  var a = new Buffer('a=1');[m
[32m+[m[32m  assert.equal(parser.write(a), a.length);[m
[32m+[m
[32m+[m[32m  var b = new Buffer('&b=2');[m
[32m+[m[32m  parser.write(b);[m
[32m+[m[32m  assert.equal(parser.buffer, a + b);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest(function end() {[m
[32m+[m[32m  var FIELDS = {a: ['b', {c: 'd'}], e: 'f'};[m
[32m+[m
[32m+[m[32m  gently.expect(GENTLY.hijacked.querystring, 'parse', function(str) {[m
[32m+[m[32m    assert.equal(str, parser.buffer);[m
[32m+[m[32m    return FIELDS;[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  gently.expect(parser, 'onField', Object.keys(FIELDS).length, function(key, val) {[m
[32m+[m[32m    assert.deepEqual(FIELDS[key], val);[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  gently.expect(parser, 'onEnd');[m
[32m+[m
[32m+[m[32m  parser.buffer = 'my buffer';[m
[32m+[m[32m  parser.end();[m
[32m+[m[32m  assert.equal(parser.buffer, '');[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/system/test-multi-video-upload.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/system/test-multi-video-upload.js[m
[1mnew file mode 100644[m
[1mindex 0000000..479e46d[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/legacy/system/test-multi-video-upload.js[m
[36m@@ -0,0 +1,75 @@[m
[32m+[m[32mvar common = require('../common');[m
[32m+[m[32mvar BOUNDARY = '---------------------------10102754414578508781458777923',[m
[32m+[m[32m    FIXTURE = TEST_FIXTURES+'/multi_video.upload',[m
[32m+[m[32m    fs = require('fs'),[m
[32m+[m[32m    util = require(common.lib + '/util'),[m
[32m+[m[32m    http = require('http'),[m
[32m+[m[32m    formidable = require(common.lib + '/index'),[m
[32m+[m[32m    server = http.createServer();[m
[32m+[m
[32m+[m[32mserver.on('request', function(req, res) {[m
[32m+[m[32m  var form = new formidable.IncomingForm(),[m
[32m+[m[32m      uploads = {};[m
[32m+[m
[32m+[m[32m  form.uploadDir = TEST_TMP;[m
[32m+[m[32m  form.hash = 'sha1';[m
[32m+[m[32m  form.parse(req);[m
[32m+[m
[32m+[m[32m  form[m
[32m+[m[32m    .on('fileBegin', function(field, file) {[m
[32m+[m[32m      assert.equal(field, 'upload');[m
[32m+[m
[32m+[m[32m      var tracker = {file: file, progress: [], ended: false};[m
[32m+[m[32m      uploads[file.filename] = tracker;[m
[32m+[m[32m      file[m
[32m+[m[32m        .on('progress', function(bytesReceived) {[m
[32m+[m[32m          tracker.progress.push(bytesReceived);[m
[32m+[m[32m          assert.equal(bytesReceived, file.length);[m
[32m+[m[32m        })[m
[32m+[m[32m        .on('end', function() {[m
[32m+[m[32m          tracker.ended = true;[m
[32m+[m[32m        });[m
[32m+[m[32m    })[m
[32m+[m[32m    .on('field', function(field, value) {[m
[32m+[m[32m      assert.equal(field, 'title');[m
[32m+[m[32m      assert.equal(value, '');[m
[32m+[m[32m    })[m
[32m+[m[32m    .on('file', function(field, file) {[m
[32m+[m[32m      assert.equal(field, 'upload');[m
[32m+[m[32m      assert.strictEqual(uploads[file.filename].file, file);[m
[32m+[m[32m    })[m
[32m+[m[32m    .on('end', function() {[m
[32m+[m[32m      assert.ok(uploads['shortest_video.flv']);[m
[32m+[m[32m      assert.ok(uploads['shortest_video.flv'].ended);[m
[32m+[m[32m      assert.ok(uploads['shortest_video.flv'].progress.length > 3);[m
[32m+[m[32m      assert.equal(uploads['shortest_video.flv'].file.hash, 'd6a17616c7143d1b1438ceeef6836d1a09186b3a');[m
[32m+[m[32m      assert.equal(uploads['shortest_video.flv'].progress.slice(-1), uploads['shortest_video.flv'].file.length);[m
[32m+[m[32m      assert.ok(uploads['shortest_video.mp4']);[m
[32m+[m[32m      assert.ok(uploads['shortest_video.mp4'].ended);[m
[32m+[m[32m      assert.ok(uploads['shortest_video.mp4'].progress.length > 3);[m
[32m+[m[32m      assert.equal(uploads['shortest_video.mp4'].file.hash, '937dfd4db263f4887ceae19341dcc8d63bcd557f');[m
[32m+[m
[32m+[m[32m      server.close();[m
[32m+[m[32m      res.writeHead(200);[m
[32m+[m[32m      res.end('good');[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mserver.listen(TEST_PORT, function() {[m
[32m+[m[32m  var client = http.createClient(TEST_PORT),[m
[32m+[m[32m      stat = fs.statSync(FIXTURE),[m
[32m+[m[32m      headers = {[m
[32m+[m[32m        'content-type': 'multipart/form-data; boundary='+BOUNDARY,[m
[32m+[m[32m        'content-length': stat.size,[m
[32m+[m[32m      }[m
[32m+[m[32m      request = client.request('POST', '/', headers),[m
[32m+[m[32m      fixture = new fs.ReadStream(FIXTURE);[m
[32m+[m
[32m+[m[32m  fixture[m
[32m+[m[32m    .on('data', function(b) {[m
[32m+[m[32m      request.write(b);[m
[32m+[m[32m    })[m
[32m+[m[32m    .on('end', function() {[m
[32m+[m[32m      request.end();[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/run.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/run.js[m
[1mnew file mode 100755[m
[1mindex 0000000..50b2361[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/run.js[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32m#!/usr/bin/env node[m
[32m+[m[32mrequire('urun')(__dirname)[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/test/unit/test-incoming-form.js b/node_modules/express/node_modules/connect/node_modules/formidable/test/unit/test-incoming-form.js[m
[1mnew file mode 100644[m
[1mindex 0000000..fe2ac1c[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/test/unit/test-incoming-form.js[m
[36m@@ -0,0 +1,63 @@[m
[32m+[m[32mvar common       = require('../common');[m
[32m+[m[32mvar test         = require('utest');[m
[32m+[m[32mvar assert       = common.assert;[m
[32m+[m[32mvar IncomingForm = common.require('incoming_form').IncomingForm;[m
[32m+[m[32mvar path         = require('path');[m
[32m+[m
[32m+[m[32mvar form;[m
[32m+[m[32mtest('IncomingForm', {[m
[32m+[m[32m  before: function() {[m
[32m+[m[32m    form = new IncomingForm();[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  '#_fileName with regular characters': function() {[m
[32m+[m[32m    var filename = 'foo.txt';[m
[32m+[m[32m    assert.equal(form._fileName(makeHeader(filename)), 'foo.txt');[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  '#_fileName with unescaped quote': function() {[m
[32m+[m[32m    var filename = 'my".txt';[m
[32m+[m[32m    assert.equal(form._fileName(makeHeader(filename)), 'my".txt');[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  '#_fileName with escaped quote': function() {[m
[32m+[m[32m    var filename = 'my%22.txt';[m
[32m+[m[32m    assert.equal(form._fileName(makeHeader(filename)), 'my".txt');[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  '#_fileName with bad quote and additional sub-header': function() {[m
[32m+[m[32m    var filename = 'my".txt';[m
[32m+[m[32m    var header = makeHeader(filename) + '; foo="bar"';[m
[32m+[m[32m    assert.equal(form._fileName(header), filename);[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  '#_fileName with semicolon': function() {[m
[32m+[m[32m    var filename = 'my;.txt';[m
[32m+[m[32m    assert.equal(form._fileName(makeHeader(filename)), 'my;.txt');[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  '#_fileName with utf8 character': function() {[m
[32m+[m[32m    var filename = 'my&#9731;.txt';[m
[32m+[m[32m    assert.equal(form._fileName(makeHeader(filename)), 'my☃.txt');[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  '#_uploadPath strips harmful characters from extension when keepExtensions': function() {[m
[32m+[m[32m    form.keepExtensions = true;[m
[32m+[m
[32m+[m[32m    var ext = path.extname(form._uploadPath('fine.jpg?foo=bar'));[m
[32m+[m[32m    assert.equal(ext, '.jpg');[m
[32m+[m
[32m+[m[32m    var ext = path.extname(form._uploadPath('fine?foo=bar'));[m
[32m+[m[32m    assert.equal(ext, '');[m
[32m+[m
[32m+[m[32m    var ext = path.extname(form._uploadPath('super.cr2+dsad'));[m
[32m+[m[32m    assert.equal(ext, '.cr2');[m
[32m+[m
[32m+[m[32m    var ext = path.extname(form._uploadPath('super.bar'));[m
[32m+[m[32m    assert.equal(ext, '.bar');[m
[32m+[m[32m  },[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mfunction makeHeader(filename) {[m
[32m+[m[32m  return 'Content-Disposition: form-data; name="upload"; filename="' + filename + '"';[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/connect/node_modules/formidable/tool/record.js b/node_modules/express/node_modules/connect/node_modules/formidable/tool/record.js[m
[1mnew file mode 100644[m
[1mindex 0000000..9f1cef8[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/node_modules/formidable/tool/record.js[m
[36m@@ -0,0 +1,47 @@[m
[32m+[m[32mvar http = require('http');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar connections = 0;[m
[32m+[m
[32m+[m[32mvar server = http.createServer(function(req, res) {[m
[32m+[m[32m  var socket = req.socket;[m
[32m+[m[32m  console.log('Request: %s %s -> %s', req.method, req.url, socket.filename);[m
[32m+[m
[32m+[m[32m  req.on('end', function() {[m
[32m+[m[32m    if (req.url !== '/') {[m
[32m+[m[32m      res.end(JSON.stringify({[m
[32m+[m[32m        method: req.method,[m
[32m+[m[32m        url: req.url,[m
[32m+[m[32m        filename: socket.filename,[m
[32m+[m[32m      }));[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    res.writeHead(200, {'content-type': 'text/html'});[m
[32m+[m[32m    res.end([m
[32m+[m[32m      '<form action="/upload" enctype="multipart/form-data" method="post">'+[m
[32m+[m[32m      '<input type="text" name="title"><br>'+[m
[32m+[m[32m      '<input type="file" name="upload" multiple="multiple"><br>'+[m
[32m+[m[32m      '<input type="submit" value="Upload">'+[m
[32m+[m[32m      '</form>'[m
[32m+[m[32m    );[m
[32m+[m[32m  });[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mserver.on('connection', function(socket) {[m
[32m+[m[32m  connections++;[m
[32m+[m
[32m+[m[32m  socket.id = connections;[m
[32m+[m[32m  socket.filename = 'connection-' + socket.id + '.http';[m
[32m+[m[32m  socket.file = fs.createWriteStream(socket.filename);[m
[32m+[m[32m  socket.pipe(socket.file);[m
[32m+[m
[32m+[m[32m  console.log('--> %s', socket.filename);[m
[32m+[m[32m  socket.on('close', function() {[m
[32m+[m[32m    console.log('<-- %s', socket.filename);[m
[32m+[m[32m  });[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mvar port = process.env.PORT || 8080;[m
[32m+[m[32mserver.listen(port, function() {[m
[32m+[m[32m  console.log('Recording connections on port %s', port);[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/connect/package.json b/node_modules/express/node_modules/connect/package.json[m
[1mnew file mode 100644[m
[1mindex 0000000..4ae29ea[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/package.json[m
[36m@@ -0,0 +1,25 @@[m
[32m+[m[32m{[m
[32m+[m[32m  "name": "connect",[m
[32m+[m[32m  "version": "1.9.2",[m
[32m+[m[32m  "description": "High performance middleware framework",[m
[32m+[m[32m  "keywords": ["framework", "web", "middleware", "connect", "rack"],[m
[32m+[m[32m  "repository": "git://github.com/senchalabs/connect.git",[m
[32m+[m[32m  "author": "TJ Holowaychuk <tj@vision-media.ca> (http://tjholowaychuk.com)",[m
[32m+[m[32m  "repository": "git://github.com/senchalabs/connect",[m
[32m+[m[32m  "dependencies": {[m
[32m+[m[32m    "qs": ">= 0.4.0",[m
[32m+[m[32m    "mime": ">= 0.0.1",[m
[32m+[m[32m    "formidable": "1.0.x"[m
[32m+[m[32m  },[m
[32m+[m[32m  "devDependencies": {[m
[32m+[m[32m    "expresso": "0.9.2",[m
[32m+[m[32m    "koala": "0.1.2",[m
[32m+[m[32m    "less": "1.1.1",[m
[32m+[m[32m    "sass": "0.5.0",[m
[32m+[m[32m    "markdown": "0.2.1",[m
[32m+[m[32m    "ejs": "0.4.3",[m
[32m+[m[32m    "should": "0.3.2"[m
[32m+[m[32m  },[m
[32m+[m[32m  "publishConfig": { "tag": "1.8" },[m
[32m+[m[32m  "main": "index"[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/connect/test.js b/node_modules/express/node_modules/connect/test.js[m
[1mnew file mode 100644[m
[1mindex 0000000..106ddd1[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/connect/test.js[m
[36m@@ -0,0 +1,15 @@[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar connect = require('./');[m
[32m+[m
[32m+[m[32mvar app = connect()[m
[32m+[m[32m  .use(connect.logger('dev'))[m
[32m+[m[32m  .use(function(req, res){[m
[32m+[m[32m    var body = Array(3222).join('hey');[m
[32m+[m[32m    res.setHeader('Content-Length', body.length);[m
[32m+[m[32m    res.end(body);[m
[32m+[m[32m  })[m
[32m+[m[32m  .listen(3000);[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mime/LICENSE b/node_modules/express/node_modules/mime/LICENSE[m
[1mnew file mode 100644[m
[1mindex 0000000..451fc45[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mime/LICENSE[m
[36m@@ -0,0 +1,19 @@[m
[32m+[m[32mCopyright (c) 2010 Benjamin Thomas, Robert Kieffer[m
[32m+[m
[32m+[m[32mPermission is hereby granted, free of charge, to any person obtaining a copy[m
[32m+[m[32mof this software and associated documentation files (the "Software"), to deal[m
[32m+[m[32min the Software without restriction, including without limitation the rights[m
[32m+[m[32mto use, copy, modify, merge, publish, distribute, sublicense, and/or sell[m
[32m+[m[32mcopies of the Software, and to permit persons to whom the Software is[m
[32m+[m[32mfurnished to do so, subject to the following conditions:[m
[32m+[m
[32m+[m[32mThe above copyright notice and this permission notice shall be included in[m
[32m+[m[32mall copies or substantial portions of the Software.[m
[32m+[m
[32m+[m[32mTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR[m
[32m+[m[32mIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,[m
[32m+[m[32mFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE[m
[32m+[m[32mAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER[m
[32m+[m[32mLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,[m
[32m+[m[32mOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN[m
[32m+[m[32mTHE SOFTWARE.[m
[1mdiff --git a/node_modules/express/node_modules/mime/README.md b/node_modules/express/node_modules/mime/README.md[m
[1mnew file mode 100644[m
[1mindex 0000000..a157de1[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mime/README.md[m
[36m@@ -0,0 +1,50 @@[m
[32m+[m[32m# mime[m
[32m+[m
[32m+[m[32mSupport for mapping between file extensions and MIME types.  This module uses the latest version of the Apache "mime.types" file (maps over 620 types to 800+ extensions).  It is also trivially easy to add your own types and extensions, should you need to do that.[m
[32m+[m
[32m+[m[32m## Install[m
[32m+[m
[32m+[m[32mInstall with [npm](http://github.com/isaacs/npm):[m
[32m+[m
[32m+[m[32m    npm install mime[m
[32m+[m
[32m+[m[32m## API - Queries[m
[32m+[m
[32m+[m[32m### mime.lookup(path)[m
[32m+[m[32mGet the mime type associated with a file. This is method is case-insensitive. Everything in path up to and including the last '/' or '.' is ignored, so you can pass it paths, filenames, or extensions, like so:[m
[32m+[m
[32m+[m[32m    var mime = require('mime');[m
[32m+[m
[32m+[m[32m    mime.lookup('/path/to/file.txt');         // => 'text/plain'[m
[32m+[m[32m    mime.lookup('file.txt');                  // => 'text/plain'[m
[32m+[m[32m    mime.lookup('.txt');                      // => 'text/plain'[m
[32m+[m[32m    mime.lookup('htm');                       // => 'text/html'[m
[32m+[m
[32m+[m[32m### mime.extension(type) - lookup the default extension for type[m
[32m+[m
[32m+[m[32m    mime.extension('text/html');                 // => 'html'[m
[32m+[m[32m    mime.extension('application/octet-stream');  // => 'bin'[m
[32m+[m
[32m+[m[32m### mime.charsets.lookup() - map mime-type to charset[m
[32m+[m
[32m+[m[32m    mime.charsets.lookup('text/plain');        // => 'UTF-8'[m
[32m+[m
[32m+[m[32m(The logic for charset lookups is pretty rudimentary.  Feel free to suggest improvements.)[m
[32m+[m
[32m+[m[32m## API - Customizing[m
[32m+[m
[32m+[m[32mThe following APIs allow you to add your own type mappings within your project.  If you feel a type should be included as part of node-mime, see [requesting new types](https://github.com/bentomas/node-mime/wiki/Requesting-New-Types).[m
[32m+[m[32m### mime.define() - Add custom mime/extension mappings[m
[32m+[m
[32m+[m[32m    mime.define({[m
[32m+[m[32m        'text/x-some-format': ['x-sf', 'x-sft', 'x-sfml'],[m
[32m+[m[32m        'application/x-my-type': ['x-mt', 'x-mtt'],[m
[32m+[m[32m        // etc ...[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    mime.lookup('x-sft');                 // => 'text/x-some-format'[m
[32m+[m[32m    mime.extension('text/x-some-format'); // => 'x-sf'[m
[32m+[m
[32m+[m[32m### mime.load(filepath) - Load mappings from an Apache ".types" format file[m
[32m+[m
[32m+[m[32m    mime.load('./my_project.types');[m
[1mdiff --git a/node_modules/express/node_modules/mime/mime.js b/node_modules/express/node_modules/mime/mime.js[m
[1mnew file mode 100644[m
[1mindex 0000000..5fac753[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mime/mime.js[m
[36m@@ -0,0 +1,92 @@[m
[32m+[m[32mvar path = require('path'),[m
[32m+[m[32m    fs = require('fs');[m
[32m+[m
[32m+[m[32mvar mime = module.exports = {[m
[32m+[m[32m  /** Map of extension to mime type */[m
[32m+[m[32m  types: {},[m
[32m+[m
[32m+[m[32m  /** Map of mime type to extension */[m
[32m+[m[32m  extensions :{},[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Define mimetype -> extension mappings.  Each key is a mime-type that maps[m
[32m+[m[32m   * to an array of extensions associated with the type.  The first extension is[m
[32m+[m[32m   * used as the default extension for the type.[m
[32m+[m[32m   *[m
[32m+[m[32m   * e.g. mime.define({'audio/ogg', ['oga', 'ogg', 'spx']});[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param map (Object) type definitions[m
[32m+[m[32m   */[m
[32m+[m[32m  define: function(map) {[m
[32m+[m[32m    for (var type in map) {[m
[32m+[m[32m      var exts = map[type];[m
[32m+[m
[32m+[m[32m      for (var i = 0; i < exts.length; i++) {[m
[32m+[m[32m        mime.types[exts[i]] = type;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      // Default extension is the first one we encounter[m
[32m+[m[32m      if (!mime.extensions[type]) {[m
[32m+[m[32m        mime.extensions[type] = exts[0];[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Load an Apache2-style ".types" file[m
[32m+[m[32m   *[m
[32m+[m[32m   * This may be called multiple times (it's expected).  Where files declare[m
[32m+[m[32m   * overlapping types/extensions, the last file wins.[m
[32m+[m[32m   *[m
[32m+[m[32m   * @param file (String) path of file to load.[m
[32m+[m[32m   */[m
[32m+[m[32m  load: function(file) {[m
[32m+[m[32m    // Read file and split into lines[m
[32m+[m[32m    var map = {},[m
[32m+[m[32m        content = fs.readFileSync(file, 'ascii'),[m
[32m+[m[32m        lines = content.split(/[\r\n]+/);[m
[32m+[m
[32m+[m[32m    lines.forEach(function(line, lineno) {[m
[32m+[m[32m      // Clean up whitespace/comments, and split into fields[m
[32m+[m[32m      var fields = line.replace(/\s*#.*|^\s*|\s*$/g, '').split(/\s+/);[m
[32m+[m[32m      map[fields.shift()] = fields;[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    mime.define(map);[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Lookup a mime type based on extension[m
[32m+[m[32m   */[m
[32m+[m[32m  lookup: function(path, fallback) {[m
[32m+[m[32m    var ext = path.replace(/.*[\.\/]/, '').toLowerCase();[m
[32m+[m[32m    return mime.types[ext] || fallback || mime.default_type;[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Return file extension associated with a mime type[m
[32m+[m[32m   */[m
[32m+[m[32m  extension: function(mimeType) {[m
[32m+[m[32m    return mime.extensions[mimeType];[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * Lookup a charset based on mime type.[m
[32m+[m[32m   */[m
[32m+[m[32m  charsets: {[m
[32m+[m[32m    lookup: function (mimeType, fallback) {[m
[32m+[m[32m      // Assume text types are utf8.  Modify mime logic as needed.[m
[32m+[m[32m      return (/^text\//).test(mimeType) ? 'UTF-8' : fallback;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// Load our local copy of[m
[32m+[m[32m// http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types[m
[32m+[m[32mmime.load(path.join(__dirname, 'types/mime.types'));[m
[32m+[m
[32m+[m[32m// Overlay enhancements submitted by the node.js community[m
[32m+[m[32mmime.load(path.join(__dirname, 'types/node.types'));[m
[32m+[m
[32m+[m[32m// Set the default type[m
[32m+[m[32mmime.default_type = mime.types.bin;[m
[1mdiff --git a/node_modules/express/node_modules/mime/package.json b/node_modules/express/node_modules/mime/package.json[m
[1mnew file mode 100644[m
[1mindex 0000000..85277b0[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mime/package.json[m
[36m@@ -0,0 +1,22 @@[m
[32m+[m[32m{[m
[32m+[m[32m  "author": {[m
[32m+[m[32m    "name": "Robert Kieffer",[m
[32m+[m[32m    "url": "http://github.com/broofa",[m
[32m+[m[32m    "email": "robert@broofa.com"[m
[32m+[m[32m  },[m
[32m+[m[32m  "contributors": [[m
[32m+[m[32m    {[m
[32m+[m[32m      "name": "Benjamin Thomas",[m
[32m+[m[32m      "url": "http://github.com/bentomas",[m
[32m+[m[32m      "email": "benjamin@benjaminthomas.org"[m
[32m+[m[32m    }[m
[32m+[m[32m  ],[m
[32m+[m[32m  "dependencies": {},[m
[32m+[m[32m  "description": "A comprehensive library for mime-type mapping",[m
[32m+[m[32m  "devDependencies": {"async_testing": ""},[m
[32m+[m[32m  "keywords": ["util", "mime"],[m
[32m+[m[32m  "main": "mime.js",[m
[32m+[m[32m  "name": "mime",[m
[32m+[m[32m  "repository": {"url": "http://github.com/bentomas/node-mime", "type": "git"},[m
[32m+[m[32m  "version": "1.2.4"[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/mime/test.js b/node_modules/express/node_modules/mime/test.js[m
[1mnew file mode 100644[m
[1mindex 0000000..b904895[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mime/test.js[m
[36m@@ -0,0 +1,79 @@[m
[32m+[m[32m/**[m
[32m+[m[32m * Requires the async_testing module[m
[32m+[m[32m *[m
[32m+[m[32m * Usage: node test.js[m
[32m+[m[32m */[m
[32m+[m[32mvar mime = require('./mime');[m
[32m+[m[32mexports["test mime lookup"] = function(test) {[m
[32m+[m[32m  // easy[m
[32m+[m[32m  test.equal('text/plain', mime.lookup('text.txt'));[m
[32m+[m
[32m+[m[32m  // hidden file or multiple periods[m
[32m+[m[32m  test.equal('text/plain', mime.lookup('.text.txt'));[m
[32m+[m
[32m+[m[32m  // just an extension[m
[32m+[m[32m  test.equal('text/plain', mime.lookup('.txt'));[m
[32m+[m
[32m+[m[32m  // just an extension without a dot[m
[32m+[m[32m  test.equal('text/plain', mime.lookup('txt'));[m
[32m+[m
[32m+[m[32m  // default[m
[32m+[m[32m  test.equal('application/octet-stream', mime.lookup('text.nope'));[m
[32m+[m
[32m+[m[32m  // fallback[m
[32m+[m[32m  test.equal('fallback', mime.lookup('text.fallback', 'fallback'));[m
[32m+[m
[32m+[m[32m  test.finish();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexports["test extension lookup"] = function(test) {[m
[32m+[m[32m  // easy[m
[32m+[m[32m  test.equal('txt', mime.extension(mime.types.text));[m
[32m+[m[32m  test.equal('html', mime.extension(mime.types.htm));[m
[32m+[m[32m  test.equal('bin', mime.extension('application/octet-stream'));[m
[32m+[m
[32m+[m[32m  test.finish();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexports["test mime lookup uppercase"] = function(test) {[m
[32m+[m[32m  // easy[m
[32m+[m[32m  test.equal('text/plain', mime.lookup('TEXT.TXT'));[m
[32m+[m
[32m+[m[32m  // just an extension[m
[32m+[m[32m  test.equal('text/plain', mime.lookup('.TXT'));[m
[32m+[m
[32m+[m[32m  // just an extension without a dot[m
[32m+[m[32m  test.equal('text/plain', mime.lookup('TXT'));[m
[32m+[m
[32m+[m[32m  // default[m
[32m+[m[32m  test.equal('application/octet-stream', mime.lookup('TEXT.NOPE'));[m
[32m+[m
[32m+[m[32m  // fallback[m
[32m+[m[32m  test.equal('fallback', mime.lookup('TEXT.FALLBACK', 'fallback'));[m
[32m+[m
[32m+[m[32m  test.finish();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexports["test custom types"] = function(test) {[m
[32m+[m[32m  test.equal('application/octet-stream', mime.lookup('file.buffer'));[m
[32m+[m[32m  test.equal('audio/mp4', mime.lookup('file.m4a'));[m
[32m+[m
[32m+[m[32m  test.finish();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexports["test charset lookup"] = function(test) {[m
[32m+[m[32m  // easy[m
[32m+[m[32m  test.equal('UTF-8', mime.charsets.lookup('text/plain'));[m
[32m+[m
[32m+[m[32m  // none[m
[32m+[m[32m  test.ok(typeof mime.charsets.lookup(mime.types.js) == 'undefined');[m
[32m+[m
[32m+[m[32m  // fallback[m
[32m+[m[32m  test.equal('fallback', mime.charsets.lookup('application/octet-stream', 'fallback'));[m
[32m+[m
[32m+[m[32m  test.finish();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mif (module == require.main) {[m
[32m+[m[32m  require('async_testing').run(__filename, process.ARGV);[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/mime/types/mime.types b/node_modules/express/node_modules/mime/types/mime.types[m
[1mnew file mode 100644[m
[1mindex 0000000..6a90929[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mime/types/mime.types[m
[36m@@ -0,0 +1,1479 @@[m
[32m+[m[32m# This file maps Internet media types to unique file extension(s).[m
[32m+[m[32m# Although created for httpd, this file is used by many software systems[m
[32m+[m[32m# and has been placed in the public domain for unlimited redisribution.[m
[32m+[m[32m#[m
[32m+[m[32m# The table below contains both registered and (common) unregistered types.[m
[32m+[m[32m# A type that has no unique extension can be ignored -- they are listed[m
[32m+[m[32m# here to guide configurations toward known types and to make it easier to[m
[32m+[m[32m# identify "new" types.  File extensions are also commonly used to indicate[m
[32m+[m[32m# content languages and encodings, so choose them carefully.[m
[32m+[m[32m#[m
[32m+[m[32m# Internet media types should be registered as described in RFC 4288.[m
[32m+[m[32m# The registry is at <http://www.iana.org/assignments/media-types/>.[m
[32m+[m[32m#[m
[32m+[m[32m# MIME type (lowercased)			Extensions[m
[32m+[m[32m# ============================================	==========[m
[32m+[m[32m# application/1d-interleaved-parityfec[m
[32m+[m[32m# application/3gpp-ims+xml[m
[32m+[m[32m# application/activemessage[m
[32m+[m[32mapplication/andrew-inset			ez[m
[32m+[m[32m# application/applefile[m
[32m+[m[32mapplication/applixware				aw[m
[32m+[m[32mapplication/atom+xml				atom[m
[32m+[m[32mapplication/atomcat+xml				atomcat[m
[32m+[m[32m# application/atomicmail[m
[32m+[m[32mapplication/atomsvc+xml				atomsvc[m
[32m+[m[32m# application/auth-policy+xml[m
[32m+[m[32m# application/batch-smtp[m
[32m+[m[32m# application/beep+xml[m
[32m+[m[32m# application/cals-1840[m
[32m+[m[32mapplication/ccxml+xml				ccxml[m
[32m+[m[32mapplication/cdmi-capability			cdmia[m
[32m+[m[32mapplication/cdmi-container			cdmic[m
[32m+[m[32mapplication/cdmi-domain				cdmid[m
[32m+[m[32mapplication/cdmi-object				cdmio[m
[32m+[m[32mapplication/cdmi-queue				cdmiq[m
[32m+[m[32m# application/cea-2018+xml[m
[32m+[m[32m# application/cellml+xml[m
[32m+[m[32m# application/cfw[m
[32m+[m[32m# application/cnrp+xml[m
[32m+[m[32m# application/commonground[m
[32m+[m[32m# application/conference-info+xml[m
[32m+[m[32m# application/cpl+xml[m
[32m+[m[32m# application/csta+xml[m
[32m+[m[32m# application/cstadata+xml[m
[32m+[m[32mapplication/cu-seeme				cu[m
[32m+[m[32m# application/cybercash[m
[32m+[m[32mapplication/davmount+xml			davmount[m
[32m+[m[32m# application/dca-rft[m
[32m+[m[32m# application/dec-dx[m
[32m+[m[32m# application/dialog-info+xml[m
[32m+[m[32m# application/dicom[m
[32m+[m[32m# application/dns[m
[32m+[m[32m# application/dskpp+xml[m
[32m+[m[32mapplication/dssc+der				dssc[m
[32m+[m[32mapplication/dssc+xml				xdssc[m
[32m+[m[32m# application/dvcs[m
[32m+[m[32mapplication/ecmascript				ecma[m
[32m+[m[32m# application/edi-consent[m
[32m+[m[32m# application/edi-x12[m
[32m+[m[32m# application/edifact[m
[32m+[m[32mapplication/emma+xml				emma[m
[32m+[m[32m# application/epp+xml[m
[32m+[m[32mapplication/epub+zip				epub[m
[32m+[m[32m# application/eshop[m
[32m+[m[32m# application/example[m
[32m+[m[32mapplication/exi					exi[m
[32m+[m[32m# application/fastinfoset[m
[32m+[m[32m# application/fastsoap[m
[32m+[m[32m# application/fits[m
[32m+[m[32mapplication/font-tdpfr				pfr[m
[32m+[m[32m# application/framework-attributes+xml[m
[32m+[m[32m# application/h224[m
[32m+[m[32m# application/held+xml[m
[32m+[m[32m# application/http[m
[32m+[m[32mapplication/hyperstudio				stk[m
[32m+[m[32m# application/ibe-key-request+xml[m
[32m+[m[32m# application/ibe-pkg-reply+xml[m
[32m+[m[32m# application/ibe-pp-data[m
[32m+[m[32m# application/iges[m
[32m+[m[32m# application/im-iscomposing+xml[m
[32m+[m[32m# application/index[m
[32m+[m[32m# application/index.cmd[m
[32m+[m[32m# application/index.obj[m
[32m+[m[32m# application/index.response[m
[32m+[m[32m# application/index.vnd[m
[32m+[m[32m# application/iotp[m
[32m+[m[32mapplication/ipfix				ipfix[m
[32m+[m[32m# application/ipp[m
[32m+[m[32m# application/isup[m
[32m+[m[32mapplication/java-archive			jar[m
[32m+[m[32mapplication/java-serialized-object		ser[m
[32m+[m[32mapplication/java-vm				class[m
[32m+[m[32mapplication/javascript				js[m
[32m+[m[32mapplication/json				json[m
[32m+[m[32m# application/kpml-request+xml[m
[32m+[m[32m# application/kpml-response+xml[m
[32m+[m[32mapplication/lost+xml				lostxml[m
[32m+[m[32mapplication/mac-binhex40			hqx[m
[32m+[m[32mapplication/mac-compactpro			cpt[m
[32m+[m[32m# application/macwriteii[m
[32m+[m[32mapplication/mads+xml				mads[m
[32m+[m[32mapplication/marc				mrc[m
[32m+[m[32mapplication/marcxml+xml				mrcx[m
[32m+[m[32mapplication/mathematica				ma nb mb[m
[32m+[m[32m# application/mathml-content+xml[m
[32m+[m[32m# application/mathml-presentation+xml[m
[32m+[m[32mapplication/mathml+xml				mathml[m
[32m+[m[32m# application/mbms-associated-procedure-description+xml[m
[32m+[m[32m# application/mbms-deregister+xml[m
[32m+[m[32m# application/mbms-envelope+xml[m
[32m+[m[32m# application/mbms-msk+xml[m
[32m+[m[32m# application/mbms-msk-response+xml[m
[32m+[m[32m# application/mbms-protection-description+xml[m
[32m+[m[32m# application/mbms-reception-report+xml[m
[32m+[m[32m# application/mbms-register+xml[m
[32m+[m[32m# application/mbms-register-response+xml[m
[32m+[m[32m# application/mbms-user-service-description+xml[m
[32m+[m[32mapplication/mbox				mbox[m
[32m+[m[32m# application/media_control+xml[m
[32m+[m[32mapplication/mediaservercontrol+xml		mscml[m
[32m+[m[32mapplication/metalink4+xml			meta4[m
[32m+[m[32mapplication/mets+xml				mets[m
[32m+[m[32m# application/mikey[m
[32m+[m[32mapplication/mods+xml				mods[m
[32m+[m[32m# application/moss-keys[m
[32m+[m[32m# application/moss-signature[m
[32m+[m[32m# application/mosskey-data[m
[32m+[m[32m# application/mosskey-request[m
[32m+[m[32mapplication/mp21				m21 mp21[m
[32m+[m[32mapplication/mp4					mp4s[m
[32m+[m[32m# application/mpeg4-generic[m
[32m+[m[32m# application/mpeg4-iod[m
[32m+[m[32m# application/mpeg4-iod-xmt[m
[32m+[m[32m# application/msc-ivr+xml[m
[32m+[m[32m# application/msc-mixer+xml[m
[32m+[m[32mapplication/msword				doc dot[m
[32m+[m[32mapplication/mxf					mxf[m
[32m+[m[32m# application/nasdata[m
[32m+[m[32m# application/news-checkgroups[m
[32m+[m[32m# application/news-groupinfo[m
[32m+[m[32m# application/news-transmission[m
[32m+[m[32m# application/nss[m
[32m+[m[32m# application/ocsp-request[m
[32m+[m[32m# application/ocsp-response[m
[32m+[m[32mapplication/octet-stream	bin dms lha lrf lzh so iso dmg dist distz pkg bpk dump elc deploy[m
[32m+[m[32mapplication/oda					oda[m
[32m+[m[32mapplication/oebps-package+xml			opf[m
[32m+[m[32mapplication/ogg					ogx[m
[32m+[m[32mapplication/onenote				onetoc onetoc2 onetmp onepkg[m
[32m+[m[32m# application/parityfec[m
[32m+[m[32mapplication/patch-ops-error+xml			xer[m
[32m+[m[32mapplication/pdf					pdf[m
[32m+[m[32mapplication/pgp-encrypted			pgp[m
[32m+[m[32m# application/pgp-keys[m
[32m+[m[32mapplication/pgp-signature			asc sig[m
[32m+[m[32mapplication/pics-rules				prf[m
[32m+[m[32m# application/pidf+xml[m
[32m+[m[32m# application/pidf-diff+xml[m
[32m+[m[32mapplication/pkcs10				p10[m
[32m+[m[32mapplication/pkcs7-mime				p7m p7c[m
[32m+[m[32mapplication/pkcs7-signature			p7s[m
[32m+[m[32mapplication/pkcs8				p8[m
[32m+[m[32mapplication/pkix-attr-cert			ac[m
[32m+[m[32mapplication/pkix-cert				cer[m
[32m+[m[32mapplication/pkix-crl				crl[m
[32m+[m[32mapplication/pkix-pkipath			pkipath[m
[32m+[m[32mapplication/pkixcmp				pki[m
[32m+[m[32mapplication/pls+xml				pls[m
[32m+[m[32m# application/poc-settings+xml[m
[32m+[m[32mapplication/postscript				ai eps ps[m
[32m+[m[32m# application/prs.alvestrand.titrax-sheet[m
[32m+[m[32mapplication/prs.cww				cww[m
[32m+[m[32m# application/prs.nprend[m
[32m+[m[32m# application/prs.plucker[m
[32m+[m[32m# application/prs.rdf-xml-crypt[m
[32m+[m[32m# application/prs.xsf+xml[m
[32m+[m[32mapplication/pskc+xml				pskcxml[m
[32m+[m[32m# application/qsig[m
[32m+[m[32mapplication/rdf+xml				rdf[m
[32m+[m[32mapplication/reginfo+xml				rif[m
[32m+[m[32mapplication/relax-ng-compact-syntax		rnc[m
[32m+[m[32m# application/remote-printing[m
[32m+[m[32mapplication/resource-lists+xml			rl[m
[32m+[m[32mapplication/resource-lists-diff+xml		rld[m
[32m+[m[32m# application/riscos[m
[32m+[m[32m# application/rlmi+xml[m
[32m+[m[32mapplication/rls-services+xml			rs[m
[32m+[m[32mapplication/rsd+xml				rsd[m
[32m+[m[32mapplication/rss+xml				rss[m
[32m+[m[32mapplication/rtf					rtf[m
[32m+[m[32m# application/rtx[m
[32m+[m[32m# application/samlassertion+xml[m
[32m+[m[32m# application/samlmetadata+xml[m
[32m+[m[32mapplication/sbml+xml				sbml[m
[32m+[m[32mapplication/scvp-cv-request			scq[m
[32m+[m[32mapplication/scvp-cv-response			scs[m
[32m+[m[32mapplication/scvp-vp-request			spq[m
[32m+[m[32mapplication/scvp-vp-response			spp[m
[32m+[m[32mapplication/sdp					sdp[m
[32m+[m[32m# application/set-payment[m
[32m+[m[32mapplication/set-payment-initiation		setpay[m
[32m+[m[32m# application/set-registration[m
[32m+[m[32mapplication/set-registration-initiation		setreg[m
[32m+[m[32m# application/sgml[m
[32m+[m[32m# application/sgml-open-catalog[m
[32m+[m[32mapplication/shf+xml				shf[m
[32m+[m[32m# application/sieve[m
[32m+[m[32m# application/simple-filter+xml[m
[32m+[m[32m# application/simple-message-summary[m
[32m+[m[32m# application/simplesymbolcontainer[m
[32m+[m[32m# application/slate[m
[32m+[m[32m# application/smil[m
[32m+[m[32mapplication/smil+xml				smi smil[m
[32m+[m[32m# application/soap+fastinfoset[m
[32m+[m[32m# application/soap+xml[m
[32m+[m[32mapplication/sparql-query			rq[m
[32m+[m[32mapplication/sparql-results+xml			srx[m
[32m+[m[32m# application/spirits-event+xml[m
[32m+[m[32mapplication/srgs				gram[m
[32m+[m[32mapplication/srgs+xml				grxml[m
[32m+[m[32mapplication/sru+xml				sru[m
[32m+[m[32mapplication/ssml+xml				ssml[m
[32m+[m[32m# application/tamp-apex-update[m
[32m+[m[32m# application/tamp-apex-update-confirm[m
[32m+[m[32m# application/tamp-community-update[m
[32m+[m[32m# application/tamp-community-update-confirm[m
[32m+[m[32m# application/tamp-error[m
[32m+[m[32m# application/tamp-sequence-adjust[m
[32m+[m[32m# application/tamp-sequence-adjust-confirm[m
[32m+[m[32m# application/tamp-status-query[m
[32m+[m[32m# application/tamp-status-response[m
[32m+[m[32m# application/tamp-update[m
[32m+[m[32m# application/tamp-update-confirm[m
[32m+[m[32mapplication/tei+xml				tei teicorpus[m
[32m+[m[32mapplication/thraud+xml				tfi[m
[32m+[m[32m# application/timestamp-query[m
[32m+[m[32m# application/timestamp-reply[m
[32m+[m[32mapplication/timestamped-data			tsd[m
[32m+[m[32m# application/tve-trigger[m
[32m+[m[32m# application/ulpfec[m
[32m+[m[32m# application/vemmi[m
[32m+[m[32m# application/vividence.scriptfile[m
[32m+[m[32m# application/vnd.3gpp.bsf+xml[m
[32m+[m[32mapplication/vnd.3gpp.pic-bw-large		plb[m
[32m+[m[32mapplication/vnd.3gpp.pic-bw-small		psb[m
[32m+[m[32mapplication/vnd.3gpp.pic-bw-var			pvb[m
[32m+[m[32m# application/vnd.3gpp.sms[m
[32m+[m[32m# application/vnd.3gpp2.bcmcsinfo+xml[m
[32m+[m[32m# application/vnd.3gpp2.sms[m
[32m+[m[32mapplication/vnd.3gpp2.tcap			tcap[m
[32m+[m[32mapplication/vnd.3m.post-it-notes		pwn[m
[32m+[m[32mapplication/vnd.accpac.simply.aso		aso[m
[32m+[m[32mapplication/vnd.accpac.simply.imp		imp[m
[32m+[m[32mapplication/vnd.acucobol			acu[m
[32m+[m[32mapplication/vnd.acucorp				atc acutc[m
[32m+[m[32mapplication/vnd.adobe.air-application-installer-package+zip	air[m
[32m+[m[32mapplication/vnd.adobe.fxp			fxp fxpl[m
[32m+[m[32m# application/vnd.adobe.partial-upload[m
[32m+[m[32mapplication/vnd.adobe.xdp+xml			xdp[m
[32m+[m[32mapplication/vnd.adobe.xfdf			xfdf[m
[32m+[m[32m# application/vnd.aether.imp[m
[32m+[m[32m# application/vnd.ah-barcode[m
[32m+[m[32mapplication/vnd.ahead.space			ahead[m
[32m+[m[32mapplication/vnd.airzip.filesecure.azf		azf[m
[32m+[m[32mapplication/vnd.airzip.filesecure.azs		azs[m
[32m+[m[32mapplication/vnd.amazon.ebook			azw[m
[32m+[m[32mapplication/vnd.americandynamics.acc		acc[m
[32m+[m[32mapplication/vnd.amiga.ami			ami[m
[32m+[m[32m# application/vnd.amundsen.maze+xml[m
[32m+[m[32mapplication/vnd.android.package-archive		apk[m
[32m+[m[32mapplication/vnd.anser-web-certificate-issue-initiation	cii[m
[32m+[m[32mapplication/vnd.anser-web-funds-transfer-initiation	fti[m
[32m+[m[32mapplication/vnd.antix.game-component		atx[m
[32m+[m[32mapplication/vnd.apple.installer+xml		mpkg[m
[32m+[m[32mapplication/vnd.apple.mpegurl			m3u8[m
[32m+[m[32m# application/vnd.arastra.swi[m
[32m+[m[32mapplication/vnd.aristanetworks.swi		swi[m
[32m+[m[32mapplication/vnd.audiograph			aep[m
[32m+[m[32m# application/vnd.autopackage[m
[32m+[m[32m# application/vnd.avistar+xml[m
[32m+[m[32mapplication/vnd.blueice.multipass		mpm[m
[32m+[m[32m# application/vnd.bluetooth.ep.oob[m
[32m+[m[32mapplication/vnd.bmi				bmi[m
[32m+[m[32mapplication/vnd.businessobjects			rep[m
[32m+[m[32m# application/vnd.cab-jscript[m
[32m+[m[32m# application/vnd.canon-cpdl[m
[32m+[m[32m# application/vnd.canon-lips[m
[32m+[m[32m# application/vnd.cendio.thinlinc.clientconf[m
[32m+[m[32mapplication/vnd.chemdraw+xml			cdxml[m
[32m+[m[32mapplication/vnd.chipnuts.karaoke-mmd		mmd[m
[32m+[m[32mapplication/vnd.cinderella			cdy[m
[32m+[m[32m# application/vnd.cirpack.isdn-ext[m
[32m+[m[32mapplication/vnd.claymore			cla[m
[32m+[m[32mapplication/vnd.cloanto.rp9			rp9[m
[32m+[m[32mapplication/vnd.clonk.c4group			c4g c4d c4f c4p c4u[m
[32m+[m[32mapplication/vnd.cluetrust.cartomobile-config		c11amc[m
[32m+[m[32mapplication/vnd.cluetrust.cartomobile-config-pkg	c11amz[m
[32m+[m[32m# application/vnd.commerce-battelle[m
[32m+[m[32mapplication/vnd.commonspace			csp[m
[32m+[m[32mapplication/vnd.contact.cmsg			cdbcmsg[m
[32m+[m[32mapplication/vnd.cosmocaller			cmc[m
[32m+[m[32mapplication/vnd.crick.clicker			clkx[m
[32m+[m[32mapplication/vnd.crick.clicker.keyboard		clkk[m
[32m+[m[32mapplication/vnd.crick.clicker.palette		clkp[m
[32m+[m[32mapplication/vnd.crick.clicker.template		clkt[m
[32m+[m[32mapplication/vnd.crick.clicker.wordbank		clkw[m
[32m+[m[32mapplication/vnd.criticaltools.wbs+xml		wbs[m
[32m+[m[32mapplication/vnd.ctc-posml			pml[m
[32m+[m[32m# application/vnd.ctct.ws+xml[m
[32m+[m[32m# application/vnd.cups-pdf[m
[32m+[m[32m# application/vnd.cups-postscript[m
[32m+[m[32mapplication/vnd.cups-ppd			ppd[m
[32m+[m[32m# application/vnd.cups-raster[m
[32m+[m[32m# application/vnd.cups-raw[m
[32m+[m[32mapplication/vnd.curl.car			car[m
[32m+[m[32mapplication/vnd.curl.pcurl			pcurl[m
[32m+[m[32m# application/vnd.cybank[m
[32m+[m[32mapplication/vnd.data-vision.rdz			rdz[m
[32m+[m[32mapplication/vnd.dece.data			uvf uvvf uvd uvvd[m
[32m+[m[32mapplication/vnd.dece.ttml+xml			uvt uvvt[m
[32m+[m[32mapplication/vnd.dece.unspecified		uvx uvvx[m
[32m+[m[32mapplication/vnd.denovo.fcselayout-link		fe_launch[m
[32m+[m[32m# application/vnd.dir-bi.plate-dl-nosuffix[m
[32m+[m[32mapplication/vnd.dna				dna[m
[32m+[m[32mapplication/vnd.dolby.mlp			mlp[m
[32m+[m[32m# application/vnd.dolby.mobile.1[m
[32m+[m[32m# application/vnd.dolby.mobile.2[m
[32m+[m[32mapplication/vnd.dpgraph				dpg[m
[32m+[m[32mapplication/vnd.dreamfactory			dfac[m
[32m+[m[32mapplication/vnd.dvb.ait				ait[m
[32m+[m[32m# application/vnd.dvb.dvbj[m
[32m+[m[32m# application/vnd.dvb.esgcontainer[m
[32m+[m[32m# application/vnd.dvb.ipdcdftnotifaccess[m
[32m+[m[32m# application/vnd.dvb.ipdcesgaccess[m
[32m+[m[32m# application/vnd.dvb.ipdcesgaccess2[m
[32m+[m[32m# application/vnd.dvb.ipdcesgpdd[m
[32m+[m[32m# application/vnd.dvb.ipdcroaming[m
[32m+[m[32m# application/vnd.dvb.iptv.alfec-base[m
[32m+[m[32m# application/vnd.dvb.iptv.alfec-enhancement[m
[32m+[m[32m# application/vnd.dvb.notif-aggregate-root+xml[m
[32m+[m[32m# application/vnd.dvb.notif-container+xml[m
[32m+[m[32m# application/vnd.dvb.notif-generic+xml[m
[32m+[m[32m# application/vnd.dvb.notif-ia-msglist+xml[m
[32m+[m[32m# application/vnd.dvb.notif-ia-registration-request+xml[m
[32m+[m[32m# application/vnd.dvb.notif-ia-registration-response+xml[m
[32m+[m[32m# application/vnd.dvb.notif-init+xml[m
[32m+[m[32m# application/vnd.dvb.pfr[m
[32m+[m[32mapplication/vnd.dvb.service			svc[m
[32m+[m[32m# application/vnd.dxr[m
[32m+[m[32mapplication/vnd.dynageo				geo[m
[32m+[m[32m# application/vnd.easykaraoke.cdgdownload[m
[32m+[m[32m# application/vnd.ecdis-update[m
[32m+[m[32mapplication/vnd.ecowin.chart			mag[m
[32m+[m[32m# application/vnd.ecowin.filerequest[m
[32m+[m[32m# application/vnd.ecowin.fileupdate[m
[32m+[m[32m# application/vnd.ecowin.series[m
[32m+[m[32m# application/vnd.ecowin.seriesrequest[m
[32m+[m[32m# application/vnd.ecowin.seriesupdate[m
[32m+[m[32m# application/vnd.emclient.accessrequest+xml[m
[32m+[m[32mapplication/vnd.enliven				nml[m
[32m+[m[32mapplication/vnd.epson.esf			esf[m
[32m+[m[32mapplication/vnd.epson.msf			msf[m
[32m+[m[32mapplication/vnd.epson.quickanime		qam[m
[32m+[m[32mapplication/vnd.epson.salt			slt[m
[32m+[m[32mapplication/vnd.epson.ssf			ssf[m
[32m+[m[32m# application/vnd.ericsson.quickcall[m
[32m+[m[32mapplication/vnd.eszigno3+xml			es3 et3[m
[32m+[m[32m# application/vnd.etsi.aoc+xml[m
[32m+[m[32m# application/vnd.etsi.cug+xml[m
[32m+[m[32m# application/vnd.etsi.iptvcommand+xml[m
[32m+[m[32m# application/vnd.etsi.iptvdiscovery+xml[m
[32m+[m[32m# application/vnd.etsi.iptvprofile+xml[m
[32m+[m[32m# application/vnd.etsi.iptvsad-bc+xml[m
[32m+[m[32m# application/vnd.etsi.iptvsad-cod+xml[m
[32m+[m[32m# application/vnd.etsi.iptvsad-npvr+xml[m
[32m+[m[32m# application/vnd.etsi.iptvservice+xml[m
[32m+[m[32m# application/vnd.etsi.iptvsync+xml[m
[32m+[m[32m# application/vnd.etsi.iptvueprofile+xml[m
[32m+[m[32m# application/vnd.etsi.mcid+xml[m
[32m+[m[32m# application/vnd.etsi.overload-control-policy-dataset+xml[m
[32m+[m[32m# application/vnd.etsi.sci+xml[m
[32m+[m[32m# application/vnd.etsi.simservs+xml[m
[32m+[m[32m# application/vnd.etsi.tsl+xml[m
[32m+[m[32m# application/vnd.etsi.tsl.der[m
[32m+[m[32m# application/vnd.eudora.data[m
[32m+[m[32mapplication/vnd.ezpix-album			ez2[m
[32m+[m[32mapplication/vnd.ezpix-package			ez3[m
[32m+[m[32m# application/vnd.f-secure.mobile[m
[32m+[m[32mapplication/vnd.fdf				fdf[m
[32m+[m[32mapplication/vnd.fdsn.mseed			mseed[m
[32m+[m[32mapplication/vnd.fdsn.seed			seed dataless[m
[32m+[m[32m# application/vnd.ffsns[m
[32m+[m[32m# application/vnd.fints[m
[32m+[m[32mapplication/vnd.flographit			gph[m
[32m+[m[32mapplication/vnd.fluxtime.clip			ftc[m
[32m+[m[32m# application/vnd.font-fontforge-sfd[m
[32m+[m[32mapplication/vnd.framemaker			fm frame maker book[m
[32m+[m[32mapplication/vnd.frogans.fnc			fnc[m
[32m+[m[32mapplication/vnd.frogans.ltf			ltf[m
[32m+[m[32mapplication/vnd.fsc.weblaunch			fsc[m
[32m+[m[32mapplication/vnd.fujitsu.oasys			oas[m
[32m+[m[32mapplication/vnd.fujitsu.oasys2			oa2[m
[32m+[m[32mapplication/vnd.fujitsu.oasys3			oa3[m
[32m+[m[32mapplication/vnd.fujitsu.oasysgp			fg5[m
[32m+[m[32mapplication/vnd.fujitsu.oasysprs		bh2[m
[32m+[m[32m# application/vnd.fujixerox.art-ex[m
[32m+[m[32m# application/vnd.fujixerox.art4[m
[32m+[m[32m# application/vnd.fujixerox.hbpl[m
[32m+[m[32mapplication/vnd.fujixerox.ddd			ddd[m
[32m+[m[32mapplication/vnd.fujixerox.docuworks		xdw[m
[32m+[m[32mapplication/vnd.fujixerox.docuworks.binder	xbd[m
[32m+[m[32m# application/vnd.fut-misnet[m
[32m+[m[32mapplication/vnd.fuzzysheet			fzs[m
[32m+[m[32mapplication/vnd.genomatix.tuxedo		txd[m
[32m+[m[32m# application/vnd.geocube+xml[m
[32m+[m[32mapplication/vnd.geogebra.file			ggb[m
[32m+[m[32mapplication/vnd.geogebra.tool			ggt[m
[32m+[m[32mapplication/vnd.geometry-explorer		gex gre[m
[32m+[m[32mapplication/vnd.geonext				gxt[m
[32m+[m[32mapplication/vnd.geoplan				g2w[m
[32m+[m[32mapplication/vnd.geospace			g3w[m
[32m+[m[32m# application/vnd.globalplatform.card-content-mgt[m
[32m+[m[32m# application/vnd.globalplatform.card-content-mgt-response[m
[32m+[m[32mapplication/vnd.gmx				gmx[m
[32m+[m[32mapplication/vnd.google-earth.kml+xml		kml[m
[32m+[m[32mapplication/vnd.google-earth.kmz		kmz[m
[32m+[m[32mapplication/vnd.grafeq				gqf gqs[m
[32m+[m[32m# application/vnd.gridmp[m
[32m+[m[32mapplication/vnd.groove-account			gac[m
[32m+[m[32mapplication/vnd.groove-help			ghf[m
[32m+[m[32mapplication/vnd.groove-identity-message		gim[m
[32m+[m[32mapplication/vnd.groove-injector			grv[m
[32m+[m[32mapplication/vnd.groove-tool-message		gtm[m
[32m+[m[32mapplication/vnd.groove-tool-template		tpl[m
[32m+[m[32mapplication/vnd.groove-vcard			vcg[m
[32m+[m[32mapplication/vnd.hal+xml				hal[m
[32m+[m[32mapplication/vnd.handheld-entertainment+xml	zmm[m
[32m+[m[32mapplication/vnd.hbci				hbci[m
[32m+[m[32m# application/vnd.hcl-bireports[m
[32m+[m[32mapplication/vnd.hhe.lesson-player		les[m
[32m+[m[32mapplication/vnd.hp-hpgl				hpgl[m
[32m+[m[32mapplication/vnd.hp-hpid				hpid[m
[32m+[m[32mapplication/vnd.hp-hps				hps[m
[32m+[m[32mapplication/vnd.hp-jlyt				jlt[m
[32m+[m[32mapplication/vnd.hp-pcl				pcl[m
[32m+[m[32mapplication/vnd.hp-pclxl			pclxl[m
[32m+[m[32m# application/vnd.httphone[m
[32m+[m[32mapplication/vnd.hydrostatix.sof-data		sfd-hdstx[m
[32m+[m[32mapplication/vnd.hzn-3d-crossword		x3d[m
[32m+[m[32m# application/vnd.ibm.afplinedata[m
[32m+[m[32m# application/vnd.ibm.electronic-media[m
[32m+[m[32mapplication/vnd.ibm.minipay			mpy[m
[32m+[m[32mapplication/vnd.ibm.modcap			afp listafp list3820[m
[32m+[m[32mapplication/vnd.ibm.rights-management		irm[m
[32m+[m[32mapplication/vnd.ibm.secure-container		sc[m
[32m+[m[32mapplication/vnd.iccprofile			icc icm[m
[32m+[m[32mapplication/vnd.igloader			igl[m
[32m+[m[32mapplication/vnd.immervision-ivp			ivp[m
[32m+[m[32mapplication/vnd.immervision-ivu			ivu[m
[32m+[m[32m# application/vnd.informedcontrol.rms+xml[m
[32m+[m[32m# application/vnd.informix-visionary[m
[32m+[m[32m# application/vnd.infotech.project[m
[32m+[m[32m# application/vnd.infotech.project+xml[m
[32m+[m[32mapplication/vnd.insors.igm			igm[m
[32m+[m[32mapplication/vnd.intercon.formnet		xpw xpx[m
[32m+[m[32mapplication/vnd.intergeo			i2g[m
[32m+[m[32m# application/vnd.intertrust.digibox[m
[32m+[m[32m# application/vnd.intertrust.nncp[m
[32m+[m[32mapplication/vnd.intu.qbo			qbo[m
[32m+[m[32mapplication/vnd.intu.qfx			qfx[m
[32m+[m[32m# application/vnd.iptc.g2.conceptitem+xml[m
[32m+[m[32m# application/vnd.iptc.g2.knowledgeitem+xml[m
[32m+[m[32m# application/vnd.iptc.g2.newsitem+xml[m
[32m+[m[32m# application/vnd.iptc.g2.packageitem+xml[m
[32m+[m[32mapplication/vnd.ipunplugged.rcprofile		rcprofile[m
[32m+[m[32mapplication/vnd.irepository.package+xml		irp[m
[32m+[m[32mapplication/vnd.is-xpr				xpr[m
[32m+[m[32mapplication/vnd.isac.fcs			fcs[m
[32m+[m[32mapplication/vnd.jam				jam[m
[32m+[m[32m# application/vnd.japannet-directory-service[m
[32m+[m[32m# application/vnd.japannet-jpnstore-wakeup[m
[32m+[m[32m# application/vnd.japannet-payment-wakeup[m
[32m+[m[32m# application/vnd.japannet-registration[m
[32m+[m[32m# application/vnd.japannet-registration-wakeup[m
[32m+[m[32m# application/vnd.japannet-setstore-wakeup[m
[32m+[m[32m# application/vnd.japannet-verification[m
[32m+[m[32m# application/vnd.japannet-verification-wakeup[m
[32m+[m[32mapplication/vnd.jcp.javame.midlet-rms		rms[m
[32m+[m[32mapplication/vnd.jisp				jisp[m
[32m+[m[32mapplication/vnd.joost.joda-archive		joda[m
[32m+[m[32mapplication/vnd.kahootz				ktz ktr[m
[32m+[m[32mapplication/vnd.kde.karbon			karbon[m
[32m+[m[32mapplication/vnd.kde.kchart			chrt[m
[32m+[m[32mapplication/vnd.kde.kformula			kfo[m
[32m+[m[32mapplication/vnd.kde.kivio			flw[m
[32m+[m[32mapplication/vnd.kde.kontour			kon[m
[32m+[m[32mapplication/vnd.kde.kpresenter			kpr kpt[m
[32m+[m[32mapplication/vnd.kde.kspread			ksp[m
[32m+[m[32mapplication/vnd.kde.kword			kwd kwt[m
[32m+[m[32mapplication/vnd.kenameaapp			htke[m
[32m+[m[32mapplication/vnd.kidspiration			kia[m
[32m+[m[32mapplication/vnd.kinar				kne knp[m
[32m+[m[32mapplication/vnd.koan				skp skd skt skm[m
[32m+[m[32mapplication/vnd.kodak-descriptor		sse[m
[32m+[m[32mapplication/vnd.las.las+xml			lasxml[m
[32m+[m[32m# application/vnd.liberty-request+xml[m
[32m+[m[32mapplication/vnd.llamagraphics.life-balance.desktop	lbd[m
[32m+[m[32mapplication/vnd.llamagraphics.life-balance.exchange+xml	lbe[m
[32m+[m[32mapplication/vnd.lotus-1-2-3			123[m
[32m+[m[32mapplication/vnd.lotus-approach			apr[m
[32m+[m[32mapplication/vnd.lotus-freelance			pre[m
[32m+[m[32mapplication/vnd.lotus-notes			nsf[m
[32m+[m[32mapplication/vnd.lotus-organizer			org[m
[32m+[m[32mapplication/vnd.lotus-screencam			scm[m
[32m+[m[32mapplication/vnd.lotus-wordpro			lwp[m
[32m+[m[32mapplication/vnd.macports.portpkg		portpkg[m
[32m+[m[32m# application/vnd.marlin.drm.actiontoken+xml[m
[32m+[m[32m# application/vnd.marlin.drm.conftoken+xml[m
[32m+[m[32m# application/vnd.marlin.drm.license+xml[m
[32m+[m[32m# application/vnd.marlin.drm.mdcf[m
[32m+[m[32mapplication/vnd.mcd				mcd[m
[32m+[m[32mapplication/vnd.medcalcdata			mc1[m
[32m+[m[32mapplication/vnd.mediastation.cdkey		cdkey[m
[32m+[m[32m# application/vnd.meridian-slingshot[m
[32m+[m[32mapplication/vnd.mfer				mwf[m
[32m+[m[32mapplication/vnd.mfmp				mfm[m
[32m+[m[32mapplication/vnd.micrografx.flo			flo[m
[32m+[m[32mapplication/vnd.micrografx.igx			igx[m
[32m+[m[32mapplication/vnd.mif				mif[m
[32m+[m[32m# application/vnd.minisoft-hp3000-save[m
[32m+[m[32m# application/vnd.mitsubishi.misty-guard.trustweb[m
[32m+[m[32mapplication/vnd.mobius.daf			daf[m
[32m+[m[32mapplication/vnd.mobius.dis			dis[m
[32m+[m[32mapplication/vnd.mobius.mbk			mbk[m
[32m+[m[32mapplication/vnd.mobius.mqy			mqy[m
[32m+[m[32mapplication/vnd.mobius.msl			msl[m
[32m+[m[32mapplication/vnd.mobius.plc			plc[m
[32m+[m[32mapplication/vnd.mobius.txf			txf[m
[32m+[m[32mapplication/vnd.mophun.application		mpn[m
[32m+[m[32mapplication/vnd.mophun.certificate		mpc[m
[32m+[m[32m# application/vnd.motorola.flexsuite[m
[32m+[m[32m# application/vnd.motorola.flexsuite.adsi[m
[32m+[m[32m# application/vnd.motorola.flexsuite.fis[m
[32m+[m[32m# application/vnd.motorola.flexsuite.gotap[m
[32m+[m[32m# application/vnd.motorola.flexsuite.kmr[m
[32m+[m[32m# application/vnd.motorola.flexsuite.ttc[m
[32m+[m[32m# application/vnd.motorola.flexsuite.wem[m
[32m+[m[32m# application/vnd.motorola.iprm[m
[32m+[m[32mapplication/vnd.mozilla.xul+xml			xul[m
[32m+[m[32mapplication/vnd.ms-artgalry			cil[m
[32m+[m[32m# application/vnd.ms-asf[m
[32m+[m[32mapplication/vnd.ms-cab-compressed		cab[m
[32m+[m[32mapplication/vnd.ms-excel			xls xlm xla xlc xlt xlw[m
[32m+[m[32mapplication/vnd.ms-excel.addin.macroenabled.12		xlam[m
[32m+[m[32mapplication/vnd.ms-excel.sheet.binary.macroenabled.12	xlsb[m
[32m+[m[32mapplication/vnd.ms-excel.sheet.macroenabled.12		xlsm[m
[32m+[m[32mapplication/vnd.ms-excel.template.macroenabled.12	xltm[m
[32m+[m[32mapplication/vnd.ms-fontobject			eot[m
[32m+[m[32mapplication/vnd.ms-htmlhelp			chm[m
[32m+[m[32mapplication/vnd.ms-ims				ims[m
[32m+[m[32mapplication/vnd.ms-lrm				lrm[m
[32m+[m[32m# application/vnd.ms-office.activex+xml[m
[32m+[m[32mapplication/vnd.ms-officetheme			thmx[m
[32m+[m[32mapplication/vnd.ms-pki.seccat			cat[m
[32m+[m[32mapplication/vnd.ms-pki.stl			stl[m
[32m+[m[32m# application/vnd.ms-playready.initiator+xml[m
[32m+[m[32mapplication/vnd.ms-powerpoint			ppt pps pot[m
[32m+[m[32mapplication/vnd.ms-powerpoint.addin.macroenabled.12		ppam[m
[32m+[m[32mapplication/vnd.ms-powerpoint.presentation.macroenabled.12	pptm[m
[32m+[m[32mapplication/vnd.ms-powerpoint.slide.macroenabled.12		sldm[m
[32m+[m[32mapplication/vnd.ms-powerpoint.slideshow.macroenabled.12		ppsm[m
[32m+[m[32mapplication/vnd.ms-powerpoint.template.macroenabled.12		potm[m
[32m+[m[32mapplication/vnd.ms-project			mpp mpt[m
[32m+[m[32m# application/vnd.ms-tnef[m
[32m+[m[32m# application/vnd.ms-wmdrm.lic-chlg-req[m
[32m+[m[32m# application/vnd.ms-wmdrm.lic-resp[m
[32m+[m[32m# application/vnd.ms-wmdrm.meter-chlg-req[m
[32m+[m[32m# application/vnd.ms-wmdrm.meter-resp[m
[32m+[m[32mapplication/vnd.ms-word.document.macroenabled.12	docm[m
[32m+[m[32mapplication/vnd.ms-word.template.macroenabled.12	dotm[m
[32m+[m[32mapplication/vnd.ms-works			wps wks wcm wdb[m
[32m+[m[32mapplication/vnd.ms-wpl				wpl[m
[32m+[m[32mapplication/vnd.ms-xpsdocument			xps[m
[32m+[m[32mapplication/vnd.mseq				mseq[m
[32m+[m[32m# application/vnd.msign[m
[32m+[m[32m# application/vnd.multiad.creator[m
[32m+[m[32m# application/vnd.multiad.creator.cif[m
[32m+[m[32m# application/vnd.music-niff[m
[32m+[m[32mapplication/vnd.musician			mus[m
[32m+[m[32mapplication/vnd.muvee.style			msty[m
[32m+[m[32m# application/vnd.ncd.control[m
[32m+[m[32m# application/vnd.ncd.reference[m
[32m+[m[32m# application/vnd.nervana[m
[32m+[m[32m# application/vnd.netfpx[m
[32m+[m[32mapplication/vnd.neurolanguage.nlu		nlu[m
[32m+[m[32mapplication/vnd.noblenet-directory		nnd[m
[32m+[m[32mapplication/vnd.noblenet-sealer			nns[m
[32m+[m[32mapplication/vnd.noblenet-web			nnw[m
[32m+[m[32m# application/vnd.nokia.catalogs[m
[32m+[m[32m# application/vnd.nokia.conml+wbxml[m
[32m+[m[32m# application/vnd.nokia.conml+xml[m
[32m+[m[32m# application/vnd.nokia.isds-radio-presets[m
[32m+[m[32m# application/vnd.nokia.iptv.config+xml[m
[32m+[m[32m# application/vnd.nokia.landmark+wbxml[m
[32m+[m[32m# application/vnd.nokia.landmark+xml[m
[32m+[m[32m# application/vnd.nokia.landmarkcollection+xml[m
[32m+[m[32m# application/vnd.nokia.n-gage.ac+xml[m
[32m+[m[32mapplication/vnd.nokia.n-gage.data		ngdat[m
[32m+[m[32mapplication/vnd.nokia.n-gage.symbian.install	n-gage[m
[32m+[m[32m# application/vnd.nokia.ncd[m
[32m+[m[32m# application/vnd.nokia.pcd+wbxml[m
[32m+[m[32m# application/vnd.nokia.pcd+xml[m
[32m+[m[32mapplication/vnd.nokia.radio-preset		rpst[m
[32m+[m[32mapplication/vnd.nokia.radio-presets		rpss[m
[32m+[m[32mapplication/vnd.novadigm.edm			edm[m
[32m+[m[32mapplication/vnd.novadigm.edx			edx[m
[32m+[m[32mapplication/vnd.novadigm.ext			ext[m
[32m+[m[32m# application/vnd.ntt-local.file-transfer[m
[32m+[m[32m# application/vnd.ntt-local.sip-ta_remote[m
[32m+[m[32m# application/vnd.ntt-local.sip-ta_tcp_stream[m
[32m+[m[32mapplication/vnd.oasis.opendocument.chart		odc[m
[32m+[m[32mapplication/vnd.oasis.opendocument.chart-template	otc[m
[32m+[m[32mapplication/vnd.oasis.opendocument.database		odb[m
[32m+[m[32mapplication/vnd.oasis.opendocument.formula		odf[m
[32m+[m[32mapplication/vnd.oasis.opendocument.formula-template	odft[m
[32m+[m[32mapplication/vnd.oasis.opendocument.graphics		odg[m
[32m+[m[32mapplication/vnd.oasis.opendocument.graphics-template	otg[m
[32m+[m[32mapplication/vnd.oasis.opendocument.image		odi[m
[32m+[m[32mapplication/vnd.oasis.opendocument.image-template	oti[m
[32m+[m[32mapplication/vnd.oasis.opendocument.presentation		odp[m
[32m+[m[32mapplication/vnd.oasis.opendocument.presentation-template	otp[m
[32m+[m[32mapplication/vnd.oasis.opendocument.spreadsheet		ods[m
[32m+[m[32mapplication/vnd.oasis.opendocument.spreadsheet-template	ots[m
[32m+[m[32mapplication/vnd.oasis.opendocument.text			odt[m
[32m+[m[32mapplication/vnd.oasis.opendocument.text-master		odm[m
[32m+[m[32mapplication/vnd.oasis.opendocument.text-template	ott[m
[32m+[m[32mapplication/vnd.oasis.opendocument.text-web		oth[m
[32m+[m[32m# application/vnd.obn[m
[32m+[m[32m# application/vnd.oipf.contentaccessdownload+xml[m
[32m+[m[32m# application/vnd.oipf.contentaccessstreaming+xml[m
[32m+[m[32m# application/vnd.oipf.cspg-hexbinary[m
[32m+[m[32m# application/vnd.oipf.dae.svg+xml[m
[32m+[m[32m# application/vnd.oipf.dae.xhtml+xml[m
[32m+[m[32m# application/vnd.oipf.mippvcontrolmessage+xml[m
[32m+[m[32m# application/vnd.oipf.pae.gem[m
[32m+[m[32m# application/vnd.oipf.spdiscovery+xml[m
[32m+[m[32m# application/vnd.oipf.spdlist+xml[m
[32m+[m[32m# application/vnd.oipf.ueprofile+xml[m
[32m+[m[32m# application/vnd.oipf.userprofile+xml[m
[32m+[m[32mapplication/vnd.olpc-sugar			xo[m
[32m+[m[32m# application/vnd.oma-scws-config[m
[32m+[m[32m# application/vnd.oma-scws-http-request[m
[32m+[m[32m# application/vnd.oma-scws-http-response[m
[32m+[m[32m# application/vnd.oma.bcast.associated-procedure-parameter+xml[m
[32m+[m[32m# application/vnd.oma.bcast.drm-trigger+xml[m
[32m+[m[32m# application/vnd.oma.bcast.imd+xml[m
[32m+[m[32m# application/vnd.oma.bcast.ltkm[m
[32m+[m[32m# application/vnd.oma.bcast.notification+xml[m
[32m+[m[32m# application/vnd.oma.bcast.provisioningtrigger[m
[32m+[m[32m# application/vnd.oma.bcast.sgboot[m
[32m+[m[32m# application/vnd.oma.bcast.sgdd+xml[m
[32m+[m[32m# application/vnd.oma.bcast.sgdu[m
[32m+[m[32m# application/vnd.oma.bcast.simple-symbol-container[m
[32m+[m[32m# application/vnd.oma.bcast.smartcard-trigger+xml[m
[32m+[m[32m# application/vnd.oma.bcast.sprov+xml[m
[32m+[m[32m# application/vnd.oma.bcast.stkm[m
[32m+[m[32m# application/vnd.oma.cab-address-book+xml[m
[32m+[m[32m# application/vnd.oma.cab-pcc+xml[m
[32m+[m[32m# application/vnd.oma.dcd[m
[32m+[m[32m# application/vnd.oma.dcdc[m
[32m+[m[32mapplication/vnd.oma.dd2+xml			dd2[m
[32m+[m[32m# application/vnd.oma.drm.risd+xml[m
[32m+[m[32m# application/vnd.oma.group-usage-list+xml[m
[32m+[m[32m# application/vnd.oma.poc.detailed-progress-report+xml[m
[32m+[m[32m# application/vnd.oma.poc.final-report+xml[m
[32m+[m[32m# application/vnd.oma.poc.groups+xml[m
[32m+[m[32m# application/vnd.oma.poc.invocation-descriptor+xml[m
[32m+[m[32m# application/vnd.oma.poc.optimized-progress-report+xml[m
[32m+[m[32m# application/vnd.oma.push[m
[32m+[m[32m# application/vnd.oma.scidm.messages+xml[m
[32m+[m[32m# application/vnd.oma.xcap-directory+xml[m
[32m+[m[32m# application/vnd.omads-email+xml[m
[32m+[m[32m# application/vnd.omads-file+xml[m
[32m+[m[32m# application/vnd.omads-folder+xml[m
[32m+[m[32m# application/vnd.omaloc-supl-init[m
[32m+[m[32mapplication/vnd.openofficeorg.extension		oxt[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.custom-properties+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.customxmlproperties+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.drawing+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.drawingml.chart+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.extended-properties+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.comments+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml[m
[32m+[m[32mapplication/vnd.openxmlformats-officedocument.presentationml.presentation	pptx[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.presprops+xml[m
[32m+[m[32mapplication/vnd.openxmlformats-officedocument.presentationml.slide	sldx[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.slide+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml[m
[32m+[m[32mapplication/vnd.openxmlformats-officedocument.presentationml.slideshow	ppsx[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.tags+xml[m
[32m+[m[32mapplication/vnd.openxmlformats-officedocument.presentationml.template	potx[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.template.main+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml[m
[32m+[m[32mapplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet	xlsx[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml[m
[32m+[m[32mapplication/vnd.openxmlformats-officedocument.spreadsheetml.template	xltx[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.theme+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.themeoverride+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.vmldrawing[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml[m
[32m+[m[32mapplication/vnd.openxmlformats-officedocument.wordprocessingml.document	docx[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml[m
[32m+[m[32mapplication/vnd.openxmlformats-officedocument.wordprocessingml.template	dotx[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml[m
[32m+[m[32m# application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml[m
[32m+[m[32m# application/vnd.openxmlformats-package.core-properties+xml[m
[32m+[m[32m# application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml[m
[32m+[m[32m# application/vnd.openxmlformats-package.relationships+xml[m
[32m+[m[32m# application/vnd.quobject-quoxdocument[m
[32m+[m[32m# application/vnd.osa.netdeploy[m
[32m+[m[32mapplication/vnd.osgeo.mapguide.package		mgp[m
[32m+[m[32m# application/vnd.osgi.bundle[m
[32m+[m[32mapplication/vnd.osgi.dp				dp[m
[32m+[m[32m# application/vnd.otps.ct-kip+xml[m
[32m+[m[32mapplication/vnd.palm				pdb pqa oprc[m
[32m+[m[32m# application/vnd.paos.xml[m
[32m+[m[32mapplication/vnd.pawaafile			paw[m
[32m+[m[32mapplication/vnd.pg.format			str[m
[32m+[m[32mapplication/vnd.pg.osasli			ei6[m
[32m+[m[32m# application/vnd.piaccess.application-licence[m
[32m+[m[32mapplication/vnd.picsel				efif[m
[32m+[m[32mapplication/vnd.pmi.widget			wg[m
[32m+[m[32m# application/vnd.poc.group-advertisement+xml[m
[32m+[m[32mapplication/vnd.pocketlearn			plf[m
[32m+[m[32mapplication/vnd.powerbuilder6			pbd[m
[32m+[m[32m# application/vnd.powerbuilder6-s[m
[32m+[m[32m# application/vnd.powerbuilder7[m
[32m+[m[32m# application/vnd.powerbuilder7-s[m
[32m+[m[32m# application/vnd.powerbuilder75[m
[32m+[m[32m# application/vnd.powerbuilder75-s[m
[32m+[m[32m# application/vnd.preminet[m
[32m+[m[32mapplication/vnd.previewsystems.box		box[m
[32m+[m[32mapplication/vnd.proteus.magazine		mgz[m
[32m+[m[32mapplication/vnd.publishare-delta-tree		qps[m
[32m+[m[32mapplication/vnd.pvi.ptid1			ptid[m
[32m+[m[32m# application/vnd.pwg-multiplexed[m
[32m+[m[32m# application/vnd.pwg-xhtml-print+xml[m
[32m+[m[32m# application/vnd.qualcomm.brew-app-res[m
[32m+[m[32mapplication/vnd.quark.quarkxpress		qxd qxt qwd qwt qxl qxb[m
[32m+[m[32m# application/vnd.radisys.moml+xml[m
[32m+[m[32m# application/vnd.radisys.msml+xml[m
[32m+[m[32m# application/vnd.radisys.msml-audit+xml[m
[32m+[m[32m# application/vnd.radisys.msml-audit-conf+xml[m
[32m+[m[32m# application/vnd.radisys.msml-audit-conn+xml[m
[32m+[m[32m# application/vnd.radisys.msml-audit-dialog+xml[m
[32m+[m[32m# application/vnd.radisys.msml-audit-stream+xml[m
[32m+[m[32m# application/vnd.radisys.msml-conf+xml[m
[32m+[m[32m# application/vnd.radisys.msml-dialog+xml[m
[32m+[m[32m# application/vnd.radisys.msml-dialog-base+xml[m
[32m+[m[32m# application/vnd.radisys.msml-dialog-fax-detect+xml[m
[32m+[m[32m# application/vnd.radisys.msml-dialog-fax-sendrecv+xml[m
[32m+[m[32m# application/vnd.radisys.msml-dialog-group+xml[m
[32m+[m[32m# application/vnd.radisys.msml-dialog-speech+xml[m
[32m+[m[32m# application/vnd.radisys.msml-dialog-transform+xml[m
[32m+[m[32m# application/vnd.rainstor.data[m
[32m+[m[32m# application/vnd.rapid[m
[32m+[m[32mapplication/vnd.realvnc.bed			bed[m
[32m+[m[32mapplication/vnd.recordare.musicxml		mxl[m
[32m+[m[32mapplication/vnd.recordare.musicxml+xml		musicxml[m
[32m+[m[32m# application/vnd.renlearn.rlprint[m
[32m+[m[32mapplication/vnd.rig.cryptonote			cryptonote[m
[32m+[m[32mapplication/vnd.rim.cod				cod[m
[32m+[m[32mapplication/vnd.rn-realmedia			rm[m
[32m+[m[32mapplication/vnd.route66.link66+xml		link66[m
[32m+[m[32m# application/vnd.ruckus.download[m
[32m+[m[32m# application/vnd.s3sms[m
[32m+[m[32mapplication/vnd.sailingtracker.track		st[m
[32m+[m[32m# application/vnd.sbm.cid[m
[32m+[m[32m# application/vnd.sbm.mid2[m
[32m+[m[32m# application/vnd.scribus[m
[32m+[m[32m# application/vnd.sealed.3df[m
[32m+[m[32m# application/vnd.sealed.csf[m
[32m+[m[32m# application/vnd.sealed.doc[m
[32m+[m[32m# application/vnd.sealed.eml[m
[32m+[m[32m# application/vnd.sealed.mht[m
[32m+[m[32m# application/vnd.sealed.net[m
[32m+[m[32m# application/vnd.sealed.ppt[m
[32m+[m[32m# application/vnd.sealed.tiff[m
[32m+[m[32m# application/vnd.sealed.xls[m
[32m+[m[32m# application/vnd.sealedmedia.softseal.html[m
[32m+[m[32m# application/vnd.sealedmedia.softseal.pdf[m
[32m+[m[32mapplication/vnd.seemail				see[m
[32m+[m[32mapplication/vnd.sema				sema[m
[32m+[m[32mapplication/vnd.semd				semd[m
[32m+[m[32mapplication/vnd.semf				semf[m
[32m+[m[32mapplication/vnd.shana.informed.formdata		ifm[m
[32m+[m[32mapplication/vnd.shana.informed.formtemplate	itp[m
[32m+[m[32mapplication/vnd.shana.informed.interchange	iif[m
[32m+[m[32mapplication/vnd.shana.informed.package		ipk[m
[32m+[m[32mapplication/vnd.simtech-mindmapper		twd twds[m
[32m+[m[32mapplication/vnd.smaf				mmf[m
[32m+[m[32m# application/vnd.smart.notebook[m
[32m+[m[32mapplication/vnd.smart.teacher			teacher[m
[32m+[m[32m# application/vnd.software602.filler.form+xml[m
[32m+[m[32m# application/vnd.software602.filler.form-xml-zip[m
[32m+[m[32mapplication/vnd.solent.sdkm+xml			sdkm sdkd[m
[32m+[m[32mapplication/vnd.spotfire.dxp			dxp[m
[32m+[m[32mapplication/vnd.spotfire.sfs			sfs[m
[32m+[m[32m# application/vnd.sss-cod[m
[32m+[m[32m# application/vnd.sss-dtf[m
[32m+[m[32m# application/vnd.sss-ntf[m
[32m+[m[32mapplication/vnd.stardivision.calc		sdc[m
[32m+[m[32mapplication/vnd.stardivision.draw		sda[m
[32m+[m[32mapplication/vnd.stardivision.impress		sdd[m
[32m+[m[32mapplication/vnd.stardivision.math		smf[m
[32m+[m[32mapplication/vnd.stardivision.writer		sdw vor[m
[32m+[m[32mapplication/vnd.stardivision.writer-global	sgl[m
[32m+[m[32mapplication/vnd.stepmania.stepchart		sm[m
[32m+[m[32m# application/vnd.street-stream[m
[32m+[m[32mapplication/vnd.sun.xml.calc			sxc[m
[32m+[m[32mapplication/vnd.sun.xml.calc.template		stc[m
[32m+[m[32mapplication/vnd.sun.xml.draw			sxd[m
[32m+[m[32mapplication/vnd.sun.xml.draw.template		std[m
[32m+[m[32mapplication/vnd.sun.xml.impress			sxi[m
[32m+[m[32mapplication/vnd.sun.xml.impress.template	sti[m
[32m+[m[32mapplication/vnd.sun.xml.math			sxm[m
[32m+[m[32mapplication/vnd.sun.xml.writer			sxw[m
[32m+[m[32mapplication/vnd.sun.xml.writer.global		sxg[m
[32m+[m[32mapplication/vnd.sun.xml.writer.template		stw[m
[32m+[m[32m# application/vnd.sun.wadl+xml[m
[32m+[m[32mapplication/vnd.sus-calendar			sus susp[m
[32m+[m[32mapplication/vnd.svd				svd[m
[32m+[m[32m# application/vnd.swiftview-ics[m
[32m+[m[32mapplication/vnd.symbian.install			sis sisx[m
[32m+[m[32mapplication/vnd.syncml+xml			xsm[m
[32m+[m[32mapplication/vnd.syncml.dm+wbxml			bdm[m
[32m+[m[32mapplication/vnd.syncml.dm+xml			xdm[m
[32m+[m[32m# application/vnd.syncml.dm.notification[m
[32m+[m[32m# application/vnd.syncml.ds.notification[m
[32m+[m[32mapplication/vnd.tao.intent-module-archive	tao[m
[32m+[m[32mapplication/vnd.tmobile-livetv			tmo[m
[32m+[m[32mapplication/vnd.trid.tpt			tpt[m
[32m+[m[32mapplication/vnd.triscape.mxs			mxs[m
[32m+[m[32mapplication/vnd.trueapp				tra[m
[32m+[m[32m# application/vnd.truedoc[m
[32m+[m[32m# application/vnd.ubisoft.webplayer[m
[32m+[m[32mapplication/vnd.ufdl				ufd ufdl[m
[32m+[m[32mapplication/vnd.uiq.theme			utz[m
[32m+[m[32mapplication/vnd.umajin				umj[m
[32m+[m[32mapplication/vnd.unity				unityweb[m
[32m+[m[32mapplication/vnd.uoml+xml			uoml[m
[32m+[m[32m# application/vnd.uplanet.alert[m
[32m+[m[32m# application/vnd.uplanet.alert-wbxml[m
[32m+[m[32m# application/vnd.uplanet.bearer-choice[m
[32m+[m[32m# application/vnd.uplanet.bearer-choice-wbxml[m
[32m+[m[32m# application/vnd.uplanet.cacheop[m
[32m+[m[32m# application/vnd.uplanet.cacheop-wbxml[m
[32m+[m[32m# application/vnd.uplanet.channel[m
[32m+[m[32m# application/vnd.uplanet.channel-wbxml[m
[32m+[m[32m# application/vnd.uplanet.list[m
[32m+[m[32m# application/vnd.uplanet.list-wbxml[m
[32m+[m[32m# application/vnd.uplanet.listcmd[m
[32m+[m[32m# application/vnd.uplanet.listcmd-wbxml[m
[32m+[m[32m# application/vnd.uplanet.signal[m
[32m+[m[32mapplication/vnd.vcx				vcx[m
[32m+[m[32m# application/vnd.vd-study[m
[32m+[m[32m# application/vnd.vectorworks[m
[32m+[m[32m# application/vnd.verimatrix.vcas[m
[32m+[m[32m# application/vnd.vidsoft.vidconference[m
[32m+[m[32mapplication/vnd.visio				vsd vst vss vsw[m
[32m+[m[32mapplication/vnd.visionary			vis[m
[32m+[m[32m# application/vnd.vividence.scriptfile[m
[32m+[m[32mapplication/vnd.vsf				vsf[m
[32m+[m[32m# application/vnd.wap.sic[m
[32m+[m[32m# application/vnd.wap.slc[m
[32m+[m[32mapplication/vnd.wap.wbxml			wbxml[m
[32m+[m[32mapplication/vnd.wap.wmlc			wmlc[m
[32m+[m[32mapplication/vnd.wap.wmlscriptc			wmlsc[m
[32m+[m[32mapplication/vnd.webturbo			wtb[m
[32m+[m[32m# application/vnd.wfa.wsc[m
[32m+[m[32m# application/vnd.wmc[m
[32m+[m[32m# application/vnd.wmf.bootstrap[m
[32m+[m[32m# application/vnd.wolfram.mathematica[m
[32m+[m[32m# application/vnd.wolfram.mathematica.package[m
[32m+[m[32mapplication/vnd.wolfram.player			nbp[m
[32m+[m[32mapplication/vnd.wordperfect			wpd[m
[32m+[m[32mapplication/vnd.wqd				wqd[m
[32m+[m[32m# application/vnd.wrq-hp3000-labelled[m
[32m+[m[32mapplication/vnd.wt.stf				stf[m
[32m+[m[32m# application/vnd.wv.csp+wbxml[m
[32m+[m[32m# application/vnd.wv.csp+xml[m
[32m+[m[32m# application/vnd.wv.ssp+xml[m
[32m+[m[32mapplication/vnd.xara				xar[m
[32m+[m[32mapplication/vnd.xfdl				xfdl[m
[32m+[m[32m# application/vnd.xfdl.webform[m
[32m+[m[32m# application/vnd.xmi+xml[m
[32m+[m[32m# application/vnd.xmpie.cpkg[m
[32m+[m[32m# application/vnd.xmpie.dpkg[m
[32m+[m[32m# application/vnd.xmpie.plan[m
[32m+[m[32m# application/vnd.xmpie.ppkg[m
[32m+[m[32m# application/vnd.xmpie.xlim[m
[32m+[m[32mapplication/vnd.yamaha.hv-dic			hvd[m
[32m+[m[32mapplication/vnd.yamaha.hv-script		hvs[m
[32m+[m[32mapplication/vnd.yamaha.hv-voice			hvp[m
[32m+[m[32mapplication/vnd.yamaha.openscoreformat			osf[m
[32m+[m[32mapplication/vnd.yamaha.openscoreformat.osfpvg+xml	osfpvg[m
[32m+[m[32m# application/vnd.yamaha.remote-setup[m
[32m+[m[32mapplication/vnd.yamaha.smaf-audio		saf[m
[32m+[m[32mapplication/vnd.yamaha.smaf-phrase		spf[m
[32m+[m[32m# application/vnd.yamaha.tunnel-udpencap[m
[32m+[m[32mapplication/vnd.yellowriver-custom-menu		cmp[m
[32m+[m[32mapplication/vnd.zul				zir zirz[m
[32m+[m[32mapplication/vnd.zzazz.deck+xml			zaz[m
[32m+[m[32mapplication/voicexml+xml			vxml[m
[32m+[m[32m# application/vq-rtcpxr[m
[32m+[m[32m# application/watcherinfo+xml[m
[32m+[m[32m# application/whoispp-query[m
[32m+[m[32m# application/whoispp-response[m
[32m+[m[32mapplication/widget				wgt[m
[32m+[m[32mapplication/winhlp				hlp[m
[32m+[m[32m# application/wita[m
[32m+[m[32m# application/wordperfect5.1[m
[32m+[m[32mapplication/wsdl+xml				wsdl[m
[32m+[m[32mapplication/wspolicy+xml			wspolicy[m
[32m+[m[32mapplication/x-7z-compressed			7z[m
[32m+[m[32mapplication/x-abiword				abw[m
[32m+[m[32mapplication/x-ace-compressed			ace[m
[32m+[m[32mapplication/x-authorware-bin			aab x32 u32 vox[m
[32m+[m[32mapplication/x-authorware-map			aam[m
[32m+[m[32mapplication/x-authorware-seg			aas[m
[32m+[m[32mapplication/x-bcpio				bcpio[m
[32m+[m[32mapplication/x-bittorrent			torrent[m
[32m+[m[32mapplication/x-bzip				bz[m
[32m+[m[32mapplication/x-bzip2				bz2 boz[m
[32m+[m[32mapplication/x-cdlink				vcd[m
[32m+[m[32mapplication/x-chat				chat[m
[32m+[m[32mapplication/x-chess-pgn				pgn[m
[32m+[m[32m# application/x-compress[m
[32m+[m[32mapplication/x-cpio				cpio[m
[32m+[m[32mapplication/x-csh				csh[m
[32m+[m[32mapplication/x-debian-package			deb udeb[m
[32m+[m[32mapplication/x-director			dir dcr dxr cst cct cxt w3d fgd swa[m
[32m+[m[32mapplication/x-doom				wad[m
[32m+[m[32mapplication/x-dtbncx+xml			ncx[m
[32m+[m[32mapplication/x-dtbook+xml			dtb[m
[32m+[m[32mapplication/x-dtbresource+xml			res[m
[32m+[m[32mapplication/x-dvi				dvi[m
[32m+[m[32mapplication/x-font-bdf				bdf[m
[32m+[m[32m# application/x-font-dos[m
[32m+[m[32m# application/x-font-framemaker[m
[32m+[m[32mapplication/x-font-ghostscript			gsf[m
[32m+[m[32m# application/x-font-libgrx[m
[32m+[m[32mapplication/x-font-linux-psf			psf[m
[32m+[m[32mapplication/x-font-otf				otf[m
[32m+[m[32mapplication/x-font-pcf				pcf[m
[32m+[m[32mapplication/x-font-snf				snf[m
[32m+[m[32m# application/x-font-speedo[m
[32m+[m[32m# application/x-font-sunos-news[m
[32m+[m[32mapplication/x-font-ttf				ttf ttc[m
[32m+[m[32mapplication/x-font-type1			pfa pfb pfm afm[m
[32m+[m[32mapplication/x-font-woff				woff[m
[32m+[m[32m# application/x-font-vfont[m
[32m+[m[32mapplication/x-futuresplash			spl[m
[32m+[m[32mapplication/x-gnumeric				gnumeric[m
[32m+[m[32mapplication/x-gtar				gtar[m
[32m+[m[32m# application/x-gzip[m
[32m+[m[32mapplication/x-hdf				hdf[m
[32m+[m[32mapplication/x-java-jnlp-file			jnlp[m
[32m+[m[32mapplication/x-latex				latex[m
[32m+[m[32mapplication/x-mobipocket-ebook			prc mobi[m
[32m+[m[32mapplication/x-ms-application			application[m
[32m+[m[32mapplication/x-ms-wmd				wmd[m
[32m+[m[32mapplication/x-ms-wmz				wmz[m
[32m+[m[32mapplication/x-ms-xbap				xbap[m
[32m+[m[32mapplication/x-msaccess				mdb[m
[32m+[m[32mapplication/x-msbinder				obd[m
[32m+[m[32mapplication/x-mscardfile			crd[m
[32m+[m[32mapplication/x-msclip				clp[m
[32m+[m[32mapplication/x-msdownload			exe dll com bat msi[m
[32m+[m[32mapplication/x-msmediaview			mvb m13 m14[m
[32m+[m[32mapplication/x-msmetafile			wmf[m
[32m+[m[32mapplication/x-msmoney				mny[m
[32m+[m[32mapplication/x-mspublisher			pub[m
[32m+[m[32mapplication/x-msschedule			scd[m
[32m+[m[32mapplication/x-msterminal			trm[m
[32m+[m[32mapplication/x-mswrite				wri[m
[32m+[m[32mapplication/x-netcdf				nc cdf[m
[32m+[m[32mapplication/x-pkcs12				p12 pfx[m
[32m+[m[32mapplication/x-pkcs7-certificates		p7b spc[m
[32m+[m[32mapplication/x-pkcs7-certreqresp			p7r[m
[32m+[m[32mapplication/x-rar-compressed			rar[m
[32m+[m[32mapplication/x-sh				sh[m
[32m+[m[32mapplication/x-shar				shar[m
[32m+[m[32mapplication/x-shockwave-flash			swf[m
[32m+[m[32mapplication/x-silverlight-app			xap[m
[32m+[m[32mapplication/x-stuffit				sit[m
[32m+[m[32mapplication/x-stuffitx				sitx[m
[32m+[m[32mapplication/x-sv4cpio				sv4cpio[m
[32m+[m[32mapplication/x-sv4crc				sv4crc[m
[32m+[m[32mapplication/x-tar				tar[m
[32m+[m[32mapplication/x-tcl				tcl[m
[32m+[m[32mapplication/x-tex				tex[m
[32m+[m[32mapplication/x-tex-tfm				tfm[m
[32m+[m[32mapplication/x-texinfo				texinfo texi[m
[32m+[m[32mapplication/x-ustar				ustar[m
[32m+[m[32mapplication/x-wais-source			src[m
[32m+[m[32mapplication/x-x509-ca-cert			der crt[m
[32m+[m[32mapplication/x-xfig				fig[m
[32m+[m[32mapplication/x-xpinstall				xpi[m
[32m+[m[32m# application/x400-bp[m
[32m+[m[32m# application/xcap-att+xml[m
[32m+[m[32m# application/xcap-caps+xml[m
[32m+[m[32mapplication/xcap-diff+xml			xdf[m
[32m+[m[32m# application/xcap-el+xml[m
[32m+[m[32m# application/xcap-error+xml[m
[32m+[m[32m# application/xcap-ns+xml[m
[32m+[m[32m# application/xcon-conference-info-diff+xml[m
[32m+[m[32m# application/xcon-conference-info+xml[m
[32m+[m[32mapplication/xenc+xml				xenc[m
[32m+[m[32mapplication/xhtml+xml				xhtml xht[m
[32m+[m[32m# application/xhtml-voice+xml[m
[32m+[m[32mapplication/xml					xml xsl[m
[32m+[m[32mapplication/xml-dtd				dtd[m
[32m+[m[32m# application/xml-external-parsed-entity[m
[32m+[m[32m# application/xmpp+xml[m
[32m+[m[32mapplication/xop+xml				xop[m
[32m+[m[32mapplication/xslt+xml				xslt[m
[32m+[m[32mapplication/xspf+xml				xspf[m
[32m+[m[32mapplication/xv+xml				mxml xhvml xvml xvm[m
[32m+[m[32mapplication/yang				yang[m
[32m+[m[32mapplication/yin+xml				yin[m
[32m+[m[32mapplication/zip					zip[m
[32m+[m[32m# audio/1d-interleaved-parityfec[m
[32m+[m[32m# audio/32kadpcm[m
[32m+[m[32m# audio/3gpp[m
[32m+[m[32m# audio/3gpp2[m
[32m+[m[32m# audio/ac3[m
[32m+[m[32maudio/adpcm					adp[m
[32m+[m[32m# audio/amr[m
[32m+[m[32m# audio/amr-wb[m
[32m+[m[32m# audio/amr-wb+[m
[32m+[m[32m# audio/asc[m
[32m+[m[32m# audio/atrac-advanced-lossless[m
[32m+[m[32m# audio/atrac-x[m
[32m+[m[32m# audio/atrac3[m
[32m+[m[32maudio/basic					au snd[m
[32m+[m[32m# audio/bv16[m
[32m+[m[32m# audio/bv32[m
[32m+[m[32m# audio/clearmode[m
[32m+[m[32m# audio/cn[m
[32m+[m[32m# audio/dat12[m
[32m+[m[32m# audio/dls[m
[32m+[m[32m# audio/dsr-es201108[m
[32m+[m[32m# audio/dsr-es202050[m
[32m+[m[32m# audio/dsr-es202211[m
[32m+[m[32m# audio/dsr-es202212[m
[32m+[m[32m# audio/dvi4[m
[32m+[m[32m# audio/eac3[m
[32m+[m[32m# audio/evrc[m
[32m+[m[32m# audio/evrc-qcp[m
[32m+[m[32m# audio/evrc0[m
[32m+[m[32m# audio/evrc1[m
[32m+[m[32m# audio/evrcb[m
[32m+[m[32m# audio/evrcb0[m
[32m+[m[32m# audio/evrcb1[m
[32m+[m[32m# audio/evrcwb[m
[32m+[m[32m# audio/evrcwb0[m
[32m+[m[32m# audio/evrcwb1[m
[32m+[m[32m# audio/example[m
[32m+[m[32m# audio/g719[m
[32m+[m[32m# audio/g722[m
[32m+[m[32m# audio/g7221[m
[32m+[m[32m# audio/g723[m
[32m+[m[32m# audio/g726-16[m
[32m+[m[32m# audio/g726-24[m
[32m+[m[32m# audio/g726-32[m
[32m+[m[32m# audio/g726-40[m
[32m+[m[32m# audio/g728[m
[32m+[m[32m# audio/g729[m
[32m+[m[32m# audio/g7291[m
[32m+[m[32m# audio/g729d[m
[32m+[m[32m# audio/g729e[m
[32m+[m[32m# audio/gsm[m
[32m+[m[32m# audio/gsm-efr[m
[32m+[m[32m# audio/gsm-hr-08[m
[32m+[m[32m# audio/ilbc[m
[32m+[m[32m# audio/l16[m
[32m+[m[32m# audio/l20[m
[32m+[m[32m# audio/l24[m
[32m+[m[32m# audio/l8[m
[32m+[m[32m# audio/lpc[m
[32m+[m[32maudio/midi					mid midi kar rmi[m
[32m+[m[32m# audio/mobile-xmf[m
[32m+[m[32maudio/mp4					mp4a[m
[32m+[m[32m# audio/mp4a-latm[m
[32m+[m[32m# audio/mpa[m
[32m+[m[32m# audio/mpa-robust[m
[32m+[m[32maudio/mpeg					mpga mp2 mp2a mp3 m2a m3a[m
[32m+[m[32m# audio/mpeg4-generic[m
[32m+[m[32maudio/ogg					oga ogg spx[m
[32m+[m[32m# audio/parityfec[m
[32m+[m[32m# audio/pcma[m
[32m+[m[32m# audio/pcma-wb[m
[32m+[m[32m# audio/pcmu-wb[m
[32m+[m[32m# audio/pcmu[m
[32m+[m[32m# audio/prs.sid[m
[32m+[m[32m# audio/qcelp[m
[32m+[m[32m# audio/red[m
[32m+[m[32m# audio/rtp-enc-aescm128[m
[32m+[m[32m# audio/rtp-midi[m
[32m+[m[32m# audio/rtx[m
[32m+[m[32m# audio/smv[m
[32m+[m[32m# audio/smv0[m
[32m+[m[32m# audio/smv-qcp[m
[32m+[m[32m# audio/sp-midi[m
[32m+[m[32m# audio/speex[m
[32m+[m[32m# audio/t140c[m
[32m+[m[32m# audio/t38[m
[32m+[m[32m# audio/telephone-event[m
[32m+[m[32m# audio/tone[m
[32m+[m[32m# audio/uemclip[m
[32m+[m[32m# audio/ulpfec[m
[32m+[m[32m# audio/vdvi[m
[32m+[m[32m# audio/vmr-wb[m
[32m+[m[32m# audio/vnd.3gpp.iufp[m
[32m+[m[32m# audio/vnd.4sb[m
[32m+[m[32m# audio/vnd.audiokoz[m
[32m+[m[32m# audio/vnd.celp[m
[32m+[m[32m# audio/vnd.cisco.nse[m
[32m+[m[32m# audio/vnd.cmles.radio-events[m
[32m+[m[32m# audio/vnd.cns.anp1[m
[32m+[m[32m# audio/vnd.cns.inf1[m
[32m+[m[32maudio/vnd.dece.audio				uva uvva[m
[32m+[m[32maudio/vnd.digital-winds				eol[m
[32m+[m[32m# audio/vnd.dlna.adts[m
[32m+[m[32m# audio/vnd.dolby.heaac.1[m
[32m+[m[32m# audio/vnd.dolby.heaac.2[m
[32m+[m[32m# audio/vnd.dolby.mlp[m
[32m+[m[32m# audio/vnd.dolby.mps[m
[32m+[m[32m# audio/vnd.dolby.pl2[m
[32m+[m[32m# audio/vnd.dolby.pl2x[m
[32m+[m[32m# audio/vnd.dolby.pl2z[m
[32m+[m[32m# audio/vnd.dolby.pulse.1[m
[32m+[m[32maudio/vnd.dra					dra[m
[32m+[m[32maudio/vnd.dts					dts[m
[32m+[m[32maudio/vnd.dts.hd				dtshd[m
[32m+[m[32m# audio/vnd.everad.plj[m
[32m+[m[32m# audio/vnd.hns.audio[m
[32m+[m[32maudio/vnd.lucent.voice				lvp[m
[32m+[m[32maudio/vnd.ms-playready.media.pya		pya[m
[32m+[m[32m# audio/vnd.nokia.mobile-xmf[m
[32m+[m[32m# audio/vnd.nortel.vbk[m
[32m+[m[32maudio/vnd.nuera.ecelp4800			ecelp4800[m
[32m+[m[32maudio/vnd.nuera.ecelp7470			ecelp7470[m
[32m+[m[32maudio/vnd.nuera.ecelp9600			ecelp9600[m
[32m+[m[32m# audio/vnd.octel.sbc[m
[32m+[m[32m# audio/vnd.qcelp[m
[32m+[m[32m# audio/vnd.rhetorex.32kadpcm[m
[32m+[m[32maudio/vnd.rip					rip[m
[32m+[m[32m# audio/vnd.sealedmedia.softseal.mpeg[m
[32m+[m[32m# audio/vnd.vmx.cvsd[m
[32m+[m[32m# audio/vorbis[m
[32m+[m[32m# audio/vorbis-config[m
[32m+[m[32maudio/webm					weba[m
[32m+[m[32maudio/x-aac					aac[m
[32m+[m[32maudio/x-aiff					aif aiff aifc[m
[32m+[m[32maudio/x-mpegurl					m3u[m
[32m+[m[32maudio/x-ms-wax					wax[m
[32m+[m[32maudio/x-ms-wma					wma[m
[32m+[m[32maudio/x-pn-realaudio				ram ra[m
[32m+[m[32maudio/x-pn-realaudio-plugin			rmp[m
[32m+[m[32maudio/x-wav					wav[m
[32m+[m[32mchemical/x-cdx					cdx[m
[32m+[m[32mchemical/x-cif					cif[m
[32m+[m[32mchemical/x-cmdf					cmdf[m
[32m+[m[32mchemical/x-cml					cml[m
[32m+[m[32mchemical/x-csml					csml[m
[32m+[m[32m# chemical/x-pdb[m
[32m+[m[32mchemical/x-xyz					xyz[m
[32m+[m[32mimage/bmp					bmp[m
[32m+[m[32mimage/cgm					cgm[m
[32m+[m[32m# image/example[m
[32m+[m[32m# image/fits[m
[32m+[m[32mimage/g3fax					g3[m
[32m+[m[32mimage/gif					gif[m
[32m+[m[32mimage/ief					ief[m
[32m+[m[32m# image/jp2[m
[32m+[m[32mimage/jpeg					jpeg jpg jpe[m
[32m+[m[32m# image/jpm[m
[32m+[m[32m# image/jpx[m
[32m+[m[32mimage/ktx					ktx[m
[32m+[m[32m# image/naplps[m
[32m+[m[32mimage/png					png[m
[32m+[m[32mimage/prs.btif					btif[m
[32m+[m[32m# image/prs.pti[m
[32m+[m[32mimage/svg+xml					svg svgz[m
[32m+[m[32m# image/t38[m
[32m+[m[32mimage/tiff					tiff tif[m
[32m+[m[32m# image/tiff-fx[m
[32m+[m[32mimage/vnd.adobe.photoshop			psd[m
[32m+[m[32m# image/vnd.cns.inf2[m
[32m+[m[32mimage/vnd.dece.graphic				uvi uvvi uvg uvvg[m
[32m+[m[32mimage/vnd.dvb.subtitle				sub[m
[32m+[m[32mimage/vnd.djvu					djvu djv[m
[32m+[m[32mimage/vnd.dwg					dwg[m
[32m+[m[32mimage/vnd.dxf					dxf[m
[32m+[m[32mimage/vnd.fastbidsheet				fbs[m
[32m+[m[32mimage/vnd.fpx					fpx[m
[32m+[m[32mimage/vnd.fst					fst[m
[32m+[m[32mimage/vnd.fujixerox.edmics-mmr			mmr[m
[32m+[m[32mimage/vnd.fujixerox.edmics-rlc			rlc[m
[32m+[m[32m# image/vnd.globalgraphics.pgb[m
[32m+[m[32m# image/vnd.microsoft.icon[m
[32m+[m[32m# image/vnd.mix[m
[32m+[m[32mimage/vnd.ms-modi				mdi[m
[32m+[m[32mimage/vnd.net-fpx				npx[m
[32m+[m[32m# image/vnd.radiance[m
[32m+[m[32m# image/vnd.sealed.png[m
[32m+[m[32m# image/vnd.sealedmedia.softseal.gif[m
[32m+[m[32m# image/vnd.sealedmedia.softseal.jpg[m
[32m+[m[32m# image/vnd.svf[m
[32m+[m[32mimage/vnd.wap.wbmp				wbmp[m
[32m+[m[32mimage/vnd.xiff					xif[m
[32m+[m[32mimage/webp					webp[m
[32m+[m[32mimage/x-cmu-raster				ras[m
[32m+[m[32mimage/x-cmx					cmx[m
[32m+[m[32mimage/x-freehand				fh fhc fh4 fh5 fh7[m
[32m+[m[32mimage/x-icon					ico[m
[32m+[m[32mimage/x-pcx					pcx[m
[32m+[m[32mimage/x-pict					pic pct[m
[32m+[m[32mimage/x-portable-anymap				pnm[m
[32m+[m[32mimage/x-portable-bitmap				pbm[m
[32m+[m[32mimage/x-portable-graymap			pgm[m
[32m+[m[32mimage/x-portable-pixmap				ppm[m
[32m+[m[32mimage/x-rgb					rgb[m
[32m+[m[32mimage/x-xbitmap					xbm[m
[32m+[m[32mimage/x-xpixmap					xpm[m
[32m+[m[32mimage/x-xwindowdump				xwd[m
[32m+[m[32m# message/cpim[m
[32m+[m[32m# message/delivery-status[m
[32m+[m[32m# message/disposition-notification[m
[32m+[m[32m# message/example[m
[32m+[m[32m# message/external-body[m
[32m+[m[32m# message/feedback-report[m
[32m+[m[32m# message/global[m
[32m+[m[32m# message/global-delivery-status[m
[32m+[m[32m# message/global-disposition-notification[m
[32m+[m[32m# message/global-headers[m
[32m+[m[32m# message/http[m
[32m+[m[32m# message/imdn+xml[m
[32m+[m[32m# message/news[m
[32m+[m[32m# message/partial[m
[32m+[m[32mmessage/rfc822					eml mime[m
[32m+[m[32m# message/s-http[m
[32m+[m[32m# message/sip[m
[32m+[m[32m# message/sipfrag[m
[32m+[m[32m# message/tracking-status[m
[32m+[m[32m# message/vnd.si.simp[m
[32m+[m[32m# model/example[m
[32m+[m[32mmodel/iges					igs iges[m
[32m+[m[32mmodel/mesh					msh mesh silo[m
[32m+[m[32mmodel/vnd.collada+xml				dae[m
[32m+[m[32mmodel/vnd.dwf					dwf[m
[32m+[m[32m# model/vnd.flatland.3dml[m
[32m+[m[32mmodel/vnd.gdl					gdl[m
[32m+[m[32m# model/vnd.gs-gdl[m
[32m+[m[32m# model/vnd.gs.gdl[m
[32m+[m[32mmodel/vnd.gtw					gtw[m
[32m+[m[32m# model/vnd.moml+xml[m
[32m+[m[32mmodel/vnd.mts					mts[m
[32m+[m[32m# model/vnd.parasolid.transmit.binary[m
[32m+[m[32m# model/vnd.parasolid.transmit.text[m
[32m+[m[32mmodel/vnd.vtu					vtu[m
[32m+[m[32mmodel/vrml					wrl vrml[m
[32m+[m[32m# multipart/alternative[m
[32m+[m[32m# multipart/appledouble[m
[32m+[m[32m# multipart/byteranges[m
[32m+[m[32m# multipart/digest[m
[32m+[m[32m# multipart/encrypted[m
[32m+[m[32m# multipart/example[m
[32m+[m[32m# multipart/form-data[m
[32m+[m[32m# multipart/header-set[m
[32m+[m[32m# multipart/mixed[m
[32m+[m[32m# multipart/parallel[m
[32m+[m[32m# multipart/related[m
[32m+[m[32m# multipart/report[m
[32m+[m[32m# multipart/signed[m
[32m+[m[32m# multipart/voice-message[m
[32m+[m[32m# text/1d-interleaved-parityfec[m
[32m+[m[32mtext/calendar					ics ifb[m
[32m+[m[32mtext/css					css[m
[32m+[m[32mtext/csv					csv[m
[32m+[m[32m# text/directory[m
[32m+[m[32m# text/dns[m
[32m+[m[32m# text/ecmascript[m
[32m+[m[32m# text/enriched[m
[32m+[m[32m# text/example[m
[32m+[m[32mtext/html					html htm[m
[32m+[m[32m# text/javascript[m
[32m+[m[32mtext/n3						n3[m
[32m+[m[32m# text/parityfec[m
[32m+[m[32mtext/plain					txt text conf def list log in[m
[32m+[m[32m# text/prs.fallenstein.rst[m
[32m+[m[32mtext/prs.lines.tag				dsc[m
[32m+[m[32m# text/vnd.radisys.msml-basic-layout[m
[32m+[m[32m# text/red[m
[32m+[m[32m# text/rfc822-headers[m
[32m+[m[32mtext/richtext					rtx[m
[32m+[m[32m# text/rtf[m
[32m+[m[32m# text/rtp-enc-aescm128[m
[32m+[m[32m# text/rtx[m
[32m+[m[32mtext/sgml					sgml sgm[m
[32m+[m[32m# text/t140[m
[32m+[m[32mtext/tab-separated-values			tsv[m
[32m+[m[32mtext/troff					t tr roff man me ms[m
[32m+[m[32mtext/turtle					ttl[m
[32m+[m[32m# text/ulpfec[m
[32m+[m[32mtext/uri-list					uri uris urls[m
[32m+[m[32m# text/vnd.abc[m
[32m+[m[32mtext/vnd.curl					curl[m
[32m+[m[32mtext/vnd.curl.dcurl				dcurl[m
[32m+[m[32mtext/vnd.curl.scurl				scurl[m
[32m+[m[32mtext/vnd.curl.mcurl				mcurl[m
[32m+[m[32m# text/vnd.dmclientscript[m
[32m+[m[32m# text/vnd.esmertec.theme-descriptor[m
[32m+[m[32mtext/vnd.fly					fly[m
[32m+[m[32mtext/vnd.fmi.flexstor				flx[m
[32m+[m[32mtext/vnd.graphviz				gv[m
[32m+[m[32mtext/vnd.in3d.3dml				3dml[m
[32m+[m[32mtext/vnd.in3d.spot				spot[m
[32m+[m[32m# text/vnd.iptc.newsml[m
[32m+[m[32m# text/vnd.iptc.nitf[m
[32m+[m[32m# text/vnd.latex-z[m
[32m+[m[32m# text/vnd.motorola.reflex[m
[32m+[m[32m# text/vnd.ms-mediapackage[m
[32m+[m[32m# text/vnd.net2phone.commcenter.command[m
[32m+[m[32m# text/vnd.si.uricatalogue[m
[32m+[m[32mtext/vnd.sun.j2me.app-descriptor		jad[m
[32m+[m[32m# text/vnd.trolltech.linguist[m
[32m+[m[32m# text/vnd.wap.si[m
[32m+[m[32m# text/vnd.wap.sl[m
[32m+[m[32mtext/vnd.wap.wml				wml[m
[32m+[m[32mtext/vnd.wap.wmlscript				wmls[m
[32m+[m[32mtext/x-asm					s asm[m
[32m+[m[32mtext/x-c					c cc cxx cpp h hh dic[m
[32m+[m[32mtext/x-fortran					f for f77 f90[m
[32m+[m[32mtext/x-pascal					p pas[m
[32m+[m[32mtext/x-java-source				java[m
[32m+[m[32mtext/x-setext					etx[m
[32m+[m[32mtext/x-uuencode					uu[m
[32m+[m[32mtext/x-vcalendar				vcs[m
[32m+[m[32mtext/x-vcard					vcf[m
[32m+[m[32m# text/xml[m
[32m+[m[32m# text/xml-external-parsed-entity[m
[32m+[m[32m# video/1d-interleaved-parityfec[m
[32m+[m[32mvideo/3gpp					3gp[m
[32m+[m[32m# video/3gpp-tt[m
[32m+[m[32mvideo/3gpp2					3g2[m
[32m+[m[32m# video/bmpeg[m
[32m+[m[32m# video/bt656[m
[32m+[m[32m# video/celb[m
[32m+[m[32m# video/dv[m
[32m+[m[32m# video/example[m
[32m+[m[32mvideo/h261					h261[m
[32m+[m[32mvideo/h263					h263[m
[32m+[m[32m# video/h263-1998[m
[32m+[m[32m# video/h263-2000[m
[32m+[m[32mvideo/h264					h264[m
[32m+[m[32m# video/h264-rcdo[m
[32m+[m[32m# video/h264-svc[m
[32m+[m[32mvideo/jpeg					jpgv[m
[32m+[m[32m# video/jpeg2000[m
[32m+[m[32mvideo/jpm					jpm jpgm[m
[32m+[m[32mvideo/mj2					mj2 mjp2[m
[32m+[m[32m# video/mp1s[m
[32m+[m[32m# video/mp2p[m
[32m+[m[32m# video/mp2t[m
[32m+[m[32mvideo/mp4					mp4 mp4v mpg4[m
[32m+[m[32m# video/mp4v-es[m
[32m+[m[32mvideo/mpeg					mpeg mpg mpe m1v m2v[m
[32m+[m[32m# video/mpeg4-generic[m
[32m+[m[32m# video/mpv[m
[32m+[m[32m# video/nv[m
[32m+[m[32mvideo/ogg					ogv[m
[32m+[m[32m# video/parityfec[m
[32m+[m[32m# video/pointer[m
[32m+[m[32mvideo/quicktime					qt mov[m
[32m+[m[32m# video/raw[m
[32m+[m[32m# video/rtp-enc-aescm128[m
[32m+[m[32m# video/rtx[m
[32m+[m[32m# video/smpte292m[m
[32m+[m[32m# video/ulpfec[m
[32m+[m[32m# video/vc1[m
[32m+[m[32m# video/vnd.cctv[m
[32m+[m[32mvideo/vnd.dece.hd				uvh uvvh[m
[32m+[m[32mvideo/vnd.dece.mobile				uvm uvvm[m
[32m+[m[32m# video/vnd.dece.mp4[m
[32m+[m[32mvideo/vnd.dece.pd				uvp uvvp[m
[32m+[m[32mvideo/vnd.dece.sd				uvs uvvs[m
[32m+[m[32mvideo/vnd.dece.video				uvv uvvv[m
[32m+[m[32m# video/vnd.directv.mpeg[m
[32m+[m[32m# video/vnd.directv.mpeg-tts[m
[32m+[m[32m# video/vnd.dlna.mpeg-tts[m
[32m+[m[32mvideo/vnd.fvt					fvt[m
[32m+[m[32m# video/vnd.hns.video[m
[32m+[m[32m# video/vnd.iptvforum.1dparityfec-1010[m
[32m+[m[32m# video/vnd.iptvforum.1dparityfec-2005[m
[32m+[m[32m# video/vnd.iptvforum.2dparityfec-1010[m
[32m+[m[32m# video/vnd.iptvforum.2dparityfec-2005[m
[32m+[m[32m# video/vnd.iptvforum.ttsavc[m
[32m+[m[32m# video/vnd.iptvforum.ttsmpeg2[m
[32m+[m[32m# video/vnd.motorola.video[m
[32m+[m[32m# video/vnd.motorola.videop[m
[32m+[m[32mvideo/vnd.mpegurl				mxu m4u[m
[32m+[m[32mvideo/vnd.ms-playready.media.pyv		pyv[m
[32m+[m[32m# video/vnd.nokia.interleaved-multimedia[m
[32m+[m[32m# video/vnd.nokia.videovoip[m
[32m+[m[32m# video/vnd.objectvideo[m
[32m+[m[32m# video/vnd.sealed.mpeg1[m
[32m+[m[32m# video/vnd.sealed.mpeg4[m
[32m+[m[32m# video/vnd.sealed.swf[m
[32m+[m[32m# video/vnd.sealedmedia.softseal.mov[m
[32m+[m[32mvideo/vnd.uvvu.mp4				uvu uvvu[m
[32m+[m[32mvideo/vnd.vivo					viv[m
[32m+[m[32mvideo/webm					webm[m
[32m+[m[32mvideo/x-f4v					f4v[m
[32m+[m[32mvideo/x-fli					fli[m
[32m+[m[32mvideo/x-flv					flv[m
[32m+[m[32mvideo/x-m4v					m4v[m
[32m+[m[32mvideo/x-ms-asf					asf asx[m
[32m+[m[32mvideo/x-ms-wm					wm[m
[32m+[m[32mvideo/x-ms-wmv					wmv[m
[32m+[m[32mvideo/x-ms-wmx					wmx[m
[32m+[m[32mvideo/x-ms-wvx					wvx[m
[32m+[m[32mvideo/x-msvideo					avi[m
[32m+[m[32mvideo/x-sgi-movie				movie[m
[32m+[m[32mx-conference/x-cooltalk				ice[m
[1mdiff --git a/node_modules/express/node_modules/mime/types/node.types b/node_modules/express/node_modules/mime/types/node.types[m
[1mnew file mode 100644[m
[1mindex 0000000..fdabaa4[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mime/types/node.types[m
[36m@@ -0,0 +1,43 @@[m
[32m+[m[32m# What: Google Chrome Extension[m
[32m+[m[32m# Why: To allow apps to (work) be served with the right content type header.[m
[32m+[m[32m# http://codereview.chromium.org/2830017[m
[32m+[m[32m# Added by: niftylettuce[m
[32m+[m[32mapplication/x-chrome-extension  crx[m
[32m+[m
[32m+[m[32m# What: OTF Message Silencer[m
[32m+[m[32m# Why: To silence the "Resource interpreted as font but transferred with MIME[m
[32m+[m[32m# type font/otf" message that occurs in Google Chrome[m
[32m+[m[32m# Added by: niftylettuce[m
[32m+[m[32mfont/opentype  otf[m
[32m+[m
[32m+[m[32m# What: HTC support[m
[32m+[m[32m# Why: To properly render .htc files such as CSS3PIE[m
[32m+[m[32m# Added by: niftylettuce[m
[32m+[m[32mtext/x-component  htc[m
[32m+[m
[32m+[m[32m# What: HTML5 application cache manifest[m
[32m+[m[32m# Why: De-facto standard. Required by Mozilla browser when serving HTML5 apps[m
[32m+[m[32m# per https://developer.mozilla.org/en/offline_resources_in_firefox[m
[32m+[m[32m# Added by: louisremi[m
[32m+[m[32mtext/cache-manifest  appcache manifest[m
[32m+[m
[32m+[m[32m# What: node binary buffer format[m
[32m+[m[32m# Why: semi-standard extension w/in the node community[m
[32m+[m[32m# Added by: tootallnate[m
[32m+[m[32mapplication/octet-stream  buffer[m
[32m+[m
[32m+[m[32m# What: The "protected" MP-4 formats used by iTunes.[m
[32m+[m[32m# Why: Required for streaming music to browsers (?)[m
[32m+[m[32m# Added by: broofa[m
[32m+[m[32mapplication/mp4  m4p[m
[32m+[m[32maudio/mp4  m4a[m
[32m+[m
[32m+[m[32m# What: Music playlist format (http://en.wikipedia.org/wiki/M3U)[m
[32m+[m[32m# Why: See https://github.com/bentomas/node-mime/pull/6[m
[32m+[m[32m# Added by: mjrusso[m
[32m+[m[32mapplication/x-mpegURL  m3u8[m
[32m+[m
[32m+[m[32m# What: Video format, Part of RFC1890[m
[32m+[m[32m# Why: See https://github.com/bentomas/node-mime/pull/6[m
[32m+[m[32m# Added by: mjrusso[m
[32m+[m[32mvideo/MP2T  ts[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/.gitignore.orig b/node_modules/express/node_modules/mkdirp/.gitignore.orig[m
[1mnew file mode 100644[m
[1mindex 0000000..9303c34[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/.gitignore.orig[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32mnode_modules/[m
[32m+[m[32mnpm-debug.log[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/.gitignore.rej b/node_modules/express/node_modules/mkdirp/.gitignore.rej[m
[1mnew file mode 100644[m
[1mindex 0000000..69244ff[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/.gitignore.rej[m
[36m@@ -0,0 +1,5 @@[m
[32m+[m[32m--- /dev/null[m
[32m+[m[32m+++ .gitignore[m
[32m+[m[32m@@ -0,0 +1,2 @@[m
[32m+[m[32m+node_modules/[m
[32m+[m[32m+npm-debug.log[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/.npmignore b/node_modules/express/node_modules/mkdirp/.npmignore[m
[1mnew file mode 100644[m
[1mindex 0000000..9303c34[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/.npmignore[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32mnode_modules/[m
[32m+[m[32mnpm-debug.log[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/LICENSE b/node_modules/express/node_modules/mkdirp/LICENSE[m
[1mnew file mode 100644[m
[1mindex 0000000..432d1ae[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/LICENSE[m
[36m@@ -0,0 +1,21 @@[m
[32m+[m[32mCopyright 2010 James Halliday (mail@substack.net)[m
[32m+[m
[32m+[m[32mThis project is free software released under the MIT/X11 license:[m
[32m+[m
[32m+[m[32mPermission is hereby granted, free of charge, to any person obtaining a copy[m
[32m+[m[32mof this software and associated documentation files (the "Software"), to deal[m
[32m+[m[32min the Software without restriction, including without limitation the rights[m
[32m+[m[32mto use, copy, modify, merge, publish, distribute, sublicense, and/or sell[m
[32m+[m[32mcopies of the Software, and to permit persons to whom the Software is[m
[32m+[m[32mfurnished to do so, subject to the following conditions:[m
[32m+[m
[32m+[m[32mThe above copyright notice and this permission notice shall be included in[m
[32m+[m[32mall copies or substantial portions of the Software.[m
[32m+[m
[32m+[m[32mTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR[m
[32m+[m[32mIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,[m
[32m+[m[32mFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE[m
[32m+[m[32mAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER[m
[32m+[m[32mLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,[m
[32m+[m[32mOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN[m
[32m+[m[32mTHE SOFTWARE.[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/README.markdown b/node_modules/express/node_modules/mkdirp/README.markdown[m
[1mnew file mode 100644[m
[1mindex 0000000..b4dd75f[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/README.markdown[m
[36m@@ -0,0 +1,54 @@[m
[32m+[m[32mmkdirp[m
[32m+[m[32m======[m
[32m+[m
[32m+[m[32mLike `mkdir -p`, but in node.js![m
[32m+[m
[32m+[m[32mexample[m
[32m+[m[32m=======[m
[32m+[m
[32m+[m[32mpow.js[m
[32m+[m[32m------[m
[32m+[m[32m    var mkdirp = require('mkdirp');[m
[32m+[m[41m    [m
[32m+[m[32m    mkdirp('/tmp/foo/bar/baz', function (err) {[m
[32m+[m[32m        if (err) console.error(err)[m
[32m+[m[32m        else console.log('pow!')[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32mOutput[m
[32m+[m[32m    pow![m
[32m+[m
[32m+[m[32mAnd now /tmp/foo/bar/baz exists, huzzah![m
[32m+[m
[32m+[m[32mmethods[m
[32m+[m[32m=======[m
[32m+[m
[32m+[m[32mvar mkdirp = require('mkdirp');[m
[32m+[m
[32m+[m[32mmkdirp(dir, mode, cb)[m
[32m+[m[32m---------------------[m
[32m+[m
[32m+[m[32mCreate a new directory and any necessary subdirectories at `dir` with octal[m
[32m+[m[32mpermission string `mode`.[m
[32m+[m
[32m+[m[32mIf `mode` isn't specified, it defaults to `0777 & (~process.umask())`.[m
[32m+[m
[32m+[m[32mmkdirp.sync(dir, mode)[m
[32m+[m[32m----------------------[m
[32m+[m
[32m+[m[32mSynchronously create a new directory and any necessary subdirectories at `dir`[m
[32m+[m[32mwith octal permission string `mode`.[m
[32m+[m
[32m+[m[32mIf `mode` isn't specified, it defaults to `0777 & (~process.umask())`.[m
[32m+[m
[32m+[m[32minstall[m
[32m+[m[32m=======[m
[32m+[m
[32m+[m[32mWith [npm](http://npmjs.org) do:[m
[32m+[m
[32m+[m[32m    npm install mkdirp[m
[32m+[m
[32m+[m[32mlicense[m
[32m+[m[32m=======[m
[32m+[m
[32m+[m[32mMIT/X11[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/examples/pow.js b/node_modules/express/node_modules/mkdirp/examples/pow.js[m
[1mnew file mode 100644[m
[1mindex 0000000..e692421[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/examples/pow.js[m
[36m@@ -0,0 +1,6 @@[m
[32m+[m[32mvar mkdirp = require('mkdirp');[m
[32m+[m
[32m+[m[32mmkdirp('/tmp/foo/bar/baz', function (err) {[m
[32m+[m[32m    if (err) console.error(err)[m
[32m+[m[32m    else console.log('pow!')[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/examples/pow.js.orig b/node_modules/express/node_modules/mkdirp/examples/pow.js.orig[m
[1mnew file mode 100644[m
[1mindex 0000000..7741462[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/examples/pow.js.orig[m
[36m@@ -0,0 +1,6 @@[m
[32m+[m[32mvar mkdirp = require('mkdirp');[m
[32m+[m
[32m+[m[32mmkdirp('/tmp/foo/bar/baz', 0755, function (err) {[m
[32m+[m[32m    if (err) console.error(err)[m
[32m+[m[32m    else console.log('pow!')[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/examples/pow.js.rej b/node_modules/express/node_modules/mkdirp/examples/pow.js.rej[m
[1mnew file mode 100644[m
[1mindex 0000000..81e7f43[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/examples/pow.js.rej[m
[36m@@ -0,0 +1,19 @@[m
[32m+[m[32m--- examples/pow.js[m
[32m+[m[32m+++ examples/pow.js[m
[32m+[m[32m@@ -1,6 +1,15 @@[m
[32m+[m[32m-var mkdirp = require('mkdirp').mkdirp;[m
[32m+[m[32m+var mkdirp = require('../').mkdirp,[m
[32m+[m[32m+    mkdirpSync = require('../').mkdirpSync;[m
[32m+[m[41m [m
[32m+[m[32m mkdirp('/tmp/foo/bar/baz', 0755, function (err) {[m
[32m+[m[32m     if (err) console.error(err)[m
[32m+[m[32m     else console.log('pow!')[m
[32m+[m[32m });[m
[32m+[m[32m+[m
[32m+[m[32m+try {[m
[32m+[m[32m+  mkdirpSync('/tmp/bar/foo/baz', 0755);[m
[32m+[m[32m+  console.log('double pow!');[m
[32m+[m[32m+}[m
[32m+[m[32m+catch (ex) {[m
[32m+[m[32m+  console.log(ex);[m
[32m+[m[32m+}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/index.js b/node_modules/express/node_modules/mkdirp/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..25f43ad[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/index.js[m
[36m@@ -0,0 +1,79 @@[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m
[32m+[m[32mmodule.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;[m
[32m+[m
[32m+[m[32mfunction mkdirP (p, mode, f) {[m
[32m+[m[32m    if (typeof mode === 'function' || mode === undefined) {[m
[32m+[m[32m        f = mode;[m
[32m+[m[32m        mode = 0777 & (~process.umask());[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    var cb = f || function () {};[m
[32m+[m[32m    if (typeof mode === 'string') mode = parseInt(mode, 8);[m
[32m+[m[32m    p = path.resolve(p);[m
[32m+[m
[32m+[m[32m    fs.mkdir(p, mode, function (er) {[m
[32m+[m[32m        if (!er) return cb();[m
[32m+[m[32m        switch (er.code) {[m
[32m+[m[32m            case 'ENOENT':[m
[32m+[m[32m                mkdirP(path.dirname(p), mode, function (er) {[m
[32m+[m[32m                    if (er) cb(er);[m
[32m+[m[32m                    else mkdirP(p, mode, cb);[m
[32m+[m[32m                });[m
[32m+[m[32m                break;[m
[32m+[m
[32m+[m[32m            case 'EEXIST':[m
[32m+[m[32m                fs.stat(p, function (er2, stat) {[m
[32m+[m[32m                    // if the stat fails, then that's super weird.[m
[32m+[m[32m                    // let the original EEXIST be the failure reason.[m
[32m+[m[32m                    if (er2 || !stat.isDirectory()) cb(er)[m
[32m+[m[32m                    else cb();[m
[32m+[m[32m                });[m
[32m+[m[32m                break;[m
[32m+[m
[32m+[m[32m            default:[m
[32m+[m[32m                cb(er);[m
[32m+[m[32m                break;[m
[32m+[m[32m        }[m
[32m+[m[32m    });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mmkdirP.sync = function sync (p, mode) {[m
[32m+[m[32m    if (mode === undefined) {[m
[32m+[m[32m        mode = 0777 & (~process.umask());[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    if (typeof mode === 'string') mode = parseInt(mode, 8);[m
[32m+[m[32m    p = path.resolve(p);[m
[32m+[m[41m    [m
[32m+[m[32m    try {[m
[32m+[m[32m        fs.mkdirSync(p, mode)[m
[32m+[m[32m    }[m
[32m+[m[32m    catch (err0) {[m
[32m+[m[32m        switch (err0.code) {[m
[32m+[m[32m            case 'ENOENT' :[m
[32m+[m[32m                var err1 = sync(path.dirname(p), mode)[m
[32m+[m[32m                if (err1) throw err1;[m
[32m+[m[32m                else return sync(p, mode);[m
[32m+[m[32m                break;[m
[32m+[m[41m            [m
[32m+[m[32m            case 'EEXIST' :[m
[32m+[m[32m                var stat;[m
[32m+[m[32m                try {[m
[32m+[m[32m                    stat = fs.statSync(p);[m
[32m+[m[32m                }[m
[32m+[m[32m                catch (err1) {[m
[32m+[m[32m                    throw err0[m
[32m+[m[32m                }[m
[32m+[m[32m                if (!stat.isDirectory()) throw err0;[m
[32m+[m[32m                else return null;[m
[32m+[m[32m                break;[m
[32m+[m[32m            default :[m
[32m+[m[32m                throw err0[m
[32m+[m[32m                break;[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    return null;[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/package.json b/node_modules/express/node_modules/mkdirp/package.json[m
[1mnew file mode 100644[m
[1mindex 0000000..1bf9ac7[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/package.json[m
[36m@@ -0,0 +1,23 @@[m
[32m+[m[32m{[m
[32m+[m[32m    "name" : "mkdirp",[m
[32m+[m[32m    "description" : "Recursively mkdir, like `mkdir -p`",[m
[32m+[m[32m    "version" : "0.3.0",[m
[32m+[m[32m    "author" : "James Halliday <mail@substack.net> (http://substack.net)",[m
[32m+[m[32m    "main" : "./index",[m
[32m+[m[32m    "keywords" : [[m
[32m+[m[32m        "mkdir",[m
[32m+[m[32m        "directory"[m
[32m+[m[32m    ],[m
[32m+[m[32m    "repository" : {[m
[32m+[m[32m        "type" : "git",[m
[32m+[m[32m        "url" : "http://github.com/substack/node-mkdirp.git"[m
[32m+[m[32m    },[m
[32m+[m[32m    "scripts" : {[m
[32m+[m[32m        "test" : "tap test/*.js"[m
[32m+[m[32m    },[m
[32m+[m[32m    "devDependencies" : {[m
[32m+[m[32m        "tap" : "0.0.x"[m
[32m+[m[32m    },[m
[32m+[m[32m    "license" : "MIT/X11",[m
[32m+[m[32m    "engines": { "node": "*" }[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/chmod.js b/node_modules/express/node_modules/mkdirp/test/chmod.js[m
[1mnew file mode 100644[m
[1mindex 0000000..520dcb8[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/chmod.js[m
[36m@@ -0,0 +1,38 @@[m
[32m+[m[32mvar mkdirp = require('../').mkdirp;[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mvar ps = [ '', 'tmp' ];[m
[32m+[m
[32m+[m[32mfor (var i = 0; i < 25; i++) {[m
[32m+[m[32m    var dir = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    ps.push(dir);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvar file = ps.join('/');[m
[32m+[m
[32m+[m[32mtest('chmod-pre', function (t) {[m
[32m+[m[32m    var mode = 0744[m
[32m+[m[32m    mkdirp(file, mode, function (er) {[m
[32m+[m[32m        t.ifError(er, 'should not error');[m
[32m+[m[32m        fs.stat(file, function (er, stat) {[m
[32m+[m[32m            t.ifError(er, 'should exist');[m
[32m+[m[32m            t.ok(stat && stat.isDirectory(), 'should be directory');[m
[32m+[m[32m            t.equal(stat && stat.mode & 0777, mode, 'should be 0744');[m
[32m+[m[32m            t.end();[m
[32m+[m[32m        });[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest('chmod', function (t) {[m
[32m+[m[32m    var mode = 0755[m
[32m+[m[32m    mkdirp(file, mode, function (er) {[m
[32m+[m[32m        t.ifError(er, 'should not error');[m
[32m+[m[32m        fs.stat(file, function (er, stat) {[m
[32m+[m[32m            t.ifError(er, 'should exist');[m
[32m+[m[32m            t.ok(stat && stat.isDirectory(), 'should be directory');[m
[32m+[m[32m            t.end();[m
[32m+[m[32m        });[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/clobber.js b/node_modules/express/node_modules/mkdirp/test/clobber.js[m
[1mnew file mode 100644[m
[1mindex 0000000..0eb7099[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/clobber.js[m
[36m@@ -0,0 +1,37 @@[m
[32m+[m[32mvar mkdirp = require('../').mkdirp;[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mvar ps = [ '', 'tmp' ];[m
[32m+[m
[32m+[m[32mfor (var i = 0; i < 25; i++) {[m
[32m+[m[32m    var dir = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    ps.push(dir);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mvar file = ps.join('/');[m
[32m+[m
[32m+[m[32m// a file in the way[m
[32m+[m[32mvar itw = ps.slice(0, 3).join('/');[m
[32m+[m
[32m+[m
[32m+[m[32mtest('clobber-pre', function (t) {[m
[32m+[m[32m    console.error("about to write to "+itw)[m
[32m+[m[32m    fs.writeFileSync(itw, 'I AM IN THE WAY, THE TRUTH, AND THE LIGHT.');[m
[32m+[m
[32m+[m[32m    fs.stat(itw, function (er, stat) {[m
[32m+[m[32m        t.ifError(er)[m
[32m+[m[32m        t.ok(stat && stat.isFile(), 'should be file')[m
[32m+[m[32m        t.end()[m
[32m+[m[32m    })[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mtest('clobber', function (t) {[m
[32m+[m[32m    t.plan(2);[m
[32m+[m[32m    mkdirp(file, 0755, function (err) {[m
[32m+[m[32m        t.ok(err);[m
[32m+[m[32m        t.equal(err.code, 'ENOTDIR');[m
[32m+[m[32m        t.end();[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/mkdirp.js b/node_modules/express/node_modules/mkdirp/test/mkdirp.js[m
[1mnew file mode 100644[m
[1mindex 0000000..b07cd70[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/mkdirp.js[m
[36m@@ -0,0 +1,28 @@[m
[32m+[m[32mvar mkdirp = require('../');[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mtest('woo', function (t) {[m
[32m+[m[32m    t.plan(2);[m
[32m+[m[32m    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[41m    [m
[32m+[m[32m    var file = '/tmp/' + [x,y,z].join('/');[m
[32m+[m[41m    [m
[32m+[m[32m    mkdirp(file, 0755, function (err) {[m
[32m+[m[32m        if (err) t.fail(err);[m
[32m+[m[32m        else path.exists(file, function (ex) {[m
[32m+[m[32m            if (!ex) t.fail('file not created')[m
[32m+[m[32m            else fs.stat(file, function (err, stat) {[m
[32m+[m[32m                if (err) t.fail(err)[m
[32m+[m[32m                else {[m
[32m+[m[32m                    t.equal(stat.mode & 0777, 0755);[m
[32m+[m[32m                    t.ok(stat.isDirectory(), 'target not a directory');[m
[32m+[m[32m                    t.end();[m
[32m+[m[32m                }[m
[32m+[m[32m            })[m
[32m+[m[32m        })[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/perm.js b/node_modules/express/node_modules/mkdirp/test/perm.js[m
[1mnew file mode 100644[m
[1mindex 0000000..23a7abb[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/perm.js[m
[36m@@ -0,0 +1,32 @@[m
[32m+[m[32mvar mkdirp = require('../');[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mtest('async perm', function (t) {[m
[32m+[m[32m    t.plan(2);[m
[32m+[m[32m    var file = '/tmp/' + (Math.random() * (1<<30)).toString(16);[m
[32m+[m[41m    [m
[32m+[m[32m    mkdirp(file, 0755, function (err) {[m
[32m+[m[32m        if (err) t.fail(err);[m
[32m+[m[32m        else path.exists(file, function (ex) {[m
[32m+[m[32m            if (!ex) t.fail('file not created')[m
[32m+[m[32m            else fs.stat(file, function (err, stat) {[m
[32m+[m[32m                if (err) t.fail(err)[m
[32m+[m[32m                else {[m
[32m+[m[32m                    t.equal(stat.mode & 0777, 0755);[m
[32m+[m[32m                    t.ok(stat.isDirectory(), 'target not a directory');[m
[32m+[m[32m                    t.end();[m
[32m+[m[32m                }[m
[32m+[m[32m            })[m
[32m+[m[32m        })[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest('async root perm', function (t) {[m
[32m+[m[32m    mkdirp('/tmp', 0755, function (err) {[m
[32m+[m[32m        if (err) t.fail(err);[m
[32m+[m[32m        t.end();[m
[32m+[m[32m    });[m
[32m+[m[32m    t.end();[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/perm_sync.js b/node_modules/express/node_modules/mkdirp/test/perm_sync.js[m
[1mnew file mode 100644[m
[1mindex 0000000..f685f60[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/perm_sync.js[m
[36m@@ -0,0 +1,39 @@[m
[32m+[m[32mvar mkdirp = require('../');[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mtest('sync perm', function (t) {[m
[32m+[m[32m    t.plan(2);[m
[32m+[m[32m    var file = '/tmp/' + (Math.random() * (1<<30)).toString(16) + '.json';[m
[32m+[m[41m    [m
[32m+[m[32m    mkdirp.sync(file, 0755);[m
[32m+[m[32m    path.exists(file, function (ex) {[m
[32m+[m[32m        if (!ex) t.fail('file not created')[m
[32m+[m[32m        else fs.stat(file, function (err, stat) {[m
[32m+[m[32m            if (err) t.fail(err)[m
[32m+[m[32m            else {[m
[32m+[m[32m                t.equal(stat.mode & 0777, 0755);[m
[32m+[m[32m                t.ok(stat.isDirectory(), 'target not a directory');[m
[32m+[m[32m                t.end();[m
[32m+[m[32m            }[m
[32m+[m[32m        })[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mtest('sync root perm', function (t) {[m
[32m+[m[32m    t.plan(1);[m
[32m+[m[41m    [m
[32m+[m[32m    var file = '/tmp';[m
[32m+[m[32m    mkdirp.sync(file, 0755);[m
[32m+[m[32m    path.exists(file, function (ex) {[m
[32m+[m[32m        if (!ex) t.fail('file not created')[m
[32m+[m[32m        else fs.stat(file, function (err, stat) {[m
[32m+[m[32m            if (err) t.fail(err)[m
[32m+[m[32m            else {[m
[32m+[m[32m                t.ok(stat.isDirectory(), 'target not a directory');[m
[32m+[m[32m                t.end();[m
[32m+[m[32m            }[m
[32m+[m[32m        })[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/race.js b/node_modules/express/node_modules/mkdirp/test/race.js[m
[1mnew file mode 100644[m
[1mindex 0000000..96a0447[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/race.js[m
[36m@@ -0,0 +1,41 @@[m
[32m+[m[32mvar mkdirp = require('../').mkdirp;[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mtest('race', function (t) {[m
[32m+[m[32m    t.plan(4);[m
[32m+[m[32m    var ps = [ '', 'tmp' ];[m
[32m+[m[41m    [m
[32m+[m[32m    for (var i = 0; i < 25; i++) {[m
[32m+[m[32m        var dir = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m        ps.push(dir);[m
[32m+[m[32m    }[m
[32m+[m[32m    var file = ps.join('/');[m
[32m+[m[41m    [m
[32m+[m[32m    var res = 2;[m
[32m+[m[32m    mk(file, function () {[m
[32m+[m[32m        if (--res === 0) t.end();[m
[32m+[m[32m    });[m
[32m+[m[41m    [m
[32m+[m[32m    mk(file, function () {[m
[32m+[m[32m        if (--res === 0) t.end();[m
[32m+[m[32m    });[m
[32m+[m[41m    [m
[32m+[m[32m    function mk (file, cb) {[m
[32m+[m[32m        mkdirp(file, 0755, function (err) {[m
[32m+[m[32m            if (err) t.fail(err);[m
[32m+[m[32m            else path.exists(file, function (ex) {[m
[32m+[m[32m                if (!ex) t.fail('file not created')[m
[32m+[m[32m                else fs.stat(file, function (err, stat) {[m
[32m+[m[32m                    if (err) t.fail(err)[m
[32m+[m[32m                    else {[m
[32m+[m[32m                        t.equal(stat.mode & 0777, 0755);[m
[32m+[m[32m                        t.ok(stat.isDirectory(), 'target not a directory');[m
[32m+[m[32m                        if (cb) cb();[m
[32m+[m[32m                    }[m
[32m+[m[32m                })[m
[32m+[m[32m            })[m
[32m+[m[32m        });[m
[32m+[m[32m    }[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/rel.js b/node_modules/express/node_modules/mkdirp/test/rel.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7985824[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/rel.js[m
[36m@@ -0,0 +1,32 @@[m
[32m+[m[32mvar mkdirp = require('../');[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mtest('rel', function (t) {[m
[32m+[m[32m    t.plan(2);[m
[32m+[m[32m    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[41m    [m
[32m+[m[32m    var cwd = process.cwd();[m
[32m+[m[32m    process.chdir('/tmp');[m
[32m+[m[41m    [m
[32m+[m[32m    var file = [x,y,z].join('/');[m
[32m+[m[41m    [m
[32m+[m[32m    mkdirp(file, 0755, function (err) {[m
[32m+[m[32m        if (err) t.fail(err);[m
[32m+[m[32m        else path.exists(file, function (ex) {[m
[32m+[m[32m            if (!ex) t.fail('file not created')[m
[32m+[m[32m            else fs.stat(file, function (err, stat) {[m
[32m+[m[32m                if (err) t.fail(err)[m
[32m+[m[32m                else {[m
[32m+[m[32m                    process.chdir(cwd);[m
[32m+[m[32m                    t.equal(stat.mode & 0777, 0755);[m
[32m+[m[32m                    t.ok(stat.isDirectory(), 'target not a directory');[m
[32m+[m[32m                    t.end();[m
[32m+[m[32m                }[m
[32m+[m[32m            })[m
[32m+[m[32m        })[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/sync.js b/node_modules/express/node_modules/mkdirp/test/sync.js[m
[1mnew file mode 100644[m
[1mindex 0000000..e0e389d[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/sync.js[m
[36m@@ -0,0 +1,27 @@[m
[32m+[m[32mvar mkdirp = require('../');[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mtest('sync', function (t) {[m
[32m+[m[32m    t.plan(2);[m
[32m+[m[32m    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[41m    [m
[32m+[m[32m    var file = '/tmp/' + [x,y,z].join('/');[m
[32m+[m[41m    [m
[32m+[m[32m    var err = mkdirp.sync(file, 0755);[m
[32m+[m[32m    if (err) t.fail(err);[m
[32m+[m[32m    else path.exists(file, function (ex) {[m
[32m+[m[32m        if (!ex) t.fail('file not created')[m
[32m+[m[32m        else fs.stat(file, function (err, stat) {[m
[32m+[m[32m            if (err) t.fail(err)[m
[32m+[m[32m            else {[m
[32m+[m[32m                t.equal(stat.mode & 0777, 0755);[m
[32m+[m[32m                t.ok(stat.isDirectory(), 'target not a directory');[m
[32m+[m[32m                t.end();[m
[32m+[m[32m            }[m
[32m+[m[32m        })[m
[32m+[m[32m    })[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/umask.js b/node_modules/express/node_modules/mkdirp/test/umask.js[m
[1mnew file mode 100644[m
[1mindex 0000000..64ccafe[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/umask.js[m
[36m@@ -0,0 +1,28 @@[m
[32m+[m[32mvar mkdirp = require('../');[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mtest('implicit mode from umask', function (t) {[m
[32m+[m[32m    t.plan(2);[m
[32m+[m[32m    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[41m    [m
[32m+[m[32m    var file = '/tmp/' + [x,y,z].join('/');[m
[32m+[m[41m    [m
[32m+[m[32m    mkdirp(file, function (err) {[m
[32m+[m[32m        if (err) t.fail(err);[m
[32m+[m[32m        else path.exists(file, function (ex) {[m
[32m+[m[32m            if (!ex) t.fail('file not created')[m
[32m+[m[32m            else fs.stat(file, function (err, stat) {[m
[32m+[m[32m                if (err) t.fail(err)[m
[32m+[m[32m                else {[m
[32m+[m[32m                    t.equal(stat.mode & 0777, 0777 & (~process.umask()));[m
[32m+[m[32m                    t.ok(stat.isDirectory(), 'target not a directory');[m
[32m+[m[32m                    t.end();[m
[32m+[m[32m                }[m
[32m+[m[32m            })[m
[32m+[m[32m        })[m
[32m+[m[32m    });[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/mkdirp/test/umask_sync.js b/node_modules/express/node_modules/mkdirp/test/umask_sync.js[m
[1mnew file mode 100644[m
[1mindex 0000000..83cba56[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/mkdirp/test/umask_sync.js[m
[36m@@ -0,0 +1,27 @@[m
[32m+[m[32mvar mkdirp = require('../');[m
[32m+[m[32mvar path = require('path');[m
[32m+[m[32mvar fs = require('fs');[m
[32m+[m[32mvar test = require('tap').test;[m
[32m+[m
[32m+[m[32mtest('umask sync modes', function (t) {[m
[32m+[m[32m    t.plan(2);[m
[32m+[m[32m    var x = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var y = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[32m    var z = Math.floor(Math.random() * Math.pow(16,4)).toString(16);[m
[32m+[m[41m    [m
[32m+[m[32m    var file = '/tmp/' + [x,y,z].join('/');[m
[32m+[m[41m    [m
[32m+[m[32m    var err = mkdirp.sync(file);[m
[32m+[m[32m    if (err) t.fail(err);[m
[32m+[m[32m    else path.exists(file, function (ex) {[m
[32m+[m[32m        if (!ex) t.fail('file not created')[m
[32m+[m[32m        else fs.stat(file, function (err, stat) {[m
[32m+[m[32m            if (err) t.fail(err)[m
[32m+[m[32m            else {[m
[32m+[m[32m                t.equal(stat.mode & 0777, (0777 & (~process.umask())));[m
[32m+[m[32m                t.ok(stat.isDirectory(), 'target not a directory');[m
[32m+[m[32m                t.end();[m
[32m+[m[32m            }[m
[32m+[m[32m        })[m
[32m+[m[32m    })[m
[32m+[m[32m});[m
[1mdiff --git a/node_modules/express/node_modules/qs/.gitmodules b/node_modules/express/node_modules/qs/.gitmodules[m
[1mnew file mode 100644[m
[1mindex 0000000..49e31da[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/.gitmodules[m
[36m@@ -0,0 +1,6 @@[m
[32m+[m[32m[submodule "support/expresso"][m
[32m+[m	[32mpath = support/expresso[m
[32m+[m	[32murl = git://github.com/visionmedia/expresso.git[m
[32m+[m[32m[submodule "support/should"][m
[32m+[m	[32mpath = support/should[m
[32m+[m	[32murl = git://github.com/visionmedia/should.js.git[m
[1mdiff --git a/node_modules/express/node_modules/qs/.npmignore b/node_modules/express/node_modules/qs/.npmignore[m
[1mnew file mode 100644[m
[1mindex 0000000..3c3629e[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/.npmignore[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32mnode_modules[m
[1mdiff --git a/node_modules/express/node_modules/qs/.travis.yml b/node_modules/express/node_modules/qs/.travis.yml[m
[1mnew file mode 100644[m
[1mindex 0000000..2c0a8f6[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/.travis.yml[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32mlanguage: node_js[m
[32m+[m[32mnode_js:[m
[32m+[m[32m  - 0.6[m
[32m+[m[32m  - 0.4[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/History.md b/node_modules/express/node_modules/qs/History.md[m
[1mnew file mode 100644[m
[1mindex 0000000..3eaf7df[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/History.md[m
[36m@@ -0,0 +1,73 @@[m
[32m+[m
[32m+[m[32m0.4.2 / 2012-02-08[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed: ensure objects are created when appropriate not arrays [aheckmann][m
[32m+[m
[32m+[m[32m0.4.1 / 2012-01-26[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed stringify()ing numbers. Closes #23[m
[32m+[m
[32m+[m[32m0.4.0 / 2011-11-21[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Allow parsing of an existing object (for `bodyParser()`) [jackyz][m
[32m+[m[32m  * Replaced expresso with mocha[m
[32m+[m
[32m+[m[32m0.3.2 / 2011-11-08[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed global variable leak[m
[32m+[m
[32m+[m[32m0.3.1 / 2011-08-17[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `try/catch` around malformed uri components[m
[32m+[m[32m  * Add test coverage for Array native method bleed-though[m
[32m+[m
[32m+[m[32m0.3.0 / 2011-07-19[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Allow `array[index]` and `object[property]` syntaxes [Aria Stewart][m
[32m+[m
[32m+[m[32m0.2.0 / 2011-06-29[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added `qs.stringify()` [Cory Forsyth][m
[32m+[m
[32m+[m[32m0.1.0 / 2011-04-13[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Added jQuery-ish array support[m
[32m+[m
[32m+[m[32m0.0.7 / 2011-03-13[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed; handle empty string and `== null` in `qs.parse()` [dmit][m
[32m+[m[32m    allows for convenient `qs.parse(url.parse(str).query)`[m
[32m+[m
[32m+[m[32m0.0.6 / 2011-02-14[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed; support for implicit arrays[m
[32m+[m
[32m+[m[32m0.0.4 / 2011-02-09[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed `+` as a space[m
[32m+[m
[32m+[m[32m0.0.3 / 2011-02-08[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed case when right-hand value contains "]"[m
[32m+[m
[32m+[m[32m0.0.2 / 2011-02-07[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Fixed "=" presence in key[m
[32m+[m
[32m+[m[32m0.0.1 / 2011-02-07[m[41m [m
[32m+[m[32m==================[m
[32m+[m
[32m+[m[32m  * Initial release[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/Makefile b/node_modules/express/node_modules/qs/Makefile[m
[1mnew file mode 100644[m
[1mindex 0000000..e4df837[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/Makefile[m
[36m@@ -0,0 +1,5 @@[m
[32m+[m
[32m+[m[32mtest:[m
[32m+[m	[32m@./node_modules/.bin/mocha[m
[32m+[m
[32m+[m[32m.PHONY: test[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/Readme.md b/node_modules/express/node_modules/qs/Readme.md[m
[1mnew file mode 100644[m
[1mindex 0000000..db0d145[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/Readme.md[m
[36m@@ -0,0 +1,54 @@[m
[32m+[m[32m# node-querystring[m
[32m+[m
[32m+[m[32m  query string parser for node supporting nesting, as it was removed from `0.3.x`, so this library provides the previous and commonly desired behaviour (and twice as fast). Used by [express](http://expressjs.com), [connect](http://senchalabs.github.com/connect) and others.[m
[32m+[m
[32m+[m[32m## Installation[m
[32m+[m
[32m+[m[32m    $ npm install qs[m
[32m+[m
[32m+[m[32m## Examples[m
[32m+[m
[32m+[m[32m```js[m
[32m+[m[32mvar qs = require('qs');[m
[32m+[m
[32m+[m[32mqs.parse('user[name][first]=Tobi&user[email]=tobi@learnboost.com');[m
[32m+[m[32m// => { user: { name: { first: 'Tobi' }, email: 'tobi@learnboost.com' } }[m
[32m+[m
[32m+[m[32mqs.stringify({ user: { name: 'Tobi', email: 'tobi@learnboost.com' }})[m
[32m+[m[32m// => user[name]=Tobi&user[email]=tobi%40learnboost.com[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m## Testing[m
[32m+[m
[32m+[m[32mInstall dev dependencies:[m
[32m+[m
[32m+[m[32m    $ npm install -d[m
[32m+[m
[32m+[m[32mand execute:[m
[32m+[m
[32m+[m[32m    $ make test[m
[32m+[m
[32m+[m[32m## License[m[41m [m
[32m+[m
[32m+[m[32m(The MIT License)[m
[32m+[m
[32m+[m[32mCopyright (c) 2010 TJ Holowaychuk &lt;tj@vision-media.ca&gt;[m
[32m+[m
[32m+[m[32mPermission is hereby granted, free of charge, to any person obtaining[m
[32m+[m[32ma copy of this software and associated documentation files (the[m
[32m+[m[32m'Software'), to deal in the Software without restriction, including[m
[32m+[m[32mwithout limitation the rights to use, copy, modify, merge, publish,[m
[32m+[m[32mdistribute, sublicense, and/or sell copies of the Software, and to[m
[32m+[m[32mpermit persons to whom the Software is furnished to do so, subject to[m
[32m+[m[32mthe following conditions:[m
[32m+[m
[32m+[m[32mThe above copyright notice and this permission notice shall be[m
[32m+[m[32mincluded in all copies or substantial portions of the Software.[m
[32m+[m
[32m+[m[32mTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,[m
[32m+[m[32mEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF[m
[32m+[m[32mMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.[m
[32m+[m[32mIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY[m
[32m+[m[32mCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,[m
[32m+[m[32mTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE[m
[32m+[m[32mSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/benchmark.js b/node_modules/express/node_modules/qs/benchmark.js[m
[1mnew file mode 100644[m
[1mindex 0000000..97e2c93[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/benchmark.js[m
[36m@@ -0,0 +1,17 @@[m
[32m+[m
[32m+[m[32mvar qs = require('./');[m
[32m+[m
[32m+[m[32mvar times = 100000[m
[32m+[m[32m  , start = new Date[m
[32m+[m[32m  , n = times;[m
[32m+[m
[32m+[m[32mconsole.log('times: %d', times);[m
[32m+[m
[32m+[m[32mwhile (n--) qs.parse('foo=bar');[m
[32m+[m[32mconsole.log('simple: %dms', new Date - start);[m
[32m+[m
[32m+[m[32mvar start = new Date[m
[32m+[m[32m  , n = times;[m
[32m+[m
[32m+[m[32mwhile (n--) qs.parse('user[name][first]=tj&user[name][last]=holowaychuk');[m
[32m+[m[32mconsole.log('nested: %dms', new Date - start);[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/examples.js b/node_modules/express/node_modules/qs/examples.js[m
[1mnew file mode 100644[m
[1mindex 0000000..27617b7[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/examples.js[m
[36m@@ -0,0 +1,51 @@[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar qs = require('./');[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('foo');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('foo=bar=baz');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('users[]');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('name=tj&email=tj@vision-media.ca');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('users[]=tj&users[]=tobi&users[]=jane');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('user[name][first]=tj&user[name][last]=holowaychuk');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('users[][name][first]=tj&users[][name][last]=holowaychuk');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('a=a&a=b&a=c');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('user[tj]=tj&user[tj]=TJ');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('user[names]=tj&user[names]=TJ&user[names]=Tyler');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('user[name][first]=tj&user[name][first]=TJ');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('user[0]=tj&user[1]=TJ');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('user[0]=tj&user[]=TJ');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar obj = qs.parse('user[0]=tj&user[foo]=TJ');[m
[32m+[m[32mconsole.log(obj)[m
[32m+[m
[32m+[m[32mvar str = qs.stringify({ user: { name: 'Tobi', email: 'tobi@learnboost.com' }});[m
[32m+[m[32mconsole.log(str);[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/index.js b/node_modules/express/node_modules/qs/index.js[m
[1mnew file mode 100644[m
[1mindex 0000000..d177d20[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/index.js[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m
[32m+[m[32mmodule.exports = require('./lib/querystring');[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/lib/querystring.js b/node_modules/express/node_modules/qs/lib/querystring.js[m
[1mnew file mode 100644[m
[1mindex 0000000..6c72712[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/lib/querystring.js[m
[36m@@ -0,0 +1,264 @@[m
[32m+[m
[32m+[m[32m/*![m
[32m+[m[32m * querystring[m
[32m+[m[32m * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>[m
[32m+[m[32m * MIT Licensed[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Library version.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.version = '0.4.2';[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Object#toString() ref for stringify().[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar toString = Object.prototype.toString;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Cache non-integer test regexp.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar isint = /^[0-9]+$/;[m
[32m+[m
[32m+[m[32mfunction promote(parent, key) {[m
[32m+[m[32m  if (parent[key].length == 0) return parent[key] = {};[m
[32m+[m[32m  var t = {};[m
[32m+[m[32m  for (var i in parent[key]) t[i] = parent[key][i];[m
[32m+[m[32m  parent[key] = t;[m
[32m+[m[32m  return t;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction parse(parts, parent, key, val) {[m
[32m+[m[32m  var part = parts.shift();[m
[32m+[m[32m  // end[m
[32m+[m[32m  if (!part) {[m
[32m+[m[32m    if (Array.isArray(parent[key])) {[m
[32m+[m[32m      parent[key].push(val);[m
[32m+[m[32m    } else if ('object' == typeof parent[key]) {[m
[32m+[m[32m      parent[key] = val;[m
[32m+[m[32m    } else if ('undefined' == typeof parent[key]) {[m
[32m+[m[32m      parent[key] = val;[m
[32m+[m[32m    } else {[m
[32m+[m[32m      parent[key] = [parent[key], val];[m
[32m+[m[32m    }[m
[32m+[m[32m    // array[m
[32m+[m[32m  } else {[m
[32m+[m[32m    var obj = parent[key] = parent[key] || [];[m
[32m+[m[32m    if (']' == part) {[m
[32m+[m[32m      if (Array.isArray(obj)) {[m
[32m+[m[32m        if ('' != val) obj.push(val);[m
[32m+[m[32m      } else if ('object' == typeof obj) {[m
[32m+[m[32m        obj[Object.keys(obj).length] = val;[m
[32m+[m[32m      } else {[m
[32m+[m[32m        obj = parent[key] = [parent[key], val];[m
[32m+[m[32m      }[m
[32m+[m[32m      // prop[m
[32m+[m[32m    } else if (~part.indexOf(']')) {[m
[32m+[m[32m      part = part.substr(0, part.length - 1);[m
[32m+[m[32m      if (!isint.test(part) && Array.isArray(obj)) obj = promote(parent, key);[m
[32m+[m[32m      parse(parts, obj, part, val);[m
[32m+[m[32m      // key[m
[32m+[m[32m    } else {[m
[32m+[m[32m      if (!isint.test(part) && Array.isArray(obj)) obj = promote(parent, key);[m
[32m+[m[32m      parse(parts, obj, part, val);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Merge parent key/val pair.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction merge(parent, key, val){[m
[32m+[m[32m  if (~key.indexOf(']')) {[m
[32m+[m[32m    var parts = key.split('[')[m
[32m+[m[32m      , len = parts.length[m
[32m+[m[32m      , last = len - 1;[m
[32m+[m[32m    parse(parts, parent, 'base', val);[m
[32m+[m[32m    // optimize[m
[32m+[m[32m  } else {[m
[32m+[m[32m    if (!isint.test(key) && Array.isArray(parent.base)) {[m
[32m+[m[32m      var t = {};[m
[32m+[m[32m      for (var k in parent.base) t[k] = parent.base[k];[m
[32m+[m[32m      parent.base = t;[m
[32m+[m[32m    }[m
[32m+[m[32m    set(parent.base, key, val);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return parent;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse the given obj.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction parseObject(obj){[m
[32m+[m[32m  var ret = { base: {} };[m
[32m+[m[32m  Object.keys(obj).forEach(function(name){[m
[32m+[m[32m    merge(ret, name, obj[name]);[m
[32m+[m[32m  });[m
[32m+[m[32m  return ret.base;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse the given str.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction parseString(str){[m
[32m+[m[32m  return String(str)[m
[32m+[m[32m    .split('&')[m
[32m+[m[32m    .reduce(function(ret, pair){[m
[32m+[m[32m      try{[m
[32m+[m[32m        pair = decodeURIComponent(pair.replace(/\+/g, ' '));[m
[32m+[m[32m      } catch(e) {[m
[32m+[m[32m        // ignore[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      var eql = pair.indexOf('=')[m
[32m+[m[32m        , brace = lastBraceInKey(pair)[m
[32m+[m[32m        , key = pair.substr(0, brace || eql)[m
[32m+[m[32m        , val = pair.substr(brace || eql, pair.length)[m
[32m+[m[32m        , val = val.substr(val.indexOf('=') + 1, val.length);[m
[32m+[m
[32m+[m[32m      // ?foo[m
[32m+[m[32m      if ('' == key) key = pair, val = '';[m
[32m+[m
[32m+[m[32m      return merge(ret, key, val);[m
[32m+[m[32m    }, { base: {} }).base;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Parse the given query `str` or `obj`, returning an object.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} str | {Object} obj[m
[32m+[m[32m * @return {Object}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mexports.parse = function(str){[m
[32m+[m[32m  if (null == str || '' == str) return {};[m
[32m+[m[32m  return 'object' == typeof str[m
[32m+[m[32m    ? parseObject(str)[m
[32m+[m[32m    : parseString(str);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Turn the given `obj` into a query string[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api public[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar stringify = exports.stringify = function(obj, prefix) {[m
[32m+[m[32m  if (Array.isArray(obj)) {[m
[32m+[m[32m    return stringifyArray(obj, prefix);[m
[32m+[m[32m  } else if ('[object Object]' == toString.call(obj)) {[m
[32m+[m[32m    return stringifyObject(obj, prefix);[m
[32m+[m[32m  } else if ('string' == typeof obj) {[m
[32m+[m[32m    return stringifyString(obj, prefix);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return prefix + '=' + obj;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Stringify the given `str`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m * @param {String} prefix[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction stringifyString(str, prefix) {[m
[32m+[m[32m  if (!prefix) throw new TypeError('stringify expects an object');[m
[32m+[m[32m  return prefix + '=' + encodeURIComponent(str);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Stringify the given `arr`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Array} arr[m
[32m+[m[32m * @param {String} prefix[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction stringifyArray(arr, prefix) {[m
[32m+[m[32m  var ret = [];[m
[32m+[m[32m  if (!prefix) throw new TypeError('stringify expects an object');[m
[32m+[m[32m  for (var i = 0; i < arr.length; i++) {[m
[32m+[m[32m    ret.push(stringify(arr[i], prefix + '[]'));[m
[32m+[m[32m  }[m
[32m+[m[32m  return ret.join('&');[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Stringify the given `obj`.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @param {String} prefix[m
[32m+[m[32m * @return {String}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction stringifyObject(obj, prefix) {[m
[32m+[m[32m  var ret = [][m
[32m+[m[32m    , keys = Object.keys(obj)[m
[32m+[m[32m    , key;[m
[32m+[m
[32m+[m[32m  for (var i = 0, len = keys.length; i < len; ++i) {[m
[32m+[m[32m    key = keys[i];[m
[32m+[m[32m    ret.push(stringify(obj[key], prefix[m
[32m+[m[32m      ? prefix + '[' + encodeURIComponent(key) + ']'[m
[32m+[m[32m      : encodeURIComponent(key)));[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return ret.join('&');[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Set `obj`'s `key` to `val` respecting[m
[32m+[m[32m * the weird and wonderful syntax of a qs,[m
[32m+[m[32m * where "foo=bar&foo=baz" becomes an array.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {Object} obj[m
[32m+[m[32m * @param {String} key[m
[32m+[m[32m * @param {String} val[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction set(obj, key, val) {[m
[32m+[m[32m  var v = obj[key];[m
[32m+[m[32m  if (undefined === v) {[m
[32m+[m[32m    obj[key] = val;[m
[32m+[m[32m  } else if (Array.isArray(v)) {[m
[32m+[m[32m    v.push(val);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    obj[key] = [v, val];[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Locate last brace in `str` within the key.[m
[32m+[m[32m *[m
[32m+[m[32m * @param {String} str[m
[32m+[m[32m * @return {Number}[m
[32m+[m[32m * @api private[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mfunction lastBraceInKey(str) {[m
[32m+[m[32m  var len = str.length[m
[32m+[m[32m    , brace[m
[32m+[m[32m    , c;[m
[32m+[m[32m  for (var i = 0; i < len; ++i) {[m
[32m+[m[32m    c = str[i];[m
[32m+[m[32m    if (']' == c) brace = false;[m
[32m+[m[32m    if ('[' == c) brace = true;[m
[32m+[m[32m    if ('=' == c && !brace) return i;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/node_modules/express/node_modules/qs/package.json b/node_modules/express/node_modules/qs/package.json[m
[1mnew file mode 100644[m
[1mindex 0000000..68dd5a6[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/package.json[m
[36m@@ -0,0 +1,16 @@[m
[32m+[m[32m{[m
[32m+[m[32m  "name": "qs",[m
[32m+[m[32m  "description": "querystring parser",[m
[32m+[m[32m  "version": "0.4.2",[m
[32m+[m[32m  "repository": {[m
[32m+[m[32m    "type" : "git",[m
[32m+[m[32m    "url" : "git://github.com/visionmedia/node-querystring.git"[m
[32m+[m[32m  },[m
[32m+[m[32m  "devDependencies": {[m
[32m+[m[32m      "mocha": "*"[m
[32m+[m[32m    , "should": "*"[m
[32m+[m[32m  },[m
[32m+[m[32m  "author": "TJ Holowaychuk <tj@vision-media.ca> (http://tjholowaychuk.com)",[m
[32m+[m[32m  "main": "index",[m
[32m+[m[32m  "engines": { "node": "*" }[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/node_modules/qs/test/mocha.opts b/node_modules/express/node_modules/qs/test/mocha.opts[m
[1mnew file mode 100644[m
[1mindex 0000000..521cbb2[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/test/mocha.opts[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32m--require should[m
[32m+[m[32m--ui exports[m
[1mdiff --git a/node_modules/express/node_modules/qs/test/parse.js b/node_modules/express/node_modules/qs/test/parse.js[m
[1mnew file mode 100644[m
[1mindex 0000000..f219e27[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/test/parse.js[m
[36m@@ -0,0 +1,167 @@[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar qs = require('../');[m
[32m+[m
[32m+[m[32mmodule.exports = {[m
[32m+[m[32m  'test basics': function(){[m
[32m+[m[32m    qs.parse('0=foo').should.eql({ '0': 'foo' });[m
[32m+[m
[32m+[m[32m    qs.parse('foo=c++')[m
[32m+[m[32m      .should.eql({ foo: 'c  ' });[m
[32m+[m
[32m+[m[32m    qs.parse('a[>=]=23')[m
[32m+[m[32m      .should.eql({ a: { '>=': '23' }});[m
[32m+[m
[32m+[m[32m    qs.parse('a[<=>]==23')[m
[32m+[m[32m      .should.eql({ a: { '<=>': '=23' }});[m
[32m+[m
[32m+[m[32m    qs.parse('a[==]=23')[m
[32m+[m[32m      .should.eql({ a: { '==': '23' }});[m
[32m+[m
[32m+[m[32m    qs.parse('foo')[m
[32m+[m[32m      .should.eql({ foo: '' });[m
[32m+[m
[32m+[m[32m    qs.parse('foo=bar')[m
[32m+[m[32m      .should.eql({ foo: 'bar' });[m
[32m+[m
[32m+[m[32m    qs.parse('foo%3Dbar=baz')[m
[32m+[m[32m      .should.eql({ foo: 'bar=baz' });[m
[32m+[m
[32m+[m[32m    qs.parse(' foo = bar = baz ')[m
[32m+[m[32m      .should.eql({ ' foo ': ' bar = baz ' });[m
[32m+[m
[32m+[m[32m    qs.parse('foo=bar=baz')[m
[32m+[m[32m      .should.eql({ foo: 'bar=baz' });[m
[32m+[m
[32m+[m[32m    qs.parse('foo=bar&bar=baz')[m
[32m+[m[32m      .should.eql({ foo: 'bar', bar: 'baz' });[m
[32m+[m
[32m+[m[32m    qs.parse('foo=bar&baz')[m
[32m+[m[32m      .should.eql({ foo: 'bar', baz: '' });[m
[32m+[m
[32m+[m[32m    qs.parse('cht=p3&chd=t:60,40&chs=250x100&chl=Hello|World')[m
[32m+[m[32m      .should.eql({[m
[32m+[m[32m          cht: 'p3'[m
[32m+[m[32m        , chd: 't:60,40'[m
[32m+[m[32m        , chs: '250x100'[m
[32m+[m[32m        , chl: 'Hello|World'[m
[32m+[m[32m      });[m
[32m+[m[32m  },[m
[32m+[m[41m  [m
[32m+[m[32m  'test nesting': function(){[m
[32m+[m[32m    qs.parse('ops[>=]=25')[m
[32m+[m[32m      .should.eql({ ops: { '>=': '25' }});[m
[32m+[m
[32m+[m[32m    qs.parse('user[name]=tj')[m
[32m+[m[32m      .should.eql({ user: { name: 'tj' }});[m
[32m+[m
[32m+[m[32m    qs.parse('user[name][first]=tj&user[name][last]=holowaychuk')[m
[32m+[m[32m      .should.eql({ user: { name: { first: 'tj', last: 'holowaychuk' }}});[m
[32m+[m[32m  },[m
[32m+[m[41m  [m
[32m+[m[32m  'test escaping': function(){[m
[32m+[m[32m    qs.parse('foo=foo%20bar')[m
[32m+[m[32m      .should.eql({ foo: 'foo bar' });[m
[32m+[m[32m  },[m
[32m+[m[41m  [m
[32m+[m[32m  'test arrays': function(){[m
[32m+[m[32m    qs.parse('images[]')[m
[32m+[m[32m      .should.eql({ images: [] });[m
[32m+[m
[32m+[m[32m    qs.parse('user[]=tj')[m
[32m+[m[32m      .should.eql({ user: ['tj'] });[m
[32m+[m
[32m+[m[32m    qs.parse('user[]=tj&user[]=tobi&user[]=jane')[m
[32m+[m[32m      .should.eql({ user: ['tj', 'tobi', 'jane'] });[m
[32m+[m
[32m+[m[32m    qs.parse('user[names][]=tj&user[names][]=tyler')[m
[32m+[m[32m      .should.eql({ user: { names: ['tj', 'tyler'] }});[m
[32m+[m
[32m+[m[32m    qs.parse('user[names][]=tj&user[names][]=tyler&user[email]=tj@vision-media.ca')[m
[32m+[m[32m      .should.eql({ user: { names: ['tj', 'tyler'], email: 'tj@vision-media.ca' }});[m
[32m+[m
[32m+[m[32m    qs.parse('items=a&items=b')[m
[32m+[m[32m      .should.eql({ items: ['a', 'b'] });[m
[32m+[m
[32m+[m[32m    qs.parse('user[names]=tj&user[names]=holowaychuk&user[names]=TJ')[m
[32m+[m[32m      .should.eql({ user: { names: ['tj', 'holowaychuk', 'TJ'] }});[m
[32m+[m
[32m+[m[32m    qs.parse('user[name][first]=tj&user[name][first]=TJ')[m
[32m+[m[32m      .should.eql({ user: { name: { first: ['tj', 'TJ'] }}});[m
[32m+[m
[32m+[m[32m    var o = qs.parse('existing[fcbaebfecc][name][last]=tj')[m
[32m+[m[32m    o.should.eql({ existing: { 'fcbaebfecc': { name: { last: 'tj' }}}})[m
[32m+[m[32m    Array.isArray(o.existing).should.be.false;[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test right-hand brackets': function(){[m
[32m+[m[32m    qs.parse('pets=["tobi"]')[m
[32m+[m[32m      .should.eql({ pets: '["tobi"]' });[m
[32m+[m
[32m+[m[32m    qs.parse('operators=[">=", "<="]')[m
[32m+[m[32m      .should.eql({ operators: '[">=", "<="]' });[m
[32m+[m
[32m+[m[32m    qs.parse('op[>=]=[1,2,3]')[m
[32m+[m[32m      .should.eql({ op: { '>=': '[1,2,3]' }});[m
[32m+[m
[32m+[m[32m    qs.parse('op[>=]=[1,2,3]&op[=]=[[[[1]]]]')[m
[32m+[m[32m          .should.eql({ op: { '>=': '[1,2,3]', '=': '[[[[1]]]]' }});[m
[32m+[m[32m  },[m
[32m+[m[41m  [m
[32m+[m[32m  'test duplicates': function(){[m
[32m+[m[32m    qs.parse('items=bar&items=baz&items=raz')[m
[32m+[m[32m      .should.eql({ items: ['bar', 'baz', 'raz'] });[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test empty': function(){[m
[32m+[m[32m    qs.parse('').should.eql({});[m
[32m+[m[32m    qs.parse(undefined).should.eql({});[m
[32m+[m[32m    qs.parse(null).should.eql({});[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test arrays with indexes': function(){[m
[32m+[m[32m    qs.parse('foo[0]=bar&foo[1]=baz').should.eql({ foo: ['bar', 'baz'] });[m
[32m+[m[32m    qs.parse('foo[1]=bar&foo[0]=baz').should.eql({ foo: ['baz', 'bar'] });[m
[32m+[m[32m    qs.parse('foo[base64]=RAWR').should.eql({ foo: { base64: 'RAWR' }});[m
[32m+[m[32m    qs.parse('foo[64base]=RAWR').should.eql({ foo: { '64base': 'RAWR' }});[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test arrays becoming objects': function(){[m
[32m+[m[32m    qs.parse('foo[0]=bar&foo[bad]=baz').should.eql({ foo: { 0: "bar", bad: "baz" }});[m
[32m+[m[32m    qs.parse('foo[bad]=baz&foo[0]=bar').should.eql({ foo: { 0: "bar", bad: "baz" }});[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test bleed-through of Array native properties/methods': function(){[m
[32m+[m[32m    Array.prototype.protoProperty = true;[m
[32m+[m[32m    Array.prototype.protoFunction = function () {};[m
[32m+[m[32m    qs.parse('foo=bar').should.eql({ foo: 'bar' });[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test malformed uri': function(){[m
[32m+[m[32m    qs.parse('{%:%}').should.eql({ '{%:%}': '' });[m
[32m+[m[32m    qs.parse('foo=%:%}').should.eql({ 'foo': '%:%}' });[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test semi-parsed': function(){[m
[32m+[m[32m    qs.parse({ 'user[name]': 'tobi' })[m
[32m+[m[32m      .should.eql({ user: { name: 'tobi' }});[m
[32m+[m
[32m+[m[32m    qs.parse({ 'user[name]': 'tobi', 'user[email][main]': 'tobi@lb.com' })[m
[32m+[m[32m      .should.eql({ user: { name: 'tobi', email: { main: 'tobi@lb.com' } }});[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // 'test complex': function(){[m
[32m+[m[32m  //   qs.parse('users[][name][first]=tj&users[foo]=bar')[m
[32m+[m[32m  //     .should.eql({[m
[32m+[m[32m  //       users: [ { name: 'tj' }, { name: 'tobi' }, { foo: 'bar' }][m
[32m+[m[32m  //     });[m
[32m+[m[32m  //[m[41m [m
[32m+[m[32m  //   qs.parse('users[][name][first]=tj&users[][name][first]=tobi')[m
[32m+[m[32m  //     .should.eql({[m
[32m+[m[32m  //       users: [ { name: 'tj' }, { name: 'tobi' }][m
[32m+[m[32m  //     });[m
[32m+[m[32m  // }[m
[32m+[m[32m};[m
[1mdiff --git a/node_modules/express/node_modules/qs/test/stringify.js b/node_modules/express/node_modules/qs/test/stringify.js[m
[1mnew file mode 100644[m
[1mindex 0000000..c2195cb[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/node_modules/qs/test/stringify.js[m
[36m@@ -0,0 +1,103 @@[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Module dependencies.[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32mvar qs = require('../')[m
[32m+[m[32m  , should = require('should')[m
[32m+[m[32m  , str_identities = {[m
[32m+[m[32m    'basics': [[m
[32m+[m[32m      { str: 'foo=bar', obj: {'foo' : 'bar'}},[m
[32m+[m[32m      { str: 'foo=%22bar%22', obj: {'foo' : '\"bar\"'}},[m
[32m+[m[32m      { str: 'foo=', obj: {'foo': ''}},[m
[32m+[m[32m      { str: 'foo=1&bar=2', obj: {'foo' : '1', 'bar' : '2'}},[m
[32m+[m[32m      { str: 'my%20weird%20field=q1!2%22\'w%245%267%2Fz8)%3F', obj: {'my weird field': "q1!2\"'w$5&7/z8)?"}},[m
[32m+[m[32m      { str: 'foo%3Dbaz=bar', obj: {'foo=baz': 'bar'}},[m
[32m+[m[32m      { str: 'foo=bar&bar=baz', obj: {foo: 'bar', bar: 'baz'}}[m
[32m+[m[32m    ],[m
[32m+[m[32m    'escaping': [[m
[32m+[m[32m      { str: 'foo=foo%20bar', obj: {foo: 'foo bar'}},[m
[32m+[m[32m      { str: 'cht=p3&chd=t%3A60%2C40&chs=250x100&chl=Hello%7CWorld', obj: {[m
[32m+[m[32m          cht: 'p3'[m
[32m+[m[32m        , chd: 't:60,40'[m
[32m+[m[32m        , chs: '250x100'[m
[32m+[m[32m        , chl: 'Hello|World'[m
[32m+[m[32m      }}[m
[32m+[m[32m    ],[m
[32m+[m[32m    'nested': [[m
[32m+[m[32m      { str: 'foo[]=bar&foo[]=quux', obj: {'foo' : ['bar', 'quux']}},[m
[32m+[m[32m      { str: 'foo[]=bar', obj: {foo: ['bar']}},[m
[32m+[m[32m      { str: 'foo[]=1&foo[]=2', obj: {'foo' : ['1', '2']}},[m
[32m+[m[32m      { str: 'foo=bar&baz[]=1&baz[]=2&baz[]=3', obj: {'foo' : 'bar', 'baz' : ['1', '2', '3']}},[m
[32m+[m[32m      { str: 'foo[]=bar&baz[]=1&baz[]=2&baz[]=3', obj: {'foo' : ['bar'], 'baz' : ['1', '2', '3']}},[m
[32m+[m[32m      { str: 'x[y][z]=1', obj: {'x' : {'y' : {'z' : '1'}}}},[m
[32m+[m[32m      { str: 'x[y][z][]=1', obj: {'x' : {'y' : {'z' : ['1']}}}},[m
[32m+[m[32m      { str: 'x[y][z]=2', obj: {'x' : {'y' : {'z' : '2'}}}},[m
[32m+[m[32m      { str: 'x[y][z][]=1&x[y][z][]=2', obj: {'x' : {'y' : {'z' : ['1', '2']}}}},[m
[32m+[m[32m      { str: 'x[y][][z]=1', obj: {'x' : {'y' : [{'z' : '1'}]}}},[m
[32m+[m[32m      { str: 'x[y][][z][]=1', obj: {'x' : {'y' : [{'z' : ['1']}]}}},[m
[32m+[m[32m      { str: 'x[y][][z]=1&x[y][][w]=2', obj: {'x' : {'y' : [{'z' : '1', 'w' : '2'}]}}},[m
[32m+[m[32m      { str: 'x[y][][v][w]=1', obj: {'x' : {'y' : [{'v' : {'w' : '1'}}]}}},[m
[32m+[m[32m      { str: 'x[y][][z]=1&x[y][][v][w]=2', obj: {'x' : {'y' : [{'z' : '1', 'v' : {'w' : '2'}}]}}},[m
[32m+[m[32m      { str: 'x[y][][z]=1&x[y][][z]=2', obj: {'x' : {'y' : [{'z' : '1'}, {'z' : '2'}]}}},[m
[32m+[m[32m      { str: 'x[y][][z]=1&x[y][][w]=a&x[y][][z]=2&x[y][][w]=3', obj: {'x' : {'y' : [{'z' : '1', 'w' : 'a'}, {'z' : '2', 'w' : '3'}]}}},[m
[32m+[m[32m      { str: 'user[name][first]=tj&user[name][last]=holowaychuk', obj: { user: { name: { first: 'tj', last: 'holowaychuk' }}}}[m
[32m+[m[32m    ],[m
[32m+[m[32m    'errors': [[m
[32m+[m[32m      { obj: 'foo=bar',     message: 'stringify expects an object' },[m
[32m+[m[32m      { obj: ['foo', 'bar'], message: 'stringify expects an object' }[m
[32m+[m[32m    ],[m
[32m+[m[32m    'numbers': [[m
[32m+[m[32m      { str: 'limit[]=1&limit[]=2&limit[]=3', obj: { limit: [1, 2, '3'] }},[m
[32m+[m[32m      { str: 'limit=1', obj: { limit: 1 }}[m
[32m+[m[32m    ][m
[32m+[m[32m  };[m
[32m+[m[41m  [m
[32m+[m
[32m+[m[32m// Assert error[m
[32m+[m[32mfunction err(fn, msg){[m
[32m+[m[32m  var err;[m
[32m+[m[32m  try {[m
[32m+[m[32m    fn();[m
[32m+[m[32m  } catch (e) {[m
[32m+[m[32m    should.equal(e.message, msg);[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  throw new Error('no exception thrown, expected "' + msg + '"');[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction test(type) {[m
[32m+[m[32m  var str, obj;[m
[32m+[m[32m  for (var i = 0; i < str_identities[type].length; i++) {[m
[32m+[m[32m    str = str_identities[type][i].str;[m
[32m+[m[32m    obj = str_identities[type][i].obj;[m
[32m+[m[32m    qs.stringify(obj).should.eql(str);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mmodule.exports = {[m
[32m+[m[32m  'test basics': function() {[m
[32m+[m[32m    test('basics');[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test escaping': function() {[m
[32m+[m[32m    test('escaping');[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test nested': function() {[m
[32m+[m[32m    test('nested');[m
[32m+[m[32m  },[m
[32m+[m[41m  [m
[32m+[m[32m  'test numbers': function(){[m
[32m+[m[32m    test('numbers');[m
[32m+[m[32m  },[m
[32m+[m
[32m+[m[32m  'test errors': function() {[m
[32m+[m[32m    var obj, message;[m
[32m+[m[32m    for (var i = 0; i < str_identities['errors'].length; i++) {[m
[32m+[m[32m      message = str_identities['errors'][i].message;[m
[32m+[m[32m      obj = str_identities['errors'][i].obj;[m
[32m+[m[32m      err(function(){ qs.stringify(obj) }, message);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/package.json b/node_modules/express/package.json[m
[1mnew file mode 100644[m
[1mindex 0000000..8558809[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/package.json[m
[36m@@ -0,0 +1,38 @@[m
[32m+[m[32m{[m
[32m+[m[32m  "name": "express",[m
[32m+[m[32m  "description": "Sinatra inspired web development framework",[m
[32m+[m[32m  "version": "2.5.11",[m
[32m+[m[32m  "author": "TJ Holowaychuk <tj@vision-media.ca>",[m
[32m+[m[32m  "contributors": [[m[41m [m
[32m+[m[32m    { "name": "TJ Holowaychuk", "email": "tj@vision-media.ca" },[m[41m [m
[32m+[m[32m    { "name": "Aaron Heckmann", "email": "aaron.heckmann+github@gmail.com" },[m
[32m+[m[32m    { "name": "Ciaran Jessup", "email": "ciaranj@gmail.com" },[m
[32m+[m[32m    { "name": "Guillermo Rauch", "email": "rauchg@gmail.com" }[m
[32m+[m[32m  ],[m
[32m+[m[32m  "dependencies": {[m
[32m+[m[32m    "connect": "1.x",[m
[32m+[m[32m    "mime": "1.2.4",[m
[32m+[m[32m    "qs": "0.4.x",[m
[32m+[m[32m    "mkdirp": "0.3.0"[m
[32m+[m[32m  },[m
[32m+[m[32m  "devDependencies": {[m
[32m+[m[32m    "connect-form": "0.2.1",[m
[32m+[m[32m    "ejs": "0.4.2",[m
[32m+[m[32m    "expresso": "0.9.2",[m
[32m+[m[32m    "hamljs": "0.6.x",[m
[32m+[m[32m    "jade": "0.16.2",[m
[32m+[m[32m    "stylus": "0.13.0",[m
[32m+[m[32m    "should": "0.3.2",[m
[32m+[m[32m    "express-messages": "0.0.2",[m
[32m+[m[32m    "node-markdown": ">= 0.0.1",[m
[32m+[m[32m    "connect-redis": ">= 0.0.1"[m
[32m+[m[32m  },[m
[32m+[m[32m  "keywords": ["framework", "sinatra", "web", "rest", "restful"],[m
[32m+[m[32m  "repository": "git://github.com/visionmedia/express",[m
[32m+[m[32m  "main": "index",[m
[32m+[m[32m  "bin": { "express": "./bin/express" },[m
[32m+[m[32m  "scripts": {[m
[32m+[m[32m    "test": "make test",[m
[32m+[m[32m    "prepublish" : "npm prune"[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/node_modules/express/test.js b/node_modules/express/test.js[m
[1mnew file mode 100644[m
[1mindex 0000000..1f5ac01[m
[1m--- /dev/null[m
[1m+++ b/node_modules/express/test.js[m
[36m@@ -0,0 +1,12 @@[m
[32m+[m
[32m+[m[32mvar express = require('./');[m
[32m+[m[32mvar app = express.createServer();[m
[32m+[m
[32m+[m[32mapp.use(express.logger('dev'));[m
[32m+[m
[32m+[m[32mapp.get('/', function(req, res){[m
[32m+[m[32m  console.log(req.protocol);[m
[32m+[m[32m  res.send('hello');[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mapp.listen(3000);[m
[1mdiff --git a/package.json b/package.json[m
[1mnew file mode 100644[m
[1mindex 0000000..7bdf8db[m
[1m--- /dev/null[m
[1m+++ b/package.json[m
[36m@@ -0,0 +1,11 @@[m
[32m+[m[32m{[m
[32m+[m[32m  "name": "node-example",[m
[32m+[m[32m  "version": "0.0.1",[m
[32m+[m[32m  "dependencies": {[m
[32m+[m[32m    "express": "2.5.x"[m
[32m+[m[32m  },[m
[32m+[m[32m  "engines": {[m
[32m+[m[32m    "node": "0.8.x",[m
[32m+[m[32m    "npm": "1.1.x"[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/web.js b/web.js[m
[1mnew file mode 100644[m
[1mindex 0000000..0b54a06[m
[1m--- /dev/null[m
[1m+++ b/web.js[m
[36m@@ -0,0 +1,12 @@[m
[32m+[m[32mvar express = require('express');[m
[32m+[m
[32m+[m[32mvar app = express.createServer(express.logger());[m
[32m+[m
[32m+[m[32mapp.get('/', function(request, response) {[m
[32m+[m[32m  response.send('Hello World!');[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mvar port = process.env.PORT || 5000;[m
[32m+[m[32mapp.listen(port, function() {[m
[32m+[m[32m  console.log("Listening on " + port);[m
[32m+[m[32m});[m
\ No newline at end of file[m
